function Y4(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function B2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F2={exports:{}},uf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q4=Symbol.for("react.transitional.element"),X4=Symbol.for("react.fragment");function $2(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:q4,type:t,key:s,ref:e!==void 0?e:null,props:n}}uf.Fragment=X4;uf.jsx=$2;uf.jsxs=$2;F2.exports=uf;var a=F2.exports,H2={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=Symbol.for("react.transitional.element"),W4=Symbol.for("react.portal"),J4=Symbol.for("react.fragment"),Z4=Symbol.for("react.strict_mode"),eR=Symbol.for("react.profiler"),tR=Symbol.for("react.consumer"),nR=Symbol.for("react.context"),sR=Symbol.for("react.forward_ref"),iR=Symbol.for("react.suspense"),rR=Symbol.for("react.memo"),G2=Symbol.for("react.lazy"),aR=Symbol.for("react.activity"),tb=Symbol.iterator;function oR(t){return t===null||typeof t!="object"?null:(t=tb&&t[tb]||t["@@iterator"],typeof t=="function"?t:null)}var K2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q2=Object.assign,Y2={};function al(t,e,n){this.props=t,this.context=e,this.refs=Y2,this.updater=n||K2}al.prototype.isReactComponent={};al.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};al.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function q2(){}q2.prototype=al.prototype;function D0(t,e,n){this.props=t,this.context=e,this.refs=Y2,this.updater=n||K2}var M0=D0.prototype=new q2;M0.constructor=D0;Q2(M0,al.prototype);M0.isPureReactComponent=!0;var nb=Array.isArray;function Up(){}var ct={H:null,A:null,T:null,S:null},X2=Object.prototype.hasOwnProperty;function O0(t,e,n){var s=n.ref;return{$$typeof:k0,type:t,key:e,ref:s!==void 0?s:null,props:n}}function lR(t,e){return O0(t.type,e,t.props)}function V0(t){return typeof t=="object"&&t!==null&&t.$$typeof===k0}function cR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sb=/\/+/g;function Tm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cR(""+t.key):e.toString(36)}function uR(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Up,Up):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Xa(t,e,n,s,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case k0:case W4:o=!0;break;case G2:return o=t._init,Xa(o(t._payload),e,n,s,i)}}if(o)return i=i(t),o=s===""?"."+Tm(t,0):s,nb(i)?(n="",o!=null&&(n=o.replace(sb,"$&/")+"/"),Xa(i,e,n,"",function(d){return d})):i!=null&&(V0(i)&&(i=lR(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(sb,"$&/")+"/")+o)),e.push(i)),1;o=0;var l=s===""?".":s+":";if(nb(t))for(var c=0;c<t.length;c++)s=t[c],r=l+Tm(s,c),o+=Xa(s,e,n,r,i);else if(c=oR(t),typeof c=="function")for(t=c.call(t),c=0;!(s=t.next()).done;)s=s.value,r=l+Tm(s,c++),o+=Xa(s,e,n,r,i);else if(r==="object"){if(typeof t.then=="function")return Xa(uR(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function td(t,e,n){if(t==null)return t;var s=[],i=0;return Xa(t,s,"","",function(r){return e.call(n,r,i++)}),s}function dR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ib=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},hR={map:td,forEach:function(t,e,n){td(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return td(t,function(){e++}),e},toArray:function(t){return td(t,function(e){return e})||[]},only:function(t){if(!V0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Activity=aR;Re.Children=hR;Re.Component=al;Re.Fragment=J4;Re.Profiler=eR;Re.PureComponent=D0;Re.StrictMode=Z4;Re.Suspense=iR;Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct;Re.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ct.H.useMemoCache(t)}};Re.cache=function(t){return function(){return t.apply(null,arguments)}};Re.cacheSignal=function(){return null};Re.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=Q2({},t.props),i=t.key;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)!X2.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];s.children=o}return O0(t.type,i,s)};Re.createContext=function(t){return t={$$typeof:nR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:tR,_context:t},t};Re.createElement=function(t,e,n){var s,i={},r=null;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)X2.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return O0(t,r,i)};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:sR,render:t}};Re.isValidElement=V0;Re.lazy=function(t){return{$$typeof:G2,_payload:{_status:-1,_result:t},_init:dR}};Re.memo=function(t,e){return{$$typeof:rR,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=ct.T,n={};ct.T=n;try{var s=t(),i=ct.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(Up,ib)}catch(r){ib(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),ct.T=e}};Re.unstable_useCacheRefresh=function(){return ct.H.useCacheRefresh()};Re.use=function(t){return ct.H.use(t)};Re.useActionState=function(t,e,n){return ct.H.useActionState(t,e,n)};Re.useCallback=function(t,e){return ct.H.useCallback(t,e)};Re.useContext=function(t){return ct.H.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t,e){return ct.H.useDeferredValue(t,e)};Re.useEffect=function(t,e){return ct.H.useEffect(t,e)};Re.useEffectEvent=function(t){return ct.H.useEffectEvent(t)};Re.useId=function(){return ct.H.useId()};Re.useImperativeHandle=function(t,e,n){return ct.H.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return ct.H.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return ct.H.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return ct.H.useMemo(t,e)};Re.useOptimistic=function(t,e){return ct.H.useOptimistic(t,e)};Re.useReducer=function(t,e,n){return ct.H.useReducer(t,e,n)};Re.useRef=function(t){return ct.H.useRef(t)};Re.useState=function(t){return ct.H.useState(t)};Re.useSyncExternalStore=function(t,e,n){return ct.H.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return ct.H.useTransition()};Re.version="19.2.3";H2.exports=Re;var D=H2.exports;const W2=B2(D),fR=Y4({__proto__:null,default:W2},[D]);var J2={exports:{}},df={},Z2={exports:{}},eN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,U){var z=V.length;V.push(U);e:for(;0<z;){var W=z-1>>>1,F=V[W];if(0<i(F,U))V[W]=U,V[z]=F,z=W;else break e}}function n(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var U=V[0],z=V.pop();if(z!==U){V[0]=z;e:for(var W=0,F=V.length,Z=F>>>1;W<Z;){var pe=2*(W+1)-1,fe=V[pe],Se=pe+1,Te=V[Se];if(0>i(fe,z))Se<F&&0>i(Te,fe)?(V[W]=Te,V[Se]=z,W=Se):(V[W]=fe,V[pe]=z,W=pe);else if(Se<F&&0>i(Te,z))V[W]=Te,V[Se]=z,W=Se;else break e}}return U}function i(V,U){var z=V.sortIndex-U.sortIndex;return z!==0?z:V.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,m=null,f=3,x=!1,v=!1,C=!1,R=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function I(V){for(var U=n(d);U!==null;){if(U.callback===null)s(d);else if(U.startTime<=V)s(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=n(d)}}function M(V){if(C=!1,I(V),!v)if(n(c)!==null)v=!0,L||(L=!0,A());else{var U=n(d);U!==null&&O(M,U.startTime-V)}}var L=!1,T=-1,p=5,N=-1;function E(){return R?!0:!(t.unstable_now()-N<p)}function j(){if(R=!1,L){var V=t.unstable_now();N=V;var U=!0;try{e:{v=!1,C&&(C=!1,y(T),T=-1),x=!0;var z=f;try{t:{for(I(V),m=n(c);m!==null&&!(m.expirationTime>V&&E());){var W=m.callback;if(typeof W=="function"){m.callback=null,f=m.priorityLevel;var F=W(m.expirationTime<=V);if(V=t.unstable_now(),typeof F=="function"){m.callback=F,I(V),U=!0;break t}m===n(c)&&s(c),I(V)}else s(c);m=n(c)}if(m!==null)U=!0;else{var Z=n(d);Z!==null&&O(M,Z.startTime-V),U=!1}}break e}finally{m=null,f=z,x=!1}U=void 0}}finally{U?A():L=!1}}}var A;if(typeof _=="function")A=function(){_(j)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,k=w.port2;w.port1.onmessage=j,A=function(){k.postMessage(null)}}else A=function(){S(j,0)};function O(V,U){T=S(function(){V(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):p=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var z=f;f=U;try{return V()}finally{f=z}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(V,U){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=f;f=V;try{return U()}finally{f=z}},t.unstable_scheduleCallback=function(V,U,z){var W=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,V){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=z+F,V={id:h++,callback:U,priorityLevel:V,startTime:z,expirationTime:F,sortIndex:-1},z>W?(V.sortIndex=z,e(d,V),n(c)===null&&V===n(d)&&(C?(y(T),T=-1):C=!0,O(M,z-W))):(V.sortIndex=F,e(c,V),v||x||(v=!0,L||(L=!0,A()))),V},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(V){var U=f;return function(){var z=f;f=U;try{return V.apply(this,arguments)}finally{f=z}}}})(eN);Z2.exports=eN;var mR=Z2.exports,tN={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR=D;function nN(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Gi(){}var _n={d:{f:Gi,r:function(){throw Error(nN(522))},D:Gi,C:Gi,L:Gi,m:Gi,X:Gi,S:Gi,M:Gi},p:0,findDOMNode:null},gR=Symbol.for("react.portal");function xR(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gR,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var ac=pR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function hf(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_n;Tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(nN(299));return xR(t,e,null,n)};Tn.flushSync=function(t){var e=ac.T,n=_n.p;try{if(ac.T=null,_n.p=2,t)return t()}finally{ac.T=e,_n.p=n,_n.d.f()}};Tn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,_n.d.C(t,e))};Tn.prefetchDNS=function(t){typeof t=="string"&&_n.d.D(t)};Tn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=hf(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?_n.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:r}):n==="script"&&_n.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Tn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=hf(e.as,e.crossOrigin);_n.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&_n.d.M(t)};Tn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=hf(n,e.crossOrigin);_n.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Tn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=hf(e.as,e.crossOrigin);_n.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else _n.d.m(t)};Tn.requestFormReset=function(t){_n.d.r(t)};Tn.unstable_batchedUpdates=function(t,e){return t(e)};Tn.useFormState=function(t,e,n){return ac.H.useFormState(t,e,n)};Tn.useFormStatus=function(){return ac.H.useHostTransitionStatus()};Tn.version="19.2.3";function sN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sN)}catch(t){console.error(t)}}sN(),tN.exports=Tn;var yR=tN.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht=mR,iN=D,vR=yR;function Y(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function rN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oN(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rb(t){if(uu(t)!==t)throw Error(Y(188))}function bR(t){var e=t.alternate;if(!e){if(e=uu(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return rb(i),t;if(r===s)return rb(i),e;r=r.sibling}throw Error(Y(188))}if(n.return!==s.return)n=i,s=r;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==s)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function lN(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=lN(t),e!==null)return e;t=t.sibling}return null}var dt=Object.assign,wR=Symbol.for("react.element"),nd=Symbol.for("react.transitional.element"),Kl=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),cN=Symbol.for("react.strict_mode"),Bp=Symbol.for("react.profiler"),uN=Symbol.for("react.consumer"),oi=Symbol.for("react.context"),P0=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),$p=Symbol.for("react.suspense_list"),L0=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),Hp=Symbol.for("react.activity"),_R=Symbol.for("react.memo_cache_sentinel"),ab=Symbol.iterator;function Pl(t){return t===null||typeof t!="object"?null:(t=ab&&t[ab]||t["@@iterator"],typeof t=="function"?t:null)}var NR=Symbol.for("react.client.reference");function Gp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===NR?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case so:return"Fragment";case Bp:return"Profiler";case cN:return"StrictMode";case Fp:return"Suspense";case $p:return"SuspenseList";case Hp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Kl:return"Portal";case oi:return t.displayName||"Context";case uN:return(t._context.displayName||"Context")+".Consumer";case P0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L0:return e=t.displayName||null,e!==null?e:Gp(t.type)||"Memo";case qi:e=t._payload,t=t._init;try{return Gp(t(e))}catch{}}return null}var Ql=Array.isArray,Ne=iN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe=vR.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ma={pending:!1,data:null,method:null,action:null},Kp=[],io=-1;function Ys(t){return{current:t}}function Wt(t){0>io||(t.current=Kp[io],Kp[io]=null,io--)}function it(t,e){io++,Kp[io]=t.current,t.current=e}var zs=Ys(null),Dc=Ys(null),hr=Ys(null),nh=Ys(null);function sh(t,e){switch(it(hr,e),it(Dc,t),it(zs,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?h1(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=h1(e),t=RT(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Wt(zs),it(zs,t)}function Mo(){Wt(zs),Wt(Dc),Wt(hr)}function Qp(t){t.memoizedState!==null&&it(nh,t);var e=zs.current,n=RT(e,t.type);e!==n&&(it(Dc,t),it(zs,n))}function ih(t){Dc.current===t&&(Wt(zs),Wt(Dc)),nh.current===t&&(Wt(nh),Hc._currentValue=ma)}var Em,ob;function ta(t){if(Em===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Em=e&&e[1]||"",ob=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Em+t+ob}var jm=!1;function Am(t,e){if(!t||jm)return"";jm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(x){var f=x}Reflect.construct(t,[],m)}else{try{m.call()}catch(x){f=x}t.call(m.prototype)}}else{try{throw Error()}catch(x){f=x}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(x){if(x&&f&&typeof x.stack=="string")return[x.stack,f.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),o=r[0],l=r[1];if(o&&l){var c=o.split(`
`),d=l.split(`
`);for(i=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;i<d.length&&!d[i].includes("DetermineComponentFrameRoot");)i++;if(s===c.length||i===d.length)for(s=c.length-1,i=d.length-1;1<=s&&0<=i&&c[s]!==d[i];)i--;for(;1<=s&&0<=i;s--,i--)if(c[s]!==d[i]){if(s!==1||i!==1)do if(s--,i--,0>i||c[s]!==d[i]){var h=`
`+c[s].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=s&&0<=i);break}}}finally{jm=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ta(n):""}function SR(t,e){switch(t.tag){case 26:case 27:case 5:return ta(t.type);case 16:return ta("Lazy");case 13:return t.child!==e&&e!==null?ta("Suspense Fallback"):ta("Suspense");case 19:return ta("SuspenseList");case 0:case 15:return Am(t.type,!1);case 11:return Am(t.type.render,!1);case 1:return Am(t.type,!0);case 31:return ta("Activity");default:return""}}function lb(t){try{var e="",n=null;do e+=SR(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Yp=Object.prototype.hasOwnProperty,z0=Ht.unstable_scheduleCallback,Cm=Ht.unstable_cancelCallback,TR=Ht.unstable_shouldYield,ER=Ht.unstable_requestPaint,$n=Ht.unstable_now,jR=Ht.unstable_getCurrentPriorityLevel,dN=Ht.unstable_ImmediatePriority,hN=Ht.unstable_UserBlockingPriority,rh=Ht.unstable_NormalPriority,AR=Ht.unstable_LowPriority,fN=Ht.unstable_IdlePriority,CR=Ht.log,RR=Ht.unstable_setDisableYieldValue,du=null,Hn=null;function rr(t){if(typeof CR=="function"&&RR(t),Hn&&typeof Hn.setStrictMode=="function")try{Hn.setStrictMode(du,t)}catch{}}var Gn=Math.clz32?Math.clz32:DR,IR=Math.log,kR=Math.LN2;function DR(t){return t>>>=0,t===0?32:31-(IR(t)/kR|0)|0}var sd=256,id=262144,rd=4194304;function na(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ff(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~r,s!==0?i=na(s):(o&=l,o!==0?i=na(o):n||(n=l&~t,n!==0&&(i=na(n))))):(l=s&~r,l!==0?i=na(l):o!==0?i=na(o):n||(n=s&~t,n!==0&&(i=na(n)))),i===0?0:e!==0&&e!==i&&!(e&r)&&(r=i&-i,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:i}function hu(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function MR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mN(){var t=rd;return rd<<=1,!(rd&62914560)&&(rd=4194304),t}function Rm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fu(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function OR(t,e,n,s,i,r){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=o&~n;0<n;){var h=31-Gn(n),m=1<<h;l[h]=0,c[h]=-1;var f=d[h];if(f!==null)for(d[h]=null,h=0;h<f.length;h++){var x=f[h];x!==null&&(x.lane&=-536870913)}n&=~m}s!==0&&pN(t,s,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(o&~e))}function pN(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Gn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function gN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Gn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function xN(t,e){var n=e&-e;return n=n&42?1:U0(n),n&(t.suspendedLanes|e)?0:n}function U0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function B0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function yN(){var t=Fe.p;return t!==0?t:(t=window.event,t===void 0?32:BT(t.type))}function cb(t,e){var n=Fe.p;try{return Fe.p=t,e()}finally{Fe.p=n}}var Ur=Math.random().toString(36).slice(2),sn="__reactFiber$"+Ur,Mn="__reactProps$"+Ur,ol="__reactContainer$"+Ur,qp="__reactEvents$"+Ur,VR="__reactListeners$"+Ur,PR="__reactHandles$"+Ur,ub="__reactResources$"+Ur,mu="__reactMarker$"+Ur;function F0(t){delete t[sn],delete t[Mn],delete t[qp],delete t[VR],delete t[PR]}function ro(t){var e=t[sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ol]||n[sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x1(t);t!==null;){if(n=t[sn])return n;t=x1(t)}return e}t=n,n=t.parentNode}return null}function ll(t){if(t=t[sn]||t[ol]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Yl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(Y(33))}function _o(t){var e=t[ub];return e||(e=t[ub]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Xt(t){t[mu]=!0}var vN=new Set,bN={};function Da(t,e){Oo(t,e),Oo(t+"Capture",e)}function Oo(t,e){for(bN[t]=e,t=0;t<e.length;t++)vN.add(e[t])}var LR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),db={},hb={};function zR(t){return Yp.call(hb,t)?!0:Yp.call(db,t)?!1:LR.test(t)?hb[t]=!0:(db[t]=!0,!1)}function jd(t,e,n){if(zR(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function ad(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Js(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function rs(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UR(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xp(t){if(!t._valueTracker){var e=wN(t)?"checked":"value";t._valueTracker=UR(t,e,""+t[e])}}function _N(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=wN(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function ah(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var BR=/[\n"\\]/g;function ls(t){return t.replace(BR,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Wp(t,e,n,s,i,r,o,l){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+rs(e)):t.value!==""+rs(e)&&(t.value=""+rs(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?Jp(t,o,rs(e)):n!=null?Jp(t,o,rs(n)):s!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+rs(l):t.removeAttribute("name")}function NN(t,e,n,s,i,r,o,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){Xp(t);return}n=n!=null?""+rs(n):"",e=e!=null?""+rs(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),Xp(t)}function Jp(t,e,n){e==="number"&&ah(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function No(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+rs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function SN(t,e,n){if(e!=null&&(e=""+rs(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+rs(n):""}function TN(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(Y(92));if(Ql(s)){if(1<s.length)throw Error(Y(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=rs(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),Xp(t)}function Vo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var FR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fb(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||FR.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function EN(t,e,n){if(e!=null&&typeof e!="object")throw Error(Y(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&fb(t,i,s)}else for(var r in e)e.hasOwnProperty(r)&&fb(t,r,e[r])}function $0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $R=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ad(t){return HR.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function li(){}var Zp=null;function H0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ao=null,So=null;function mb(t){var e=ll(t);if(e&&(t=e.stateNode)){var n=t[Mn]||null;e:switch(t=e.stateNode,e.type){case"input":if(Wp(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ls(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[Mn]||null;if(!i)throw Error(Y(90));Wp(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&_N(s)}break e;case"textarea":SN(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&No(t,!!n.multiple,e,!1)}}}var Im=!1;function jN(t,e,n){if(Im)return t(e,n);Im=!0;try{var s=t(e);return s}finally{if(Im=!1,(ao!==null||So!==null)&&(Tf(),ao&&(e=ao,t=So,So=ao=null,mb(e),t)))for(e=0;e<t.length;e++)mb(t[e])}}function Mc(t,e){var n=t.stateNode;if(n===null)return null;var s=n[Mn]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eg=!1;if(bi)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){eg=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{eg=!1}var ar=null,G0=null,Cd=null;function AN(){if(Cd)return Cd;var t,e=G0,n=e.length,s,i="value"in ar?ar.value:ar.textContent,r=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===i[r-s];s++);return Cd=i.slice(t,1<s?1-s:void 0)}function Rd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function od(){return!0}function pb(){return!1}function On(t){function e(n,s,i,r,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?od:pb,this.isPropagationStopped=pb,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),e}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=On(Ma),pu=dt({},Ma,{view:0,detail:0}),GR=On(pu),km,Dm,zl,pf=dt({},pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zl&&(zl&&t.type==="mousemove"?(km=t.screenX-zl.screenX,Dm=t.screenY-zl.screenY):Dm=km=0,zl=t),km)},movementY:function(t){return"movementY"in t?t.movementY:Dm}}),gb=On(pf),KR=dt({},pf,{dataTransfer:0}),QR=On(KR),YR=dt({},pu,{relatedTarget:0}),Mm=On(YR),qR=dt({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),XR=On(qR),WR=dt({},Ma,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JR=On(WR),ZR=dt({},Ma,{data:0}),xb=On(ZR),eI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nI[t])?!!e[t]:!1}function K0(){return sI}var iI=dt({},pu,{key:function(t){if(t.key){var e=eI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K0,charCode:function(t){return t.type==="keypress"?Rd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rI=On(iI),aI=dt({},pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yb=On(aI),oI=dt({},pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K0}),lI=On(oI),cI=dt({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),uI=On(cI),dI=dt({},pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hI=On(dI),fI=dt({},Ma,{newState:0,oldState:0}),mI=On(fI),pI=[9,13,27,32],Q0=bi&&"CompositionEvent"in window,oc=null;bi&&"documentMode"in document&&(oc=document.documentMode);var gI=bi&&"TextEvent"in window&&!oc,CN=bi&&(!Q0||oc&&8<oc&&11>=oc),vb=" ",bb=!1;function RN(t,e){switch(t){case"keyup":return pI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function xI(t,e){switch(t){case"compositionend":return IN(e);case"keypress":return e.which!==32?null:(bb=!0,vb);case"textInput":return t=e.data,t===vb&&bb?null:t;default:return null}}function yI(t,e){if(oo)return t==="compositionend"||!Q0&&RN(t,e)?(t=AN(),Cd=G0=ar=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return CN&&e.locale!=="ko"?null:e.data;default:return null}}var vI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vI[t.type]:e==="textarea"}function kN(t,e,n,s){ao?So?So.push(s):So=[s]:ao=s,e=Sh(e,"onChange"),0<e.length&&(n=new mf("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var lc=null,Oc=null;function bI(t){jT(t,0)}function gf(t){var e=Yl(t);if(_N(e))return t}function _b(t,e){if(t==="change")return e}var DN=!1;if(bi){var Om;if(bi){var Vm="oninput"in document;if(!Vm){var Nb=document.createElement("div");Nb.setAttribute("oninput","return;"),Vm=typeof Nb.oninput=="function"}Om=Vm}else Om=!1;DN=Om&&(!document.documentMode||9<document.documentMode)}function Sb(){lc&&(lc.detachEvent("onpropertychange",MN),Oc=lc=null)}function MN(t){if(t.propertyName==="value"&&gf(Oc)){var e=[];kN(e,Oc,t,H0(t)),jN(bI,e)}}function wI(t,e,n){t==="focusin"?(Sb(),lc=e,Oc=n,lc.attachEvent("onpropertychange",MN)):t==="focusout"&&Sb()}function _I(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gf(Oc)}function NI(t,e){if(t==="click")return gf(e)}function SI(t,e){if(t==="input"||t==="change")return gf(e)}function TI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:TI;function Vc(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Yp.call(e,i)||!Yn(t[i],e[i]))return!1}return!0}function Tb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Eb(t,e){var n=Tb(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tb(n)}}function ON(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ON(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VN(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=ah(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ah(t.document)}return e}function Y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var EI=bi&&"documentMode"in document&&11>=document.documentMode,lo=null,tg=null,cc=null,ng=!1;function jb(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ng||lo==null||lo!==ah(s)||(s=lo,"selectionStart"in s&&Y0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),cc&&Vc(cc,s)||(cc=s,s=Sh(tg,"onSelect"),0<s.length&&(e=new mf("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=lo)))}function Jr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var co={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Pm={},PN={};bi&&(PN=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function Oa(t){if(Pm[t])return Pm[t];if(!co[t])return t;var e=co[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in PN)return Pm[t]=e[n];return t}var LN=Oa("animationend"),zN=Oa("animationiteration"),UN=Oa("animationstart"),jI=Oa("transitionrun"),AI=Oa("transitionstart"),CI=Oa("transitioncancel"),BN=Oa("transitionend"),FN=new Map,sg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sg.push("scrollEnd");function As(t,e){FN.set(t,e),Da(e,[t])}var oh=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},is=[],uo=0,q0=0;function xf(){for(var t=uo,e=q0=uo=0;e<t;){var n=is[e];is[e++]=null;var s=is[e];is[e++]=null;var i=is[e];is[e++]=null;var r=is[e];if(is[e++]=null,s!==null&&i!==null){var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}r!==0&&$N(n,i,r)}}function yf(t,e,n,s){is[uo++]=t,is[uo++]=e,is[uo++]=n,is[uo++]=s,q0|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function X0(t,e,n,s){return yf(t,e,n,s),lh(t)}function Va(t,e){return yf(t,null,null,e),lh(t)}function $N(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,r=t.return;r!==null;)r.childLanes|=n,s=r.alternate,s!==null&&(s.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&e!==null&&(i=31-Gn(n),t=r.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),r):null}function lh(t){if(50<yc)throw yc=0,Sg=null,Error(Y(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var ho={};function RI(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,e,n,s){return new RI(t,e,n,s)}function W0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hi(t,e){var n=t.alternate;return n===null?(n=zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function HN(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Id(t,e,n,s,i,r){var o=0;if(s=t,typeof t=="function")W0(t)&&(o=1);else if(typeof t=="string")o=O3(t,n,zs.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Hp:return t=zn(31,n,e,i),t.elementType=Hp,t.lanes=r,t;case so:return pa(n.children,i,r,e);case cN:o=8,i|=24;break;case Bp:return t=zn(12,n,e,i|2),t.elementType=Bp,t.lanes=r,t;case Fp:return t=zn(13,n,e,i),t.elementType=Fp,t.lanes=r,t;case $p:return t=zn(19,n,e,i),t.elementType=$p,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oi:o=10;break e;case uN:o=9;break e;case P0:o=11;break e;case L0:o=14;break e;case qi:o=16,s=null;break e}o=29,n=Error(Y(130,t===null?"null":typeof t,"")),s=null}return e=zn(o,n,e,i),e.elementType=t,e.type=s,e.lanes=r,e}function pa(t,e,n,s){return t=zn(7,t,s,e),t.lanes=n,t}function Lm(t,e,n){return t=zn(6,t,null,e),t.lanes=n,t}function GN(t){var e=zn(18,null,null,0);return e.stateNode=t,e}function zm(t,e,n){return e=zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Ab=new WeakMap;function cs(t,e){if(typeof t=="object"&&t!==null){var n=Ab.get(t);return n!==void 0?n:(e={value:t,source:e,stack:lb(e)},Ab.set(t,e),e)}return{value:t,source:e,stack:lb(e)}}var fo=[],mo=0,ch=null,Pc=0,as=[],os=0,jr=null,Vs=1,Ps="";function ii(t,e){fo[mo++]=Pc,fo[mo++]=ch,ch=t,Pc=e}function KN(t,e,n){as[os++]=Vs,as[os++]=Ps,as[os++]=jr,jr=t;var s=Vs;t=Ps;var i=32-Gn(s)-1;s&=~(1<<i),n+=1;var r=32-Gn(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Vs=1<<32-Gn(e)+i|n<<i|s,Ps=r+t}else Vs=1<<r|n<<i|s,Ps=t}function J0(t){t.return!==null&&(ii(t,1),KN(t,1,0))}function Z0(t){for(;t===ch;)ch=fo[--mo],fo[mo]=null,Pc=fo[--mo],fo[mo]=null;for(;t===jr;)jr=as[--os],as[os]=null,Ps=as[--os],as[os]=null,Vs=as[--os],as[os]=null}function QN(t,e){as[os++]=Vs,as[os++]=Ps,as[os++]=jr,Vs=e.id,Ps=e.overflow,jr=t}var rn=null,ot=null,ze=!1,fr=null,us=!1,ig=Error(Y(519));function Ar(t){var e=Error(Y(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Lc(cs(e,t)),ig}function Cb(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[sn]=t,e[Mn]=s,n){case"dialog":De("cancel",e),De("close",e);break;case"iframe":case"object":case"embed":De("load",e);break;case"video":case"audio":for(n=0;n<Fc.length;n++)De(Fc[n],e);break;case"source":De("error",e);break;case"img":case"image":case"link":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"input":De("invalid",e),NN(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":De("invalid",e);break;case"textarea":De("invalid",e),TN(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||CT(e.textContent,n)?(s.popover!=null&&(De("beforetoggle",e),De("toggle",e)),s.onScroll!=null&&De("scroll",e),s.onScrollEnd!=null&&De("scrollend",e),s.onClick!=null&&(e.onclick=li),e=!0):e=!1,e||Ar(t,!0)}function Rb(t){for(rn=t.return;rn;)switch(rn.tag){case 5:case 31:case 13:us=!1;return;case 27:case 3:us=!0;return;default:rn=rn.return}}function Ya(t){if(t!==rn)return!1;if(!ze)return Rb(t),ze=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Cg(t.type,t.memoizedProps)),n=!n),n&&ot&&Ar(t),Rb(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));ot=g1(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));ot=g1(t)}else e===27?(e=ot,Br(t.type)?(t=Dg,Dg=null,ot=t):ot=e):ot=rn?fs(t.stateNode.nextSibling):null;return!0}function _a(){ot=rn=null,ze=!1}function Um(){var t=fr;return t!==null&&(Cn===null?Cn=t:Cn.push.apply(Cn,t),fr=null),t}function Lc(t){fr===null?fr=[t]:fr.push(t)}var rg=Ys(null),Pa=null,ci=null;function Wi(t,e,n){it(rg,e._currentValue),e._currentValue=n}function fi(t){t._currentValue=rg.current,Wt(rg)}function ag(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function og(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var o=i.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=i;for(var c=0;c<e.length;c++)if(l.context===e[c]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),ag(r.return,n,t),s||(o=null);break e}r=l.next}}else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,r=o.alternate,r!==null&&(r.lanes|=n),ag(o,n,t),o=null}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}}function cl(t,e,n,s){t=null;for(var i=e,r=!1;i!==null;){if(!r){if(i.flags&524288)r=!0;else if(i.flags&262144)break}if(i.tag===10){var o=i.alternate;if(o===null)throw Error(Y(387));if(o=o.memoizedProps,o!==null){var l=i.type;Yn(i.pendingProps.value,o.value)||(t!==null?t.push(l):t=[l])}}else if(i===nh.current){if(o=i.alternate,o===null)throw Error(Y(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Hc):t=[Hc])}i=i.return}t!==null&&og(e,t,n,s),e.flags|=262144}function uh(t){for(t=t.firstContext;t!==null;){if(!Yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Na(t){Pa=t,ci=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return YN(Pa,t)}function ld(t,e){return Pa===null&&Na(t),YN(t,e)}function YN(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ci===null){if(t===null)throw Error(Y(308));ci=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ci=ci.next=e;return n}var II=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},kI=Ht.unstable_scheduleCallback,DI=Ht.unstable_NormalPriority,Ot={$$typeof:oi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ex(){return{controller:new II,data:new Map,refCount:0}}function gu(t){t.refCount--,t.refCount===0&&kI(DI,function(){t.controller.abort()})}var uc=null,lg=0,Po=0,To=null;function MI(t,e){if(uc===null){var n=uc=[];lg=0,Po=Tx(),To={status:"pending",value:void 0,then:function(s){n.push(s)}}}return lg++,e.then(Ib,Ib),e}function Ib(){if(--lg===0&&uc!==null){To!==null&&(To.status="fulfilled");var t=uc;uc=null,Po=0,To=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function OI(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var kb=Ne.S;Ne.S=function(t,e){lT=$n(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&MI(t,e),kb!==null&&kb(t,e)};var ga=Ys(null);function tx(){var t=ga.current;return t!==null?t:et.pooledCache}function kd(t,e){e===null?it(ga,ga.current):it(ga,e.pool)}function qN(){var t=tx();return t===null?null:{parent:Ot._currentValue,pool:t}}var ul=Error(Y(460)),nx=Error(Y(474)),vf=Error(Y(542)),dh={then:function(){}};function Db(t){return t=t.status,t==="fulfilled"||t==="rejected"}function XN(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(li,li),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Ob(t),t;default:if(typeof e.status=="string")e.then(li,li);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(Y(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Ob(t),t}throw xa=e,ul}}function sa(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(xa=n,ul):n}}var xa=null;function Mb(){if(xa===null)throw Error(Y(459));var t=xa;return xa=null,t}function Ob(t){if(t===ul||t===vf)throw Error(Y(483))}var Eo=null,zc=0;function cd(t){var e=zc;return zc+=1,Eo===null&&(Eo=[]),XN(Eo,t,e)}function Ul(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function ud(t,e){throw e.$$typeof===wR?Error(Y(525)):(t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function WN(t){function e(S,y){if(t){var _=S.deletions;_===null?(S.deletions=[y],S.flags|=16):_.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function s(S){for(var y=new Map;S!==null;)S.key!==null?y.set(S.key,S):y.set(S.index,S),S=S.sibling;return y}function i(S,y){return S=hi(S,y),S.index=0,S.sibling=null,S}function r(S,y,_){return S.index=_,t?(_=S.alternate,_!==null?(_=_.index,_<y?(S.flags|=67108866,y):_):(S.flags|=67108866,y)):(S.flags|=1048576,y)}function o(S){return t&&S.alternate===null&&(S.flags|=67108866),S}function l(S,y,_,I){return y===null||y.tag!==6?(y=Lm(_,S.mode,I),y.return=S,y):(y=i(y,_),y.return=S,y)}function c(S,y,_,I){var M=_.type;return M===so?h(S,y,_.props.children,I,_.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===qi&&sa(M)===y.type)?(y=i(y,_.props),Ul(y,_),y.return=S,y):(y=Id(_.type,_.key,_.props,null,S.mode,I),Ul(y,_),y.return=S,y)}function d(S,y,_,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=zm(_,S.mode,I),y.return=S,y):(y=i(y,_.children||[]),y.return=S,y)}function h(S,y,_,I,M){return y===null||y.tag!==7?(y=pa(_,S.mode,I,M),y.return=S,y):(y=i(y,_),y.return=S,y)}function m(S,y,_){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Lm(""+y,S.mode,_),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case nd:return _=Id(y.type,y.key,y.props,null,S.mode,_),Ul(_,y),_.return=S,_;case Kl:return y=zm(y,S.mode,_),y.return=S,y;case qi:return y=sa(y),m(S,y,_)}if(Ql(y)||Pl(y))return y=pa(y,S.mode,_,null),y.return=S,y;if(typeof y.then=="function")return m(S,cd(y),_);if(y.$$typeof===oi)return m(S,ld(S,y),_);ud(S,y)}return null}function f(S,y,_,I){var M=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return M!==null?null:l(S,y,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nd:return _.key===M?c(S,y,_,I):null;case Kl:return _.key===M?d(S,y,_,I):null;case qi:return _=sa(_),f(S,y,_,I)}if(Ql(_)||Pl(_))return M!==null?null:h(S,y,_,I,null);if(typeof _.then=="function")return f(S,y,cd(_),I);if(_.$$typeof===oi)return f(S,y,ld(S,_),I);ud(S,_)}return null}function x(S,y,_,I,M){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return S=S.get(_)||null,l(y,S,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case nd:return S=S.get(I.key===null?_:I.key)||null,c(y,S,I,M);case Kl:return S=S.get(I.key===null?_:I.key)||null,d(y,S,I,M);case qi:return I=sa(I),x(S,y,_,I,M)}if(Ql(I)||Pl(I))return S=S.get(_)||null,h(y,S,I,M,null);if(typeof I.then=="function")return x(S,y,_,cd(I),M);if(I.$$typeof===oi)return x(S,y,_,ld(y,I),M);ud(y,I)}return null}function v(S,y,_,I){for(var M=null,L=null,T=y,p=y=0,N=null;T!==null&&p<_.length;p++){T.index>p?(N=T,T=null):N=T.sibling;var E=f(S,T,_[p],I);if(E===null){T===null&&(T=N);break}t&&T&&E.alternate===null&&e(S,T),y=r(E,y,p),L===null?M=E:L.sibling=E,L=E,T=N}if(p===_.length)return n(S,T),ze&&ii(S,p),M;if(T===null){for(;p<_.length;p++)T=m(S,_[p],I),T!==null&&(y=r(T,y,p),L===null?M=T:L.sibling=T,L=T);return ze&&ii(S,p),M}for(T=s(T);p<_.length;p++)N=x(T,S,p,_[p],I),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?p:N.key),y=r(N,y,p),L===null?M=N:L.sibling=N,L=N);return t&&T.forEach(function(j){return e(S,j)}),ze&&ii(S,p),M}function C(S,y,_,I){if(_==null)throw Error(Y(151));for(var M=null,L=null,T=y,p=y=0,N=null,E=_.next();T!==null&&!E.done;p++,E=_.next()){T.index>p?(N=T,T=null):N=T.sibling;var j=f(S,T,E.value,I);if(j===null){T===null&&(T=N);break}t&&T&&j.alternate===null&&e(S,T),y=r(j,y,p),L===null?M=j:L.sibling=j,L=j,T=N}if(E.done)return n(S,T),ze&&ii(S,p),M;if(T===null){for(;!E.done;p++,E=_.next())E=m(S,E.value,I),E!==null&&(y=r(E,y,p),L===null?M=E:L.sibling=E,L=E);return ze&&ii(S,p),M}for(T=s(T);!E.done;p++,E=_.next())E=x(T,S,p,E.value,I),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?p:E.key),y=r(E,y,p),L===null?M=E:L.sibling=E,L=E);return t&&T.forEach(function(A){return e(S,A)}),ze&&ii(S,p),M}function R(S,y,_,I){if(typeof _=="object"&&_!==null&&_.type===so&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case nd:e:{for(var M=_.key;y!==null;){if(y.key===M){if(M=_.type,M===so){if(y.tag===7){n(S,y.sibling),I=i(y,_.props.children),I.return=S,S=I;break e}}else if(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===qi&&sa(M)===y.type){n(S,y.sibling),I=i(y,_.props),Ul(I,_),I.return=S,S=I;break e}n(S,y);break}else e(S,y);y=y.sibling}_.type===so?(I=pa(_.props.children,S.mode,I,_.key),I.return=S,S=I):(I=Id(_.type,_.key,_.props,null,S.mode,I),Ul(I,_),I.return=S,S=I)}return o(S);case Kl:e:{for(M=_.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(S,y.sibling),I=i(y,_.children||[]),I.return=S,S=I;break e}else{n(S,y);break}else e(S,y);y=y.sibling}I=zm(_,S.mode,I),I.return=S,S=I}return o(S);case qi:return _=sa(_),R(S,y,_,I)}if(Ql(_))return v(S,y,_,I);if(Pl(_)){if(M=Pl(_),typeof M!="function")throw Error(Y(150));return _=M.call(_),C(S,y,_,I)}if(typeof _.then=="function")return R(S,y,cd(_),I);if(_.$$typeof===oi)return R(S,y,ld(S,_),I);ud(S,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,y!==null&&y.tag===6?(n(S,y.sibling),I=i(y,_),I.return=S,S=I):(n(S,y),I=Lm(_,S.mode,I),I.return=S,S=I),o(S)):n(S,y)}return function(S,y,_,I){try{zc=0;var M=R(S,y,_,I);return Eo=null,M}catch(T){if(T===ul||T===vf)throw T;var L=zn(29,T,null,S.mode);return L.lanes=I,L.return=S,L}finally{}}}var Sa=WN(!0),JN=WN(!1),Xi=!1;function sx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Be&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=lh(t),$N(t,null,n),e}return yf(t,s,e,n),lh(t)}function dc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,gN(t,n)}}function Bm(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?i=r=e:r=r.next=e}else i=r=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var ug=!1;function hc(){if(ug){var t=To;if(t!==null)throw t}}function fc(t,e,n,s){ug=!1;var i=t.updateQueue;Xi=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?r=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(r!==null){var m=i.baseState;o=0,h=d=c=null,l=r;do{var f=l.lane&-536870913,x=f!==l.lane;if(x?(Le&f)===f:(s&f)===f){f!==0&&f===Po&&(ug=!0),h!==null&&(h=h.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var v=t,C=l;f=e;var R=n;switch(C.tag){case 1:if(v=C.payload,typeof v=="function"){m=v.call(R,m,f);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=C.payload,f=typeof v=="function"?v.call(R,m,f):v,f==null)break e;m=dt({},m,f);break e;case 2:Xi=!0}}f=l.callback,f!==null&&(t.flags|=64,x&&(t.flags|=8192),x=i.callbacks,x===null?i.callbacks=[f]:x.push(f))}else x={lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=x,c=m):h=h.next=x,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;x=l,l=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(!0);h===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,r===null&&(i.shared.lanes=0),Rr|=o,t.lanes=o,t.memoizedState=m}}function ZN(t,e){if(typeof t!="function")throw Error(Y(191,t));t.call(e)}function eS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)ZN(n[t],e)}var Lo=Ys(null),hh=Ys(0);function Vb(t,e){t=Si,it(hh,t),it(Lo,e),Si=t|e.baseLanes}function dg(){it(hh,Si),it(Lo,Lo.current)}function ix(){Si=hh.current,Wt(Lo),Wt(hh)}var qn=Ys(null),hs=null;function Ji(t){var e=t.alternate;it(Et,Et.current&1),it(qn,t),hs===null&&(e===null||Lo.current!==null||e.memoizedState!==null)&&(hs=t)}function hg(t){it(Et,Et.current),it(qn,t),hs===null&&(hs=t)}function tS(t){t.tag===22?(it(Et,Et.current),it(qn,t),hs===null&&(hs=t)):Zi()}function Zi(){it(Et,Et.current),it(qn,qn.current)}function Ln(t){Wt(qn),hs===t&&(hs=null),Wt(Et)}var Et=Ys(0);function fh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ig(n)||kg(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wi=0,Ie=null,We=null,Dt=null,mh=!1,jo=!1,Ta=!1,ph=0,Uc=0,Ao=null,VI=0;function vt(){throw Error(Y(321))}function rx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function ax(t,e,n,s,i,r){return wi=r,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ne.H=t===null||t.memoizedState===null?kS:xx,Ta=!1,r=n(s,i),Ta=!1,jo&&(r=sS(e,n,s,i)),nS(t),r}function nS(t){Ne.H=Bc;var e=We!==null&&We.next!==null;if(wi=0,Dt=We=Ie=null,mh=!1,Uc=0,Ao=null,e)throw Error(Y(300));t===null||Pt||(t=t.dependencies,t!==null&&uh(t)&&(Pt=!0))}function sS(t,e,n,s){Ie=t;var i=0;do{if(jo&&(Ao=null),Uc=0,jo=!1,25<=i)throw Error(Y(301));if(i+=1,Dt=We=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Ne.H=DS,r=e(n,s)}while(jo);return r}function PI(){var t=Ne.H,e=t.useState()[0];return e=typeof e.then=="function"?xu(e):e,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(Ie.flags|=1024),e}function ox(){var t=ph!==0;return ph=0,t}function lx(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function cx(t){if(mh){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}mh=!1}wi=0,Dt=We=Ie=null,jo=!1,Uc=ph=0,Ao=null}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Ie.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function jt(){if(We===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Dt===null?Ie.memoizedState:Dt.next;if(e!==null)Dt=e,We=t;else{if(t===null)throw Ie.alternate===null?Error(Y(467)):Error(Y(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Dt===null?Ie.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function bf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xu(t){var e=Uc;return Uc+=1,Ao===null&&(Ao=[]),t=XN(Ao,t,e),e=Ie,(Dt===null?e.memoizedState:Dt.next)===null&&(e=e.alternate,Ne.H=e===null||e.memoizedState===null?kS:xx),t}function wf(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xu(t);if(t.$$typeof===oi)return ln(t)}throw Error(Y(438,String(t)))}function ux(t){var e=null,n=Ie.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=Ie.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=bf(),Ie.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=_R;return e.index++,n}function _i(t,e){return typeof e=="function"?e(t):e}function Dd(t){var e=jt();return dx(e,We,t)}function dx(t,e,n){var s=t.queue;if(s===null)throw Error(Y(311));s.lastRenderedReducer=n;var i=t.baseQueue,r=s.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}e.baseQueue=i=r,s.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{e=i.next;var l=o=null,c=null,d=e,h=!1;do{var m=d.lane&-536870913;if(m!==d.lane?(Le&m)===m:(wi&m)===m){var f=d.revertLane;if(f===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===Po&&(h=!0);else if((wi&f)===f){d=d.next,f===Po&&(h=!0);continue}else m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=m,o=r):c=c.next=m,Ie.lanes|=f,Rr|=f;m=d.action,Ta&&n(r,m),r=d.hasEagerState?d.eagerState:n(r,m)}else f={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=f,o=r):c=c.next=f,Ie.lanes|=m,Rr|=m;d=d.next}while(d!==null&&d!==e);if(c===null?o=r:c.next=l,!Yn(r,t.memoizedState)&&(Pt=!0,h&&(n=To,n!==null)))throw n;t.memoizedState=r,t.baseState=o,t.baseQueue=c,s.lastRenderedState=r}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Fm(t){var e=jt(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do r=t(r,o.action),o=o.next;while(o!==i);Yn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function iS(t,e,n){var s=Ie,i=jt(),r=ze;if(r){if(n===void 0)throw Error(Y(407));n=n()}else n=e();var o=!Yn((We||i).memoizedState,n);if(o&&(i.memoizedState=n,Pt=!0),i=i.queue,hx(oS.bind(null,s,i,t),[t]),i.getSnapshot!==e||o||Dt!==null&&Dt.memoizedState.tag&1){if(s.flags|=2048,zo(9,{destroy:void 0},aS.bind(null,s,i,n,e),null),et===null)throw Error(Y(349));r||wi&127||rS(s,e,n)}return n}function rS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e=bf(),Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function aS(t,e,n,s){e.value=n,e.getSnapshot=s,lS(e)&&cS(t)}function oS(t,e,n){return n(function(){lS(e)&&cS(t)})}function lS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function cS(t){var e=Va(t,2);e!==null&&kn(e,t,2)}function fg(t){var e=wn();if(typeof t=="function"){var n=t;if(t=n(),Ta){rr(!0);try{n()}finally{rr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:t},e}function uS(t,e,n,s){return t.baseState=n,dx(t,We,typeof s=="function"?s:_i)}function LI(t,e,n,s,i){if(Nf(t))throw Error(Y(485));if(t=e.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};Ne.T!==null?n(!0):r.isTransition=!1,s(r),n=e.pending,n===null?(r.next=e.pending=r,dS(e,r)):(r.next=n.next,e.pending=n.next=r)}}function dS(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var r=Ne.T,o={};Ne.T=o;try{var l=n(i,s),c=Ne.S;c!==null&&c(o,l),Pb(t,e,l)}catch(d){mg(t,e,d)}finally{r!==null&&o.types!==null&&(r.types=o.types),Ne.T=r}}else try{r=n(i,s),Pb(t,e,r)}catch(d){mg(t,e,d)}}function Pb(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Lb(t,e,s)},function(s){return mg(t,e,s)}):Lb(t,e,n)}function Lb(t,e,n){e.status="fulfilled",e.value=n,hS(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,dS(t,n)))}function mg(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,hS(e),e=e.next;while(e!==s)}t.action=null}function hS(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function fS(t,e){return e}function zb(t,e){if(ze){var n=et.formState;if(n!==null){e:{var s=Ie;if(ze){if(ot){t:{for(var i=ot,r=us;i.nodeType!==8;){if(!r){i=null;break t}if(i=fs(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){ot=fs(i.nextSibling),s=i.data==="F!";break e}}Ar(s)}s=!1}s&&(e=n[0])}}return n=wn(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fS,lastRenderedState:e},n.queue=s,n=CS.bind(null,Ie,s),s.dispatch=n,s=fg(!1),r=gx.bind(null,Ie,!1,s.queue),s=wn(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=LI.bind(null,Ie,i,r,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function Ub(t){var e=jt();return mS(e,We,t)}function mS(t,e,n){if(e=dx(t,e,fS)[0],t=Dd(_i)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=xu(e)}catch(o){throw o===ul?vf:o}else s=e;e=jt();var i=e.queue,r=i.dispatch;return n!==e.memoizedState&&(Ie.flags|=2048,zo(9,{destroy:void 0},zI.bind(null,i,n),null)),[s,r,t]}function zI(t,e){t.action=e}function Bb(t){var e=jt(),n=We;if(n!==null)return mS(e,n,t);jt(),e=e.memoizedState,n=jt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function zo(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=Ie.updateQueue,e===null&&(e=bf(),Ie.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function pS(){return jt().memoizedState}function Md(t,e,n,s){var i=wn();Ie.flags|=t,i.memoizedState=zo(1|e,{destroy:void 0},n,s===void 0?null:s)}function _f(t,e,n,s){var i=jt();s=s===void 0?null:s;var r=i.memoizedState.inst;We!==null&&s!==null&&rx(s,We.memoizedState.deps)?i.memoizedState=zo(e,r,n,s):(Ie.flags|=t,i.memoizedState=zo(1|e,r,n,s))}function Fb(t,e){Md(8390656,8,t,e)}function hx(t,e){_f(2048,8,t,e)}function UI(t){Ie.flags|=4;var e=Ie.updateQueue;if(e===null)e=bf(),Ie.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function gS(t){var e=jt().memoizedState;return UI({ref:e,nextImpl:t}),function(){if(Be&2)throw Error(Y(440));return e.impl.apply(void 0,arguments)}}function xS(t,e){return _f(4,2,t,e)}function yS(t,e){return _f(4,4,t,e)}function vS(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bS(t,e,n){n=n!=null?n.concat([t]):null,_f(4,4,vS.bind(null,e,t),n)}function fx(){}function wS(t,e){var n=jt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&rx(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function _S(t,e){var n=jt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&rx(e,s[1]))return s[0];if(s=t(),Ta){rr(!0);try{t()}finally{rr(!1)}}return n.memoizedState=[s,e],s}function mx(t,e,n){return n===void 0||wi&1073741824&&!(Le&261930)?t.memoizedState=e:(t.memoizedState=n,t=uT(),Ie.lanes|=t,Rr|=t,n)}function NS(t,e,n,s){return Yn(n,e)?n:Lo.current!==null?(t=mx(t,n,s),Yn(t,e)||(Pt=!0),t):!(wi&42)||wi&1073741824&&!(Le&261930)?(Pt=!0,t.memoizedState=n):(t=uT(),Ie.lanes|=t,Rr|=t,e)}function SS(t,e,n,s,i){var r=Fe.p;Fe.p=r!==0&&8>r?r:8;var o=Ne.T,l={};Ne.T=l,gx(t,!1,e,n);try{var c=i(),d=Ne.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=OI(c,s);mc(t,e,h,Kn(t))}else mc(t,e,s,Kn(t))}catch(m){mc(t,e,{then:function(){},status:"rejected",reason:m},Kn())}finally{Fe.p=r,o!==null&&l.types!==null&&(o.types=l.types),Ne.T=o}}function BI(){}function pg(t,e,n,s){if(t.tag!==5)throw Error(Y(476));var i=TS(t).queue;SS(t,i,e,ma,n===null?BI:function(){return ES(t),n(s)})}function TS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ma,baseState:ma,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:ma},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function ES(t){var e=TS(t);e.next===null&&(e=t.alternate.memoizedState),mc(t,e.next.queue,{},Kn())}function px(){return ln(Hc)}function jS(){return jt().memoizedState}function AS(){return jt().memoizedState}function FI(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Kn();t=mr(n);var s=pr(e,t,n);s!==null&&(kn(s,e,n),dc(s,e,n)),e={cache:ex()},t.payload=e;return}e=e.return}}function $I(t,e,n){var s=Kn();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Nf(t)?RS(e,n):(n=X0(t,e,n,s),n!==null&&(kn(n,t,s),IS(n,e,s)))}function CS(t,e,n){var s=Kn();mc(t,e,n,s)}function mc(t,e,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nf(t))RS(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,l=r(o,n);if(i.hasEagerState=!0,i.eagerState=l,Yn(l,o))return yf(t,e,i,0),et===null&&xf(),!1}catch{}finally{}if(n=X0(t,e,i,s),n!==null)return kn(n,t,s),IS(n,e,s),!0}return!1}function gx(t,e,n,s){if(s={lane:2,revertLane:Tx(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Nf(t)){if(e)throw Error(Y(479))}else e=X0(t,n,s,2),e!==null&&kn(e,t,2)}function Nf(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function RS(t,e){jo=mh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function IS(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,gN(t,n)}}var Bc={readContext:ln,use:wf,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Bc.useEffectEvent=vt;var kS={readContext:ln,use:wf,useCallback:function(t,e){return wn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:Fb,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Md(4194308,4,vS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Md(4194308,4,t,e)},useInsertionEffect:function(t,e){Md(4,2,t,e)},useMemo:function(t,e){var n=wn();e=e===void 0?null:e;var s=t();if(Ta){rr(!0);try{t()}finally{rr(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=wn();if(n!==void 0){var i=n(e);if(Ta){rr(!0);try{n(e)}finally{rr(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=$I.bind(null,Ie,t),[s.memoizedState,t]},useRef:function(t){var e=wn();return t={current:t},e.memoizedState=t},useState:function(t){t=fg(t);var e=t.queue,n=CS.bind(null,Ie,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:fx,useDeferredValue:function(t,e){var n=wn();return mx(n,t,e)},useTransition:function(){var t=fg(!1);return t=SS.bind(null,Ie,t.queue,!0,!1),wn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=Ie,i=wn();if(ze){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),et===null)throw Error(Y(349));Le&127||rS(s,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,Fb(oS.bind(null,s,r,t),[t]),s.flags|=2048,zo(9,{destroy:void 0},aS.bind(null,s,r,n,e),null),n},useId:function(){var t=wn(),e=et.identifierPrefix;if(ze){var n=Ps,s=Vs;n=(s&~(1<<32-Gn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=ph++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=VI++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:px,useFormState:zb,useActionState:zb,useOptimistic:function(t){var e=wn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=gx.bind(null,Ie,!0,n),n.dispatch=e,[t,e]},useMemoCache:ux,useCacheRefresh:function(){return wn().memoizedState=FI.bind(null,Ie)},useEffectEvent:function(t){var e=wn(),n={impl:t};return e.memoizedState=n,function(){if(Be&2)throw Error(Y(440));return n.impl.apply(void 0,arguments)}}},xx={readContext:ln,use:wf,useCallback:wS,useContext:ln,useEffect:hx,useImperativeHandle:bS,useInsertionEffect:xS,useLayoutEffect:yS,useMemo:_S,useReducer:Dd,useRef:pS,useState:function(){return Dd(_i)},useDebugValue:fx,useDeferredValue:function(t,e){var n=jt();return NS(n,We.memoizedState,t,e)},useTransition:function(){var t=Dd(_i)[0],e=jt().memoizedState;return[typeof t=="boolean"?t:xu(t),e]},useSyncExternalStore:iS,useId:jS,useHostTransitionStatus:px,useFormState:Ub,useActionState:Ub,useOptimistic:function(t,e){var n=jt();return uS(n,We,t,e)},useMemoCache:ux,useCacheRefresh:AS};xx.useEffectEvent=gS;var DS={readContext:ln,use:wf,useCallback:wS,useContext:ln,useEffect:hx,useImperativeHandle:bS,useInsertionEffect:xS,useLayoutEffect:yS,useMemo:_S,useReducer:Fm,useRef:pS,useState:function(){return Fm(_i)},useDebugValue:fx,useDeferredValue:function(t,e){var n=jt();return We===null?mx(n,t,e):NS(n,We.memoizedState,t,e)},useTransition:function(){var t=Fm(_i)[0],e=jt().memoizedState;return[typeof t=="boolean"?t:xu(t),e]},useSyncExternalStore:iS,useId:jS,useHostTransitionStatus:px,useFormState:Bb,useActionState:Bb,useOptimistic:function(t,e){var n=jt();return We!==null?uS(n,We,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:ux,useCacheRefresh:AS};DS.useEffectEvent=gS;function $m(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gg={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Kn(),i=mr(s);i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(kn(e,t,s),dc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Kn(),i=mr(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,s),e!==null&&(kn(e,t,s),dc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kn(),s=mr(n);s.tag=2,e!=null&&(s.callback=e),e=pr(t,s,n),e!==null&&(kn(e,t,n),dc(e,t,n))}};function $b(t,e,n,s,i,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!Vc(n,s)||!Vc(i,r):!0}function Hb(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&gg.enqueueReplaceState(e,e.state,null)}function Ea(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=dt({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function MS(t){oh(t)}function OS(t){console.error(t)}function VS(t){oh(t)}function gh(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function Gb(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function xg(t,e,n){return n=mr(n),n.tag=3,n.payload={element:null},n.callback=function(){gh(t,e)},n}function PS(t){return t=mr(t),t.tag=3,t}function LS(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=s.value;t.payload=function(){return i(r)},t.callback=function(){Gb(e,n,s)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){Gb(e,n,s),typeof i!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function HI(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&cl(e,n,i,!0),n=qn.current,n!==null){switch(n.tag){case 31:case 13:return hs===null?wh():n.alternate===null&&wt===0&&(wt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===dh?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),ep(t,s,i)),!1;case 22:return n.flags|=65536,s===dh?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),ep(t,s,i)),!1}throw Error(Y(435,n.tag))}return ep(t,s,i),wh(),!1}if(ze)return e=qn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==ig&&(t=Error(Y(422),{cause:s}),Lc(cs(t,n)))):(s!==ig&&(e=Error(Y(423),{cause:s}),Lc(cs(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=cs(s,n),i=xg(t.stateNode,s,i),Bm(t,i),wt!==4&&(wt=2)),!1;var r=Error(Y(520),{cause:s});if(r=cs(r,n),xc===null?xc=[r]:xc.push(r),wt!==4&&(wt=2),e===null)return!0;s=cs(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=xg(n.stateNode,s,t),Bm(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(gr===null||!gr.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=PS(i),LS(i,t,n,s),Bm(n,i),!1}n=n.return}while(n!==null);return!1}var yx=Error(Y(461)),Pt=!1;function en(t,e,n,s){e.child=t===null?JN(e,null,n,s):Sa(e,t.child,n,s)}function Kb(t,e,n,s,i){n=n.render;var r=e.ref;if("ref"in s){var o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}else o=s;return Na(e),s=ax(t,e,n,o,r,i),l=ox(),t!==null&&!Pt?(lx(t,e,i),Ni(t,e,i)):(ze&&l&&J0(e),e.flags|=1,en(t,e,s,i),e.child)}function Qb(t,e,n,s,i){if(t===null){var r=n.type;return typeof r=="function"&&!W0(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,zS(t,e,r,s,i)):(t=Id(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!vx(t,i)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Vc,n(o,s)&&t.ref===e.ref)return Ni(t,e,i)}return e.flags|=1,t=hi(r,s),t.ref=e.ref,t.return=e,e.child=t}function zS(t,e,n,s,i){if(t!==null){var r=t.memoizedProps;if(Vc(r,s)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=s=r,vx(t,i))t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Ni(t,e,i)}return yg(t,e,n,s,i)}function US(t,e,n,s){var i=s.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~r}else s=0,e.child=null;return Yb(t,e,r,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&kd(e,r!==null?r.cachePool:null),r!==null?Vb(e,r):dg(),tS(e);else return s=e.lanes=536870912,Yb(t,e,r!==null?r.baseLanes|n:n,n,s)}else r!==null?(kd(e,r.cachePool),Vb(e,r),Zi(),e.memoizedState=null):(t!==null&&kd(e,null),dg(),Zi());return en(t,e,i,n),e.child}function ql(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Yb(t,e,n,s,i){var r=tx();return r=r===null?null:{parent:Ot._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&kd(e,null),dg(),tS(e),t!==null&&cl(t,e,s,!0),e.childLanes=i,null}function Od(t,e){return e=xh({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function qb(t,e,n){return Sa(e,t.child,null,n),t=Od(e,e.pendingProps),t.flags|=2,Ln(e),e.memoizedState=null,t}function GI(t,e,n){var s=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(ze){if(s.mode==="hidden")return t=Od(e,s),e.lanes=536870912,ql(null,t);if(hg(e),(t=ot)?(t=kT(t,us),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:jr!==null?{id:Vs,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},n=GN(t),n.return=e,e.child=n,rn=e,ot=null)):t=null,t===null)throw Ar(e);return e.lanes=536870912,null}return Od(e,s)}var r=t.memoizedState;if(r!==null){var o=r.dehydrated;if(hg(e),i)if(e.flags&256)e.flags&=-257,e=qb(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(Y(558));else if(Pt||cl(t,e,n,!1),i=(n&t.childLanes)!==0,Pt||i){if(s=et,s!==null&&(o=xN(s,n),o!==0&&o!==r.retryLane))throw r.retryLane=o,Va(t,o),kn(s,t,o),yx;wh(),e=qb(t,e,n)}else t=r.treeContext,ot=fs(o.nextSibling),rn=e,ze=!0,fr=null,us=!1,t!==null&&QN(e,t),e=Od(e,s),e.flags|=4096;return e}return t=hi(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Vd(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(Y(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function yg(t,e,n,s,i){return Na(e),n=ax(t,e,n,s,void 0,i),s=ox(),t!==null&&!Pt?(lx(t,e,i),Ni(t,e,i)):(ze&&s&&J0(e),e.flags|=1,en(t,e,n,i),e.child)}function Xb(t,e,n,s,i,r){return Na(e),e.updateQueue=null,n=sS(e,s,n,i),nS(t),s=ox(),t!==null&&!Pt?(lx(t,e,r),Ni(t,e,r)):(ze&&s&&J0(e),e.flags|=1,en(t,e,n,r),e.child)}function Wb(t,e,n,s,i){if(Na(e),e.stateNode===null){var r=ho,o=n.contextType;typeof o=="object"&&o!==null&&(r=ln(o)),r=new n(s,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=gg,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=s,r.state=e.memoizedState,r.refs={},sx(e),o=n.contextType,r.context=typeof o=="object"&&o!==null?ln(o):ho,r.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&($m(e,n,o,s),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&gg.enqueueReplaceState(r,r.state,null),fc(e,s,r,i),hc(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,c=Ea(n,l);r.props=c;var d=r.context,h=n.contextType;o=ho,typeof h=="object"&&h!==null&&(o=ln(h));var m=n.getDerivedStateFromProps;h=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,h||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||d!==o)&&Hb(e,r,s,o),Xi=!1;var f=e.memoizedState;r.state=f,fc(e,s,r,i),hc(),d=e.memoizedState,l||f!==d||Xi?(typeof m=="function"&&($m(e,n,m,s),d=e.memoizedState),(c=Xi||$b(e,n,c,s,f,d,o))?(h||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),r.props=s,r.state=d,r.context=o,s=c):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{r=e.stateNode,cg(t,e),o=e.memoizedProps,h=Ea(n,o),r.props=h,m=e.pendingProps,f=r.context,d=n.contextType,c=ho,typeof d=="object"&&d!==null&&(c=ln(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==m||f!==c)&&Hb(e,r,s,c),Xi=!1,f=e.memoizedState,r.state=f,fc(e,s,r,i),hc();var x=e.memoizedState;o!==m||f!==x||Xi||t!==null&&t.dependencies!==null&&uh(t.dependencies)?(typeof l=="function"&&($m(e,n,l,s),x=e.memoizedState),(h=Xi||$b(e,n,h,s,f,x,c)||t!==null&&t.dependencies!==null&&uh(t.dependencies))?(d||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,x,c),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,x,c)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=x),r.props=s,r.state=x,r.context=c,s=h):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return r=s,Vd(t,e),s=(e.flags&128)!==0,r||s?(r=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&s?(e.child=Sa(e,t.child,null,i),e.child=Sa(e,null,n,i)):en(t,e,n,i),e.memoizedState=r.state,t=e.child):t=Ni(t,e,i),t}function Jb(t,e,n,s){return _a(),e.flags|=256,en(t,e,n,s),e.child}var Hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gm(t){return{baseLanes:t,cachePool:qN()}}function Km(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Bn),t}function BS(t,e,n){var s=e.pendingProps,i=!1,r=(e.flags&128)!==0,o;if((o=r)||(o=t!==null&&t.memoizedState===null?!1:(Et.current&2)!==0),o&&(i=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(ze){if(i?Ji(e):Zi(),(t=ot)?(t=kT(t,us),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:jr!==null?{id:Vs,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},n=GN(t),n.return=e,e.child=n,rn=e,ot=null)):t=null,t===null)throw Ar(e);return kg(t)?e.lanes=32:e.lanes=536870912,null}var l=s.children;return s=s.fallback,i?(Zi(),i=e.mode,l=xh({mode:"hidden",children:l},i),s=pa(s,i,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,s=e.child,s.memoizedState=Gm(n),s.childLanes=Km(t,o,n),e.memoizedState=Hm,ql(null,s)):(Ji(e),vg(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(r)e.flags&256?(Ji(e),e.flags&=-257,e=Qm(t,e,n)):e.memoizedState!==null?(Zi(),e.child=t.child,e.flags|=128,e=null):(Zi(),l=s.fallback,i=e.mode,s=xh({mode:"visible",children:s.children},i),l=pa(l,i,n,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,Sa(e,t.child,null,n),s=e.child,s.memoizedState=Gm(n),s.childLanes=Km(t,o,n),e.memoizedState=Hm,e=ql(null,s));else if(Ji(e),kg(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var d=o.dgst;o=d,s=Error(Y(419)),s.stack="",s.digest=o,Lc({value:s,source:null,stack:null}),e=Qm(t,e,n)}else if(Pt||cl(t,e,n,!1),o=(n&t.childLanes)!==0,Pt||o){if(o=et,o!==null&&(s=xN(o,n),s!==0&&s!==c.retryLane))throw c.retryLane=s,Va(t,s),kn(o,t,s),yx;Ig(l)||wh(),e=Qm(t,e,n)}else Ig(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,ot=fs(l.nextSibling),rn=e,ze=!0,fr=null,us=!1,t!==null&&QN(e,t),e=vg(e,s.children),e.flags|=4096);return e}return i?(Zi(),l=s.fallback,i=e.mode,c=t.child,d=c.sibling,s=hi(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=hi(d,l):(l=pa(l,i,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,ql(null,s),s=e.child,l=t.child.memoizedState,l===null?l=Gm(n):(i=l.cachePool,i!==null?(c=Ot._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=qN(),l={baseLanes:l.baseLanes|n,cachePool:i}),s.memoizedState=l,s.childLanes=Km(t,o,n),e.memoizedState=Hm,ql(t.child,s)):(Ji(e),n=t.child,t=n.sibling,n=hi(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function vg(t,e){return e=xh({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function xh(t,e){return t=zn(22,t,null,e),t.lanes=0,t}function Qm(t,e,n){return Sa(e,t.child,null,n),t=vg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zb(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),ag(t.return,e,n)}function Ym(t,e,n,s,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=i,o.treeForkCount=r)}function FS(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;s=s.children;var o=Et.current,l=(o&2)!==0;if(l?(o=o&1|2,e.flags|=128):o&=1,it(Et,o),en(t,e,s,n),s=ze?Pc:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zb(t,n,e);else if(t.tag===19)Zb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ym(e,!1,i,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ym(e,!0,n,null,r,s);break;case"together":Ym(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function Ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rr|=e.lanes,!(n&e.childLanes))if(t!==null){if(cl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vx(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&uh(t)))}function KI(t,e,n){switch(e.tag){case 3:sh(e,e.stateNode.containerInfo),Wi(e,Ot,t.memoizedState.cache),_a();break;case 27:case 5:Qp(e);break;case 4:sh(e,e.stateNode.containerInfo);break;case 10:Wi(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,hg(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Ji(e),e.flags|=128,null):n&e.child.childLanes?BS(t,e,n):(Ji(e),t=Ni(t,e,n),t!==null?t.sibling:null);Ji(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(cl(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return FS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),it(Et,Et.current),s)break;return null;case 22:return e.lanes=0,US(t,e,n,e.pendingProps);case 24:Wi(e,Ot,t.memoizedState.cache)}return Ni(t,e,n)}function $S(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Pt=!0;else{if(!vx(t,n)&&!(e.flags&128))return Pt=!1,KI(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,ze&&e.flags&1048576&&KN(e,Pc,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=sa(e.elementType),e.type=t,typeof t=="function")W0(t)?(s=Ea(t,s),e.tag=1,e=Wb(null,e,t,s,n)):(e.tag=0,e=yg(null,e,t,s,n));else{if(t!=null){var i=t.$$typeof;if(i===P0){e.tag=11,e=Kb(null,e,t,s,n);break e}else if(i===L0){e.tag=14,e=Qb(null,e,t,s,n);break e}}throw e=Gp(t)||t,Error(Y(306,e,""))}}return e;case 0:return yg(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=Ea(s,e.pendingProps),Wb(t,e,s,i,n);case 3:e:{if(sh(e,e.stateNode.containerInfo),t===null)throw Error(Y(387));s=e.pendingProps;var r=e.memoizedState;i=r.element,cg(t,e),fc(e,s,null,n);var o=e.memoizedState;if(s=o.cache,Wi(e,Ot,s),s!==r.cache&&og(e,[Ot],n,!0),hc(),s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=Jb(t,e,s,n);break e}else if(s!==i){i=cs(Error(Y(424)),e),Lc(i),e=Jb(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ot=fs(t.firstChild),rn=e,ze=!0,fr=null,us=!0,n=JN(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(_a(),s===i){e=Ni(t,e,n);break e}en(t,e,s,n)}e=e.child}return e;case 26:return Vd(t,e),t===null?(n=v1(e.type,null,e.pendingProps,null))?e.memoizedState=n:ze||(n=e.type,t=e.pendingProps,s=Th(hr.current).createElement(n),s[sn]=e,s[Mn]=t,cn(s,n,t),Xt(s),e.stateNode=s):e.memoizedState=v1(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Qp(e),t===null&&ze&&(s=e.stateNode=DT(e.type,e.pendingProps,hr.current),rn=e,us=!0,i=ot,Br(e.type)?(Dg=i,ot=fs(s.firstChild)):ot=i),en(t,e,e.pendingProps.children,n),Vd(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ze&&((i=s=ot)&&(s=_3(s,e.type,e.pendingProps,us),s!==null?(e.stateNode=s,rn=e,ot=fs(s.firstChild),us=!1,i=!0):i=!1),i||Ar(e)),Qp(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,Cg(i,r)?s=null:o!==null&&Cg(i,o)&&(e.flags|=32),e.memoizedState!==null&&(i=ax(t,e,PI,null,null,n),Hc._currentValue=i),Vd(t,e),en(t,e,s,n),e.child;case 6:return t===null&&ze&&((t=n=ot)&&(n=N3(n,e.pendingProps,us),n!==null?(e.stateNode=n,rn=e,ot=null,t=!0):t=!1),t||Ar(e)),null;case 13:return BS(t,e,n);case 4:return sh(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Sa(e,null,s,n):en(t,e,s,n),e.child;case 11:return Kb(t,e,e.type,e.pendingProps,n);case 7:return en(t,e,e.pendingProps,n),e.child;case 8:return en(t,e,e.pendingProps.children,n),e.child;case 12:return en(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Wi(e,e.type,s.value),en(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,Na(e),i=ln(i),s=s(i),e.flags|=1,en(t,e,s,n),e.child;case 14:return Qb(t,e,e.type,e.pendingProps,n);case 15:return zS(t,e,e.type,e.pendingProps,n);case 19:return FS(t,e,n);case 31:return GI(t,e,n);case 22:return US(t,e,n,e.pendingProps);case 24:return Na(e),s=ln(Ot),t===null?(i=tx(),i===null&&(i=et,r=ex(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),e.memoizedState={parent:s,cache:i},sx(e),Wi(e,Ot,i)):(t.lanes&n&&(cg(t,e),fc(e,null,null,n),hc()),i=t.memoizedState,r=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),Wi(e,Ot,s)):(s=r.cache,Wi(e,Ot,s),s!==i.cache&&og(e,[Ot],n,!0))),en(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(Y(156,e.tag))}function Zs(t){t.flags|=4}function qm(t,e,n,s,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(fT())t.flags|=8192;else throw xa=dh,nx}else t.flags&=-16777217}function e1(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!VT(e))if(fT())t.flags|=8192;else throw xa=dh,nx}function dd(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?mN():536870912,t.lanes|=e,Uo|=e)}function Bl(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function QI(t,e,n){var s=e.pendingProps;switch(Z0(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return at(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),fi(Ot),Mo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ya(e)?Zs(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Um())),at(e),null;case 26:var i=e.type,r=e.memoizedState;return t===null?(Zs(e),r!==null?(at(e),e1(e,r)):(at(e),qm(e,i,null,s,n))):r?r!==t.memoizedState?(Zs(e),at(e),e1(e,r)):(at(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&Zs(e),at(e),qm(e,i,t,s,n)),null;case 27:if(ih(e),n=hr.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Zs(e);else{if(!s){if(e.stateNode===null)throw Error(Y(166));return at(e),null}t=zs.current,Ya(e)?Cb(e):(t=DT(i,s,n),e.stateNode=t,Zs(e))}return at(e),null;case 5:if(ih(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Zs(e);else{if(!s){if(e.stateNode===null)throw Error(Y(166));return at(e),null}if(r=zs.current,Ya(e))Cb(e);else{var o=Th(hr.current);switch(r){case 1:r=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?o.createElement(i,{is:s.is}):o.createElement(i)}}r[sn]=e,r[Mn]=s;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=r;e:switch(cn(r,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Zs(e)}}return at(e),qm(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Zs(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Y(166));if(t=hr.current,Ya(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=rn,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[sn]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||CT(t.nodeValue,n)),t||Ar(e,!0)}else t=Th(t).createTextNode(s),t[sn]=e,e.stateNode=t}return at(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Ya(e),n!==null){if(t===null){if(!s)throw Error(Y(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(557));t[sn]=e}else _a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),t=!1}else n=Um(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Ln(e),e):(Ln(e),null);if(e.flags&128)throw Error(Y(558))}return at(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Ya(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[sn]=e}else _a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else i=Um(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Ln(e),e):(Ln(e),null)}return Ln(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==i&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),dd(e,e.updateQueue),at(e),null);case 4:return Mo(),t===null&&Ex(e.stateNode.containerInfo),at(e),null;case 10:return fi(e.type),at(e),null;case 19:if(Wt(Et),s=e.memoizedState,s===null)return at(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)Bl(s,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=fh(t),r!==null){for(e.flags|=128,Bl(s,!1),t=r.updateQueue,e.updateQueue=t,dd(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)HN(n,t),n=n.sibling;return it(Et,Et.current&1|2),ze&&ii(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&$n()>vh&&(e.flags|=128,i=!0,Bl(s,!1),e.lanes=4194304)}else{if(!i)if(t=fh(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,dd(e,t),Bl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!ze)return at(e),null}else 2*$n()-s.renderingStartTime>vh&&n!==536870912&&(e.flags|=128,i=!0,Bl(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$n(),t.sibling=null,n=Et.current,it(Et,i?n&1|2:n&1),ze&&ii(e,s.treeForkCount),t):(at(e),null);case 22:case 23:return Ln(e),ix(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),n=e.updateQueue,n!==null&&dd(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&Wt(ga),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),fi(Ot),at(e),null;case 25:return null;case 30:return null}throw Error(Y(156,e.tag))}function YI(t,e){switch(Z0(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fi(Ot),Mo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ih(e),null;case 31:if(e.memoizedState!==null){if(Ln(e),e.alternate===null)throw Error(Y(340));_a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Ln(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));_a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wt(Et),null;case 4:return Mo(),null;case 10:return fi(e.type),null;case 22:case 23:return Ln(e),ix(),t!==null&&Wt(ga),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return fi(Ot),null;case 25:return null;default:return null}}function HS(t,e){switch(Z0(e),e.tag){case 3:fi(Ot),Mo();break;case 26:case 27:case 5:ih(e);break;case 4:Mo();break;case 31:e.memoizedState!==null&&Ln(e);break;case 13:Ln(e);break;case 19:Wt(Et);break;case 10:fi(e.type);break;case 22:case 23:Ln(e),ix(),t!==null&&Wt(ga);break;case 24:fi(Ot)}}function yu(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var r=n.create,o=n.inst;s=r(),o.destroy=s}n=n.next}while(n!==i)}}catch(l){Ye(e,e.return,l)}}function Cr(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var r=i.next;s=r;do{if((s.tag&t)===t){var o=s.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,i=e;var c=n,d=l;try{d()}catch(h){Ye(i,c,h)}}}s=s.next}while(s!==r)}}catch(h){Ye(e,e.return,h)}}function GS(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{eS(e,n)}catch(s){Ye(t,t.return,s)}}}function KS(t,e,n){n.props=Ea(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ye(t,e,s)}}function pc(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){Ye(t,e,i)}}function Ls(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){Ye(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Ye(t,e,i)}else n.current=null}function QS(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){Ye(t,t.return,i)}}function Xm(t,e,n){try{var s=t.stateNode;g3(s,t.type,n,e),s[Mn]=e}catch(i){Ye(t,t.return,i)}}function YS(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Br(t.type)||t.tag===4}function Wm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Br(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bg(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=li));else if(s!==4&&(s===27&&Br(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(bg(t,e,n),t=t.sibling;t!==null;)bg(t,e,n),t=t.sibling}function yh(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&Br(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(yh(t,e,n),t=t.sibling;t!==null;)yh(t,e,n),t=t.sibling}function qS(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);cn(e,s,n),e[sn]=t,e[Mn]=n}catch(r){Ye(t,t.return,r)}}var ri=!1,Mt=!1,Jm=!1,t1=typeof WeakSet=="function"?WeakSet:Set,qt=null;function qI(t,e){if(t=t.containerInfo,jg=Ch,t=VN(t),Y0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,m=t,f=null;t:for(;;){for(var x;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==r||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)f=m,m=x;for(;;){if(m===t)break t;if(f===n&&++d===i&&(l=o),f===r&&++h===s&&(c=o),(x=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ag={focusedElem:t,selectionRange:n},Ch=!1,qt=e;qt!==null;)if(e=qt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qt=t;else for(;qt!==null;){switch(e=qt,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,i=r.memoizedProps,r=r.memoizedState,s=n.stateNode;try{var v=Ea(n.type,i);t=s.getSnapshotBeforeUpdate(v,r),s.__reactInternalSnapshotBeforeUpdate=t}catch(C){Ye(n,n.return,C)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Rg(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Rg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(Y(163))}if(t=e.sibling,t!==null){t.return=e.return,qt=t;break}qt=e.return}}function XS(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:ti(t,n),s&4&&yu(5,n);break;case 1:if(ti(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){Ye(n,n.return,o)}else{var i=Ea(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){Ye(n,n.return,o)}}s&64&&GS(n),s&512&&pc(n,n.return);break;case 3:if(ti(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{eS(t,e)}catch(o){Ye(n,n.return,o)}}break;case 27:e===null&&s&4&&qS(n);case 26:case 5:ti(t,n),e===null&&s&4&&QS(n),s&512&&pc(n,n.return);break;case 12:ti(t,n);break;case 31:ti(t,n),s&4&&ZS(t,n);break;case 13:ti(t,n),s&4&&eT(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=i3.bind(null,n),S3(t,n))));break;case 22:if(s=n.memoizedState!==null||ri,!s){e=e!==null&&e.memoizedState!==null||Mt,i=ri;var r=Mt;ri=s,(Mt=e)&&!r?ni(t,n,(n.subtreeFlags&8772)!==0):ti(t,n),ri=i,Mt=r}break;case 30:break;default:ti(t,n)}}function WS(t){var e=t.alternate;e!==null&&(t.alternate=null,WS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&F0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,An=!1;function ei(t,e,n){for(n=n.child;n!==null;)JS(t,e,n),n=n.sibling}function JS(t,e,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(du,n)}catch{}switch(n.tag){case 26:Mt||Ls(n,e),ei(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Mt||Ls(n,e);var s=ht,i=An;Br(n.type)&&(ht=n.stateNode,An=!1),ei(t,e,n),vc(n.stateNode),ht=s,An=i;break;case 5:Mt||Ls(n,e);case 6:if(s=ht,i=An,ht=null,ei(t,e,n),ht=s,An=i,ht!==null)if(An)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(n.stateNode)}catch(r){Ye(n,e,r)}else try{ht.removeChild(n.stateNode)}catch(r){Ye(n,e,r)}break;case 18:ht!==null&&(An?(t=ht,m1(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ho(t)):m1(ht,n.stateNode));break;case 4:s=ht,i=An,ht=n.stateNode.containerInfo,An=!0,ei(t,e,n),ht=s,An=i;break;case 0:case 11:case 14:case 15:Cr(2,n,e),Mt||Cr(4,n,e),ei(t,e,n);break;case 1:Mt||(Ls(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&KS(n,e,s)),ei(t,e,n);break;case 21:ei(t,e,n);break;case 22:Mt=(s=Mt)||n.memoizedState!==null,ei(t,e,n),Mt=s;break;default:ei(t,e,n)}}function ZS(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ho(t)}catch(n){Ye(e,e.return,n)}}}function eT(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ho(t)}catch(n){Ye(e,e.return,n)}}function XI(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new t1),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new t1),e;default:throw Error(Y(435,t.tag))}}function hd(t,e){var n=XI(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var i=r3.bind(null,t,s);s.then(i,i)}})}function En(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],r=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(Br(l.type)){ht=l.stateNode,An=!1;break e}break;case 5:ht=l.stateNode,An=!1;break e;case 3:case 4:ht=l.stateNode.containerInfo,An=!0;break e}l=l.return}if(ht===null)throw Error(Y(160));JS(r,o,i),ht=null,An=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)tT(e,t),e=e.sibling}var ws=null;function tT(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:En(e,t),jn(t),s&4&&(Cr(3,t,t.return),yu(3,t),Cr(5,t,t.return));break;case 1:En(e,t),jn(t),s&512&&(Mt||n===null||Ls(n,n.return)),s&64&&ri&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=ws;if(En(e,t),jn(t),s&512&&(Mt||n===null||Ls(n,n.return)),s&4){var r=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":r=i.getElementsByTagName("title")[0],(!r||r[mu]||r[sn]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(s),i.head.insertBefore(r,i.querySelector("head > title"))),cn(r,s,n),r[sn]=t,Xt(r),s=r;break e;case"link":var o=w1("link","href",i).get(s+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(r=o[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}r=i.createElement(s),cn(r,s,n),i.head.appendChild(r);break;case"meta":if(o=w1("meta","content",i).get(s+(n.content||""))){for(l=0;l<o.length;l++)if(r=o[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}r=i.createElement(s),cn(r,s,n),i.head.appendChild(r);break;default:throw Error(Y(468,s))}r[sn]=t,Xt(r),s=r}t.stateNode=s}else _1(i,t.type,t.stateNode);else t.stateNode=b1(i,s,t.memoizedProps);else r!==s?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,s===null?_1(i,t.type,t.stateNode):b1(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Xm(t,t.memoizedProps,n.memoizedProps)}break;case 27:En(e,t),jn(t),s&512&&(Mt||n===null||Ls(n,n.return)),n!==null&&s&4&&Xm(t,t.memoizedProps,n.memoizedProps);break;case 5:if(En(e,t),jn(t),s&512&&(Mt||n===null||Ls(n,n.return)),t.flags&32){i=t.stateNode;try{Vo(i,"")}catch(v){Ye(t,t.return,v)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,Xm(t,i,n!==null?n.memoizedProps:i)),s&1024&&(Jm=!0);break;case 6:if(En(e,t),jn(t),s&4){if(t.stateNode===null)throw Error(Y(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(v){Ye(t,t.return,v)}}break;case 3:if(zd=null,i=ws,ws=Eh(e.containerInfo),En(e,t),ws=i,jn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ho(e.containerInfo)}catch(v){Ye(t,t.return,v)}Jm&&(Jm=!1,nT(t));break;case 4:s=ws,ws=Eh(t.stateNode.containerInfo),En(e,t),jn(t),ws=s;break;case 12:En(e,t),jn(t);break;case 31:En(e,t),jn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,hd(t,s)));break;case 13:En(e,t),jn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Sf=$n()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,hd(t,s)));break;case 22:i=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=ri,h=Mt;if(ri=d||i,Mt=h||c,En(e,t),Mt=h,ri=d,jn(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||c||ri||Mt||ia(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(r=c.stateNode,i)o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var m=c.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null;l.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(v){Ye(c,c.return,v)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(v){Ye(c,c.return,v)}}}else if(e.tag===18){if(n===null){c=e;try{var x=c.stateNode;i?p1(x,!0):p1(c.stateNode,!1)}catch(v){Ye(c,c.return,v)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,hd(t,n))));break;case 19:En(e,t),jn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,hd(t,s)));break;case 30:break;case 21:break;default:En(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(YS(s)){n=s;break}s=s.return}if(n==null)throw Error(Y(160));switch(n.tag){case 27:var i=n.stateNode,r=Wm(t);yh(t,r,i);break;case 5:var o=n.stateNode;n.flags&32&&(Vo(o,""),n.flags&=-33);var l=Wm(t);yh(t,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,d=Wm(t);bg(t,d,c);break;default:throw Error(Y(161))}}catch(h){Ye(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nT(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;nT(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ti(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)XS(t,e.alternate,e),e=e.sibling}function ia(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Cr(4,e,e.return),ia(e);break;case 1:Ls(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&KS(e,e.return,n),ia(e);break;case 27:vc(e.stateNode);case 26:case 5:Ls(e,e.return),ia(e);break;case 22:e.memoizedState===null&&ia(e);break;case 30:ia(e);break;default:ia(e)}t=t.sibling}}function ni(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,r=e,o=r.flags;switch(r.tag){case 0:case 11:case 15:ni(i,r,n),yu(4,r);break;case 1:if(ni(i,r,n),s=r,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(d){Ye(s,s.return,d)}if(s=r,i=s.updateQueue,i!==null){var l=s.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)ZN(c[i],l)}catch(d){Ye(s,s.return,d)}}n&&o&64&&GS(r),pc(r,r.return);break;case 27:qS(r);case 26:case 5:ni(i,r,n),n&&s===null&&o&4&&QS(r),pc(r,r.return);break;case 12:ni(i,r,n);break;case 31:ni(i,r,n),n&&o&4&&ZS(i,r);break;case 13:ni(i,r,n),n&&o&4&&eT(i,r);break;case 22:r.memoizedState===null&&ni(i,r,n),pc(r,r.return);break;case 30:break;default:ni(i,r,n)}e=e.sibling}}function bx(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&gu(n))}function wx(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&gu(t))}function vs(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sT(t,e,n,s),e=e.sibling}function sT(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:vs(t,e,n,s),i&2048&&yu(9,e);break;case 1:vs(t,e,n,s);break;case 3:vs(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&gu(t)));break;case 12:if(i&2048){vs(t,e,n,s),t=e.stateNode;try{var r=e.memoizedProps,o=r.id,l=r.onPostCommit;typeof l=="function"&&l(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Ye(e,e.return,c)}}else vs(t,e,n,s);break;case 31:vs(t,e,n,s);break;case 13:vs(t,e,n,s);break;case 23:break;case 22:r=e.stateNode,o=e.alternate,e.memoizedState!==null?r._visibility&2?vs(t,e,n,s):gc(t,e):r._visibility&2?vs(t,e,n,s):(r._visibility|=2,Wa(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),i&2048&&bx(o,e);break;case 24:vs(t,e,n,s),i&2048&&wx(e.alternate,e);break;default:vs(t,e,n,s)}}function Wa(t,e,n,s,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,o=e,l=n,c=s,d=o.flags;switch(o.tag){case 0:case 11:case 15:Wa(r,o,l,c,i),yu(8,o);break;case 23:break;case 22:var h=o.stateNode;o.memoizedState!==null?h._visibility&2?Wa(r,o,l,c,i):gc(r,o):(h._visibility|=2,Wa(r,o,l,c,i)),i&&d&2048&&bx(o.alternate,o);break;case 24:Wa(r,o,l,c,i),i&&d&2048&&wx(o.alternate,o);break;default:Wa(r,o,l,c,i)}e=e.sibling}}function gc(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:gc(n,s),i&2048&&bx(s.alternate,s);break;case 24:gc(n,s),i&2048&&wx(s.alternate,s);break;default:gc(n,s)}e=e.sibling}}var Xl=8192;function qa(t,e,n){if(t.subtreeFlags&Xl)for(t=t.child;t!==null;)iT(t,e,n),t=t.sibling}function iT(t,e,n){switch(t.tag){case 26:qa(t,e,n),t.flags&Xl&&t.memoizedState!==null&&V3(n,ws,t.memoizedState,t.memoizedProps);break;case 5:qa(t,e,n);break;case 3:case 4:var s=ws;ws=Eh(t.stateNode.containerInfo),qa(t,e,n),ws=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Xl,Xl=16777216,qa(t,e,n),Xl=s):qa(t,e,n));break;default:qa(t,e,n)}}function rT(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Fl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];qt=s,oT(s,t)}rT(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)aT(t),t=t.sibling}function aT(t){switch(t.tag){case 0:case 11:case 15:Fl(t),t.flags&2048&&Cr(9,t,t.return);break;case 3:Fl(t);break;case 12:Fl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Pd(t)):Fl(t);break;default:Fl(t)}}function Pd(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];qt=s,oT(s,t)}rT(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Cr(8,e,e.return),Pd(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Pd(e));break;default:Pd(e)}t=t.sibling}}function oT(t,e){for(;qt!==null;){var n=qt;switch(n.tag){case 0:case 11:case 15:Cr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:gu(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,qt=s;else e:for(n=t;qt!==null;){s=qt;var i=s.sibling,r=s.return;if(WS(s),s===n){qt=null;break e}if(i!==null){i.return=r,qt=i;break e}qt=r}}}var WI={getCacheForType:function(t){var e=ln(Ot),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return ln(Ot).controller.signal}},JI=typeof WeakMap=="function"?WeakMap:Map,Be=0,et=null,Me=null,Le=0,Qe=0,Pn=null,or=!1,dl=!1,_x=!1,Si=0,wt=0,Rr=0,ya=0,Nx=0,Bn=0,Uo=0,xc=null,Cn=null,wg=!1,Sf=0,lT=0,vh=1/0,bh=null,gr=null,Bt=0,xr=null,Bo=null,mi=0,_g=0,Ng=null,cT=null,yc=0,Sg=null;function Kn(){return Be&2&&Le!==0?Le&-Le:Ne.T!==null?Tx():yN()}function uT(){if(Bn===0)if(!(Le&536870912)||ze){var t=id;id<<=1,!(id&3932160)&&(id=262144),Bn=t}else Bn=536870912;return t=qn.current,t!==null&&(t.flags|=32),Bn}function kn(t,e,n){(t===et&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(Fo(t,0),lr(t,Le,Bn,!1)),fu(t,n),(!(Be&2)||t!==et)&&(t===et&&(!(Be&2)&&(ya|=n),wt===4&&lr(t,Le,Bn,!1)),qs(t))}function dT(t,e,n){if(Be&6)throw Error(Y(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||hu(t,e),i=s?t3(t,e):Zm(t,e,!0),r=s;do{if(i===0){dl&&!s&&lr(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!ZI(n)){i=Zm(t,e,!1),r=!1;continue}if(i===2){if(r=e,t.errorRecoveryDisabledLanes&r)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var l=t;i=xc;var c=l.current.memoizedState.isDehydrated;if(c&&(Fo(l,o).flags|=256),o=Zm(l,o,!1),o!==2){if(_x&&!c){l.errorRecoveryDisabledLanes|=r,ya|=r,i=4;break e}r=Cn,Cn=i,r!==null&&(Cn===null?Cn=r:Cn.push.apply(Cn,r))}i=o}if(r=!1,i!==2)continue}}if(i===1){Fo(t,0),lr(t,e,0,!0);break}e:{switch(s=t,r=i,r){case 0:case 1:throw Error(Y(345));case 4:if((e&4194048)!==e)break;case 6:lr(s,e,Bn,!or);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(Y(329))}if((e&62914560)===e&&(i=Sf+300-$n(),10<i)){if(lr(s,e,Bn,!or),ff(s,0,!0)!==0)break e;mi=e,s.timeoutHandle=IT(n1.bind(null,s,n,Cn,bh,wg,e,Bn,ya,Uo,or,r,"Throttled",-0,0),i);break e}n1(s,n,Cn,bh,wg,e,Bn,ya,Uo,or,r,null,-0,0)}}break}while(!0);qs(t)}function n1(t,e,n,s,i,r,o,l,c,d,h,m,f,x){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},iT(e,r,m);var v=(r&62914560)===r?Sf-$n():(r&4194048)===r?lT-$n():0;if(v=P3(m,v),v!==null){mi=r,t.cancelPendingCommit=v(i1.bind(null,t,e,r,n,s,i,o,l,c,h,m,null,f,x)),lr(t,r,o,!d);return}}i1(t,e,r,n,s,i,o,l,c)}function ZI(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!Yn(r(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e,n,s){e&=~Nx,e&=~ya,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var r=31-Gn(i),o=1<<r;s[r]=-1,i&=~o}n!==0&&pN(t,n,e)}function Tf(){return Be&6?!0:(vu(0),!1)}function Sx(){if(Me!==null){if(Qe===0)var t=Me.return;else t=Me,ci=Pa=null,cx(t),Eo=null,zc=0,t=Me;for(;t!==null;)HS(t.alternate,t),t=t.return;Me=null}}function Fo(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,v3(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),mi=0,Sx(),et=t,Me=n=hi(t.current,null),Le=e,Qe=0,Pn=null,or=!1,dl=hu(t,e),_x=!1,Uo=Bn=Nx=ya=Rr=wt=0,Cn=xc=null,wg=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-Gn(s),r=1<<i;e|=t[i],s&=~r}return Si=e,xf(),n}function hT(t,e){Ie=null,Ne.H=Bc,e===ul||e===vf?(e=Mb(),Qe=3):e===nx?(e=Mb(),Qe=4):Qe=e===yx?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Pn=e,Me===null&&(wt=1,gh(t,cs(e,t.current)))}function fT(){var t=qn.current;return t===null?!0:(Le&4194048)===Le?hs===null:(Le&62914560)===Le||Le&536870912?t===hs:!1}function mT(){var t=Ne.H;return Ne.H=Bc,t===null?Bc:t}function pT(){var t=Ne.A;return Ne.A=WI,t}function wh(){wt=4,or||(Le&4194048)!==Le&&qn.current!==null||(dl=!0),!(Rr&134217727)&&!(ya&134217727)||et===null||lr(et,Le,Bn,!1)}function Zm(t,e,n){var s=Be;Be|=2;var i=mT(),r=pT();(et!==t||Le!==e)&&(bh=null,Fo(t,e)),e=!1;var o=wt;e:do try{if(Qe!==0&&Me!==null){var l=Me,c=Pn;switch(Qe){case 8:Sx(),o=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(e=!0);var d=Qe;if(Qe=0,Pn=null,po(t,l,c,d),n&&dl){o=0;break e}break;default:d=Qe,Qe=0,Pn=null,po(t,l,c,d)}}e3(),o=wt;break}catch(h){hT(t,h)}while(!0);return e&&t.shellSuspendCounter++,ci=Pa=null,Be=s,Ne.H=i,Ne.A=r,Me===null&&(et=null,Le=0,xf()),o}function e3(){for(;Me!==null;)gT(Me)}function t3(t,e){var n=Be;Be|=2;var s=mT(),i=pT();et!==t||Le!==e?(bh=null,vh=$n()+500,Fo(t,e)):dl=hu(t,e);e:do try{if(Qe!==0&&Me!==null){e=Me;var r=Pn;t:switch(Qe){case 1:Qe=0,Pn=null,po(t,e,r,1);break;case 2:case 9:if(Db(r)){Qe=0,Pn=null,s1(e);break}e=function(){Qe!==2&&Qe!==9||et!==t||(Qe=7),qs(t)},r.then(e,e);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Db(r)?(Qe=0,Pn=null,s1(e)):(Qe=0,Pn=null,po(t,e,r,7));break;case 5:var o=null;switch(Me.tag){case 26:o=Me.memoizedState;case 5:case 27:var l=Me;if(o?VT(o):l.stateNode.complete){Qe=0,Pn=null;var c=l.sibling;if(c!==null)Me=c;else{var d=l.return;d!==null?(Me=d,Ef(d)):Me=null}break t}}Qe=0,Pn=null,po(t,e,r,5);break;case 6:Qe=0,Pn=null,po(t,e,r,6);break;case 8:Sx(),wt=6;break e;default:throw Error(Y(462))}}n3();break}catch(h){hT(t,h)}while(!0);return ci=Pa=null,Ne.H=s,Ne.A=i,Be=n,Me!==null?0:(et=null,Le=0,xf(),wt)}function n3(){for(;Me!==null&&!TR();)gT(Me)}function gT(t){var e=$S(t.alternate,t,Si);t.memoizedProps=t.pendingProps,e===null?Ef(t):Me=e}function s1(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Xb(n,e,e.pendingProps,e.type,void 0,Le);break;case 11:e=Xb(n,e,e.pendingProps,e.type.render,e.ref,Le);break;case 5:cx(e);default:HS(n,e),e=Me=HN(e,Si),e=$S(n,e,Si)}t.memoizedProps=t.pendingProps,e===null?Ef(t):Me=e}function po(t,e,n,s){ci=Pa=null,cx(e),Eo=null,zc=0;var i=e.return;try{if(HI(t,i,e,n,Le)){wt=1,gh(t,cs(n,t.current)),Me=null;return}}catch(r){if(i!==null)throw Me=i,r;wt=1,gh(t,cs(n,t.current)),Me=null;return}e.flags&32768?(ze||s===1?t=!0:dl||Le&536870912?t=!1:(or=t=!0,(s===2||s===9||s===3||s===6)&&(s=qn.current,s!==null&&s.tag===13&&(s.flags|=16384))),xT(e,t)):Ef(e)}function Ef(t){var e=t;do{if(e.flags&32768){xT(e,or);return}t=e.return;var n=QI(e.alternate,e,Si);if(n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);wt===0&&(wt=5)}function xT(t,e){do{var n=YI(t.alternate,t);if(n!==null){n.flags&=32767,Me=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Me=t;return}Me=t=n}while(t!==null);wt=6,Me=null}function i1(t,e,n,s,i,r,o,l,c){t.cancelPendingCommit=null;do jf();while(Bt!==0);if(Be&6)throw Error(Y(327));if(e!==null){if(e===t.current)throw Error(Y(177));if(r=e.lanes|e.childLanes,r|=q0,OR(t,n,r,o,l,c),t===et&&(Me=et=null,Le=0),Bo=e,xr=t,mi=n,_g=r,Ng=i,cT=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,a3(rh,function(){return _T(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=Ne.T,Ne.T=null,i=Fe.p,Fe.p=2,o=Be,Be|=4;try{qI(t,e,n)}finally{Be=o,Fe.p=i,Ne.T=s}}Bt=1,yT(),vT(),bT()}}function yT(){if(Bt===1){Bt=0;var t=xr,e=Bo,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Ne.T,Ne.T=null;var s=Fe.p;Fe.p=2;var i=Be;Be|=4;try{tT(e,t);var r=Ag,o=VN(t.containerInfo),l=r.focusedElem,c=r.selectionRange;if(o!==l&&l&&l.ownerDocument&&ON(l.ownerDocument.documentElement,l)){if(c!==null&&Y0(l)){var d=c.start,h=c.end;if(h===void 0&&(h=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(h,l.value.length);else{var m=l.ownerDocument||document,f=m&&m.defaultView||window;if(f.getSelection){var x=f.getSelection(),v=l.textContent.length,C=Math.min(c.start,v),R=c.end===void 0?C:Math.min(c.end,v);!x.extend&&C>R&&(o=R,R=C,C=o);var S=Eb(l,C),y=Eb(l,R);if(S&&y&&(x.rangeCount!==1||x.anchorNode!==S.node||x.anchorOffset!==S.offset||x.focusNode!==y.node||x.focusOffset!==y.offset)){var _=m.createRange();_.setStart(S.node,S.offset),x.removeAllRanges(),C>R?(x.addRange(_),x.extend(y.node,y.offset)):(_.setEnd(y.node,y.offset),x.addRange(_))}}}}for(m=[],x=l;x=x.parentNode;)x.nodeType===1&&m.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<m.length;l++){var I=m[l];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Ch=!!jg,Ag=jg=null}finally{Be=i,Fe.p=s,Ne.T=n}}t.current=e,Bt=2}}function vT(){if(Bt===2){Bt=0;var t=xr,e=Bo,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Ne.T,Ne.T=null;var s=Fe.p;Fe.p=2;var i=Be;Be|=4;try{XS(t,e.alternate,e)}finally{Be=i,Fe.p=s,Ne.T=n}}Bt=3}}function bT(){if(Bt===4||Bt===3){Bt=0,ER();var t=xr,e=Bo,n=mi,s=cT;e.subtreeFlags&10256||e.flags&10256?Bt=5:(Bt=0,Bo=xr=null,wT(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(gr=null),B0(n),e=e.stateNode,Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(du,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=Ne.T,i=Fe.p,Fe.p=2,Ne.T=null;try{for(var r=t.onRecoverableError,o=0;o<s.length;o++){var l=s[o];r(l.value,{componentStack:l.stack})}}finally{Ne.T=e,Fe.p=i}}mi&3&&jf(),qs(t),i=t.pendingLanes,n&261930&&i&42?t===Sg?yc++:(yc=0,Sg=t):yc=0,vu(0)}}function wT(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,gu(e)))}function jf(){return yT(),vT(),bT(),_T()}function _T(){if(Bt!==5)return!1;var t=xr,e=_g;_g=0;var n=B0(mi),s=Ne.T,i=Fe.p;try{Fe.p=32>n?32:n,Ne.T=null,n=Ng,Ng=null;var r=xr,o=mi;if(Bt=0,Bo=xr=null,mi=0,Be&6)throw Error(Y(331));var l=Be;if(Be|=4,aT(r.current),sT(r,r.current,o,n),Be=l,vu(0,!1),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(du,r)}catch{}return!0}finally{Fe.p=i,Ne.T=s,wT(t,e)}}function r1(t,e,n){e=cs(n,e),e=xg(t.stateNode,e,2),t=pr(t,e,2),t!==null&&(fu(t,2),qs(t))}function Ye(t,e,n){if(t.tag===3)r1(t,t,n);else for(;e!==null;){if(e.tag===3){r1(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(gr===null||!gr.has(s))){t=cs(n,t),n=PS(2),s=pr(e,n,2),s!==null&&(LS(n,s,e,t),fu(s,2),qs(s));break}}e=e.return}}function ep(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new JI;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(_x=!0,i.add(n),t=s3.bind(null,t,e,n),e.then(t,t))}function s3(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,et===t&&(Le&n)===n&&(wt===4||wt===3&&(Le&62914560)===Le&&300>$n()-Sf?!(Be&2)&&Fo(t,0):Nx|=n,Uo===Le&&(Uo=0)),qs(t)}function NT(t,e){e===0&&(e=mN()),t=Va(t,e),t!==null&&(fu(t,e),qs(t))}function i3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),NT(t,n)}function r3(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(Y(314))}s!==null&&s.delete(e),NT(t,n)}function a3(t,e){return z0(t,e)}var _h=null,Ja=null,Tg=!1,Nh=!1,tp=!1,cr=0;function qs(t){t!==Ja&&t.next===null&&(Ja===null?_h=Ja=t:Ja=Ja.next=t),Nh=!0,Tg||(Tg=!0,l3())}function vu(t,e){if(!tp&&Nh){tp=!0;do for(var n=!1,s=_h;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var r=0;else{var o=s.suspendedLanes,l=s.pingedLanes;r=(1<<31-Gn(42|t)+1)-1,r&=i&~(o&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,a1(s,r))}else r=Le,r=ff(s,s===et?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(r&3)||hu(s,r)||(n=!0,a1(s,r));s=s.next}while(n);tp=!1}}function o3(){ST()}function ST(){Nh=Tg=!1;var t=0;cr!==0&&y3()&&(t=cr);for(var e=$n(),n=null,s=_h;s!==null;){var i=s.next,r=TT(s,e);r===0?(s.next=null,n===null?_h=i:n.next=i,i===null&&(Ja=n)):(n=s,(t!==0||r&3)&&(Nh=!0)),s=i}Bt!==0&&Bt!==5||vu(t),cr!==0&&(cr=0)}function TT(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var o=31-Gn(r),l=1<<o,c=i[o];c===-1?(!(l&n)||l&s)&&(i[o]=MR(l,e)):c<=e&&(t.expiredLanes|=l),r&=~l}if(e=et,n=Le,n=ff(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Cm(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||hu(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Cm(s),B0(n)){case 2:case 8:n=hN;break;case 32:n=rh;break;case 268435456:n=fN;break;default:n=rh}return s=ET.bind(null,t),n=z0(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Cm(s),t.callbackPriority=2,t.callbackNode=null,2}function ET(t,e){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(jf()&&t.callbackNode!==n)return null;var s=Le;return s=ff(t,t===et?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(dT(t,s,e),TT(t,$n()),t.callbackNode!=null&&t.callbackNode===n?ET.bind(null,t):null)}function a1(t,e){if(jf())return null;dT(t,e,!0)}function l3(){b3(function(){Be&6?z0(dN,o3):ST()})}function Tx(){if(cr===0){var t=Po;t===0&&(t=sd,sd<<=1,!(sd&261888)&&(sd=256)),cr=t}return cr}function o1(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ad(""+t)}function l1(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function c3(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var r=o1((i[Mn]||null).action),o=s.submitter;o&&(e=(e=o[Mn]||null)?o1(e.formAction):o.getAttribute("formAction"),e!==null&&(r=e,o=null));var l=new mf("action","action",null,s,i);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(cr!==0){var c=o?l1(i,o):new FormData(i);pg(n,{pending:!0,data:c,method:i.method,action:r},null,c)}}else typeof r=="function"&&(l.preventDefault(),c=o?l1(i,o):new FormData(i),pg(n,{pending:!0,data:c,method:i.method,action:r},r,c))},currentTarget:i}]})}}for(var np=0;np<sg.length;np++){var sp=sg[np],u3=sp.toLowerCase(),d3=sp[0].toUpperCase()+sp.slice(1);As(u3,"on"+d3)}As(LN,"onAnimationEnd");As(zN,"onAnimationIteration");As(UN,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(jI,"onTransitionRun");As(AI,"onTransitionStart");As(CI,"onTransitionCancel");As(BN,"onTransitionEnd");Oo("onMouseEnter",["mouseout","mouseover"]);Oo("onMouseLeave",["mouseout","mouseover"]);Oo("onPointerEnter",["pointerout","pointerover"]);Oo("onPointerLeave",["pointerout","pointerover"]);Da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Da("onBeforeInput",["compositionend","keypress","textInput","paste"]);Da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fc));function jT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=d;try{r(i)}catch(h){oh(h)}i.currentTarget=null,r=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=d;try{r(i)}catch(h){oh(h)}i.currentTarget=null,r=c}}}}function De(t,e){var n=e[qp];n===void 0&&(n=e[qp]=new Set);var s=t+"__bubble";n.has(s)||(AT(e,t,2,!1),n.add(s))}function ip(t,e,n){var s=0;e&&(s|=4),AT(n,t,s,e)}var fd="_reactListening"+Math.random().toString(36).slice(2);function Ex(t){if(!t[fd]){t[fd]=!0,vN.forEach(function(n){n!=="selectionchange"&&(h3.has(n)||ip(n,!1,t),ip(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fd]||(e[fd]=!0,ip("selectionchange",!1,e))}}function AT(t,e,n,s){switch(BT(e)){case 2:var i=U3;break;case 8:i=B3;break;default:i=Rx}n=i.bind(null,e,n,t),i=void 0,!eg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function rp(t,e,n,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===i)return;o=o.return}for(;l!==null;){if(o=ro(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){s=r=o;continue e}l=l.parentNode}}s=s.return}jN(function(){var d=r,h=H0(n),m=[];e:{var f=FN.get(t);if(f!==void 0){var x=mf,v=t;switch(t){case"keypress":if(Rd(n)===0)break e;case"keydown":case"keyup":x=rI;break;case"focusin":v="focus",x=Mm;break;case"focusout":v="blur",x=Mm;break;case"beforeblur":case"afterblur":x=Mm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=gb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=QR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=lI;break;case LN:case zN:case UN:x=XR;break;case BN:x=uI;break;case"scroll":case"scrollend":x=GR;break;case"wheel":x=hI;break;case"copy":case"cut":case"paste":x=JR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=yb;break;case"toggle":case"beforetoggle":x=mI}var C=(e&4)!==0,R=!C&&(t==="scroll"||t==="scrollend"),S=C?f!==null?f+"Capture":null:f;C=[];for(var y=d,_;y!==null;){var I=y;if(_=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||_===null||S===null||(I=Mc(y,S),I!=null&&C.push($c(y,I,_))),R)break;y=y.return}0<C.length&&(f=new x(f,v,null,n,h),m.push({event:f,listeners:C}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",f&&n!==Zp&&(v=n.relatedTarget||n.fromElement)&&(ro(v)||v[ol]))break e;if((x||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=d,v=v?ro(v):null,v!==null&&(R=uu(v),C=v.tag,v!==R||C!==5&&C!==27&&C!==6)&&(v=null)):(x=null,v=d),x!==v)){if(C=gb,I="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(C=yb,I="onPointerLeave",S="onPointerEnter",y="pointer"),R=x==null?f:Yl(x),_=v==null?f:Yl(v),f=new C(I,y+"leave",x,n,h),f.target=R,f.relatedTarget=_,I=null,ro(h)===d&&(C=new C(S,y+"enter",v,n,h),C.target=_,C.relatedTarget=R,I=C),R=I,x&&v)t:{for(C=f3,S=x,y=v,_=0,I=S;I;I=C(I))_++;I=0;for(var M=y;M;M=C(M))I++;for(;0<_-I;)S=C(S),_--;for(;0<I-_;)y=C(y),I--;for(;_--;){if(S===y||y!==null&&S===y.alternate){C=S;break t}S=C(S),y=C(y)}C=null}else C=null;x!==null&&c1(m,f,x,C,!1),v!==null&&R!==null&&c1(m,R,v,C,!0)}}e:{if(f=d?Yl(d):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var L=_b;else if(wb(f))if(DN)L=SI;else{L=_I;var T=wI}else x=f.nodeName,!x||x.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?d&&$0(d.elementType)&&(L=_b):L=NI;if(L&&(L=L(t,d))){kN(m,L,n,h);break e}T&&T(t,f,d),t==="focusout"&&d&&f.type==="number"&&d.memoizedProps.value!=null&&Jp(f,"number",f.value)}switch(T=d?Yl(d):window,t){case"focusin":(wb(T)||T.contentEditable==="true")&&(lo=T,tg=d,cc=null);break;case"focusout":cc=tg=lo=null;break;case"mousedown":ng=!0;break;case"contextmenu":case"mouseup":case"dragend":ng=!1,jb(m,n,h);break;case"selectionchange":if(EI)break;case"keydown":case"keyup":jb(m,n,h)}var p;if(Q0)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else oo?RN(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(CN&&n.locale!=="ko"&&(oo||N!=="onCompositionStart"?N==="onCompositionEnd"&&oo&&(p=AN()):(ar=h,G0="value"in ar?ar.value:ar.textContent,oo=!0)),T=Sh(d,N),0<T.length&&(N=new xb(N,t,null,n,h),m.push({event:N,listeners:T}),p?N.data=p:(p=IN(n),p!==null&&(N.data=p)))),(p=gI?xI(t,n):yI(t,n))&&(N=Sh(d,"onBeforeInput"),0<N.length&&(T=new xb("onBeforeInput","beforeinput",null,n,h),m.push({event:T,listeners:N}),T.data=p)),c3(m,t,d,n,h)}jT(m,e)})}function $c(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sh(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=Mc(t,n),i!=null&&s.unshift($c(t,i,r)),i=Mc(t,e),i!=null&&s.push($c(t,i,r))),t.tag===3)return s;t=t.return}return[]}function f3(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function c1(t,e,n,s,i){for(var r=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,i?(d=Mc(n,r),d!=null&&o.unshift($c(n,d,c))):i||(d=Mc(n,r),d!=null&&o.push($c(n,d,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var m3=/\r\n?/g,p3=/\u0000|\uFFFD/g;function u1(t){return(typeof t=="string"?t:""+t).replace(m3,`
`).replace(p3,"")}function CT(t,e){return e=u1(e),u1(t)===e}function Xe(t,e,n,s,i,r){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||Vo(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&Vo(t,""+s);break;case"className":ad(t,"class",s);break;case"tabIndex":ad(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":ad(t,n,s);break;case"style":EN(t,s,r);break;case"data":if(e!=="object"){ad(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Ad(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Xe(t,e,"name",i.name,i,null),Xe(t,e,"formEncType",i.formEncType,i,null),Xe(t,e,"formMethod",i.formMethod,i,null),Xe(t,e,"formTarget",i.formTarget,i,null)):(Xe(t,e,"encType",i.encType,i,null),Xe(t,e,"method",i.method,i,null),Xe(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Ad(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=li);break;case"onScroll":s!=null&&De("scroll",t);break;case"onScrollEnd":s!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Y(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(Y(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=Ad(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":De("beforetoggle",t),De("toggle",t),jd(t,"popover",s);break;case"xlinkActuate":Js(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Js(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Js(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Js(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Js(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Js(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Js(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Js(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Js(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":jd(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=$R.get(n)||n,jd(t,n,s))}}function Eg(t,e,n,s,i,r){switch(n){case"style":EN(t,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Y(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(Y(60));t.innerHTML=n}}break;case"children":typeof s=="string"?Vo(t,s):(typeof s=="number"||typeof s=="bigint")&&Vo(t,""+s);break;case"onScroll":s!=null&&De("scroll",t);break;case"onScrollEnd":s!=null&&De("scrollend",t);break;case"onClick":s!=null&&(t.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bN.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),r=t[Mn]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,i),typeof s=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):jd(t,n,s)}}}function cn(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var s=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(o!=null)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,e));default:Xe(t,e,r,o,n,null)}}i&&Xe(t,e,"srcSet",n.srcSet,n,null),s&&Xe(t,e,"src",n.src,n,null);return;case"input":De("invalid",t);var l=r=o=i=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"name":i=h;break;case"type":o=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(Y(137,e));break;default:Xe(t,e,s,h,n,null)}}NN(t,r,l,c,d,o,i,!1);return;case"select":De("invalid",t),s=o=r=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Xe(t,e,i,l,n,null)}e=r,n=o,t.multiple=!!s,e!=null?No(t,!!s,e,!1):n!=null&&No(t,!!s,n,!0);return;case"textarea":De("invalid",t),r=i=s=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Y(91));break;default:Xe(t,e,o,l,n,null)}TN(t,s,i,r);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Xe(t,e,c,s,n,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(s=0;s<Fc.length;s++)De(Fc[s],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,e));default:Xe(t,e,d,s,n,null)}return;default:if($0(e)){for(h in n)n.hasOwnProperty(h)&&(s=n[h],s!==void 0&&Eg(t,e,h,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Xe(t,e,l,s,n,null))}function g3(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,o=null,l=null,c=null,d=null,h=null;for(x in n){var m=n[x];if(n.hasOwnProperty(x)&&m!=null)switch(x){case"checked":break;case"value":break;case"defaultValue":c=m;default:s.hasOwnProperty(x)||Xe(t,e,x,null,s,m)}}for(var f in s){var x=s[f];if(m=n[f],s.hasOwnProperty(f)&&(x!=null||m!=null))switch(f){case"type":r=x;break;case"name":i=x;break;case"checked":d=x;break;case"defaultChecked":h=x;break;case"value":o=x;break;case"defaultValue":l=x;break;case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(Y(137,e));break;default:x!==m&&Xe(t,e,f,x,s,m)}}Wp(t,o,l,c,d,h,r,i);return;case"select":x=o=l=f=null;for(r in n)if(c=n[r],n.hasOwnProperty(r)&&c!=null)switch(r){case"value":break;case"multiple":x=c;default:s.hasOwnProperty(r)||Xe(t,e,r,null,s,c)}for(i in s)if(r=s[i],c=n[i],s.hasOwnProperty(i)&&(r!=null||c!=null))switch(i){case"value":f=r;break;case"defaultValue":l=r;break;case"multiple":o=r;default:r!==c&&Xe(t,e,i,r,s,c)}e=l,n=o,s=x,f!=null?No(t,!!n,f,!1):!!s!=!!n&&(e!=null?No(t,!!n,e,!0):No(t,!!n,n?[]:"",!1));return;case"textarea":x=f=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Xe(t,e,l,null,s,i)}for(o in s)if(i=s[o],r=n[o],s.hasOwnProperty(o)&&(i!=null||r!=null))switch(o){case"value":f=i;break;case"defaultValue":x=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(Y(91));break;default:i!==r&&Xe(t,e,o,i,s,r)}SN(t,f,x);return;case"option":for(var v in n)if(f=n[v],n.hasOwnProperty(v)&&f!=null&&!s.hasOwnProperty(v))switch(v){case"selected":t.selected=!1;break;default:Xe(t,e,v,null,s,f)}for(c in s)if(f=s[c],x=n[c],s.hasOwnProperty(c)&&f!==x&&(f!=null||x!=null))switch(c){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Xe(t,e,c,f,s,x)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var C in n)f=n[C],n.hasOwnProperty(C)&&f!=null&&!s.hasOwnProperty(C)&&Xe(t,e,C,null,s,f);for(d in s)if(f=s[d],x=n[d],s.hasOwnProperty(d)&&f!==x&&(f!=null||x!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(Y(137,e));break;default:Xe(t,e,d,f,s,x)}return;default:if($0(e)){for(var R in n)f=n[R],n.hasOwnProperty(R)&&f!==void 0&&!s.hasOwnProperty(R)&&Eg(t,e,R,void 0,s,f);for(h in s)f=s[h],x=n[h],!s.hasOwnProperty(h)||f===x||f===void 0&&x===void 0||Eg(t,e,h,f,s,x);return}}for(var S in n)f=n[S],n.hasOwnProperty(S)&&f!=null&&!s.hasOwnProperty(S)&&Xe(t,e,S,null,s,f);for(m in s)f=s[m],x=n[m],!s.hasOwnProperty(m)||f===x||f==null&&x==null||Xe(t,e,m,f,s,x)}function d1(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function x3(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],r=i.transferSize,o=i.initiatorType,l=i.duration;if(r&&l&&d1(o)){for(o=0,l=i.responseEnd,s+=1;s<n.length;s++){var c=n[s],d=c.startTime;if(d>l)break;var h=c.transferSize,m=c.initiatorType;h&&d1(m)&&(c=c.responseEnd,o+=h*(c<l?1:(l-d)/(c-d)))}if(--s,e+=8*(r+o)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var jg=null,Ag=null;function Th(t){return t.nodeType===9?t:t.ownerDocument}function h1(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function RT(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ap=null;function y3(){var t=window.event;return t&&t.type==="popstate"?t===ap?!1:(ap=t,!0):(ap=null,!1)}var IT=typeof setTimeout=="function"?setTimeout:void 0,v3=typeof clearTimeout=="function"?clearTimeout:void 0,f1=typeof Promise=="function"?Promise:void 0,b3=typeof queueMicrotask=="function"?queueMicrotask:typeof f1<"u"?function(t){return f1.resolve(null).then(t).catch(w3)}:IT;function w3(t){setTimeout(function(){throw t})}function Br(t){return t==="head"}function m1(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(i),Ho(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")vc(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,vc(n);for(var r=n.firstChild;r;){var o=r.nextSibling,l=r.nodeName;r[mu]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=o}}else n==="body"&&vc(t.ownerDocument.body);n=i}while(n);Ho(e)}function p1(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function Rg(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Rg(n),F0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function _3(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[mu])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=fs(t.nextSibling),t===null)break}return null}function N3(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=fs(t.nextSibling),t===null))return null;return t}function kT(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=fs(t.nextSibling),t===null))return null;return t}function Ig(t){return t.data==="$?"||t.data==="$~"}function kg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function S3(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Dg=null;function g1(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return fs(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function x1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function DT(t,e,n){switch(e=Th(n),t){case"html":if(t=e.documentElement,!t)throw Error(Y(452));return t;case"head":if(t=e.head,!t)throw Error(Y(453));return t;case"body":if(t=e.body,!t)throw Error(Y(454));return t;default:throw Error(Y(451))}}function vc(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);F0(t)}var ps=new Map,y1=new Set;function Eh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Mi=Fe.d;Fe.d={f:T3,r:E3,D:j3,C:A3,L:C3,m:R3,X:k3,S:I3,M:D3};function T3(){var t=Mi.f(),e=Tf();return t||e}function E3(t){var e=ll(t);e!==null&&e.tag===5&&e.type==="form"?ES(e):Mi.r(t)}var hl=typeof document>"u"?null:document;function MT(t,e,n){var s=hl;if(s&&typeof e=="string"&&e){var i=ls(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),y1.has(i)||(y1.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),cn(e,"link",t),Xt(e),s.head.appendChild(e)))}}function j3(t){Mi.D(t),MT("dns-prefetch",t,null)}function A3(t,e){Mi.C(t,e),MT("preconnect",t,e)}function C3(t,e,n){Mi.L(t,e,n);var s=hl;if(s&&t&&e){var i='link[rel="preload"][as="'+ls(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+ls(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+ls(n.imageSizes)+'"]')):i+='[href="'+ls(t)+'"]';var r=i;switch(e){case"style":r=$o(t);break;case"script":r=fl(t)}ps.has(r)||(t=dt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ps.set(r,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(bu(r))||e==="script"&&s.querySelector(wu(r))||(e=s.createElement("link"),cn(e,"link",t),Xt(e),s.head.appendChild(e)))}}function R3(t,e){Mi.m(t,e);var n=hl;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+ls(s)+'"][href="'+ls(t)+'"]',r=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=fl(t)}if(!ps.has(r)&&(t=dt({rel:"modulepreload",href:t},e),ps.set(r,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(wu(r)))return}s=n.createElement("link"),cn(s,"link",t),Xt(s),n.head.appendChild(s)}}}function I3(t,e,n){Mi.S(t,e,n);var s=hl;if(s&&t){var i=_o(s).hoistableStyles,r=$o(t);e=e||"default";var o=i.get(r);if(!o){var l={loading:0,preload:null};if(o=s.querySelector(bu(r)))l.loading=5;else{t=dt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ps.get(r))&&jx(t,n);var c=o=s.createElement("link");Xt(c),cn(c,"link",t),c._p=new Promise(function(d,h){c.onload=d,c.onerror=h}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Ld(o,e,s)}o={type:"stylesheet",instance:o,count:1,state:l},i.set(r,o)}}}function k3(t,e){Mi.X(t,e);var n=hl;if(n&&t){var s=_o(n).hoistableScripts,i=fl(t),r=s.get(i);r||(r=n.querySelector(wu(i)),r||(t=dt({src:t,async:!0},e),(e=ps.get(i))&&Ax(t,e),r=n.createElement("script"),Xt(r),cn(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function D3(t,e){Mi.M(t,e);var n=hl;if(n&&t){var s=_o(n).hoistableScripts,i=fl(t),r=s.get(i);r||(r=n.querySelector(wu(i)),r||(t=dt({src:t,async:!0,type:"module"},e),(e=ps.get(i))&&Ax(t,e),r=n.createElement("script"),Xt(r),cn(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function v1(t,e,n,s){var i=(i=hr.current)?Eh(i):null;if(!i)throw Error(Y(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=$o(n.href),n=_o(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=$o(n.href);var r=_o(i).hoistableStyles,o=r.get(t);if(o||(i=i.ownerDocument||i,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,o),(r=i.querySelector(bu(t)))&&!r._p&&(o.instance=r,o.state.loading=5),ps.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ps.set(t,n),r||M3(i,t,n,o.state))),e&&s===null)throw Error(Y(528,""));return o}if(e&&s!==null)throw Error(Y(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=fl(n),n=_o(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(Y(444,t))}}function $o(t){return'href="'+ls(t)+'"'}function bu(t){return'link[rel="stylesheet"]['+t+"]"}function OT(t){return dt({},t,{"data-precedence":t.precedence,precedence:null})}function M3(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),cn(e,"link",n),Xt(e),t.head.appendChild(e))}function fl(t){return'[src="'+ls(t)+'"]'}function wu(t){return"script[async]"+t}function b1(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+ls(n.href)+'"]');if(s)return e.instance=s,Xt(s),s;var i=dt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Xt(s),cn(s,"style",i),Ld(s,n.precedence,t),e.instance=s;case"stylesheet":i=$o(n.href);var r=t.querySelector(bu(i));if(r)return e.state.loading|=4,e.instance=r,Xt(r),r;s=OT(n),(i=ps.get(i))&&jx(s,i),r=(t.ownerDocument||t).createElement("link"),Xt(r);var o=r;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),cn(r,"link",s),e.state.loading|=4,Ld(r,n.precedence,t),e.instance=r;case"script":return r=fl(n.src),(i=t.querySelector(wu(r)))?(e.instance=i,Xt(i),i):(s=n,(i=ps.get(r))&&(s=dt({},n),Ax(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),Xt(i),cn(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(Y(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,Ld(s,n.precedence,t));return e.instance}function Ld(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,r=i,o=0;o<s.length;o++){var l=s[o];if(l.dataset.precedence===e)r=l;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function jx(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Ax(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var zd=null;function w1(t,e,n){if(zd===null){var s=new Map,i=zd=new Map;i.set(n,s)}else i=zd,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var r=n[i];if(!(r[mu]||r[sn]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(e)||"";o=t+o;var l=s.get(o);l?l.push(r):s.set(o,[r])}}return s}function _1(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function O3(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function VT(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function V3(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=$o(s.href),r=e.querySelector(bu(i));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=jh.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,Xt(r);return}r=e.ownerDocument||e,s=OT(s),(i=ps.get(i))&&jx(s,i),r=r.createElement("link"),Xt(r);var o=r;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),cn(r,"link",s),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=jh.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var op=0;function P3(t,e){return t.stylesheets&&t.count===0&&Ud(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Ud(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&op===0&&(op=62500*x3());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ud(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>op?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ud(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ah=null;function Ud(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ah=new Map,e.forEach(L3,t),Ah=null,jh.call(t))}function L3(t,e){if(!(e.state.loading&4)){var n=Ah.get(t);if(n)var s=n.get(null);else{n=new Map,Ah.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var o=i[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),s=o)}s&&n.set(null,s)}i=e.instance,o=i.getAttribute("data-precedence"),r=n.get(o)||s,r===s&&n.set(null,i),n.set(o,i),this.count++,s=jh.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Hc={$$typeof:oi,Provider:null,Consumer:null,_currentValue:ma,_currentValue2:ma,_threadCount:0};function z3(t,e,n,s,i,r,o,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rm(0),this.hiddenUpdates=Rm(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function PT(t,e,n,s,i,r,o,l,c,d,h,m){return t=new z3(t,e,n,o,c,d,h,m,l),e=1,r===!0&&(e|=24),r=zn(3,null,null,e),t.current=r,r.stateNode=t,e=ex(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:e},sx(r),t}function LT(t){return t?(t=ho,t):ho}function zT(t,e,n,s,i,r){i=LT(i),s.context===null?s.context=i:s.pendingContext=i,s=mr(e),s.payload={element:n},r=r===void 0?null:r,r!==null&&(s.callback=r),n=pr(t,s,e),n!==null&&(kn(n,t,e),dc(n,t,e))}function N1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cx(t,e){N1(t,e),(t=t.alternate)&&N1(t,e)}function UT(t){if(t.tag===13||t.tag===31){var e=Va(t,67108864);e!==null&&kn(e,t,67108864),Cx(t,67108864)}}function S1(t){if(t.tag===13||t.tag===31){var e=Kn();e=U0(e);var n=Va(t,e);n!==null&&kn(n,t,e),Cx(t,e)}}var Ch=!0;function U3(t,e,n,s){var i=Ne.T;Ne.T=null;var r=Fe.p;try{Fe.p=2,Rx(t,e,n,s)}finally{Fe.p=r,Ne.T=i}}function B3(t,e,n,s){var i=Ne.T;Ne.T=null;var r=Fe.p;try{Fe.p=8,Rx(t,e,n,s)}finally{Fe.p=r,Ne.T=i}}function Rx(t,e,n,s){if(Ch){var i=Mg(s);if(i===null)rp(t,e,s,Rh,n),T1(t,s);else if($3(i,t,e,n,s))s.stopPropagation();else if(T1(t,s),e&4&&-1<F3.indexOf(t)){for(;i!==null;){var r=ll(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=na(r.pendingLanes);if(o!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-Gn(o);l.entanglements[1]|=c,o&=~c}qs(r),!(Be&6)&&(vh=$n()+500,vu(0))}}break;case 31:case 13:l=Va(r,2),l!==null&&kn(l,r,2),Tf(),Cx(r,2)}if(r=Mg(s),r===null&&rp(t,e,s,Rh,n),r===i)break;i=r}i!==null&&s.stopPropagation()}else rp(t,e,s,null,n)}}function Mg(t){return t=H0(t),Ix(t)}var Rh=null;function Ix(t){if(Rh=null,t=ro(t),t!==null){var e=uu(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=aN(e),t!==null)return t;t=null}else if(n===31){if(t=oN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Rh=t,null}function BT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jR()){case dN:return 2;case hN:return 8;case rh:case AR:return 32;case fN:return 268435456;default:return 32}default:return 32}}var Og=!1,yr=null,vr=null,br=null,Gc=new Map,Kc=new Map,er=[],F3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T1(t,e){switch(t){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Gc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kc.delete(e.pointerId)}}function $l(t,e,n,s,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=ll(e),e!==null&&UT(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function $3(t,e,n,s,i){switch(e){case"focusin":return yr=$l(yr,t,e,n,s,i),!0;case"dragenter":return vr=$l(vr,t,e,n,s,i),!0;case"mouseover":return br=$l(br,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return Gc.set(r,$l(Gc.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,Kc.set(r,$l(Kc.get(r)||null,t,e,n,s,i)),!0}return!1}function FT(t){var e=ro(t.target);if(e!==null){var n=uu(e);if(n!==null){if(e=n.tag,e===13){if(e=aN(n),e!==null){t.blockedOn=e,cb(t.priority,function(){S1(n)});return}}else if(e===31){if(e=oN(n),e!==null){t.blockedOn=e,cb(t.priority,function(){S1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mg(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Zp=s,n.target.dispatchEvent(s),Zp=null}else return e=ll(n),e!==null&&UT(e),t.blockedOn=n,!1;e.shift()}return!0}function E1(t,e,n){Bd(t)&&n.delete(e)}function H3(){Og=!1,yr!==null&&Bd(yr)&&(yr=null),vr!==null&&Bd(vr)&&(vr=null),br!==null&&Bd(br)&&(br=null),Gc.forEach(E1),Kc.forEach(E1)}function md(t,e){t.blockedOn===e&&(t.blockedOn=null,Og||(Og=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,H3)))}var pd=null;function j1(t){pd!==t&&(pd=t,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,function(){pd===t&&(pd=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(Ix(s||n)===null)continue;break}var r=ll(n);r!==null&&(t.splice(e,3),e-=3,pg(r,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function Ho(t){function e(c){return md(c,t)}yr!==null&&md(yr,t),vr!==null&&md(vr,t),br!==null&&md(br,t),Gc.forEach(e),Kc.forEach(e);for(var n=0;n<er.length;n++){var s=er[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<er.length&&(n=er[0],n.blockedOn===null);)FT(n),n.blockedOn===null&&er.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],r=n[s+1],o=i[Mn]||null;if(typeof r=="function")o||j1(n);else if(o){var l=null;if(r&&r.hasAttribute("formAction")){if(i=r,o=r[Mn]||null)l=o.formAction;else if(Ix(i)!==null)continue}else l=o.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),j1(n)}}}function $T(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(o){return i=o})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function kx(t){this._internalRoot=t}Af.prototype.render=kx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));var n=e.current,s=Kn();zT(n,s,t,e,null,null)};Af.prototype.unmount=kx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zT(t.current,2,null,t,null,null),Tf(),e[ol]=null}};function Af(t){this._internalRoot=t}Af.prototype.unstable_scheduleHydration=function(t){if(t){var e=yN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&FT(t)}};var A1=iN.version;if(A1!=="19.2.3")throw Error(Y(527,A1,"19.2.3"));Fe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=bR(e),t=t!==null?lN(t):null,t=t===null?null:t.stateNode,t};var G3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Ne,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{du=gd.inject(G3),Hn=gd}catch{}}df.createRoot=function(t,e){if(!rN(t))throw Error(Y(299));var n=!1,s="",i=MS,r=OS,o=VS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=PT(t,1,!1,null,null,n,s,null,i,r,o,$T),t[ol]=e.current,Ex(t),new kx(e)};df.hydrateRoot=function(t,e,n){if(!rN(t))throw Error(Y(299));var s=!1,i="",r=MS,o=OS,l=VS,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=PT(t,1,!0,e,n??null,s,i,c,r,o,l,$T),e.context=LT(null),n=e.current,s=Kn(),s=U0(s),i=mr(s),i.callback=null,pr(n,i,s),n=s,e.current.lanes=n,fu(e,n),qs(e),t[ol]=e.current,Ex(t),new Af(e)};df.version="19.2.3";function HT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HT)}catch(t){console.error(t)}}HT(),J2.exports=df;var K3=J2.exports;const Q3=B2(K3);/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qc(){return Qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Qc.apply(this,arguments)}var ur;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ur||(ur={}));const C1="popstate";function Y3(t){t===void 0&&(t={});function e(s,i){let{pathname:r,search:o,hash:l}=s.location;return Vg("",{pathname:r,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:Ih(i)}return X3(e,n,null,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Dx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function q3(){return Math.random().toString(36).substr(2,8)}function R1(t,e){return{usr:t.state,key:t.key,idx:e}}function Vg(t,e,n,s){return n===void 0&&(n=null),Qc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ml(e):e,{state:n,key:e&&e.key||s||q3()})}function Ih(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ml(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function X3(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:r=!1}=s,o=i.history,l=ur.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Qc({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){l=ur.Pop;let R=h(),S=R==null?null:R-d;d=R,c&&c({action:l,location:C.location,delta:S})}function f(R,S){l=ur.Push;let y=Vg(C.location,R,S);d=h()+1;let _=R1(y,d),I=C.createHref(y);try{o.pushState(_,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(I)}r&&c&&c({action:l,location:C.location,delta:1})}function x(R,S){l=ur.Replace;let y=Vg(C.location,R,S);d=h();let _=R1(y,d),I=C.createHref(y);o.replaceState(_,"",I),r&&c&&c({action:l,location:C.location,delta:0})}function v(R){let S=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof R=="string"?R:Ih(R);return y=y.replace(/ $/,"%20"),pt(S,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,S)}let C={get action(){return l},get location(){return t(i,o)},listen(R){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(C1,m),c=R,()=>{i.removeEventListener(C1,m),c=null}},createHref(R){return e(i,R)},createURL:v,encodeLocation(R){let S=v(R);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:f,replace:x,go(R){return o.go(R)}};return C}var I1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(I1||(I1={}));function W3(t,e,n){return n===void 0&&(n="/"),J3(t,e,n)}function J3(t,e,n,s){let i=typeof e=="string"?ml(e):e,r=Go(i.pathname||"/",n);if(r==null)return null;let o=GT(t);Z3(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=uk(r);l=lk(o[c],d)}return l}function GT(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(r,o,l)=>{let c={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};c.relativePath.startsWith("/")&&(pt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=wr([s,c.relativePath]),h=n.concat(c);r.children&&r.children.length>0&&(pt(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),GT(r.children,e,h,d)),!(r.path==null&&!r.index)&&e.push({path:d,score:ak(d,r.index),routesMeta:h})};return t.forEach((r,o)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))i(r,o);else for(let c of KT(r.path))i(r,o,c)}),e}function KT(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),r=n.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let o=KT(s.join("/")),l=[];return l.push(...o.map(c=>c===""?r:[r,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Z3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ok(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const ek=/^:[\w-]+$/,tk=3,nk=2,sk=1,ik=10,rk=-2,k1=t=>t==="*";function ak(t,e){let n=t.split("/"),s=n.length;return n.some(k1)&&(s+=rk),e&&(s+=nk),n.filter(i=>!k1(i)).reduce((i,r)=>i+(ek.test(r)?tk:r===""?sk:ik),s)}function ok(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function lk(t,e,n){let{routesMeta:s}=t,i={},r="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,h=r==="/"?e:e.slice(r.length)||"/",m=Pg({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),f=c.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:wr([r,m.pathname]),pathnameBase:pk(wr([r,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(r=wr([r,m.pathnameBase]))}return o}function Pg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=ck(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((d,h,m)=>{let{paramName:f,isOptional:x}=h;if(f==="*"){let C=l[m]||"";o=r.slice(0,r.length-C.length).replace(/(.)\/+$/,"$1")}const v=l[m];return x&&!v?d[f]=void 0:d[f]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:o,pattern:t}}function ck(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Dx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function uk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Go(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const dk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hk=t=>dk.test(t);function fk(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?ml(t):t,r;if(n)if(hk(n))r=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Dx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?r=D1(n.substring(1),"/"):r=D1(n,e)}else r=e;return{pathname:r,search:gk(s),hash:xk(i)}}function D1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function lp(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mx(t,e){let n=mk(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Ox(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=ml(t):(i=Qc({},t),pt(!i.pathname||!i.pathname.includes("?"),lp("?","pathname","search",i)),pt(!i.pathname||!i.pathname.includes("#"),lp("#","pathname","hash",i)),pt(!i.search||!i.search.includes("#"),lp("#","search","hash",i)));let r=t===""||i.pathname==="",o=r?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),m-=1;i.pathname=f.join("/")}l=m>=0?e[m]:"/"}let c=fk(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const wr=t=>t.join("/").replace(/\/\/+/g,"/"),pk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const QT=["post","put","patch","delete"];new Set(QT);const vk=["get",...QT];new Set(vk);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yc(){return Yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Yc.apply(this,arguments)}const Cf=D.createContext(null),YT=D.createContext(null),Oi=D.createContext(null),Rf=D.createContext(null),Xs=D.createContext({outlet:null,matches:[],isDataRoute:!1}),qT=D.createContext(null);function bk(t,e){let{relative:n}=e===void 0?{}:e;pl()||pt(!1);let{basename:s,navigator:i}=D.useContext(Oi),{hash:r,pathname:o,search:l}=If(t,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:wr([s,o])),i.createHref({pathname:c,search:l,hash:r})}function pl(){return D.useContext(Rf)!=null}function Fr(){return pl()||pt(!1),D.useContext(Rf).location}function XT(t){D.useContext(Oi).static||D.useLayoutEffect(t)}function vn(){let{isDataRoute:t}=D.useContext(Xs);return t?Ok():wk()}function wk(){pl()||pt(!1);let t=D.useContext(Cf),{basename:e,future:n,navigator:s}=D.useContext(Oi),{matches:i}=D.useContext(Xs),{pathname:r}=Fr(),o=JSON.stringify(Mx(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return XT(()=>{l.current=!0}),D.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let m=Ox(d,JSON.parse(o),r,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:wr([e,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[e,s,o,r,t])}const _k=D.createContext(null);function Nk(t){let e=D.useContext(Xs).outlet;return e&&D.createElement(_k.Provider,{value:t},e)}function WT(){let{matches:t}=D.useContext(Xs),e=t[t.length-1];return e?e.params:{}}function If(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=D.useContext(Oi),{matches:i}=D.useContext(Xs),{pathname:r}=Fr(),o=JSON.stringify(Mx(i,s.v7_relativeSplatPath));return D.useMemo(()=>Ox(t,JSON.parse(o),r,n==="path"),[t,o,r,n])}function Sk(t,e){return Tk(t,e)}function Tk(t,e,n,s){pl()||pt(!1);let{navigator:i}=D.useContext(Oi),{matches:r}=D.useContext(Xs),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Fr(),h;if(e){var m;let R=typeof e=="string"?ml(e):e;c==="/"||(m=R.pathname)!=null&&m.startsWith(c)||pt(!1),h=R}else h=d;let f=h.pathname||"/",x=f;if(c!=="/"){let R=c.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(R.length).join("/")}let v=W3(t,{pathname:x}),C=Rk(v&&v.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:wr([c,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?c:wr([c,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),r,n,s);return e&&C?D.createElement(Rf.Provider,{value:{location:Yc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ur.Pop}},C):C}function Ek(){let t=Mk(),e=yk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const jk=D.createElement(Ek,null);class Ak extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Xs.Provider,{value:this.props.routeContext},D.createElement(qT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ck(t){let{routeContext:e,match:n,children:s}=t,i=D.useContext(Cf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Xs.Provider,{value:e},s)}function Rk(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var r;if(!n)return null;if(n.errors)t=n.matches;else if((r=s)!=null&&r.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||pt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:f,errors:x}=n,v=m.route.loader&&f[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||v){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,f)=>{let x,v=!1,C=null,R=null;n&&(x=l&&m.route.id?l[m.route.id]:void 0,C=m.route.errorElement||jk,c&&(d<0&&f===0?(Vk("route-fallback"),v=!0,R=null):d===f&&(v=!0,R=m.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,f+1)),y=()=>{let _;return x?_=C:v?_=R:m.route.Component?_=D.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=h,D.createElement(Ck,{match:m,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:_})};return n&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?D.createElement(Ak,{location:n.location,revalidation:n.revalidation,component:C,error:x,children:y(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):y()},null)}var JT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(JT||{}),ZT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ZT||{});function Ik(t){let e=D.useContext(Cf);return e||pt(!1),e}function kk(t){let e=D.useContext(YT);return e||pt(!1),e}function Dk(t){let e=D.useContext(Xs);return e||pt(!1),e}function eE(t){let e=Dk(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function Mk(){var t;let e=D.useContext(qT),n=kk(),s=eE();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function Ok(){let{router:t}=Ik(JT.UseNavigateStable),e=eE(ZT.UseNavigateStable),n=D.useRef(!1);return XT(()=>{n.current=!0}),D.useCallback(function(i,r){r===void 0&&(r={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Yc({fromRouteId:e},r)))},[t,e])}const M1={};function Vk(t,e,n){M1[t]||(M1[t]=!0)}function Pk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function tE(t){let{to:e,replace:n,state:s,relative:i}=t;pl()||pt(!1);let{future:r,static:o}=D.useContext(Oi),{matches:l}=D.useContext(Xs),{pathname:c}=Fr(),d=vn(),h=Ox(e,Mx(l,r.v7_relativeSplatPath),c,i==="path"),m=JSON.stringify(h);return D.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:i}),[d,m,i,n,s]),null}function Lk(t){return Nk(t.context)}function Kt(t){pt(!1)}function zk(t){let{basename:e="/",children:n=null,location:s,navigationType:i=ur.Pop,navigator:r,static:o=!1,future:l}=t;pl()&&pt(!1);let c=e.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:c,navigator:r,static:o,future:Yc({v7_relativeSplatPath:!1},l)}),[c,l,r,o]);typeof s=="string"&&(s=ml(s));let{pathname:h="/",search:m="",hash:f="",state:x=null,key:v="default"}=s,C=D.useMemo(()=>{let R=Go(h,c);return R==null?null:{location:{pathname:R,search:m,hash:f,state:x,key:v},navigationType:i}},[c,h,m,f,x,v,i]);return C==null?null:D.createElement(Oi.Provider,{value:d},D.createElement(Rf.Provider,{children:n,value:C}))}function Uk(t){let{children:e,location:n}=t;return Sk(Lg(e),n)}new Promise(()=>{});function Lg(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(s,i)=>{if(!D.isValidElement(s))return;let r=[...e,i];if(s.type===D.Fragment){n.push.apply(n,Lg(s.props.children,r));return}s.type!==Kt&&pt(!1),!s.props.index||!s.props.children||pt(!1);let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Lg(s.props.children,r)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kh(){return kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},kh.apply(this,arguments)}function nE(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,r;for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Bk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Fk(t,e){return t.button===0&&(!e||e==="_self")&&!Bk(t)}function zg(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function $k(t,e){let n=zg(t);return e&&e.forEach((s,i)=>{n.has(i)||e.getAll(i).forEach(r=>{n.append(i,r)})}),n}const Hk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Gk=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Kk="6";try{window.__reactRouterVersion=Kk}catch{}const Qk=D.createContext({isTransitioning:!1}),Yk="startTransition",O1=fR[Yk];function qk(t){let{basename:e,children:n,future:s,window:i}=t,r=D.useRef();r.current==null&&(r.current=Y3({window:i,v5Compat:!0}));let o=r.current,[l,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},h=D.useCallback(m=>{d&&O1?O1(()=>c(m)):c(m)},[c,d]);return D.useLayoutEffect(()=>o.listen(h),[o,h]),D.useEffect(()=>Pk(s),[s]),D.createElement(zk,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:s})}const Xk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jk=D.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:r,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:m}=e,f=nE(e,Hk),{basename:x}=D.useContext(Oi),v,C=!1;if(typeof d=="string"&&Wk.test(d)&&(v=d,Xk))try{let _=new URL(window.location.href),I=d.startsWith("//")?new URL(_.protocol+d):new URL(d),M=Go(I.pathname,x);I.origin===_.origin&&M!=null?d=M+I.search+I.hash:C=!0}catch{}let R=bk(d,{relative:i}),S=t5(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:m});function y(_){s&&s(_),_.defaultPrevented||S(_)}return D.createElement("a",kh({},f,{href:v||R,onClick:C||r?s:y,ref:n,target:c}))}),Zk=D.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:i=!1,className:r="",end:o=!1,style:l,to:c,viewTransition:d,children:h}=e,m=nE(e,Gk),f=If(c,{relative:m.relative}),x=Fr(),v=D.useContext(YT),{navigator:C,basename:R}=D.useContext(Oi),S=v!=null&&s5(f)&&d===!0,y=C.encodeLocation?C.encodeLocation(f).pathname:f.pathname,_=x.pathname,I=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(_=_.toLowerCase(),I=I?I.toLowerCase():null,y=y.toLowerCase()),I&&R&&(I=Go(I,R)||I);const M=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let L=_===y||!o&&_.startsWith(y)&&_.charAt(M)==="/",T=I!=null&&(I===y||!o&&I.startsWith(y)&&I.charAt(y.length)==="/"),p={isActive:L,isPending:T,isTransitioning:S},N=L?s:void 0,E;typeof r=="function"?E=r(p):E=[r,L?"active":null,T?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(p):l;return D.createElement(Jk,kh({},m,{"aria-current":N,className:E,ref:n,style:j,to:c,viewTransition:d}),typeof h=="function"?h(p):h)});var Ug;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ug||(Ug={}));var V1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(V1||(V1={}));function e5(t){let e=D.useContext(Cf);return e||pt(!1),e}function t5(t,e){let{target:n,replace:s,state:i,preventScrollReset:r,relative:o,viewTransition:l}=e===void 0?{}:e,c=vn(),d=Fr(),h=If(t,{relative:o});return D.useCallback(m=>{if(Fk(m,n)){m.preventDefault();let f=s!==void 0?s:Ih(d)===Ih(h);c(t,{replace:f,state:i,preventScrollReset:r,relative:o,viewTransition:l})}},[d,c,h,s,i,n,t,r,o,l])}function n5(t){let e=D.useRef(zg(t)),n=D.useRef(!1),s=Fr(),i=D.useMemo(()=>$k(s.search,n.current?null:e.current),[s.search]),r=vn(),o=D.useCallback((l,c)=>{const d=zg(typeof l=="function"?l(i):l);n.current=!0,r("?"+d,c)},[r,i]);return[i,o]}function s5(t,e){e===void 0&&(e={});let n=D.useContext(Qk);n==null&&pt(!1);let{basename:s}=e5(Ug.useViewTransitionState),i=If(t,{relative:e.relative});if(!n.isTransitioning)return!1;let r=Go(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Go(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Pg(i.pathname,o)!=null||Pg(i.pathname,r)!=null}const i5=()=>{};var P1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},r5=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=r>>2,m=(r&3)<<4|l>>4;let f=(l&15)<<2|d>>6,x=d&63;c||(x=64,o||(f=64)),s.push(n[h],n[m],n[f],n[x])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||l==null||d==null||m==null)throw new a5;const f=r<<2|l>>4;if(s.push(f),d!==64){const x=l<<4&240|d>>2;if(s.push(x),m!==64){const v=d<<6&192|m;s.push(v)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class a5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o5=function(t){const e=sE(t);return iE.encodeByteArray(e,!0)},Dh=function(t){return o5(t).replace(/\./g,"")},rE=function(t){try{return iE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=()=>l5().__FIREBASE_DEFAULTS__,u5=()=>{if(typeof process>"u"||typeof P1>"u")return;const t=P1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},d5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rE(t[1]);return e&&JSON.parse(e)},kf=()=>{try{return i5()||c5()||u5()||d5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aE=t=>{var e,n;return(n=(e=kf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},h5=t=>{const e=aE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},oE=()=>{var t;return(t=kf())==null?void 0:t.config},lE=t=>{var e;return(e=kf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Dh(JSON.stringify(n)),Dh(JSON.stringify(o)),""].join(".")}const bc={};function p5(){const t={prod:[],emulator:[]};for(const e of Object.keys(bc))bc[e]?t.emulator.push(e):t.prod.push(e);return t}function g5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let L1=!1;function uE(t,e){if(typeof window>"u"||typeof document>"u"||!gl(window.location.host)||bc[t]===e||bc[t]||L1)return;bc[t]=e;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=p5().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,x){f.setAttribute("width","24"),f.setAttribute("id",x),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function d(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{L1=!0,o()},f}function h(f,x){f.setAttribute("id",x),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function m(){const f=g5(s),x=n("text"),v=document.getElementById(x)||document.createElement("span"),C=n("learnmore"),R=document.getElementById(C)||document.createElement("a"),S=n("preprendIcon"),y=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;l(_),h(R,C);const I=d();c(y,S),_.append(y,v,R,I),document.body.appendChild(_)}r?(v.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function y5(){var e;const t=(e=kf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _5(){const t=yn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function N5(){return!y5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S5(){try{return typeof indexedDB=="object"}catch{return!1}}function T5(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="FirebaseError";class Vi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=E5,Object.setPrototypeOf(this,Vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?j5(r,s):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Vi(i,l,s)}}function j5(t,e){return t.replace(A5,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const A5=/\{\$([^}]+)}/g;function C5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ti(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(z1(r)&&z1(o)){if(!Ti(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function z1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Wl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function Jl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function R5(t,e){const n=new I5(t,e);return n.subscribe.bind(n)}class I5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");k5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=cp),i.error===void 0&&(i.error=cp),i.complete===void 0&&(i.complete=cp);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function k5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class ja{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new f5;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O5(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);s===l&&o.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:M5(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M5(t){return t===ra?void 0:t}function O5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new D5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const P5={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},L5=Oe.INFO,z5={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},U5=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=z5[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vx{constructor(e){this.name=e,this._logLevel=L5,this._logHandler=U5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const B5=(t,e)=>e.some(n=>t instanceof n);let U1,B1;function F5(){return U1||(U1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $5(){return B1||(B1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dE=new WeakMap,Bg=new WeakMap,hE=new WeakMap,up=new WeakMap,Px=new WeakMap;function H5(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(_r(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dE.set(n,t)}).catch(()=>{}),Px.set(e,t),e}function G5(t){if(Bg.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Bg.set(t,e)}let Fg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K5(t){Fg=t(Fg)}function Q5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(dp(this),e,...n);return hE.set(s,e.sort?e.sort():[e]),_r(s)}:$5().includes(t)?function(...e){return t.apply(dp(this),e),_r(dE.get(this))}:function(...e){return _r(t.apply(dp(this),e))}}function Y5(t){return typeof t=="function"?Q5(t):(t instanceof IDBTransaction&&G5(t),B5(t,F5())?new Proxy(t,Fg):t)}function _r(t){if(t instanceof IDBRequest)return H5(t);if(up.has(t))return up.get(t);const e=Y5(t);return e!==t&&(up.set(t,e),Px.set(e,t)),e}const dp=t=>Px.get(t);function q5(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),l=_r(o);return s&&o.addEventListener("upgradeneeded",c=>{s(_r(o.result),c.oldVersion,c.newVersion,_r(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{r&&c.addEventListener("close",()=>r()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const X5=["get","getKey","getAll","getAllKeys","count"],W5=["put","add","delete","clear"],hp=new Map;function F1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=W5.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||X5.includes(n)))return;const r=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return hp.set(e,r),r}K5(t=>({...t,get:(e,n,s)=>F1(e,n)||t.get(e,n,s),has:(e,n)=>!!F1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Z5(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Z5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $g="@firebase/app",$1="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Vx("@firebase/app"),eD="@firebase/app-compat",tD="@firebase/analytics-compat",nD="@firebase/analytics",sD="@firebase/app-check-compat",iD="@firebase/app-check",rD="@firebase/auth",aD="@firebase/auth-compat",oD="@firebase/database",lD="@firebase/data-connect",cD="@firebase/database-compat",uD="@firebase/functions",dD="@firebase/functions-compat",hD="@firebase/installations",fD="@firebase/installations-compat",mD="@firebase/messaging",pD="@firebase/messaging-compat",gD="@firebase/performance",xD="@firebase/performance-compat",yD="@firebase/remote-config",vD="@firebase/remote-config-compat",bD="@firebase/storage",wD="@firebase/storage-compat",_D="@firebase/firestore",ND="@firebase/ai",SD="@firebase/firestore-compat",TD="firebase",ED="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="[DEFAULT]",jD={[$g]:"fire-core",[eD]:"fire-core-compat",[nD]:"fire-analytics",[tD]:"fire-analytics-compat",[iD]:"fire-app-check",[sD]:"fire-app-check-compat",[rD]:"fire-auth",[aD]:"fire-auth-compat",[oD]:"fire-rtdb",[lD]:"fire-data-connect",[cD]:"fire-rtdb-compat",[uD]:"fire-fn",[dD]:"fire-fn-compat",[hD]:"fire-iid",[fD]:"fire-iid-compat",[mD]:"fire-fcm",[pD]:"fire-fcm-compat",[gD]:"fire-perf",[xD]:"fire-perf-compat",[yD]:"fire-rc",[vD]:"fire-rc-compat",[bD]:"fire-gcs",[wD]:"fire-gcs-compat",[_D]:"fire-fst",[SD]:"fire-fst-compat",[ND]:"fire-vertex","fire-js":"fire-js",[TD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map,AD=new Map,Gg=new Map;function H1(t,e){try{t.container.addComponent(e)}catch(n){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ko(t){const e=t.name;if(Gg.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;Gg.set(e,t);for(const n of Mh.values())H1(n,t);for(const n of AD.values())H1(n,t);return!0}function Lx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Un(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new _u("app","Firebase",CD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=ED;function fE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Hg,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=oE()),!n)throw Nr.create("no-options");const r=Mh.get(i);if(r){if(Ti(n,r.options)&&Ti(s,r.config))return r;throw Nr.create("duplicate-app",{appName:i})}const o=new V5(i);for(const c of Gg.values())o.addComponent(c);const l=new RD(n,s,o);return Mh.set(i,l),l}function mE(t=Hg){const e=Mh.get(t);if(!e&&t===Hg&&oE())return fE();if(!e)throw Nr.create("no-app",{appName:t});return e}function Sr(t,e,n){let s=jD[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(o.join(" "));return}Ko(new ja(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="firebase-heartbeat-database",kD=1,qc="firebase-heartbeat-store";let fp=null;function pE(){return fp||(fp=q5(ID,kD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),fp}async function DD(t){try{const n=(await pE()).transaction(qc),s=await n.objectStore(qc).get(gE(t));return await n.done,s}catch(e){if(e instanceof Vi)Ei.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ei.warn(n.message)}}}async function G1(t,e){try{const s=(await pE()).transaction(qc,"readwrite");await s.objectStore(qc).put(e,gE(t)),await s.done}catch(n){if(n instanceof Vi)Ei.warn(n.message);else{const s=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ei.warn(s.message)}}}function gE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=1024,OD=30;class VD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LD(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=K1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>OD){const o=zD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ei.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=K1(),{heartbeatsToSend:s,unsentEntries:i}=PD(this._heartbeatsCache.heartbeats),r=Dh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Ei.warn(n),""}}}function K1(){return new Date().toISOString().substring(0,10)}function PD(t,e=MD){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Q1(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Q1(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class LD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return S5()?T5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return G1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return G1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Q1(t){return Dh(JSON.stringify({version:2,heartbeats:t})).length}function zD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){Ko(new ja("platform-logger",e=>new J5(e),"PRIVATE")),Ko(new ja("heartbeat",e=>new VD(e),"PRIVATE")),Sr($g,$1,t),Sr($g,$1,"esm2020"),Sr("fire-js","")}UD("");var BD="firebase",FD="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sr(BD,FD,"app");function xE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $D=xE,yE=new _u("auth","Firebase",xE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Vx("@firebase/auth");function HD(t,...e){Oh.logLevel<=Oe.WARN&&Oh.warn(`Auth (${xl}): ${t}`,...e)}function Fd(t,...e){Oh.logLevel<=Oe.ERROR&&Oh.error(`Auth (${xl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t,...e){throw Ux(t,...e)}function Ns(t,...e){return Ux(t,...e)}function zx(t,e,n){const s={...$D(),[e]:n};return new _u("auth","Firebase",s).create(e,{appName:t.name})}function pi(t){return zx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GD(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&gs(t,"argument-error"),zx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ux(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return yE.create(t,...e)}function we(t,e,...n){if(!t)throw Ux(e,...n)}function ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fd(e),new Error(e)}function ji(t,e){t||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function KD(){return Y1()==="http:"||Y1()==="https:"}function Y1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KD()||b5()||"connection"in navigator)?navigator.onLine:!0}function YD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.shortDelay=e,this.longDelay=n,ji(n>e,"Short delay should be less than long delay!"),this.isMobile=x5()||w5()}get(){return QD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e){ji(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WD=new Su(3e4,6e4);function Pi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ws(t,e,n,s,i={}){return bE(t,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const l=Nu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...r};return v5()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&gl(t.emulatorConfig.host)&&(d.credentials="include"),vE.fetch()(await wE(t,t.config.apiHost,n,l),d)})}async function bE(t,e,n){t._canInitEmulator=!1;const s={...qD,...e};try{const i=new ZD(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw xd(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const l=r.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw xd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw xd(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw zx(t,h,d);gs(t,h)}}catch(i){if(i instanceof Vi)throw i;gs(t,"network-request-failed",{message:String(i)})}}async function Tu(t,e,n,s,i={}){const r=await Ws(t,e,n,s,i);return"mfaPendingCredential"in r&&gs(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function wE(t,e,n,s){const i=`${e}${n}?${s}`,r=t,o=r.config.emulator?Bx(t.config,i):`${t.config.apiScheme}://${i}`;return XD.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function JD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ns(this.auth,"network-request-failed")),WD.get())})}}function xd(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Ns(t,e,s);return i.customData._tokenResponse=n,i}function q1(t){return t!==void 0&&t.enterprise!==void 0}class eM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tM(t,e){return Ws(t,"GET","/v2/recaptchaConfig",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t,e){return Ws(t,"POST","/v1/accounts:delete",e)}async function Vh(t,e){return Ws(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sM(t,e=!1){const n=Nt(t),s=await n.getIdToken(e),i=Fx(s);we(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:wc(mp(i.auth_time)),issuedAtTime:wc(mp(i.iat)),expirationTime:wc(mp(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function mp(t){return Number(t)*1e3}function Fx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Fd("JWT malformed, contained fewer than 3 sections"),null;try{const i=rE(n);return i?JSON.parse(i):(Fd("Failed to decode base64 JWT payload"),null)}catch(i){return Fd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function X1(t){const e=Fx(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Vi&&iM(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function iM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wc(this.lastLoginAt),this.creationTime=wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(t){var m;const e=t.auth,n=await t.getIdToken(),s=await Qo(t,Vh(e,{idToken:n}));we(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const r=(m=i.providerUserInfo)!=null&&m.length?_E(i.providerUserInfo):[],o=oM(t.providerData,r),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qg(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function aM(t){const e=Nt(t);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oM(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function _E(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e){const n=await bE(t,{},async()=>{const s=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=await wE(t,i,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&gl(t.emulatorConfig.host)&&(c.credentials="include"),vE.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cM(t,e){return Ws(t,"POST","/v2/accounts:revokeToken",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=X1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await lM(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Co;return s&&(we(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(we(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(we(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _s{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new rM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Qo(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sM(this,e)}reload(){return aM(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await Qo(this,nM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:f,isAnonymous:x,providerData:v,stsTokenManager:C}=n;we(m&&C,e,"internal-error");const R=Co.fromJSON(this.name,C);we(typeof m=="string",e,"internal-error"),Ki(s,e.name),Ki(i,e.name),we(typeof f=="boolean",e,"internal-error"),we(typeof x=="boolean",e,"internal-error"),Ki(r,e.name),Ki(o,e.name),Ki(l,e.name),Ki(c,e.name),Ki(d,e.name),Ki(h,e.name);const S=new _s({uid:m,auth:e,email:i,emailVerified:f,displayName:s,isAnonymous:x,photoURL:o,phoneNumber:r,tenantId:l,stsTokenManager:R,createdAt:d,lastLoginAt:h});return v&&Array.isArray(v)&&(S.providerData=v.map(y=>({...y}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,s=!1){const i=new Co;i.updateFromServerResponse(n);const r=new _s({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Ph(r),r}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];we(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?_E(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),l=new Co;l.updateFromIdToken(s);const c=new _s({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Qg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=new Map;function di(t){ji(t instanceof Function,"Expected a class definition");let e=W1.get(t);return e?(ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,W1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NE.type="NONE";const J1=NE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t,e,n){return`firebase:${t}:${e}:${n}`}class Ro{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=$d(this.userKey,i.apiKey,r),this.fullPersistenceKey=$d("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vh(this.auth,{idToken:e}).catch(()=>{});return n?_s._fromGetAccountInfoResponse(this.auth,n,e):null}return _s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ro(di(J1),e,s);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let r=i[0]||di(J1);const o=$d(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let m;if(typeof h=="string"){const f=await Vh(e,{idToken:h}).catch(()=>{});if(!f)break;m=await _s._fromGetAccountInfoResponse(e,f,h)}else m=_s._fromJSON(e,h);d!==r&&(l=m),r=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new Ro(r,e,s):(r=c[0],l&&await r._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==r)try{await d._remove(o)}catch{}})),new Ro(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CE(e))return"Blackberry";if(RE(e))return"Webos";if(TE(e))return"Safari";if((e.includes("chrome/")||EE(e))&&!e.includes("edge/"))return"Chrome";if(AE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function SE(t=yn()){return/firefox\//i.test(t)}function TE(t=yn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EE(t=yn()){return/crios\//i.test(t)}function jE(t=yn()){return/iemobile/i.test(t)}function AE(t=yn()){return/android/i.test(t)}function CE(t=yn()){return/blackberry/i.test(t)}function RE(t=yn()){return/webos/i.test(t)}function $x(t=yn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uM(t=yn()){var e;return $x(t)&&!!((e=window.navigator)!=null&&e.standalone)}function dM(){return _5()&&document.documentMode===10}function IE(t=yn()){return $x(t)||AE(t)||RE(t)||CE(t)||/windows phone/i.test(t)||jE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e=[]){let n;switch(t){case"Browser":n=Z1(yn());break;case"Worker":n=`${Z1(yn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((o,l)=>{try{const c=e(r);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(t,e={}){return Ws(t,"GET","/v2/passwordPolicy",Pi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=6;class pM{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??mM,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ew(this),this.idTokenSubscription=new ew(this),this.beforeStateQueue=new hM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=di(n)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vh(this,{idToken:e}),s=await _s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Un(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(pi(this));const n=e?Nt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fM(this),n=new pM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _u("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await cM(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&di(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(l,this,"internal-error"),l.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&HD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Li(t){return Nt(t)}class ew{constructor(e){this.auth=e,this.observer=null,this.addObserver=R5(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xM(t){Df=t}function DE(t){return Df.loadJS(t)}function yM(){return Df.recaptchaEnterpriseScript}function vM(){return Df.gapiScript}function bM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class wM{constructor(){this.enterprise=new _M}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class _M{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const NM="recaptcha-enterprise",ME="NO_RECAPTCHA";class SM{constructor(e){this.type=NM,this.auth=Li(e)}async verify(e="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,l)=>{tM(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new eM(c);return r.tenantId==null?r._agentRecaptchaConfig=d:r._tenantRecaptchaConfigs[r.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function i(r,o,l){const c=window.grecaptcha;q1(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(d=>{o(d)}).catch(()=>{o(ME)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wM().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(l=>{if(!n&&q1(window.grecaptcha))i(l,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=yM();c.length!==0&&(c+=l),DE(c).then(()=>{i(l,r,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function tw(t,e,n,s=!1,i=!1){const r=new SM(t);let o;if(i)o=ME;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Lh(t,e,n,s,i){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await tw(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await tw(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t,e){const n=Lx(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(Ti(r,e??{}))return i;gs(i,"already-initialized")}return n.initialize({options:e})}function EM(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function jM(t,e,n){const s=Li(t);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,r=OE(e),{host:o,port:l}=AM(e),c=l===null?"":`:${l}`,d={url:`${r}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Ti(d,s.config.emulator)&&Ti(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,gl(o)?(cE(`${r}//${o}${c}`),uE("Auth",!0)):CM()}function OE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function AM(t){const e=OE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:nw(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:nw(o)}}}function nw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function RM(t,e){return Ws(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(t,e){return Tu(t,"POST","/v1/accounts:signInWithPassword",Pi(t,e))}async function kM(t,e){return Ws(t,"POST","/v1/accounts:sendOobCode",Pi(t,e))}async function DM(t,e){return kM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(t,e){return Tu(t,"POST","/v1/accounts:signInWithEmailLink",Pi(t,e))}async function OM(t,e){return Tu(t,"POST","/v1/accounts:signInWithEmailLink",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends Hx{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Xc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Xc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lh(e,n,"signInWithPassword",IM);case"emailLink":return MM(e,{email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lh(e,s,"signUpPassword",RM);case"emailLink":return OM(e,{idToken:n,email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t,e){return Tu(t,"POST","/v1/accounts:signInWithIdp",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="http://localhost";class Aa extends Hx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const o=new Aa(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Io(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Io(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Io(e,n)}buildRequest(){const e={requestUri:VM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LM(t){const e=Wl(Jl(t)).link,n=e?Wl(Jl(e)).deep_link_id:null,s=Wl(Jl(t)).deep_link_id;return(s?Wl(Jl(s)).link:null)||s||n||e||t}class Gx{constructor(e){const n=Wl(Jl(e)),s=n.apiKey??null,i=n.oobCode??null,r=PM(n.mode??null);we(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=LM(e);try{return new Gx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.providerId=yl.PROVIDER_ID}static credential(e,n){return Xc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Gx.parseLink(n);return we(s,"argument-error"),Xc._fromEmailAndCode(e,s.code,s.tenantId)}}yl.PROVIDER_ID="password";yl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends Kx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Eu{constructor(){super("facebook.com")}static credential(e){return Aa._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Aa._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ai.credential(n,s)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Eu{constructor(){super("github.com")}static credential(e){return Aa._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Eu{constructor(){super("twitter.com")}static credential(e,n){return Aa._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return sr.credential(n,s)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e){return Tu(t,"POST","/v1/accounts:signUp",Pi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await _s._fromIdTokenResponse(e,s,i),o=sw(s);return new Ca({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=sw(s);return new Ca({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function sw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends Vi{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,zh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new zh(e,n,s,i)}}function VE(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?zh._fromErrorAndOperation(t,r,e,s):r})}async function UM(t,e,n=!1){const s=await Qo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ca._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM(t,e,n=!1){const{auth:s}=t;if(Un(s.app))return Promise.reject(pi(s));const i="reauthenticate";try{const r=await Qo(t,VE(s,i,e,t),n);we(r.idToken,s,"internal-error");const o=Fx(r.idToken);we(o,s,"internal-error");const{sub:l}=o;return we(t.uid===l,s,"user-mismatch"),Ca._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&gs(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PE(t,e,n=!1){if(Un(t.app))return Promise.reject(pi(t));const s="signIn",i=await VE(t,s,e),r=await Ca._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}async function FM(t,e){return PE(Li(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LE(t){const e=Li(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $M(t,e,n){const s=Li(t);await Lh(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",DM)}async function iw(t,e,n){if(Un(t.app))return Promise.reject(pi(t));const s=Li(t),o=await Lh(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zM).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&LE(t),c}),l=await Ca._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function rw(t,e,n){return Un(t.app)?Promise.reject(pi(t)):FM(Nt(t),yl.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&LE(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e){return Ws(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pp(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=Nt(t),r={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Qo(s,HM(s.auth,r));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const l=s.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function GM(t,e,n,s){return Nt(t).onIdTokenChanged(e,n,s)}function KM(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}function QM(t,e,n,s){return Nt(t).onAuthStateChanged(e,n,s)}function YM(t){return Nt(t).signOut()}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=1e3,XM=10;class UE extends zE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);dM()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,XM):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},qM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UE.type="LOCAL";const WM=UE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends zE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BE.type="SESSION";const FE=BE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new Mf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const l=Array.from(o).map(async d=>d(n.origin,r)),c=await JM(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((l,c)=>{const d=Qx("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(m){const f=m;if(f.data.eventId===d)switch(f.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(f.data.response);break;default:clearTimeout(h),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function e6(t){Us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function t6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function s6(){return $E()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="firebaseLocalStorageDb",i6=1,Bh="firebaseLocalStorage",GE="fbase_key";class ju{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Of(t,e){return t.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function r6(){const t=indexedDB.deleteDatabase(HE);return new ju(t).toPromise()}function Yg(){const t=indexedDB.open(HE,i6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Bh,{keyPath:GE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Bh)?e(s):(s.close(),await r6(),e(await Yg()))})})}async function aw(t,e,n){const s=Of(t,!0).put({[GE]:e,value:n});return new ju(s).toPromise()}async function a6(t,e){const n=Of(t,!1).get(e),s=await new ju(n).toPromise();return s===void 0?null:s.value}function ow(t,e){const n=Of(t,!0).delete(e);return new ju(n).toPromise()}const o6=800,l6=3;class KE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>l6)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $E()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mf._getInstance(s6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await t6(),!this.activeServiceWorker)return;this.sender=new ZM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yg();return await aw(e,Uh,"1"),await ow(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>aw(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>a6(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ow(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=Of(i,!1).getAll();return new ju(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KE.type="LOCAL";const c6=KE;new Su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(t,e){return e?di(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx extends Hx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function u6(t){return PE(t.auth,new Yx(t),t.bypassAuthState)}function d6(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),BM(n,new Yx(t),t.bypassAuthState)}async function h6(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),UM(n,new Yx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u6;case"linkViaPopup":case"linkViaRedirect":return h6;case"reauthViaPopup":case"reauthViaRedirect":return d6;default:gs(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new Su(2e3,1e4);async function m6(t,e,n){if(Un(t.app))return Promise.reject(Ns(t,"operation-not-supported-in-this-environment"));const s=Li(t);GD(t,e,Kx);const i=QE(s,n);return new ua(s,"signInViaPopup",e,i).executeNotNull()}class ua extends YE{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,ua.currentPopupAction&&ua.currentPopupAction.cancel(),ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=Qx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f6.get())};e()}}ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="pendingRedirect",Hd=new Map;class g6 extends YE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const s=await x6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x6(t,e){const n=b6(e),s=v6(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function y6(t,e){Hd.set(t._key(),e)}function v6(t){return di(t._redirectPersistence)}function b6(t){return $d(p6,t.config.apiKey,t.name)}async function w6(t,e,n=!1){if(Un(t.app))return Promise.reject(pi(t));const s=Li(t),i=QE(s,e),o=await new g6(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=10*60*1e3;class N6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!qE(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ns(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_6&&this.cachedEventUids.clear(),this.cachedEventUids.has(lw(e))}saveEventToCache(e){this.cachedEventUids.add(lw(e)),this.lastProcessedEventTime=Date.now()}}function lw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function S6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T6(t,e={}){return Ws(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j6=/^https?/;async function A6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T6(t);for(const n of e)try{if(C6(n))return}catch{}gs(t,"unauthorized-domain")}function C6(t){const e=Kg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!j6.test(n))return!1;if(E6.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=new Su(3e4,6e4);function cw(){const t=Us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function I6(t){return new Promise((e,n)=>{var i,r,o;function s(){cw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cw(),n(Ns(t,"network-request-failed"))},timeout:R6.get()})}if((r=(i=Us().gapi)==null?void 0:i.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((o=Us().gapi)!=null&&o.load)s();else{const l=bM("iframefcb");return Us()[l]=()=>{gapi.load?s():n(Ns(t,"network-request-failed"))},DE(`${vM()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function k6(t){return Gd=Gd||I6(t),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new Su(5e3,15e3),M6="__/auth/iframe",O6="emulator/auth/iframe",V6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L6(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bx(e,O6):`https://${t.config.authDomain}/${M6}`,s={apiKey:e.apiKey,appName:t.name,v:xl},i=P6.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Nu(s).slice(1)}`}async function z6(t){const e=await k6(t),n=Us().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:L6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V6,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Ns(t,"network-request-failed"),l=Us().setTimeout(()=>{r(o)},D6.get());function c(){Us().clearTimeout(l),i(s)}s.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B6=500,F6=600,$6="_blank",H6="http://localhost";class uw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G6(t,e,n,s=B6,i=F6){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...U6,width:s.toString(),height:i.toString(),top:r,left:o},d=yn().toLowerCase();n&&(l=EE(d)?$6:n),SE(d)&&(e=e||H6,c.scrollbars="yes");const h=Object.entries(c).reduce((f,[x,v])=>`${f}${x}=${v},`,"");if(uM(d)&&l!=="_self")return K6(e||"",l),new uw(null);const m=window.open(e||"",l,h);we(m,t,"popup-blocked");try{m.focus()}catch{}return new uw(m)}function K6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6="__/auth/handler",Y6="emulator/auth/handler",q6=encodeURIComponent("fac");async function dw(t,e,n,s,i,r){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:xl,eventId:i};if(e instanceof Kx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",C5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Eu){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${q6}=${encodeURIComponent(c)}`:"";return`${X6(t)}?${Nu(l).slice(1)}${d}`}function X6({config:t}){return t.emulator?Bx(t,Y6):`https://${t.authDomain}/${Q6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="webStorageSupport";class W6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FE,this._completeRedirectFn=w6,this._overrideRedirectResult=y6}async _openPopup(e,n,s,i){var o;ji((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await dw(e,n,s,Kg(),i);return G6(e,r,Qx())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await dw(e,n,s,Kg(),i);return e6(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(ji(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await z6(e),s=new N6(e);return n.register("authEvent",i=>(we(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gp,{type:gp},i=>{var o;const r=(o=i==null?void 0:i[0])==null?void 0:o[gp];r!==void 0&&n(!!r),gs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=A6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IE()||TE()||$x()}}const J6=W6;var hw="@firebase/auth",fw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tO(t){Ko(new ja("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;we(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kE(t)},d=new gM(s,i,r,c);return EM(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ko(new ja("auth-internal",e=>{const n=Li(e.getProvider("auth").getImmediate());return(s=>new Z6(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sr(hw,fw,eO(t)),Sr(hw,fw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=5*60,sO=lE("authIdTokenMaxAge")||nO;let mw=null;const iO=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>sO)return;const i=n==null?void 0:n.token;mw!==i&&(mw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function rO(t=mE()){const e=Lx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=TM(t,{popupRedirectResolver:J6,persistence:[c6,WM,FE]}),s=lE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=iO(r.toString());KM(n,o,()=>o(n.currentUser)),GM(n,l=>o(l))}}const i=aE("auth");return i&&jM(n,`http://${i}`),n}function aO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}xM({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=Ns("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",aO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tO("Browser");var pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,XE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,p){function N(){}N.prototype=p.prototype,T.F=p.prototype,T.prototype=new N,T.prototype.constructor=T,T.D=function(E,j,A){for(var w=Array(arguments.length-2),k=2;k<arguments.length;k++)w[k-2]=arguments[k];return p.prototype[j].apply(E,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,p,N){N||(N=0);const E=Array(16);if(typeof p=="string")for(var j=0;j<16;++j)E[j]=p.charCodeAt(N++)|p.charCodeAt(N++)<<8|p.charCodeAt(N++)<<16|p.charCodeAt(N++)<<24;else for(j=0;j<16;++j)E[j]=p[N++]|p[N++]<<8|p[N++]<<16|p[N++]<<24;p=T.g[0],N=T.g[1],j=T.g[2];let A=T.g[3],w;w=p+(A^N&(j^A))+E[0]+3614090360&4294967295,p=N+(w<<7&4294967295|w>>>25),w=A+(j^p&(N^j))+E[1]+3905402710&4294967295,A=p+(w<<12&4294967295|w>>>20),w=j+(N^A&(p^N))+E[2]+606105819&4294967295,j=A+(w<<17&4294967295|w>>>15),w=N+(p^j&(A^p))+E[3]+3250441966&4294967295,N=j+(w<<22&4294967295|w>>>10),w=p+(A^N&(j^A))+E[4]+4118548399&4294967295,p=N+(w<<7&4294967295|w>>>25),w=A+(j^p&(N^j))+E[5]+1200080426&4294967295,A=p+(w<<12&4294967295|w>>>20),w=j+(N^A&(p^N))+E[6]+2821735955&4294967295,j=A+(w<<17&4294967295|w>>>15),w=N+(p^j&(A^p))+E[7]+4249261313&4294967295,N=j+(w<<22&4294967295|w>>>10),w=p+(A^N&(j^A))+E[8]+1770035416&4294967295,p=N+(w<<7&4294967295|w>>>25),w=A+(j^p&(N^j))+E[9]+2336552879&4294967295,A=p+(w<<12&4294967295|w>>>20),w=j+(N^A&(p^N))+E[10]+4294925233&4294967295,j=A+(w<<17&4294967295|w>>>15),w=N+(p^j&(A^p))+E[11]+2304563134&4294967295,N=j+(w<<22&4294967295|w>>>10),w=p+(A^N&(j^A))+E[12]+1804603682&4294967295,p=N+(w<<7&4294967295|w>>>25),w=A+(j^p&(N^j))+E[13]+4254626195&4294967295,A=p+(w<<12&4294967295|w>>>20),w=j+(N^A&(p^N))+E[14]+2792965006&4294967295,j=A+(w<<17&4294967295|w>>>15),w=N+(p^j&(A^p))+E[15]+1236535329&4294967295,N=j+(w<<22&4294967295|w>>>10),w=p+(j^A&(N^j))+E[1]+4129170786&4294967295,p=N+(w<<5&4294967295|w>>>27),w=A+(N^j&(p^N))+E[6]+3225465664&4294967295,A=p+(w<<9&4294967295|w>>>23),w=j+(p^N&(A^p))+E[11]+643717713&4294967295,j=A+(w<<14&4294967295|w>>>18),w=N+(A^p&(j^A))+E[0]+3921069994&4294967295,N=j+(w<<20&4294967295|w>>>12),w=p+(j^A&(N^j))+E[5]+3593408605&4294967295,p=N+(w<<5&4294967295|w>>>27),w=A+(N^j&(p^N))+E[10]+38016083&4294967295,A=p+(w<<9&4294967295|w>>>23),w=j+(p^N&(A^p))+E[15]+3634488961&4294967295,j=A+(w<<14&4294967295|w>>>18),w=N+(A^p&(j^A))+E[4]+3889429448&4294967295,N=j+(w<<20&4294967295|w>>>12),w=p+(j^A&(N^j))+E[9]+568446438&4294967295,p=N+(w<<5&4294967295|w>>>27),w=A+(N^j&(p^N))+E[14]+3275163606&4294967295,A=p+(w<<9&4294967295|w>>>23),w=j+(p^N&(A^p))+E[3]+4107603335&4294967295,j=A+(w<<14&4294967295|w>>>18),w=N+(A^p&(j^A))+E[8]+1163531501&4294967295,N=j+(w<<20&4294967295|w>>>12),w=p+(j^A&(N^j))+E[13]+2850285829&4294967295,p=N+(w<<5&4294967295|w>>>27),w=A+(N^j&(p^N))+E[2]+4243563512&4294967295,A=p+(w<<9&4294967295|w>>>23),w=j+(p^N&(A^p))+E[7]+1735328473&4294967295,j=A+(w<<14&4294967295|w>>>18),w=N+(A^p&(j^A))+E[12]+2368359562&4294967295,N=j+(w<<20&4294967295|w>>>12),w=p+(N^j^A)+E[5]+4294588738&4294967295,p=N+(w<<4&4294967295|w>>>28),w=A+(p^N^j)+E[8]+2272392833&4294967295,A=p+(w<<11&4294967295|w>>>21),w=j+(A^p^N)+E[11]+1839030562&4294967295,j=A+(w<<16&4294967295|w>>>16),w=N+(j^A^p)+E[14]+4259657740&4294967295,N=j+(w<<23&4294967295|w>>>9),w=p+(N^j^A)+E[1]+2763975236&4294967295,p=N+(w<<4&4294967295|w>>>28),w=A+(p^N^j)+E[4]+1272893353&4294967295,A=p+(w<<11&4294967295|w>>>21),w=j+(A^p^N)+E[7]+4139469664&4294967295,j=A+(w<<16&4294967295|w>>>16),w=N+(j^A^p)+E[10]+3200236656&4294967295,N=j+(w<<23&4294967295|w>>>9),w=p+(N^j^A)+E[13]+681279174&4294967295,p=N+(w<<4&4294967295|w>>>28),w=A+(p^N^j)+E[0]+3936430074&4294967295,A=p+(w<<11&4294967295|w>>>21),w=j+(A^p^N)+E[3]+3572445317&4294967295,j=A+(w<<16&4294967295|w>>>16),w=N+(j^A^p)+E[6]+76029189&4294967295,N=j+(w<<23&4294967295|w>>>9),w=p+(N^j^A)+E[9]+3654602809&4294967295,p=N+(w<<4&4294967295|w>>>28),w=A+(p^N^j)+E[12]+3873151461&4294967295,A=p+(w<<11&4294967295|w>>>21),w=j+(A^p^N)+E[15]+530742520&4294967295,j=A+(w<<16&4294967295|w>>>16),w=N+(j^A^p)+E[2]+3299628645&4294967295,N=j+(w<<23&4294967295|w>>>9),w=p+(j^(N|~A))+E[0]+4096336452&4294967295,p=N+(w<<6&4294967295|w>>>26),w=A+(N^(p|~j))+E[7]+1126891415&4294967295,A=p+(w<<10&4294967295|w>>>22),w=j+(p^(A|~N))+E[14]+2878612391&4294967295,j=A+(w<<15&4294967295|w>>>17),w=N+(A^(j|~p))+E[5]+4237533241&4294967295,N=j+(w<<21&4294967295|w>>>11),w=p+(j^(N|~A))+E[12]+1700485571&4294967295,p=N+(w<<6&4294967295|w>>>26),w=A+(N^(p|~j))+E[3]+2399980690&4294967295,A=p+(w<<10&4294967295|w>>>22),w=j+(p^(A|~N))+E[10]+4293915773&4294967295,j=A+(w<<15&4294967295|w>>>17),w=N+(A^(j|~p))+E[1]+2240044497&4294967295,N=j+(w<<21&4294967295|w>>>11),w=p+(j^(N|~A))+E[8]+1873313359&4294967295,p=N+(w<<6&4294967295|w>>>26),w=A+(N^(p|~j))+E[15]+4264355552&4294967295,A=p+(w<<10&4294967295|w>>>22),w=j+(p^(A|~N))+E[6]+2734768916&4294967295,j=A+(w<<15&4294967295|w>>>17),w=N+(A^(j|~p))+E[13]+1309151649&4294967295,N=j+(w<<21&4294967295|w>>>11),w=p+(j^(N|~A))+E[4]+4149444226&4294967295,p=N+(w<<6&4294967295|w>>>26),w=A+(N^(p|~j))+E[11]+3174756917&4294967295,A=p+(w<<10&4294967295|w>>>22),w=j+(p^(A|~N))+E[2]+718787259&4294967295,j=A+(w<<15&4294967295|w>>>17),w=N+(A^(j|~p))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+p&4294967295,T.g[1]=T.g[1]+(j+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+j&4294967295,T.g[3]=T.g[3]+A&4294967295}s.prototype.v=function(T,p){p===void 0&&(p=T.length);const N=p-this.blockSize,E=this.C;let j=this.h,A=0;for(;A<p;){if(j==0)for(;A<=N;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<p;)if(E[j++]=T.charCodeAt(A++),j==this.blockSize){i(this,E),j=0;break}}else for(;A<p;)if(E[j++]=T[A++],j==this.blockSize){i(this,E),j=0;break}}this.h=j,this.o+=p},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var p=1;p<T.length-8;++p)T[p]=0;p=this.o*8;for(var N=T.length-8;N<T.length;++N)T[N]=p&255,p/=256;for(this.v(T),T=Array(16),p=0,N=0;N<4;++N)for(let E=0;E<32;E+=8)T[p++]=this.g[N]>>>E&255;return T};function r(T,p){var N=l;return Object.prototype.hasOwnProperty.call(N,T)?N[T]:N[T]=p(T)}function o(T,p){this.h=p;const N=[];let E=!0;for(let j=T.length-1;j>=0;j--){const A=T[j]|0;E&&A==p||(N[j]=A,E=!1)}this.g=N}var l={};function c(T){return-128<=T&&T<128?r(T,function(p){return new o([p|0],p<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return R(d(-T));const p=[];let N=1;for(let E=0;T>=N;E++)p[E]=T/N|0,N*=4294967296;return new o(p,0)}function h(T,p){if(T.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(T.charAt(0)=="-")return R(h(T.substring(1),p));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(p,8));let E=m;for(let A=0;A<T.length;A+=8){var j=Math.min(8,T.length-A);const w=parseInt(T.substring(A,A+j),p);j<8?(j=d(Math.pow(p,j)),E=E.j(j).add(d(w))):(E=E.j(N),E=E.add(d(w)))}return E}var m=c(0),f=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-R(this).m();let T=0,p=1;for(let N=0;N<this.g.length;N++){const E=this.i(N);T+=(E>=0?E:4294967296+E)*p,p*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(v(this))return"0";if(C(this))return"-"+R(this).toString(T);const p=d(Math.pow(T,6));var N=this;let E="";for(;;){const j=I(N,p).g;N=S(N,j.j(p));let A=((N.g.length>0?N.g[0]:N.h)>>>0).toString(T);if(N=j,v(N))return A+E;for(;A.length<6;)A="0"+A;E=A+E}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function v(T){if(T.h!=0)return!1;for(let p=0;p<T.g.length;p++)if(T.g[p]!=0)return!1;return!0}function C(T){return T.h==-1}t.l=function(T){return T=S(this,T),C(T)?-1:v(T)?0:1};function R(T){const p=T.g.length,N=[];for(let E=0;E<p;E++)N[E]=~T.g[E];return new o(N,~T.h).add(f)}t.abs=function(){return C(this)?R(this):this},t.add=function(T){const p=Math.max(this.g.length,T.g.length),N=[];let E=0;for(let j=0;j<=p;j++){let A=E+(this.i(j)&65535)+(T.i(j)&65535),w=(A>>>16)+(this.i(j)>>>16)+(T.i(j)>>>16);E=w>>>16,A&=65535,w&=65535,N[j]=w<<16|A}return new o(N,N[N.length-1]&-2147483648?-1:0)};function S(T,p){return T.add(R(p))}t.j=function(T){if(v(this)||v(T))return m;if(C(this))return C(T)?R(this).j(R(T)):R(R(this).j(T));if(C(T))return R(this.j(R(T)));if(this.l(x)<0&&T.l(x)<0)return d(this.m()*T.m());const p=this.g.length+T.g.length,N=[];for(var E=0;E<2*p;E++)N[E]=0;for(E=0;E<this.g.length;E++)for(let j=0;j<T.g.length;j++){const A=this.i(E)>>>16,w=this.i(E)&65535,k=T.i(j)>>>16,O=T.i(j)&65535;N[2*E+2*j]+=w*O,y(N,2*E+2*j),N[2*E+2*j+1]+=A*O,y(N,2*E+2*j+1),N[2*E+2*j+1]+=w*k,y(N,2*E+2*j+1),N[2*E+2*j+2]+=A*k,y(N,2*E+2*j+2)}for(T=0;T<p;T++)N[T]=N[2*T+1]<<16|N[2*T];for(T=p;T<2*p;T++)N[T]=0;return new o(N,0)};function y(T,p){for(;(T[p]&65535)!=T[p];)T[p+1]+=T[p]>>>16,T[p]&=65535,p++}function _(T,p){this.g=T,this.h=p}function I(T,p){if(v(p))throw Error("division by zero");if(v(T))return new _(m,m);if(C(T))return p=I(R(T),p),new _(R(p.g),R(p.h));if(C(p))return p=I(T,R(p)),new _(R(p.g),p.h);if(T.g.length>30){if(C(T)||C(p))throw Error("slowDivide_ only works with positive integers.");for(var N=f,E=p;E.l(T)<=0;)N=M(N),E=M(E);var j=L(N,1),A=L(E,1);for(E=L(E,2),N=L(N,2);!v(E);){var w=A.add(E);w.l(T)<=0&&(j=j.add(N),A=w),E=L(E,1),N=L(N,1)}return p=S(T,j.j(p)),new _(j,p)}for(j=m;T.l(p)>=0;){for(N=Math.max(1,Math.floor(T.m()/p.m())),E=Math.ceil(Math.log(N)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),A=d(N),w=A.j(p);C(w)||w.l(T)>0;)N-=E,A=d(N),w=A.j(p);v(A)&&(A=f),j=j.add(A),T=S(T,w)}return new _(j,T)}t.B=function(T){return I(this,T).h},t.and=function(T){const p=Math.max(this.g.length,T.g.length),N=[];for(let E=0;E<p;E++)N[E]=this.i(E)&T.i(E);return new o(N,this.h&T.h)},t.or=function(T){const p=Math.max(this.g.length,T.g.length),N=[];for(let E=0;E<p;E++)N[E]=this.i(E)|T.i(E);return new o(N,this.h|T.h)},t.xor=function(T){const p=Math.max(this.g.length,T.g.length),N=[];for(let E=0;E<p;E++)N[E]=this.i(E)^T.i(E);return new o(N,this.h^T.h)};function M(T){const p=T.g.length+1,N=[];for(let E=0;E<p;E++)N[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(N,T.h)}function L(T,p){const N=p>>5;p%=32;const E=T.g.length-N,j=[];for(let A=0;A<E;A++)j[A]=p>0?T.i(A+N)>>>p|T.i(A+N+1)<<32-p:T.i(A+N);return new o(j,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,XE=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Tr=o}).apply(typeof pw<"u"?pw:typeof self<"u"?self:typeof window<"u"?window:{});var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WE,Zl,JE,Kd,qg,ZE,ej,tj;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yd=="object"&&yd];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=n(this);function i(u,g){if(g)e:{var b=s;u=u.split(".");for(var P=0;P<u.length-1;P++){var B=u[P];if(!(B in b))break e;b=b[B]}u=u[u.length-1],P=b[u],g=g(P),g!=P&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(g){var b=[],P;for(P in g)Object.prototype.hasOwnProperty.call(g,P)&&b.push([P,g[P]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function l(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function c(u,g,b){return u.call.apply(u.bind,arguments)}function d(u,g,b){return d=c,d.apply(null,arguments)}function h(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var P=b.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function m(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(P,B,H){for(var te=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)te[ke-2]=arguments[ke];return g.prototype[B].apply(P,te)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function x(u){const g=u.length;if(g>0){const b=Array(g);for(let P=0;P<g;P++)b[P]=u[P];return b}return[]}function v(u,g){for(let P=1;P<arguments.length;P++){const B=arguments[P];var b=typeof B;if(b=b!="object"?b:B?Array.isArray(B)?"array":b:"null",b=="array"||b=="object"&&typeof B.length=="number"){b=u.length||0;const H=B.length||0;u.length=b+H;for(let te=0;te<H;te++)u[b+te]=B[te]}else u.push(B)}}class C{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function R(u){o.setTimeout(()=>{throw u},0)}function S(){var u=T;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class y{constructor(){this.h=this.g=null}add(g,b){const P=_.get();P.set(g,b),this.h?this.h.next=P:this.g=P,this.h=P}}var _=new C(()=>new I,u=>u.reset());class I{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let M,L=!1,T=new y,p=()=>{const u=Promise.resolve(void 0);M=()=>{u.then(N)}};function N(){for(var u;u=S();){try{u.h.call(u.g)}catch(b){R(b)}var g=_;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}L=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};o.addEventListener("test",b,g),o.removeEventListener("test",b,g)}catch{}return u}();function w(u){return/^[\s\xa0]*$/.test(u)}function k(u,g){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}m(k,j),k.prototype.init=function(u,g){const b=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&k.Z.h.call(this)},k.prototype.h=function(){k.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var O="closure_listenable_"+(Math.random()*1e6|0),V=0;function U(u,g,b,P,B){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!P,this.ha=B,this.key=++V,this.da=this.fa=!1}function z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function W(u,g,b){for(const P in u)g.call(b,u[P],P,u)}function F(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function Z(u){const g={};for(const b in u)g[b]=u[b];return g}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(u,g){let b,P;for(let B=1;B<arguments.length;B++){P=arguments[B];for(b in P)u[b]=P[b];for(let H=0;H<pe.length;H++)b=pe[H],Object.prototype.hasOwnProperty.call(P,b)&&(u[b]=P[b])}}function Se(u){this.src=u,this.g={},this.h=0}Se.prototype.add=function(u,g,b,P,B){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const te=tt(u,g,P,B);return te>-1?(g=u[te],b||(g.fa=!1)):(g=new U(g,this.src,H,!!P,B),g.fa=b,u.push(g)),g};function Te(u,g){const b=g.type;if(b in u.g){var P=u.g[b],B=Array.prototype.indexOf.call(P,g,void 0),H;(H=B>=0)&&Array.prototype.splice.call(P,B,1),H&&(z(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function tt(u,g,b,P){for(let B=0;B<u.length;++B){const H=u[B];if(!H.da&&H.listener==g&&H.capture==!!b&&H.ha==P)return B}return-1}var ne="closure_lm_"+(Math.random()*1e6|0),J={};function he(u,g,b,P,B){if(Array.isArray(g)){for(let H=0;H<g.length;H++)he(u,g[H],b,P,B);return null}return b=Ge(b),u&&u[O]?u.J(g,b,l(P)?!!P.capture:!1,B):me(u,g,b,!1,P,B)}function me(u,g,b,P,B,H){if(!g)throw Error("Invalid event type");const te=l(B)?!!B.capture:!!B;let ke=dn(u);if(ke||(u[ne]=ke=new Se(u)),b=ke.add(g,b,P,te,H),b.proxy)return b;if(P=ve(),b.proxy=P,P.src=u,P.listener=b,u.addEventListener)A||(B=te),B===void 0&&(B=!1),u.addEventListener(g.toString(),P,B);else if(u.attachEvent)u.attachEvent(Zn(g.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ve(){function u(b){return g.call(u.src,u.listener,b)}const g=es;return u}function xt(u,g,b,P,B){if(Array.isArray(g))for(var H=0;H<g.length;H++)xt(u,g[H],b,P,B);else P=l(P)?!!P.capture:!!P,b=Ge(b),u&&u[O]?(u=u.i,H=String(g).toString(),H in u.g&&(g=u.g[H],b=tt(g,b,P,B),b>-1&&(z(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[H],u.h--)))):u&&(u=dn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=tt(g,b,P,B)),(b=u>-1?g[u]:null)&&Ct(b))}function Ct(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[O])Te(g.i,u);else{var b=u.type,P=u.proxy;g.removeEventListener?g.removeEventListener(b,P,u.capture):g.detachEvent?g.detachEvent(Zn(b),P):g.addListener&&g.removeListener&&g.removeListener(P),(b=dn(g))?(Te(b,u),b.h==0&&(b.src=null,g[ne]=null)):z(u)}}}function Zn(u){return u in J?J[u]:J[u]="on"+u}function es(u,g){if(u.da)u=!0;else{g=new k(g,this);const b=u.listener,P=u.ha||u.src;u.fa&&Ct(u),u=b.call(P,g)}return u}function dn(u){return u=u[ne],u instanceof Se?u:null}var He="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ge(u){return typeof u=="function"?u:(u[He]||(u[He]=function(g){return u.handleEvent(g)}),u[He])}function Je(){E.call(this),this.i=new Se(this),this.M=this,this.G=null}m(Je,E),Je.prototype[O]=!0,Je.prototype.removeEventListener=function(u,g,b,P){xt(this,u,g,b,P)};function qe(u,g){var b,P=u.G;if(P)for(b=[];P;P=P.G)b.push(P);if(u=u.M,P=g.type||g,typeof g=="string")g=new j(g,u);else if(g instanceof j)g.target=g.target||u;else{var B=g;g=new j(P,u),fe(g,B)}B=!0;let H,te;if(b)for(te=b.length-1;te>=0;te--)H=g.g=b[te],B=ts(H,P,!0,g)&&B;if(H=g.g=u,B=ts(H,P,!0,g)&&B,B=ts(H,P,!1,g)&&B,b)for(te=0;te<b.length;te++)H=g.g=b[te],B=ts(H,P,!1,g)&&B}Je.prototype.N=function(){if(Je.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let P=0;P<b.length;P++)z(b[P]);delete u.g[g],u.h--}}this.G=null},Je.prototype.J=function(u,g,b,P){return this.i.add(String(u),g,!1,b,P)},Je.prototype.K=function(u,g,b,P){return this.i.add(String(u),g,!0,b,P)};function ts(u,g,b,P){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let H=0;H<g.length;++H){const te=g[H];if(te&&!te.da&&te.capture==b){const ke=te.listener,Ut=te.ha||te.src;te.fa&&Te(u.i,te),B=ke.call(Ut,P)!==!1&&B}}return B&&!P.defaultPrevented}function Ha(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function le(u){u.g=Ha(()=>{u.g=null,u.i&&(u.i=!1,le(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ke extends E{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:le(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hn(u){E.call(this),this.h=u,this.g={}}m(hn,E);var ys=[];function Kr(u){W(u.g,function(g,b){this.g.hasOwnProperty(b)&&Ct(g)},u),u.g={}}hn.prototype.N=function(){hn.Z.N.call(this),Kr(this)},hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hu=o.JSON.stringify,mv=o.JSON.parse,pv=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function cm(){}function um(){}var Ga={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tl(){j.call(this,"d")}m(Tl,j);function $(){j.call(this,"c")}m($,j);var G={},re=null;function X(){return re=re||new Je}G.Ia="serverreachability";function se(u){j.call(this,G.Ia,u)}m(se,j);function ae(u){const g=X();qe(g,new se(g))}G.STAT_EVENT="statevent";function ee(u,g){j.call(this,G.STAT_EVENT,u),this.stat=g}m(ee,j);function oe(u){const g=X();qe(g,new ee(g,u))}G.Ja="timingevent";function Ae(u,g){j.call(this,G.Ja,u),this.size=g}m(Ae,j);function ge(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function ye(){this.g=!0}ye.prototype.ua=function(){this.g=!1};function Rt(u,g,b,P,B,H){u.info(function(){if(u.g)if(H){var te="",ke=H.split("&");for(let Ze=0;Ze<ke.length;Ze++){var Ut=ke[Ze].split("=");if(Ut.length>1){const Gt=Ut[0];Ut=Ut[1];const Is=Gt.split("_");te=Is.length>=2&&Is[1]=="type"?te+(Gt+"="+Ut+"&"):te+(Gt+"=redacted&")}}}else te=null;else te=H;return"XMLHTTP REQ ("+P+") [attempt "+B+"]: "+g+`
`+b+`
`+te})}function Qr(u,g,b,P,B,H,te){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+B+"]: "+g+`
`+b+`
`+H+" "+te})}function Cs(u,g,b,P){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+C4(u,b)+(P?" "+P:"")})}function A4(u,g){u.info(function(){return"TIMEOUT: "+g})}ye.prototype.info=function(){};function C4(u,g){if(!u.g)return g;if(!g)return null;try{const H=JSON.parse(g);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var b=H[u];if(!(b.length<2)){var P=b[1];if(Array.isArray(P)&&!(P.length<1)){var B=P[0];if(B!="noop"&&B!="stop"&&B!="close")for(let te=1;te<P.length;te++)P[te]=""}}}}return Hu(H)}catch{return g}}var Gu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xv;function dm(){}m(dm,cm),dm.prototype.g=function(){return new XMLHttpRequest},xv=new dm;function El(u){return encodeURIComponent(String(u))}function R4(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function zi(u,g,b,P){this.j=u,this.i=g,this.l=b,this.S=P||1,this.V=new hn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yv}function yv(){this.i=null,this.g="",this.h=!1}var vv={},hm={};function fm(u,g,b){u.M=1,u.A=Qu(Rs(g)),u.u=b,u.R=!0,bv(u,null)}function bv(u,g){u.F=Date.now(),Ku(u),u.B=Rs(u.A);var b=u.B,P=u.S;Array.isArray(P)||(P=[String(P)]),Dv(b.i,"t",P),u.C=0,b=u.j.L,u.h=new yv,u.g=Wv(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Ke(d(u.Y,u,u.g),u.P)),g=u.V,b=u.g,P=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(ys[0]=B.toString()),B=ys);for(let H=0;H<B.length;H++){const te=he(b,B[H],P||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=u.J?Z(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),ae(),Rt(u.i,u.v,u.B,u.l,u.S,u.u)}zi.prototype.ba=function(u){u=u.target;const g=this.O;g&&Fi(u)==3?g.j():this.Y(u)},zi.prototype.Y=function(u){try{if(u==this.g)e:{const ke=Fi(this.g),Ut=this.g.ya(),Ze=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Uv(this.g)))){this.K||ke!=4||Ut==7||(Ut==8||Ze<=0?ae(3):ae(2)),mm(this);var g=this.g.ca();this.X=g;var b=I4(this);if(this.o=g==200,Qr(this.i,this.v,this.B,this.l,this.S,ke,g),this.o){if(this.U&&!this.L){t:{if(this.g){var P,B=this.g;if((P=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(P)){var H=P;break t}}H=null}if(u=H)Cs(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pm(this,u);else{this.o=!1,this.m=3,oe(12),Yr(this),jl(this);break e}}if(this.R){u=!0;let Gt;for(;!this.K&&this.C<b.length;)if(Gt=k4(this,b),Gt==hm){ke==4&&(this.m=4,oe(14),u=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==vv){this.m=4,oe(15),Cs(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else Cs(this.i,this.l,Gt,null),pm(this,Gt);if(wv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||b.length!=0||this.h.h||(this.m=1,oe(16),u=!1),this.o=this.o&&u,!u)Cs(this.i,this.l,b,"[Invalid Chunked Response]"),Yr(this),jl(this);else if(b.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Nm(te),te.P=!0,oe(11))}}else Cs(this.i,this.l,b,null),pm(this,b);ke==4&&Yr(this),this.o&&!this.K&&(ke==4?Qv(this.j,this):(this.o=!1,Ku(this)))}else K4(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,oe(12)):(this.m=0,oe(13)),Yr(this),jl(this)}}}catch{}finally{}};function I4(u){if(!wv(u))return u.g.la();const g=Uv(u.g);if(g==="")return"";let b="";const P=g.length,B=Fi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Yr(u),jl(u),"";u.h.i=new o.TextDecoder}for(let H=0;H<P;H++)u.h.h=!0,b+=u.h.i.decode(g[H],{stream:!(B&&H==P-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function wv(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function k4(u,g){var b=u.C,P=g.indexOf(`
`,b);return P==-1?hm:(b=Number(g.substring(b,P)),isNaN(b)?vv:(P+=1,P+b>g.length?hm:(g=g.slice(P,P+b),u.C=P+b,g)))}zi.prototype.cancel=function(){this.K=!0,Yr(this)};function Ku(u){u.T=Date.now()+u.H,_v(u,u.H)}function _v(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ge(d(u.aa,u),g)}function mm(u){u.D&&(o.clearTimeout(u.D),u.D=null)}zi.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(A4(this.i,this.B),this.M!=2&&(ae(),oe(17)),Yr(this),this.m=2,jl(this)):_v(this,this.T-u)};function jl(u){u.j.I==0||u.K||Qv(u.j,u)}function Yr(u){mm(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Kr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function pm(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||gm(b.h,u))){if(!u.L&&gm(b.h,u)&&b.I==3){try{var P=b.Ba.g.parse(g)}catch{P=null}if(Array.isArray(P)&&P.length==3){var B=P;if(B[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Ju(b),Xu(b);else break e;_m(b),oe(18)}}else b.xa=B[1],0<b.xa-b.K&&B[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=ge(d(b.Va,b),6e3));Tv(b.h)<=1&&b.ta&&(b.ta=void 0)}else Xr(b,11)}else if((u.L||b.g==u)&&Ju(b),!w(g))for(B=b.Ba.g.parse(g),g=0;g<B.length;g++){let Ze=B[g];const Gt=Ze[0];if(!(Gt<=b.K))if(b.K=Gt,Ze=Ze[1],b.I==2)if(Ze[0]=="c"){b.M=Ze[1],b.ba=Ze[2];const Is=Ze[3];Is!=null&&(b.ka=Is,b.j.info("VER="+b.ka));const Wr=Ze[4];Wr!=null&&(b.za=Wr,b.j.info("SVER="+b.za));const $i=Ze[5];$i!=null&&typeof $i=="number"&&$i>0&&(P=1.5*$i,b.O=P,b.j.info("backChannelRequestTimeoutMs_="+P)),P=b;const Hi=u.g;if(Hi){const ed=Hi.g?Hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ed){var H=P.h;H.g||ed.indexOf("spdy")==-1&&ed.indexOf("quic")==-1&&ed.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(xm(H,H.h),H.h=null))}if(P.G){const Sm=Hi.g?Hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Sm&&(P.wa=Sm,rt(P.J,P.G,Sm))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),P=b;var te=u;if(P.na=Xv(P,P.L?P.ba:null,P.W),te.L){Ev(P.h,te);var ke=te,Ut=P.O;Ut&&(ke.H=Ut),ke.D&&(mm(ke),Ku(ke)),P.g=te}else Gv(P);b.i.length>0&&Wu(b)}else Ze[0]!="stop"&&Ze[0]!="close"||Xr(b,7);else b.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Xr(b,7):wm(b):Ze[0]!="noop"&&b.l&&b.l.qa(Ze),b.A=0)}}ae(4)}catch{}}var D4=class{constructor(u,g){this.g=u,this.map=g}};function Nv(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Tv(u){return u.h?1:u.g?u.g.size:0}function gm(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function xm(u,g){u.g?u.g.add(g):u.h=g}function Ev(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Nv.prototype.cancel=function(){if(this.i=jv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function jv(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return x(u.i)}var Av=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function M4(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const P=u[b].indexOf("=");let B,H=null;P>=0?(B=u[b].substring(0,P),H=u[b].substring(P+1)):B=u[b],g(B,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Ui(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Ui?(this.l=u.l,Al(this,u.j),this.o=u.o,this.g=u.g,Cl(this,u.u),this.h=u.h,ym(this,Mv(u.i)),this.m=u.m):u&&(g=String(u).match(Av))?(this.l=!1,Al(this,g[1]||"",!0),this.o=Rl(g[2]||""),this.g=Rl(g[3]||"",!0),Cl(this,g[4]),this.h=Rl(g[5]||"",!0),ym(this,g[6]||"",!0),this.m=Rl(g[7]||"")):(this.l=!1,this.i=new kl(null,this.l))}Ui.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Il(g,Cv,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Il(g,Cv,!0),"@"),u.push(El(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Il(b,b.charAt(0)=="/"?P4:V4,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Il(b,z4)),u.join("")},Ui.prototype.resolve=function(u){const g=Rs(this);let b=!!u.j;b?Al(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var P=u.h;if(b)Cl(g,u.u);else if(b=!!u.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var B=g.h.lastIndexOf("/");B!=-1&&(P=g.h.slice(0,B+1)+P)}if(B=P,B==".."||B==".")P="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){P=B.lastIndexOf("/",0)==0,B=B.split("/");const H=[];for(let te=0;te<B.length;){const ke=B[te++];ke=="."?P&&te==B.length&&H.push(""):ke==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),P&&te==B.length&&H.push("")):(H.push(ke),P=!0)}P=H.join("/")}else P=B}return b?g.h=P:b=u.i.toString()!=="",b?ym(g,Mv(u.i)):b=!!u.m,b&&(g.m=u.m),g};function Rs(u){return new Ui(u)}function Al(u,g,b){u.j=b?Rl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Cl(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ym(u,g,b){g instanceof kl?(u.i=g,U4(u.i,u.l)):(b||(g=Il(g,L4)),u.i=new kl(g,u.l))}function rt(u,g,b){u.i.set(g,b)}function Qu(u){return rt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Rl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Il(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,O4),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function O4(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cv=/[#\/\?@]/g,V4=/[#\?:]/g,P4=/[#\?]/g,L4=/[#\?@]/g,z4=/#/g;function kl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function qr(u){u.g||(u.g=new Map,u.h=0,u.i&&M4(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=kl.prototype,t.add=function(u,g){qr(this),this.i=null,u=Ka(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Rv(u,g){qr(u),g=Ka(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Iv(u,g){return qr(u),g=Ka(u,g),u.g.has(g)}t.forEach=function(u,g){qr(this),this.g.forEach(function(b,P){b.forEach(function(B){u.call(g,B,P,this)},this)},this)};function kv(u,g){qr(u);let b=[];if(typeof g=="string")Iv(u,g)&&(b=b.concat(u.g.get(Ka(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}t.set=function(u,g){return qr(this),this.i=null,u=Ka(this,u),Iv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=kv(this,u),u.length>0?String(u[0]):g):g};function Dv(u,g,b){Rv(u,g),b.length>0&&(u.i=null,u.g.set(Ka(u,g),x(b)),u.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let P=0;P<g.length;P++){var b=g[P];const B=El(b);b=kv(this,b);for(let H=0;H<b.length;H++){let te=B;b[H]!==""&&(te+="="+El(b[H])),u.push(te)}}return this.i=u.join("&")};function Mv(u){const g=new kl;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Ka(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function U4(u,g){g&&!u.j&&(qr(u),u.i=null,u.g.forEach(function(b,P){const B=P.toLowerCase();P!=B&&(Rv(this,P),Dv(this,B,b))},u)),u.j=g}function B4(u,g){const b=new ye;if(o.Image){const P=new Image;P.onload=h(Bi,b,"TestLoadImage: loaded",!0,g,P),P.onerror=h(Bi,b,"TestLoadImage: error",!1,g,P),P.onabort=h(Bi,b,"TestLoadImage: abort",!1,g,P),P.ontimeout=h(Bi,b,"TestLoadImage: timeout",!1,g,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else g(!1)}function F4(u,g){const b=new ye,P=new AbortController,B=setTimeout(()=>{P.abort(),Bi(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:P.signal}).then(H=>{clearTimeout(B),H.ok?Bi(b,"TestPingServer: ok",!0,g):Bi(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Bi(b,"TestPingServer: error",!1,g)})}function Bi(u,g,b,P,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),P(b)}catch{}}function $4(){this.g=new pv}function vm(u){this.i=u.Sb||null,this.h=u.ab||!1}m(vm,cm),vm.prototype.g=function(){return new Yu(this.i,this.h)};function Yu(u,g){Je.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Yu,Je),t=Yu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Ml(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Dl(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ml(this)),this.g&&(this.readyState=3,Ml(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ov(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ov(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Dl(this):Ml(this),this.readyState==3&&Ov(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Dl(this))},t.Na=function(u){this.g&&(this.response=u,Dl(this))},t.ga=function(){this.g&&Dl(this)};function Dl(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ml(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function Ml(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vv(u){let g="";return W(u,function(b,P){g+=P,g+=":",g+=b,g+=`\r
`}),g}function bm(u,g,b){e:{for(P in b){var P=!1;break e}P=!0}P||(b=Vv(b),typeof u=="string"?b!=null&&El(b):rt(u,g,b))}function yt(u){Je.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(yt,Je);var H4=/^https?$/i,G4=["POST","PUT"];t=yt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,b,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xv.g(),this.g.onreadystatechange=f(d(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(H){Pv(this,H);return}if(u=b||"",b=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var B in P)b.set(B,P[B]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const H of P.keys())b.set(H,P.get(H));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(b.keys()).find(H=>H.toLowerCase()=="content-type"),B=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(G4,g,void 0)>=0)||P||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of b)this.g.setRequestHeader(H,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){Pv(this,H)}};function Pv(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Lv(u),qu(u)}function Lv(u){u.A||(u.A=!0,qe(u,"complete"),qe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,qe(this,"complete"),qe(this,"abort"),qu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qu(this,!0)),yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?zv(this):this.Xa())},t.Xa=function(){zv(this)};function zv(u){if(u.h&&typeof r<"u"){if(u.v&&Fi(u)==4)setTimeout(u.Ca.bind(u),0);else if(qe(u,"readystatechange"),Fi(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var P;if(P=H===0){let te=String(u.D).match(Av)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),P=!H4.test(te?te.toLowerCase():"")}b=P}if(b)qe(u,"complete"),qe(u,"success");else{u.o=6;try{var B=Fi(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Lv(u)}}finally{qu(u)}}}}function qu(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||qe(u,"ready");try{b.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Fi(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Fi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),mv(g)}};function Uv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function K4(u){const g={};u=(u.g&&Fi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(w(u[P]))continue;var b=R4(u[P]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const H=g[B]||[];g[B]=H,H.push(b)}F(g,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ol(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Bv(u){this.za=0,this.i=[],this.j=new ye,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ol("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ol("baseRetryDelayMs",5e3,u),this.Za=Ol("retryDelaySeedMs",1e4,u),this.Ta=Ol("forwardChannelMaxRetries",2,u),this.va=Ol("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Nv(u&&u.concurrentRequestLimit),this.Ba=new $4,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Bv.prototype,t.ka=8,t.I=1,t.connect=function(u,g,b,P){oe(0),this.W=u,this.H=g||{},b&&P!==void 0&&(this.H.OSID=b,this.H.OAID=P),this.F=this.X,this.J=Xv(this,null,this.W),Wu(this)};function wm(u){if(Fv(u),u.I==3){var g=u.V++,b=Rs(u.J);if(rt(b,"SID",u.M),rt(b,"RID",g),rt(b,"TYPE","terminate"),Vl(u,b),g=new zi(u,u.j,g),g.M=2,g.A=Qu(Rs(b)),b=!1,o.navigator&&o.navigator.sendBeacon)try{b=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&o.Image&&(new Image().src=g.A,b=!0),b||(g.g=Wv(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ku(g)}qv(u)}function Xu(u){u.g&&(Nm(u),u.g.cancel(),u.g=null)}function Fv(u){Xu(u),u.v&&(o.clearTimeout(u.v),u.v=null),Ju(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Wu(u){if(!Sv(u.h)&&!u.m){u.m=!0;var g=u.Ea;M||p(),L||(M(),L=!0),T.add(g,u),u.D=0}}function Q4(u,g){return Tv(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ge(d(u.Ea,u,g),Yv(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new zi(this,this.j,u);let H=this.o;if(this.U&&(H?(H=Z(H),fe(H,this.U)):H=this.U),this.u!==null||this.R||(B.J=H,H=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var P=this.i[b];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(g+=P,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Hv(this,B,g),b=Rs(this.J),rt(b,"RID",u),rt(b,"CVER",22),this.G&&rt(b,"X-HTTP-Session-Id",this.G),Vl(this,b),H&&(this.R?g="headers="+El(Vv(H))+"&"+g:this.u&&bm(b,this.u,H)),xm(this.h,B),this.Ra&&rt(b,"TYPE","init"),this.S?(rt(b,"$req",g),rt(b,"SID","null"),B.U=!0,fm(B,b,null)):fm(B,b,g),this.I=2}}else this.I==3&&(u?$v(this,u):this.i.length==0||Sv(this.h)||$v(this))};function $v(u,g){var b;g?b=g.l:b=u.V++;const P=Rs(u.J);rt(P,"SID",u.M),rt(P,"RID",b),rt(P,"AID",u.K),Vl(u,P),u.u&&u.o&&bm(P,u.u,u.o),b=new zi(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Hv(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),xm(u.h,b),fm(b,P,g)}function Vl(u,g){u.H&&W(u.H,function(b,P){rt(g,P,b)}),u.l&&W({},function(b,P){rt(g,P,b)})}function Hv(u,g,b){b=Math.min(u.i.length,b);const P=u.l?d(u.l.Ka,u.l,u):null;e:{var B=u.i;let ke=-1;for(;;){const Ut=["count="+b];ke==-1?b>0?(ke=B[0].g,Ut.push("ofs="+ke)):ke=0:Ut.push("ofs="+ke);let Ze=!0;for(let Gt=0;Gt<b;Gt++){var H=B[Gt].g;const Is=B[Gt].map;if(H-=ke,H<0)ke=Math.max(0,B[Gt].g-100),Ze=!1;else try{H="req"+H+"_"||"";try{var te=Is instanceof Map?Is:Object.entries(Is);for(const[Wr,$i]of te){let Hi=$i;l($i)&&(Hi=Hu($i)),Ut.push(H+Wr+"="+encodeURIComponent(Hi))}}catch(Wr){throw Ut.push(H+"type="+encodeURIComponent("_badmap")),Wr}}catch{P&&P(Is)}}if(Ze){te=Ut.join("&");break e}}te=void 0}return u=u.i.splice(0,b),g.G=u,te}function Gv(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;M||p(),L||(M(),L=!0),T.add(g,u),u.A=0}}function _m(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ge(d(u.Da,u),Yv(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Kv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ge(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,oe(10),Xu(this),Kv(this))};function Nm(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Kv(u){u.g=new zi(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Rs(u.na);rt(g,"RID","rpc"),rt(g,"SID",u.M),rt(g,"AID",u.K),rt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&rt(g,"TO",u.ia),rt(g,"TYPE","xmlhttp"),Vl(u,g),u.u&&u.o&&bm(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Qu(Rs(g)),b.u=null,b.R=!0,bv(b,u)}t.Va=function(){this.C!=null&&(this.C=null,Xu(this),_m(this),oe(19))};function Ju(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Qv(u,g){var b=null;if(u.g==g){Ju(u),Nm(u),u.g=null;var P=2}else if(gm(u.h,g))b=g.G,Ev(u.h,g),P=1;else return;if(u.I!=0){if(g.o)if(P==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;P=X(),qe(P,new Ae(P,b)),Wu(u)}else Gv(u);else if(B=g.m,B==3||B==0&&g.X>0||!(P==1&&Q4(u,g)||P==2&&_m(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),B){case 1:Xr(u,5);break;case 4:Xr(u,10);break;case 3:Xr(u,6);break;default:Xr(u,2)}}}function Yv(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Xr(u,g){if(u.j.info("Error code "+g),g==2){var b=d(u.bb,u),P=u.Ua;const B=!P;P=new Ui(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Al(P,"https"),Qu(P),B?B4(P.toString(),b):F4(P.toString(),b)}else oe(2);u.I=0,u.l&&u.l.pa(g),qv(u),Fv(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function qv(u){if(u.I=0,u.ja=[],u.l){const g=jv(u.h);(g.length!=0||u.i.length!=0)&&(v(u.ja,g),v(u.ja,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.oa()}}function Xv(u,g,b){var P=b instanceof Ui?Rs(b):new Ui(b);if(P.g!="")g&&(P.g=g+"."+P.g),Cl(P,P.u);else{var B=o.location;P=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const H=new Ui(null);P&&Al(H,P),g&&(H.g=g),B&&Cl(H,B),b&&(H.h=b),P=H}return b=u.G,g=u.wa,b&&g&&rt(P,b,g),rt(P,"VER",u.ka),Vl(u,P),P}function Wv(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new yt(new vm({ab:b})):new yt(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jv(){}t=Jv.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Zu(){}Zu.prototype.g=function(u,g){return new Vn(u,g)};function Vn(u,g){Je.call(this),this.g=new Bv(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!w(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Qa(this)}m(Vn,Je),Vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){wm(this.g)},Vn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=Hu(u),u=b);g.i.push(new D4(g.Ya++,u)),g.I==3&&Wu(g)},Vn.prototype.N=function(){this.g.l=null,delete this.j,wm(this.g),delete this.g,Vn.Z.N.call(this)};function Zv(u){Tl.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}m(Zv,Tl);function eb(){$.call(this),this.status=1}m(eb,$);function Qa(u){this.g=u}m(Qa,Jv),Qa.prototype.ra=function(){qe(this.g,"a")},Qa.prototype.qa=function(u){qe(this.g,new Zv(u))},Qa.prototype.pa=function(u){qe(this.g,new eb)},Qa.prototype.oa=function(){qe(this.g,"b")},Zu.prototype.createWebChannel=Zu.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,tj=function(){return new Zu},ej=function(){return X()},ZE=G,qg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gu.NO_ERROR=0,Gu.TIMEOUT=8,Gu.HTTP_ERROR=6,Kd=Gu,gv.COMPLETE="complete",JE=gv,um.EventType=Ga,Ga.OPEN="a",Ga.CLOSE="b",Ga.ERROR="c",Ga.MESSAGE="d",Je.prototype.listen=Je.prototype.J,Zl=um,yt.prototype.listenOnce=yt.prototype.K,yt.prototype.getLastError=yt.prototype.Ha,yt.prototype.getLastErrorCode=yt.prototype.ya,yt.prototype.getStatus=yt.prototype.ca,yt.prototype.getResponseJson=yt.prototype.La,yt.prototype.getResponseText=yt.prototype.la,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Fa,WE=yt}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl="12.9.0";function oO(t){vl=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Vx("@firebase/firestore");function Za(){return Ra.logLevel}function de(t,...e){if(Ra.logLevel<=Oe.DEBUG){const n=e.map(qx);Ra.debug(`Firestore (${vl}): ${t}`,...n)}}function Ai(t,...e){if(Ra.logLevel<=Oe.ERROR){const n=e.map(qx);Ra.error(`Firestore (${vl}): ${t}`,...n)}}function Ia(t,...e){if(Ra.logLevel<=Oe.WARN){const n=e.map(qx);Ra.warn(`Firestore (${vl}): ${t}`,...n)}}function qx(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,nj(t,s,n)}function nj(t,e,n){let s=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ai(s),new Error(s)}function $e(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||nj(e,i,s)}function je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Vi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class cO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uO{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let s=this.i;const i=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let r=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new gi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=r;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new gi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new sj(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class dO{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class hO{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new dO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const s=r=>{r.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=mO(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%62))}return s}}function Ve(t,e){return t<e?-1:t>e?1:0}function Xg(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),r=e.charAt(s);if(i!==r)return xp(i)===xp(r)?Ve(i,r):xp(i)?1:-1}return Ve(t.length,e.length)}const pO=55296,gO=57343;function xp(t){const e=t.charCodeAt(0);return e>=pO&&e<=gO}function Yo(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="__name__";class Os{constructor(e,n,s){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&_e(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Os.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Os?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=Os.compareSegments(e.get(i),n.get(i));if(r!==0)return r}return Ve(e.length,n.length)}static compareSegments(e,n){const s=Os.isNumericId(e),i=Os.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Os.extractNumericId(e).compare(Os.extractNumericId(n)):Xg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tr.fromString(e.substring(4,e.length-2))}}class st extends Os{construct(e,n,s){return new st(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new st(n)}static emptyPath(){return new st([])}}const xO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Os{construct(e,n,s){return new an(e,n,s)}static isValidIdentifier(e){return xO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xw}static keyField(){return new an([xw])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ce(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ce(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(s+=l,i++):(r(),i++)}if(r(),o)throw new ce(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(n)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(st.fromString(e))}static fromName(e){return new xe(st.fromString(e).popFirst(5))}static empty(){return new xe(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t,e,n){if(!n)throw new ce(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yO(t,e,n,s){if(e===!0&&s===!0)throw new ce(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yw(t){if(!xe.isDocumentKey(t))throw new ce(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vw(t){if(xe.isDocumentKey(t))throw new ce(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function Nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vf(t);throw new ce(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Au(t,e){if(!rj(t))throw new ce(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,r="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new ce(Q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=-62135596800,ww=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*ww);return new lt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<bw)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ww}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Au(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Lt("string",lt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new lt(0,0))}static max(){return new Ee(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=-1;function vO(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(s===1e9?new lt(n+1,0):new lt(n,s));return new Ir(i,xe.empty(),e)}function bO(t){return new Ir(t.readTime,t.key,Wc)}class Ir{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ir(Ee.min(),xe.empty(),Wc)}static max(){return new Ir(Ee.max(),xe.empty(),Wc)}}function wO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==_O)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,s)=>{n(e)})}static reject(e){return new q((n,s)=>{s(e)})}static waitFor(e){return new q((n,s)=>{let i=0,r=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++r,o&&r===i&&n()},c=>s(c))}),o=!0,r===i&&n()})}static or(e){let n=q.resolve(!1);for(const s of e)n=n.next(i=>i?q.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(e,n){return new q((s,i)=>{const r=e.length,o=new Array(r);let l=0;for(let c=0;c<r;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===r&&s(o)},h=>i(h))}})}static doWhile(e,n){return new q((s,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):s()};r()})}}function SO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=-1;function Lf(t){return t==null}function Fh(t){return t===0&&1/t==-1/0}function TO(t){return typeof t=="number"&&Number.isInteger(t)&&!Fh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="";function EO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_w(e)),e=jO(t.get(n),e);return _w(e)}function jO(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const r=t.charAt(i);switch(r){case"\0":n+="";break;case aj:n+="";break;default:n+=r}}return n}function _w(t){return t+aj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $r(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??tn.RED,this.left=i??tn.EMPTY,this.right=r??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new tn(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return tn.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,s,i,r){return this}insert(e,n,s){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sw(this.data.getIterator())}getIteratorFrom(e){return new Sw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class Sw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new $t(an.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new lj("Invalid base64 string: "+r):r}}(e);return new un(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const AO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if($e(!!t,39018),typeof t=="string"){let e=0;const n=AO.exec(t);if($e(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="server_timestamp",uj="__type__",dj="__previous_value__",hj="__local_write_time__";function Jx(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[uj])==null?void 0:s.stringValue)===cj}function zf(t){const e=t.mapValue.fields[dj];return Jx(e)?zf(e):e}function Jc(t){const e=kr(t.mapValue.fields[hj].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,n,s,i,r,o,l,c,d,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=m}}const $h="(default)";class Zc{constructor(e,n){this.projectId=e,this.database=n||$h}static empty(){return new Zc("","")}get isDefaultDatabase(){return this.database===$h}isEqual(e){return e instanceof Zc&&e.projectId===this.projectId&&e.database===this.database}}function RO(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ce(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="__type__",IO="__max__",bd={mapValue:{}},mj="__vector__",Hh="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jx(t)?4:DO(t)?9007199254740991:kO(t)?10:11:_e(28295,{value:t})}function Ks(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jc(t).isEqual(Jc(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=kr(i.timestampValue),l=kr(r.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Dr(i.bytesValue).isEqual(Dr(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Tt(i.geoPointValue.latitude)===Tt(r.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Tt(i.integerValue)===Tt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Tt(i.doubleValue),l=Tt(r.doubleValue);return o===l?Fh(o)===Fh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:case 11:return function(i,r){const o=i.mapValue.fields||{},l=r.mapValue.fields||{};if(Nw(o)!==Nw(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Ks(o[c],l[c])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function eu(t,e){return(t.values||[]).find(n=>Ks(n,e))!==void 0}function qo(t,e){if(t===e)return 0;const n=Mr(t),s=Mr(e);if(n!==s)return Ve(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(r,o){const l=Tt(r.integerValue||r.doubleValue),c=Tt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Tw(t.timestampValue,e.timestampValue);case 4:return Tw(Jc(t),Jc(e));case 5:return Xg(t.stringValue,e.stringValue);case 6:return function(r,o){const l=Dr(r),c=Dr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const l=r.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ve(l[d],c[d]);if(h!==0)return h}return Ve(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const l=Ve(Tt(r.latitude),Tt(o.latitude));return l!==0?l:Ve(Tt(r.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ew(t.arrayValue,e.arrayValue);case 10:return function(r,o){var f,x,v,C;const l=r.fields||{},c=o.fields||{},d=(f=l[Hh])==null?void 0:f.arrayValue,h=(x=c[Hh])==null?void 0:x.arrayValue,m=Ve(((v=d==null?void 0:d.values)==null?void 0:v.length)||0,((C=h==null?void 0:h.values)==null?void 0:C.length)||0);return m!==0?m:Ew(d,h)}(t.mapValue,e.mapValue);case 11:return function(r,o){if(r===bd.mapValue&&o===bd.mapValue)return 0;if(r===bd.mapValue)return 1;if(o===bd.mapValue)return-1;const l=r.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const f=Xg(c[m],h[m]);if(f!==0)return f;const x=qo(l[c[m]],d[h[m]]);if(x!==0)return x}return Ve(c.length,h.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function Tw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=kr(t),s=kr(e),i=Ve(n.seconds,s.seconds);return i!==0?i:Ve(n.nanos,s.nanos)}function Ew(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=qo(n[i],s[i]);if(r)return r}return Ve(n.length,s.length)}function Xo(t){return Wg(t)}function Wg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=kr(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=Wg(r);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${Wg(n.fields[o])}`;return i+"}"}(t.mapValue):_e(61005,{value:t})}function Qd(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zf(t);return e?16+Qd(e):16;case 5:return 2*t.stringValue.length;case 6:return Dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+Qd(r),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return $r(s.fields,(r,o)=>{i+=r.length+Qd(o)}),i}(t.mapValue);default:throw _e(13486,{value:t})}}function jw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jg(t){return!!t&&"integerValue"in t}function Zx(t){return!!t&&"arrayValue"in t}function Aw(t){return!!t&&"nullValue"in t}function Cw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yd(t){return!!t&&"mapValue"in t}function kO(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fj])==null?void 0:s.stringValue)===mj}function _c(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return $r(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=_c(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_c(t.arrayValue.values[n]);return e}return{...t}}function DO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===IO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_c(n)}setAll(e){let n=an.emptyPath(),s={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,i),s={},i=[],n=l.popLast()}o?s[l.lastSegment()]=_c(o):i.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());Yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Yd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){$r(n,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new In(_c(this.value))}}function pj(t){const e=[];return $r(t.fields,(n,s)=>{const i=new an([n]);if(Yd(s)){const r=pj(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n,s,i,r,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new gn(e,0,Ee.min(),Ee.min(),Ee.min(),In.empty(),0)}static newFoundDocument(e,n,s,i){return new gn(e,1,n,Ee.min(),s,i,0)}static newNoDocument(e,n){return new gn(e,2,n,Ee.min(),Ee.min(),In.empty(),0)}static newUnknownDocument(e,n){return new gn(e,3,n,Ee.min(),Ee.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.position=e,this.inclusive=n}}function Rw(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(r.field.isKeyField()?s=xe.comparator(xe.fromName(o.referenceValue),n.key):s=qo(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function Iw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ks(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n="asc"){this.field=e,this.dir=n}}function MO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{}class Vt extends gj{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new VO(e,n,s):n==="array-contains"?new zO(e,s):n==="in"?new UO(e,s):n==="not-in"?new BO(e,s):n==="array-contains-any"?new FO(e,s):new Vt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new PO(e,s):new LO(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qo(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ts extends gj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ts(e,n)}matches(e){return xj(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xj(t){return t.op==="and"}function yj(t){return OO(t)&&xj(t)}function OO(t){for(const e of t.filters)if(e instanceof Ts)return!1;return!0}function Zg(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+Xo(t.value);if(yj(t))return t.filters.map(e=>Zg(e)).join(",");{const e=t.filters.map(n=>Zg(n)).join(",");return`${t.op}(${e})`}}function vj(t,e){return t instanceof Vt?function(s,i){return i instanceof Vt&&s.op===i.op&&s.field.isEqual(i.field)&&Ks(s.value,i.value)}(t,e):t instanceof Ts?function(s,i){return i instanceof Ts&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,l)=>r&&vj(o,i.filters[l]),!0):!1}(t,e):void _e(19439)}function bj(t){return t instanceof Vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Xo(n.value)}`}(t):t instanceof Ts?function(n){return n.op.toString()+" {"+n.getFilters().map(bj).join(" ,")+"}"}(t):"Filter"}class VO extends Vt{constructor(e,n,s){super(e,n,s),this.key=xe.fromName(s.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class PO extends Vt{constructor(e,n){super(e,"in",n),this.keys=wj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LO extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=wj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wj(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>xe.fromName(s.referenceValue))}class zO extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zx(n)&&eu(n.arrayValue,this.value)}}class UO extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eu(this.value.arrayValue,n)}}class BO extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eu(this.value.arrayValue,n)}}class FO extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>eu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n=null,s=[],i=[],r=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=l,this.Te=null}}function kw(t,e=null,n=[],s=[],i=null,r=null,o=null){return new $O(t,e,n,s,i,r,o)}function ey(t){const e=je(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Zg(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Xo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Xo(s)).join(",")),e.Te=n}return e.Te}function ty(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iw(t.startAt,e.startAt)&&Iw(t.endAt,e.endAt)}function e0(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n=null,s=[],i=[],r=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function HO(t,e,n,s,i,r,o,l){return new Cu(t,e,n,s,i,r,o,l)}function Uf(t){return new Cu(t)}function Dw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GO(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function _j(t){return t.collectionGroup!==null}function Nc(t){const e=je(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new $t(an.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Kh(r,s))}),n.has(an.keyField().canonicalString())||e.Ie.push(new Kh(an.keyField(),s))}return e.Ie}function Bs(t){const e=je(t);return e.Ee||(e.Ee=KO(e,Nc(t))),e.Ee}function KO(t,e){if(t.limitType==="F")return kw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Kh(i.field,r)});const n=t.endAt?new Gh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Gh(t.startAt.position,t.startAt.inclusive):null;return kw(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function t0(t,e){const n=t.filters.concat([e]);return new Cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function n0(t,e,n){return new Cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bf(t,e){return ty(Bs(t),Bs(e))&&t.limitType===e.limitType}function Nj(t){return`${ey(Bs(t))}|lt:${t.limitType}`}function eo(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>bj(i)).join(", ")}]`),Lf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Xo(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Xo(i)).join(",")),`Target(${s})`}(Bs(t))}; limitType=${t.limitType})`}function Ff(t,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):xe.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(t,e)&&function(s,i){for(const r of Nc(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,l,c){const d=Rw(o,l,c);return o.inclusive?d<=0:d<0}(s.startAt,Nc(s),i)||s.endAt&&!function(o,l,c){const d=Rw(o,l,c);return o.inclusive?d>=0:d>0}(s.endAt,Nc(s),i))}(t,e)}function QO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Sj(t){return(e,n)=>{let s=!1;for(const i of Nc(t)){const r=YO(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function YO(t,e,n){const s=t.field.isKeyField()?xe.comparator(e.key,n.key):function(r,o,l){const c=o.data.field(r),d=l.data.field(r);return c!==null&&d!==null?qo(c,d):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$r(this.inner,(n,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return oj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=new gt(xe.comparator);function Ci(){return qO}const Tj=new gt(xe.comparator);function ec(...t){let e=Tj;for(const n of t)e=e.insert(n.key,n);return e}function Ej(t){let e=Tj;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function da(){return Sc()}function jj(){return Sc()}function Sc(){return new La(t=>t.toString(),(t,e)=>t.isEqual(e))}const XO=new gt(xe.comparator),WO=new $t(xe.comparator);function Pe(...t){let e=WO;for(const n of t)e=e.add(n);return e}const JO=new $t(Ve);function ZO(){return JO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function Aj(t){return{integerValue:""+t}}function eV(t,e){return TO(e)?Aj(e):ny(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this._=void 0}}function tV(t,e,n){return t instanceof Qh?function(i,r){const o={fields:{[uj]:{stringValue:cj},[hj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Jx(r)&&(r=zf(r)),r&&(o.fields[dj]=r),{mapValue:o}}(n,e):t instanceof Wo?Rj(t,e):t instanceof Jo?Ij(t,e):function(i,r){const o=Cj(i,r),l=Mw(o)+Mw(i.Ae);return Jg(o)&&Jg(i.Ae)?Aj(l):ny(i.serializer,l)}(t,e)}function nV(t,e,n){return t instanceof Wo?Rj(t,e):t instanceof Jo?Ij(t,e):n}function Cj(t,e){return t instanceof Yh?function(s){return Jg(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class Qh extends $f{}class Wo extends $f{constructor(e){super(),this.elements=e}}function Rj(t,e){const n=kj(e);for(const s of t.elements)n.some(i=>Ks(i,s))||n.push(s);return{arrayValue:{values:n}}}class Jo extends $f{constructor(e){super(),this.elements=e}}function Ij(t,e){let n=kj(e);for(const s of t.elements)n=n.filter(i=>!Ks(i,s));return{arrayValue:{values:n}}}class Yh extends $f{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Mw(t){return Tt(t.integerValue||t.doubleValue)}function kj(t){return Zx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n){this.field=e,this.transform=n}}function sV(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof Wo&&i instanceof Wo||s instanceof Jo&&i instanceof Jo?Yo(s.elements,i.elements,Ks):s instanceof Yh&&i instanceof Yh?Ks(s.Ae,i.Ae):s instanceof Qh&&i instanceof Qh}(t.transform,e.transform)}class iV{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hf{}function Mj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gf(t.key,Sn.none()):new Ru(t.key,t.data,Sn.none());{const n=t.data,s=In.empty();let i=new $t(an.comparator);for(let r of e.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Hr(t.key,s,new Fn(i.toArray()),Sn.none())}}function rV(t,e,n){t instanceof Ru?function(i,r,o){const l=i.value.clone(),c=Vw(i.fieldTransforms,r,o.transformResults);l.setAll(c),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hr?function(i,r,o){if(!qd(i.precondition,r))return void r.convertToUnknownDocument(o.version);const l=Vw(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(Oj(i)),c.setAll(l),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Tc(t,e,n,s){return t instanceof Ru?function(r,o,l,c){if(!qd(r.precondition,o))return l;const d=r.value.clone(),h=Pw(r.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Hr?function(r,o,l,c){if(!qd(r.precondition,o))return l;const d=Pw(r.fieldTransforms,c,o),h=o.data;return h.setAll(Oj(r)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,s):function(r,o,l){return qd(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function aV(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=Cj(s.transform,i||null);r!=null&&(n===null&&(n=In.empty()),n.set(s.field,r))}return n||null}function Ow(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Yo(s,i,(r,o)=>sV(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ru extends Hf{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hr extends Hf{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Oj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Vw(t,e,n){const s=new Map;$e(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,l=e.data.field(r.field);s.set(r.field,nV(o,l,n[i]))}return s}function Pw(t,e,n){const s=new Map;for(const i of t){const r=i.transform,o=n.data.field(i.field);s.set(i.field,tV(r,o,e))}return s}class Gf extends Hf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oV extends Hf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&rV(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Tc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Tc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=jj();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let l=this.applyToLocalView(o,r.mutatedFields);l=n.has(i.key)?null:l;const c=Mj(o,l);c!==null&&s.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,s)=>Ow(n,s))&&Yo(this.baseMutations,e.baseMutations,(n,s)=>Ow(n,s))}}class sy{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return XO}();const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new sy(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ue;function dV(t){switch(t){case Q.OK:return _e(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function Vj(t){if(t===void 0)return Ai("GRPC error has no .code"),Q.UNKNOWN;switch(t){case kt.OK:return Q.OK;case kt.CANCELLED:return Q.CANCELLED;case kt.UNKNOWN:return Q.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Q.INTERNAL;case kt.UNAVAILABLE:return Q.UNAVAILABLE;case kt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case kt.NOT_FOUND:return Q.NOT_FOUND;case kt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case kt.ABORTED:return Q.ABORTED;case kt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case kt.DATA_LOSS:return Q.DATA_LOSS;default:return _e(39323,{code:t})}}(Ue=kt||(kt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=new Tr([4294967295,4294967295],0);function Lw(t){const e=hV().encode(t),n=new XE;return n.update(e),new Uint8Array(n.digest())}function zw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Tr([n,s],0),new Tr([i,r],0)]}class iy{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new tc(`Invalid padding: ${n}`);if(s<0)throw new tc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new tc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Tr.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(Tr.fromNumber(s)));return i.compare(fV)===1&&(i=new Tr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Lw(e),[s,i]=zw(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new iy(r,i,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Lw(e),[s,i]=zw(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.be(o)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Kf(Ee.min(),i,new gt(Ve),Ci(),Pe())}}class Iu{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Iu(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,s,i){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=i}}class Pj{constructor(e,n){this.targetId=e,this.Ce=n}}class Lj{constructor(e,n,s=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class Uw{constructor(){this.ve=0,this.Fe=Bw(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:_e(38017,{changeType:r})}}),new Iu(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=Bw()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class mV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ci(),this.He=wd(),this.Je=wd(),this.Ze=new gt(Ve)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const r=i.target;if(e0(r))if(s===0){const o=new xe(r.path);this.et(n,o,gn.newNoDocument(o,Ee.min()))}else $e(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,l;try{o=Dr(s).toUint8Array()}catch(c){if(c instanceof lj)return Ia("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new iy(o,i,r)}catch(c){return Ia(c instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.et(n,r,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((r,o)=>{const l=this.ot(o);if(l){if(r.current&&e0(l.target)){const c=new xe(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,gn.newNoDocument(c,e))}r.Be&&(n.set(o,r.ke()),r.Ke())}});let s=Pe();this.Je.forEach((r,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(r))}),this.je.forEach((r,o)=>o.setReadTime(e));const i=new Kf(e,n,this.Ze,this.je,s);return this.je=Ci(),this.He=wd(),this.Je=wd(),this.Ze=new gt(Ve),i}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Uw,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new $t(Ve),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new $t(Ve),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Uw),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wd(){return new gt(xe.comparator)}function Bw(){return new gt(xe.comparator)}const pV={asc:"ASCENDING",desc:"DESCENDING"},gV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xV={and:"AND",or:"OR"};class yV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function s0(t,e){return t.useProto3Json||Lf(e)?e:{value:e}}function qh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vV(t,e){return qh(t,e.toTimestamp())}function Fs(t){return $e(!!t,49232),Ee.fromTimestamp(function(n){const s=kr(n);return new lt(s.seconds,s.nanos)}(t))}function ry(t,e){return i0(t,e).canonicalString()}function i0(t,e){const n=function(i){return new st(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Uj(t){const e=st.fromString(t);return $e(Gj(e),10190,{key:e.toString()}),e}function r0(t,e){return ry(t.databaseId,e.path)}function yp(t,e){const n=Uj(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(Fj(n))}function Bj(t,e){return ry(t.databaseId,e)}function bV(t){const e=Uj(t);return e.length===4?st.emptyPath():Fj(e)}function a0(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Fj(t){return $e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Fw(t,e,n){return{name:r0(t,e),fields:n.value.mapValue.fields}}function wV(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(d,h){return d.useProto3Json?($e(h===void 0||typeof h=="string",58123),un.fromBase64String(h||"")):($e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),un.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?Q.UNKNOWN:Vj(d.code);return new ce(h,d.message||"")}(o);n=new Lj(s,i,r,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=yp(t,s.document.name),r=Fs(s.document.updateTime),o=s.document.createTime?Fs(s.document.createTime):Ee.min(),l=new In({mapValue:{fields:s.document.fields}}),c=gn.newFoundDocument(i,r,o,l),d=s.targetIds||[],h=s.removedTargetIds||[];n=new Xd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=yp(t,s.document),r=s.readTime?Fs(s.readTime):Ee.min(),o=gn.newNoDocument(i,r),l=s.removedTargetIds||[];n=new Xd([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=yp(t,s.document),r=s.removedTargetIds||[];n=new Xd([],r,i,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new uV(i,r),l=s.targetId;n=new Pj(l,o)}}return n}function _V(t,e){let n;if(e instanceof Ru)n={update:Fw(t,e.key,e.value)};else if(e instanceof Gf)n={delete:r0(t,e.key)};else if(e instanceof Hr)n={update:Fw(t,e.key,e.data),updateMask:IV(e.fieldMask)};else{if(!(e instanceof oV))return _e(16599,{dt:e.type});n={verify:r0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,o){const l=o.transform;if(l instanceof Qh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Jo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yh)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw _e(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:vV(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:_e(27497)}(t,e.precondition)),n}function NV(t,e){return t&&t.length>0?($e(e!==void 0,14353),t.map(n=>function(i,r){let o=i.updateTime?Fs(i.updateTime):Fs(r);return o.isEqual(Ee.min())&&(o=Fs(r)),new iV(o,i.transformResults||[])}(n,e))):[]}function SV(t,e){return{documents:[Bj(t,e.path)]}}function TV(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Bj(t,i);const r=function(d){if(d.length!==0)return Hj(Ts.create(d,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(d){if(d.length!==0)return d.map(h=>function(f){return{field:to(f.field),direction:AV(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=s0(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function EV(t){let e=bV(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){$e(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let r=[];n.where&&(r=function(m){const f=$j(m);return f instanceof Ts&&yj(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(f=>function(v){return new Kh(no(v.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(m){let f;return f=typeof m=="object"?m.value:m,Lf(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(m){const f=!!m.before,x=m.values||[];return new Gh(x,f)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const f=!m.before,x=m.values||[];return new Gh(x,f)}(n.endAt)),HO(e,i,o,r,l,"F",c,d)}function jV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $j(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=no(n.unaryFilter.field);return Vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=no(n.unaryFilter.field);return Vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=no(n.unaryFilter.field);return Vt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=no(n.unaryFilter.field);return Vt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return Vt.create(no(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ts.create(n.compositeFilter.filters.map(s=>$j(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function AV(t){return pV[t]}function CV(t){return gV[t]}function RV(t){return xV[t]}function to(t){return{fieldPath:t.canonicalString()}}function no(t){return an.fromServerFormat(t.fieldPath)}function Hj(t){return t instanceof Vt?function(n){if(n.op==="=="){if(Cw(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NAN"}};if(Aw(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cw(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NOT_NAN"}};if(Aw(n.value))return{unaryFilter:{field:to(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:to(n.field),op:CV(n.op),value:n.value}}}(t):t instanceof Ts?function(n){const s=n.getFilters().map(i=>Hj(i));return s.length===1?s[0]:{compositeFilter:{op:RV(n.op),filters:s}}}(t):_e(54877,{filter:t})}function IV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Gj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Kj(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,s,i,r=Ee.min(),o=Ee.min(),l=un.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.yt=e}}function DV(t){const e=EV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?n0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(){this.Sn=new OV}addToCollectionParentIndex(e,n){return this.Sn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Ir.min())}updateCollectionGroup(e,n,s){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class OV{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new $t(st.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new $t(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qj=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(Qj,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Zo(0)}static ar(){return new Zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="LruGarbageCollector",VV=1048576;function Gw([t,e],[n,s]){const i=Ve(t,n);return i===0?Ve(e,s):i}class PV{constructor(e){this.Pr=e,this.buffer=new $t(Gw),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Gw(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LV{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){de(Hw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wl(n)?de(Hw,"Ignoring IndexedDB error during garbage collection: ",n):await bl(n)}await this.Ar(3e5)})}}class zV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Pf.ce);const s=new PV(n);return this.Vr.forEachTarget(e,i=>s.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>s.Er(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve($w)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$w):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,i,r,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(s=m,l=Date.now(),this.removeTargets(e,s,n))).next(m=>(r=m,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),Za()<=Oe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${r} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:m})))}}function UV(t,e){return new zV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.changes=new La(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?q.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&Tc(s.mutation,i,Fn.empty(),lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Pe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Pe()){const i=da();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(r=>{let o=ec();return r.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=da();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Pe()))}populateOverlays(e,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,i){let r=Ci();const o=Sc(),l=function(){return Sc()}();return n.forEach((c,d)=>{const h=s.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Hr)?r=r.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Tc(h.mutation,d,h.mutation.getFieldMask(),lt.now())):o.set(d.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,r).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new FV(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const s=Sc();let i=new gt((o,l)=>o-l),r=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=s.get(c)||Fn.empty();h=l.applyToLocalView(d,h),s.set(c,h);const m=(i.get(l.batchId)||Pe()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,m=jj();h.forEach(f=>{if(!r.has(f)){const x=Mj(n.get(f),s.get(f));x!==null&&m.set(f,x),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return q.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return GO(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_j(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):q.resolve(da());let l=Wc,c=r;return o.next(d=>q.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),r.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{c=c.insert(h,f)}))).next(()=>this.populateOverlays(e,d,r)).next(()=>this.computeViews(e,c,d,Pe())).next(h=>({batchId:l,changes:Ej(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next(s=>{let i=ec();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let o=ec();return this.indexManager.getCollectionParents(e,r).next(l=>q.forEach(l,c=>{const d=function(m,f){return new Cu(f,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(h=>{h.forEach((m,f)=>{o=o.insert(m,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i))).next(o=>{r.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,gn.newInvalidDocument(h)))});let l=ec();return o.forEach((c,d)=>{const h=r.get(c);h!==void 0&&Tc(h.mutation,d,Fn.empty(),lt.now()),Ff(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return q.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Fs(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:DV(i.bundledQuery),readTime:Fs(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(){this.overlays=new gt(xe.comparator),this.Lr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const s=da();return q.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,r)=>{this.bt(e,n,r)}),q.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.Lr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Lr.delete(s)),q.resolve()}getOverlaysForCollection(e,n,s){const i=da(),r=n.length+1,o=new xe(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===r&&c.largestBatchId>s&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new gt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=r.get(d.largestBatchId);h===null&&(h=da(),r=r.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=da(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return q.resolve(l)}bt(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(s.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new cV(n,s));let r=this.Lr.get(n);r===void 0&&(r=Pe(),this.Lr.set(n,r)),this.Lr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.kr=new $t(Yt.Kr),this.qr=new $t(Yt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new Yt(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Wr(new Yt(e,n))}Qr(e,n){e.forEach(s=>this.removeReference(s,n))}Gr(e){const n=new xe(new st([])),s=new Yt(n,e),i=new Yt(n,e+1),r=[];return this.qr.forEachInRange([s,i],o=>{this.Wr(o),r.push(o.key)}),r}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new xe(new st([])),s=new Yt(n,e),i=new Yt(n,e+1);let r=Pe();return this.qr.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new Yt(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Yt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return xe.comparator(e.key,n.key)||Ve(e.Hr,n.Hr)}static Ur(e,n){return Ve(e.Hr,n.Hr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new $t(Yt.Kr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lV(r,n,s,i);this.mutationQueue.push(o);for(const l of i)this.Jr=this.Jr.add(new Yt(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.Xr(s),r=i<0?0:i;return q.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Wx:this.Yn-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Yt(n,0),i=new Yt(n,Number.POSITIVE_INFINITY),r=[];return this.Jr.forEachInRange([s,i],o=>{const l=this.Zr(o.Hr);r.push(l)}),q.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new $t(Ve);return n.forEach(i=>{const r=new Yt(i,0),o=new Yt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([r,o],l=>{s=s.add(l.Hr)})}),q.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;xe.isDocumentKey(r)||(r=r.child(""));const o=new Yt(new xe(r),0);let l=new $t(Ve);return this.Jr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Hr)),!0)},o),q.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(s=>{const i=this.Zr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return q.forEach(n.mutations,i=>{const r=new Yt(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=s})}nr(e){}containsKey(e,n){const s=new Yt(n,0),i=this.Jr.firstAfterOrEqual(s);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.ti=e,this.docs=function(){return new gt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return q.resolve(s?s.document.mutableCopy():gn.newInvalidDocument(n))}getEntries(e,n){let s=Ci();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():gn.newInvalidDocument(i))}),q.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=Ci();const o=n.path,l=new xe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||wO(bO(h),s)<=0||(i.has(h.key)||Ff(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return q.resolve(r)}getAllFromCollectionGroup(e,n,s,i){_e(9500)}ni(e,n){return q.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new qV(this)}getSize(e){return q.resolve(this.size)}}class qV extends BV{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(s)}),q.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.persistence=e,this.ri=new La(n=>ey(n),ty),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.ii=0,this.si=new ay,this.targetCount=0,this.oi=Zo._r()}forEachTarget(e,n){return this.ri.forEach((s,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),q.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Zo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.lr(n),q.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.ri.delete(o),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),q.waitFor(r).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return q.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),q.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return q.resolve(s)}containsKey(e,n){return q.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n){this._i={},this.overlays={},this.ai=new Pf(0),this.ui=!1,this.ui=!0,this.ci=new KV,this.referenceDelegate=e(this),this.li=new XV(this),this.indexManager=new MV,this.remoteDocumentCache=function(i){return new YV(i)}(s=>this.referenceDelegate.hi(s)),this.serializer=new kV(n),this.Pi=new HV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new QV(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const i=new WV(this.ai.next());return this.referenceDelegate.Ti(),s(i).next(r=>this.referenceDelegate.Ii(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ei(e,n){return q.or(Object.values(this._i).map(s=>()=>s.containsKey(e,n)))}}class WV extends NO{constructor(e){super(),this.currentSequenceNumber=e}}class oy{constructor(e){this.persistence=e,this.Ri=new ay,this.Ai=null}static Vi(e){return new oy(e)}get di(){if(this.Ai)return this.Ai;throw _e(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),q.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.di.add(r.toString()))}).next(()=>s.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.di,s=>{const i=xe.fromPath(s);return this.mi(e,i).next(r=>{r||n.removeEntry(i,Ee.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xh{constructor(e,n){this.persistence=e,this.fi=new La(s=>EO(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=UV(this,n)}static Vi(e,n){return new Xh(e,n)}Ti(){}Ii(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}pr(e){let n=0;return this.mr(e,s=>{n++}).next(()=>n)}mr(e,n){return q.forEach(this.fi,(s,i)=>this.wr(e,s,i).next(r=>r?q.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,n).next(l=>{l||(s++,r.removeEntry(o,Ee.min()))})).next(()=>r.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),q.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),q.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qd(e.data.value)),n}wr(e,n,s){return q.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return q.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=i}static Es(e,n){let s=Pe(),i=Pe();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new ly(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return N5()?8:SO(yn())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.gs(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ps(e,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new JV;return this.ys(e,n,o).next(l=>{if(r.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>r.result)}ws(e,n,s,i){return s.documentReadCount<this.Vs?(Za()<=Oe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),q.resolve()):(Za()<=Oe.DEBUG&&de("QueryEngine","Query:",eo(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ds*i?(Za()<=Oe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bs(n))):q.resolve())}gs(e,n){if(Dw(n))return q.resolve(null);let s=Bs(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=n0(n,null,"F"),s=Bs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const o=Pe(...r);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.bs(n,l);return this.Ss(n,d,o,c.readTime)?this.gs(e,n0(n,null,"F")):this.Ds(e,d,n,c)}))})))}ps(e,n,s,i){return Dw(n)||i.isEqual(Ee.min())?q.resolve(null):this.fs.getDocuments(e,s).next(r=>{const o=this.bs(n,r);return this.Ss(n,o,s,i)?q.resolve(null):(Za()<=Oe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),eo(n)),this.Ds(e,o,n,vO(i,Wc)).next(l=>l))})}bs(e,n){let s=new $t(Sj(e));return n.forEach((i,r)=>{Ff(e,r)&&(s=s.add(r))}),s}Ss(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ys(e,n,s){return Za()<=Oe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",eo(n)),this.fs.getDocumentsMatchingQuery(e,n,Ir.min(),s)}Ds(e,n,s,i){return this.fs.getDocumentsMatchingQuery(e,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="LocalStore",eP=3e8;class tP{constructor(e,n,s,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new gt(Ve),this.Fs=new La(r=>ey(r),ty),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $V(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function nP(t,e,n,s){return new tP(t,e,n,s)}async function qj(t,e){const n=je(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.Os(e),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],l=[];let c=Pe();for(const d of i){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of r){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:l}))})})}function sP(t,e){const n=je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const m=d.batch,f=m.keys();let x=q.resolve();return f.forEach(v=>{x=x.next(()=>h.getEntry(c,v)).next(C=>{const R=d.docVersions.get(v);$e(R!==null,48541),C.version.compareTo(R)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),h.addEntry(C)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,s,e,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Pe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function Xj(t){const e=je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function iP(t,e){const n=je(t),s=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((h,m)=>{const f=i.get(m);if(!f)return;l.push(n.li.removeMatchingKeys(r,h.removedDocuments,m).next(()=>n.li.addMatchingKeys(r,h.addedDocuments,m)));let x=f.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(un.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,s)),i=i.insert(m,x),function(C,R,S){return C.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=eP?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(f,x,h)&&l.push(n.li.updateTargetData(r,x))});let c=Ci(),d=Pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))}),l.push(rP(r,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!s.isEqual(Ee.min())){const h=n.li.getLastRemoteSnapshotVersion(r).next(m=>n.li.setTargetsMetadata(r,r.currentSequenceNumber,s));l.push(h)}return q.waitFor(l).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,c,d)).next(()=>c)}).then(r=>(n.vs=i,r))}function rP(t,e,n){let s=Pe(),i=Pe();return n.forEach(r=>s=s.add(r)),e.getEntries(t,s).next(r=>{let o=Ci();return n.forEach((l,c)=>{const d=r.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):de(cy,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:i}})}function aP(t,e){const n=je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Wx),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function oP(t,e){const n=je(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.li.getTargetData(s,e).next(r=>r?(i=r,q.resolve(i)):n.li.allocateTargetId(s).next(o=>(i=new dr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.vs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s})}async function o0(t,e,n){const s=je(t),i=s.vs.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!wl(o))throw o;de(cy,`Failed to update sequence numbers for target ${e}: ${o}`)}s.vs=s.vs.remove(e),s.Fs.delete(i.target)}function Kw(t,e,n){const s=je(t);let i=Ee.min(),r=Pe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const m=je(c),f=m.Fs.get(h);return f!==void 0?q.resolve(m.vs.get(f)):m.li.getTargetData(d,h)}(s,o,Bs(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{r=c})}).next(()=>s.Cs.getDocumentsMatchingQuery(o,e,n?i:Ee.min(),n?r:Pe())).next(l=>(lP(s,QO(e),l),{documents:l,ks:r})))}function lP(t,e,n){let s=t.Ms.get(e)||Ee.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),t.Ms.set(e,s)}class Qw{constructor(){this.activeTargetIds=ZO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cP{constructor(){this.vo=new Qw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Qw,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="ConnectivityMonitor";class qw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){de(Yw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){de(Yw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d=null;function l0(){return _d===null?_d=function(){return 268435456+Math.round(2147483648*Math.random())}():_d++,"0x"+_d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="RestConnection",dP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class hP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${i}`,this.$o=this.databaseId.database===$h?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(e,n,s,i,r){const o=l0(),l=this.Qo(e,n.toUriEncodedString());de(vp,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,r);const{host:d}=new URL(l),h=gl(d);return this.zo(e,l,c,s,h).then(m=>(de(vp,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ia(vp,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",s),m})}jo(e,n,s,i,r,o){return this.Wo(e,n,s,i,r)}Go(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>e[r]=i),s&&s.headers.forEach((i,r)=>e[r]=i)}Qo(e,n){const s=dP[e];let i=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection",Hl=(t,e,n)=>{t.listen(e,s=>{try{n(s)}catch(i){setTimeout(()=>{throw i},0)}})};class ko extends hP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ko.c_){const e=ej();Hl(e,ZE.STAT_EVENT,n=>{n.stat===qg.PROXY?de(fn,"STAT_EVENT: detected buffering proxy"):n.stat===qg.NOPROXY&&de(fn,"STAT_EVENT: detected no buffering proxy")}),ko.c_=!0}}zo(e,n,s,i,r){const o=l0();return new Promise((l,c)=>{const d=new WE;d.setWithCredentials(!0),d.listenOnce(JE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Kd.NO_ERROR:const m=d.getResponseJson();de(fn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case Kd.TIMEOUT:de(fn,`RPC '${e}' ${o} timed out`),c(new ce(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Kd.HTTP_ERROR:const f=d.getStatus();if(de(fn,`RPC '${e}' ${o} failed with status:`,f,"response text:",d.getResponseText()),f>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const v=x==null?void 0:x.error;if(v&&v.status&&v.message){const C=function(S){const y=S.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(y)>=0?y:Q.UNKNOWN}(v.status);c(new ce(C,v.message))}else c(new ce(Q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ce(Q.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{de(fn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);de(fn,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,s,15)})}T_(e,n,s){const i=l0(),r=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const d=r.join("");de(fn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let m=!1,f=!1;const x=new fP({Ho:v=>{f?de(fn,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(m||(de(fn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),de(fn,`RPC '${e}' stream ${i} sending:`,v),h.send(v))},Jo:()=>h.close()});return Hl(h,Zl.EventType.OPEN,()=>{f||(de(fn,`RPC '${e}' stream ${i} transport opened.`),x.i_())}),Hl(h,Zl.EventType.CLOSE,()=>{f||(f=!0,de(fn,`RPC '${e}' stream ${i} transport closed`),x.o_(),this.E_(h))}),Hl(h,Zl.EventType.ERROR,v=>{f||(f=!0,Ia(fn,`RPC '${e}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),x.o_(new ce(Q.UNAVAILABLE,"The operation could not be completed")))}),Hl(h,Zl.EventType.MESSAGE,v=>{var C;if(!f){const R=v.data[0];$e(!!R,16349);const S=R,y=(S==null?void 0:S.error)||((C=S[0])==null?void 0:C.error);if(y){de(fn,`RPC '${e}' stream ${i} received error:`,y);const _=y.status;let I=function(T){const p=kt[T];if(p!==void 0)return Vj(p)}(_),M=y.message;_==="NOT_FOUND"&&M.includes("database")&&M.includes("does not exist")&&M.includes(this.databaseId.database)&&Ia(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),I===void 0&&(I=Q.INTERNAL,M="Unknown error status: "+_+" with message "+y.message),f=!0,x.o_(new ce(I,M)),h.close()}else de(fn,`RPC '${e}' stream ${i} received:`,R),x.__(R)}}),ko.u_(),setTimeout(()=>{x.s_()},0),x}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return tj()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t){return new ko(t)}function bp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){return new yV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ko.c_=!1;class Wj{constructor(e,n,s=1e3,i=1.5,r=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=i,this.V_=r,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="PersistentStream";class Jj{constructor(e,n,s,i,r,o,l,c){this.Ci=e,this.b_=s,this.S_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wj(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===n&&this.G_(s,i)},s=>{e(()=>{const i=new ce(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.Yo(()=>{s(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return de(Xw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(de(Xw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pP extends Jj{constructor(e,n,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wV(this.serializer,e),s=function(r){if(!("targetChange"in r))return Ee.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?Fs(o.readTime):Ee.min()}(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=a0(this.serializer),n.addTarget=function(r,o){let l;const c=o.target;if(l=e0(c)?{documents:SV(r,c)}:{query:TV(r,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=zj(r,o.resumeToken);const d=s0(r,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ee.min())>0){l.readTime=qh(r,o.snapshotVersion.toTimestamp());const d=s0(r,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=jV(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=a0(this.serializer),n.removeTarget=e,this.K_(n)}}class gP extends Jj{constructor(e,n,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=NV(e.writeResults,e.commitTime),s=Fs(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=a0(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>_V(this.serializer,s))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{}class yP extends xP{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Wo(e,i0(n,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ce(Q.UNKNOWN,r.toString())})}jo(e,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,i0(n,s),i,o,l,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(Q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function vP(t,e,n,s){return new yP(t,e,n,s)}class bP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="RemoteStore";class wP{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=r,this.Aa.Mo(o=>{s.enqueueAndForget(async()=>{za(this)&&(de(ka,"Restarting streams for network reachability change."),await async function(c){const d=je(c);d.Ea.add(4),await ku(d),d.Va.set("Unknown"),d.Ea.delete(4),await Yf(d)}(this))})}),this.Va=new bP(s,i)}}async function Yf(t){if(za(t))for(const e of t.Ra)await e(!0)}async function ku(t){for(const e of t.Ra)await e(!1)}function Zj(t,e){const n=je(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fy(n)?hy(n):_l(n).O_()&&dy(n,e))}function uy(t,e){const n=je(t),s=_l(n);n.Ia.delete(e),s.O_()&&eA(n,e),n.Ia.size===0&&(s.O_()?s.L_():za(n)&&n.Va.set("Unknown"))}function dy(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_l(t).Z_(e)}function eA(t,e){t.da.$e(e),_l(t).X_(e)}function hy(t){t.da=new mV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_l(t).start(),t.Va.ua()}function fy(t){return za(t)&&!_l(t).x_()&&t.Ia.size>0}function za(t){return je(t).Ea.size===0}function tA(t){t.da=void 0}async function _P(t){t.Va.set("Online")}async function NP(t){t.Ia.forEach((e,n)=>{dy(t,e)})}async function SP(t,e){tA(t),fy(t)?(t.Va.ha(e),hy(t)):t.Va.set("Unknown")}async function TP(t,e,n){if(t.Va.set("Online"),e instanceof Lj&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const l of r.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(s){de(ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wh(t,s)}else if(e instanceof Xd?t.da.Xe(e):e instanceof Pj?t.da.st(e):t.da.tt(e),!n.isEqual(Ee.min()))try{const s=await Xj(t.localStore);n.compareTo(s)>=0&&await function(r,o){const l=r.da.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=r.Ia.get(d);h&&r.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=r.Ia.get(c);if(!h)return;r.Ia.set(c,h.withResumeToken(un.EMPTY_BYTE_STRING,h.snapshotVersion)),eA(r,c);const m=new dr(h.target,c,d,h.sequenceNumber);dy(r,m)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){de(ka,"Failed to raise snapshot:",s),await Wh(t,s)}}async function Wh(t,e,n){if(!wl(e))throw e;t.Ea.add(1),await ku(t),t.Va.set("Offline"),n||(n=()=>Xj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de(ka,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Yf(t)})}function nA(t,e){return e().catch(n=>Wh(t,n,e))}async function qf(t){const e=je(t),n=Or(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wx;for(;EP(e);)try{const i=await aP(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,jP(e,i)}catch(i){await Wh(e,i)}sA(e)&&iA(e)}function EP(t){return za(t)&&t.Ta.length<10}function jP(t,e){t.Ta.push(e);const n=Or(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function sA(t){return za(t)&&!Or(t).x_()&&t.Ta.length>0}function iA(t){Or(t).start()}async function AP(t){Or(t).ra()}async function CP(t){const e=Or(t);for(const n of t.Ta)e.ea(n.mutations)}async function RP(t,e,n){const s=t.Ta.shift(),i=sy.from(s,e,n);await nA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await qf(t)}async function IP(t,e){e&&Or(t).Y_&&await async function(s,i){if(function(o){return dV(o)&&o!==Q.ABORTED}(i.code)){const r=s.Ta.shift();Or(s).B_(),await nA(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await qf(s)}}(t,e),sA(t)&&iA(t)}async function Ww(t,e){const n=je(t);n.asyncQueue.verifyOperationInProgress(),de(ka,"RemoteStore received new credentials");const s=za(n);n.Ea.add(3),await ku(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Yf(n)}async function kP(t,e){const n=je(t);e?(n.Ea.delete(2),await Yf(n)):e||(n.Ea.add(2),await ku(n),n.Va.set("Unknown"))}function _l(t){return t.ma||(t.ma=function(n,s,i){const r=je(n);return r.sa(),new pP(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:_P.bind(null,t),Yo:NP.bind(null,t),t_:SP.bind(null,t),J_:TP.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),fy(t)?hy(t):t.Va.set("Unknown")):(await t.ma.stop(),tA(t))})),t.ma}function Or(t){return t.fa||(t.fa=function(n,s,i){const r=je(n);return r.sa(),new gP(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:AP.bind(null,t),t_:IP.bind(null,t),ta:CP.bind(null,t),na:RP.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await qf(t)):(await t.fa.stop(),t.Ta.length>0&&(de(ka,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const o=Date.now()+s,l=new my(e,n,o,i,r);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),wl(t))return new ce(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||xe.comparator(n.key,s.key):(n,s)=>xe.comparator(n.key,s.key),this.keyedMap=ec(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Do;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.ga=new gt(xe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class el{constructor(e,n,s,i,r,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,i,r){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new el(e,n,Do.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class MP{constructor(){this.queries=Zw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=je(n),r=i.queries;i.queries=Zw(),r.forEach((o,l)=>{for(const c of l.ba)c.onError(s)})})(this,new ce(Q.ABORTED,"Firestore shutting down"))}}function Zw(){return new La(t=>Nj(t),Bf)}async function gy(t,e){const n=je(t);let s=3;const i=e.query;let r=n.queries.get(i);r?!r.Sa()&&e.Da()&&(s=2):(r=new DP,s=e.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=py(o,`Initialization of query '${eo(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,r),r.ba.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&yy(n)}async function xy(t,e){const n=je(t),s=e.query;let i=3;const r=n.queries.get(s);if(r){const o=r.ba.indexOf(e);o>=0&&(r.ba.splice(o,1),r.ba.length===0?i=e.Da()?0:1:!r.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function OP(t,e){const n=je(t);let s=!1;for(const i of e){const r=i.query,o=n.queries.get(r);if(o){for(const l of o.ba)l.Fa(i)&&(s=!0);o.wa=i}}s&&yy(n)}function VP(t,e,n){const s=je(t),i=s.queries.get(e);if(i)for(const r of i.ba)r.onError(n);s.queries.delete(e)}function yy(t){t.Ca.forEach(e=>{e.next()})}var c0,e_;(e_=c0||(c0={})).Ma="default",e_.Cache="cache";class vy{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new el(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==c0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.key=e}}class aA{constructor(e){this.key=e}}class PP{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Pe(),this.mutatedKeys=Pe(),this.eu=Sj(e),this.tu=new Do(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new Jw,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const f=i.get(h),x=Ff(this.query,m)?m:null,v=!!f&&this.mutatedKeys.has(f.key),C=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let R=!1;f&&x?f.data.isEqual(x.data)?v!==C&&(s.track({type:3,doc:x}),R=!0):this.su(f,x)||(s.track({type:2,doc:x}),R=!0,(c&&this.eu(x,c)>0||d&&this.eu(x,d)<0)&&(l=!0)):!f&&x?(s.track({type:0,doc:x}),R=!0):f&&!x&&(s.track({type:1,doc:f}),R=!0,(c||d)&&(l=!0)),R&&(x?(o=o.add(x),r=C?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Ss:l,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(x,v){const C=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:R})}};return C(x)-C(v)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(s),i=i??!1;const l=n&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new el(this.query,e.tu,r,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Pe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new aA(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new rA(s))}),n}cu(e){this.Za=e.ks,this.Ya=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return el.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const by="SyncEngine";class LP{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class zP{constructor(e){this.key=e,this.hu=!1}}class UP{constructor(e,n,s,i,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new La(l=>Nj(l),Bf),this.Iu=new Map,this.Eu=new Set,this.Ru=new gt(xe.comparator),this.Au=new Map,this.Vu=new ay,this.du={},this.mu=new Map,this.fu=Zo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BP(t,e,n=!0){const s=hA(t);let i;const r=s.Tu.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await oA(s,e,n,!0),i}async function FP(t,e){const n=hA(t);await oA(n,e,!0,!1)}async function oA(t,e,n,s){const i=await oP(t.localStore,Bs(e)),r=i.targetId,o=t.sharedClientState.addLocalQueryTarget(r,n);let l;return s&&(l=await $P(t,e,r,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Zj(t.remoteStore,i),l}async function $P(t,e,n,s,i){t.pu=(m,f,x)=>async function(C,R,S,y){let _=R.view.ru(S);_.Ss&&(_=await Kw(C.localStore,R.query,!1).then(({documents:T})=>R.view.ru(T,_)));const I=y&&y.targetChanges.get(R.targetId),M=y&&y.targetMismatches.get(R.targetId)!=null,L=R.view.applyChanges(_,C.isPrimaryClient,I,M);return n_(C,R.targetId,L.au),L.snapshot}(t,m,f,x);const r=await Kw(t.localStore,e,!0),o=new PP(e,r.ks),l=o.ru(r.documents),c=Iu.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,c);n_(t,n,d.au);const h=new LP(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function HP(t,e,n){const s=je(t),i=s.Tu.get(e),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter(o=>!Bf(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await o0(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&uy(s.remoteStore,i.targetId),u0(s,i.targetId)}).catch(bl)):(u0(s,i.targetId),await o0(s.localStore,i.targetId,!0))}async function GP(t,e){const n=je(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),uy(n.remoteStore,s.targetId))}async function KP(t,e,n){const s=ZP(t);try{const i=await function(o,l){const c=je(o),d=lt.now(),h=l.reduce((x,v)=>x.add(v.key),Pe());let m,f;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let v=Ci(),C=Pe();return c.xs.getEntries(x,h).next(R=>{v=R,v.forEach((S,y)=>{y.isValidDocument()||(C=C.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,v)).next(R=>{m=R;const S=[];for(const y of l){const _=aV(y,m.get(y.key).overlayedDocument);_!=null&&S.push(new Hr(y.key,_,pj(_.value.mapValue),Sn.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,S,l)}).next(R=>{f=R;const S=R.applyToLocalDocumentSet(m,C);return c.documentOverlayCache.saveOverlays(x,R.batchId,S)})}).then(()=>({batchId:f.batchId,changes:Ej(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let d=o.du[o.currentUser.toKey()];d||(d=new gt(Ve)),d=d.insert(l,c),o.du[o.currentUser.toKey()]=d}(s,i.batchId,n),await Du(s,i.changes),await qf(s.remoteStore)}catch(i){const r=py(i,"Failed to persist write");n.reject(r)}}async function lA(t,e){const n=je(t);try{const s=await iP(n.localStore,e);e.targetChanges.forEach((i,r)=>{const o=n.Au.get(r);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?$e(o.hu,14607):i.removedDocuments.size>0&&($e(o.hu,42227),o.hu=!1))}),await Du(n,s,e)}catch(s){await bl(s)}}function t_(t,e,n){const s=je(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach((r,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=je(o);c.onlineState=l;let d=!1;c.queries.forEach((h,m)=>{for(const f of m.ba)f.va(l)&&(d=!0)}),d&&yy(c)}(s.eventManager,e),i.length&&s.Pu.J_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function QP(t,e,n){const s=je(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),r=i&&i.key;if(r){let o=new gt(xe.comparator);o=o.insert(r,gn.newNoDocument(r,Ee.min()));const l=Pe().add(r),c=new Kf(Ee.min(),new Map,new gt(Ve),o,l);await lA(s,c),s.Ru=s.Ru.remove(r),s.Au.delete(e),wy(s)}else await o0(s.localStore,e,!1).then(()=>u0(s,e,n)).catch(bl)}async function YP(t,e){const n=je(t),s=e.batch.batchId;try{const i=await sP(n.localStore,e);uA(n,s,null),cA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Du(n,i)}catch(i){await bl(i)}}async function qP(t,e,n){const s=je(t);try{const i=await function(o,l){const c=je(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>($e(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(s.localStore,e);uA(s,e,n),cA(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Du(s,i)}catch(i){await bl(i)}}function cA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function uA(t,e,n){const s=je(t);let i=s.du[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.du[s.currentUser.toKey()]=i}}function u0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(s=>{t.Vu.containsKey(s)||dA(t,s)})}function dA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(uy(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),wy(t))}function n_(t,e,n){for(const s of n)s instanceof rA?(t.Vu.addReference(s.key,e),XP(t,s)):s instanceof aA?(de(by,"Document no longer in limbo: "+s.key),t.Vu.removeReference(s.key,e),t.Vu.containsKey(s.key)||dA(t,s.key)):_e(19791,{wu:s})}function XP(t,e){const n=e.key,s=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(s)||(de(by,"New document in limbo: "+n),t.Eu.add(s),wy(t))}function wy(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new xe(st.fromString(e)),s=t.fu.next();t.Au.set(s,new zP(n)),t.Ru=t.Ru.insert(n,s),Zj(t.remoteStore,new dr(Bs(Uf(n.path)),s,"TargetPurposeLimboResolution",Pf.ce))}}async function Du(t,e,n){const s=je(t),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){i.push(d);const m=ly.Es(c.targetId,d);r.push(m)}}))}),await Promise.all(o),s.Pu.J_(i),await async function(c,d){const h=je(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(d,f=>q.forEach(f.Ts,x=>h.persistence.referenceDelegate.addReference(m,f.targetId,x)).next(()=>q.forEach(f.Is,x=>h.persistence.referenceDelegate.removeReference(m,f.targetId,x)))))}catch(m){if(!wl(m))throw m;de(cy,"Failed to update sequence numbers: "+m)}for(const m of d){const f=m.targetId;if(!m.fromCache){const x=h.vs.get(f),v=x.snapshotVersion,C=x.withLastLimboFreeSnapshotVersion(v);h.vs=h.vs.insert(f,C)}}}(s.localStore,r))}async function WP(t,e){const n=je(t);if(!n.currentUser.isEqual(e)){de(by,"User change. New user:",e.toKey());const s=await qj(n.localStore,e);n.currentUser=e,function(r,o){r.mu.forEach(l=>{l.forEach(c=>{c.reject(new ce(Q.CANCELLED,o))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Du(n,s.Ns)}}function JP(t,e){const n=je(t),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let i=Pe();const r=n.Iu.get(e);if(!r)return i;for(const o of r){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function hA(t){const e=je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QP.bind(null,e),e.Pu.J_=OP.bind(null,e.eventManager),e.Pu.yu=VP.bind(null,e.eventManager),e}function ZP(t){const e=je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qP.bind(null,e),e}class Jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return nP(this.persistence,new ZV,e.initialUser,this.serializer)}Cu(e){return new Yj(oy.Vi,this.serializer)}Du(e){return new cP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jh.provider={build:()=>new Jh};class eL extends Jh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$e(this.persistence.referenceDelegate instanceof Xh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new LV(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new Yj(s=>Xh.Vi(s,n),this.serializer)}}class d0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>t_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=WP.bind(null,this.syncEngine),await kP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MP}()}createDatastore(e){const n=Qf(e.databaseInfo.databaseId),s=mP(e.databaseInfo);return vP(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,r,o,l){return new wP(s,i,r,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>t_(this.syncEngine,n,0),function(){return qw.v()?new qw:new uP}())}createSyncEngine(e,n){return function(i,r,o,l,c,d,h){const m=new UP(i,r,o,l,c,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const r=je(i);de(ka,"RemoteStore shutting down."),r.Ea.add(5),await ku(r),r.Aa.shutdown(),r.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}d0.provider={build:()=>new d0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="FirestoreClient";class tL{constructor(e,n,s,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=i,this.user=pn.UNAUTHENTICATED,this.clientId=Xx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async o=>{de(Vr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(de(Vr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=py(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function wp(t,e){t.asyncQueue.verifyOperationInProgress(),de(Vr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await qj(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function s_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nL(t);de(Vr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Ww(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Ww(e.remoteStore,i)),t._onlineComponents=e}async function nL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(Vr,"Using user provided OfflineComponentProvider");try{await wp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ia("Error using user provided cache. Falling back to memory cache: "+n),await wp(t,new Jh)}}else de(Vr,"Using default OfflineComponentProvider"),await wp(t,new eL(void 0));return t._offlineComponents}async function fA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(Vr,"Using user provided OnlineComponentProvider"),await s_(t,t._uninitializedComponentsProvider._online)):(de(Vr,"Using default OnlineComponentProvider"),await s_(t,new d0))),t._onlineComponents}function sL(t){return fA(t).then(e=>e.syncEngine)}async function Zh(t){const e=await fA(t),n=e.eventManager;return n.onListen=BP.bind(null,e.syncEngine),n.onUnlisten=HP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GP.bind(null,e.syncEngine),n}function iL(t,e,n,s){const i=new _y(s),r=new vy(e,i,n);return t.asyncQueue.enqueueAndForget(async()=>gy(await Zh(t),r)),()=>{i.Nu(),t.asyncQueue.enqueueAndForget(async()=>xy(await Zh(t),r))}}function rL(t,e,n={}){const s=new gi;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,l,c,d){const h=new _y({next:f=>{h.Nu(),o.enqueueAndForget(()=>xy(r,m));const x=f.docs.has(l);!x&&f.fromCache?d.reject(new ce(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&f.fromCache&&c&&c.source==="server"?d.reject(new ce(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(f)},error:f=>d.reject(f)}),m=new vy(Uf(l.path),h,{includeMetadataChanges:!0,Ka:!0});return gy(r,m)}(await Zh(t),t.asyncQueue,e,n,s)),s.promise}function aL(t,e,n={}){const s=new gi;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,l,c,d){const h=new _y({next:f=>{h.Nu(),o.enqueueAndForget(()=>xy(r,m)),f.fromCache&&c.source==="server"?d.reject(new ce(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(f)},error:f=>d.reject(f)}),m=new vy(l,h,{includeMetadataChanges:!0,Ka:!0});return gy(r,m)}(await Zh(t),t.asyncQueue,e,n,s)),s.promise}function oL(t,e){const n=new gi;return t.asyncQueue.enqueueAndForget(async()=>KP(await sL(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL="ComponentProvider",i_=new Map;function cL(t,e,n,s,i){return new CO(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,mA(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firestore.googleapis.com",r_=!0;class a_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pA,this.ssl=r_}else this.host=e.host,this.ssl=e.ssl??r_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VV)throw new ce(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mA(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xf{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new lO;switch(s.type){case"firstParty":return new hO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=i_.get(n);s&&(de(lL,"Removing Datastore"),i_.delete(n),s.terminate())}(this),Promise.resolve()}}function uL(t,e,n,s={}){var d;t=Nn(t,Xf);const i=gl(e),r=t._getSettings(),o={...r,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(cE(`https://${l}`),uE("Firestore",!0)),r.host!==pA&&r.host!==l&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...r,host:l,ssl:i,emulatorOptions:s};if(!Ti(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,m;if(typeof s.mockUserToken=="string")h=s.mockUserToken,m=pn.MOCK_USER;else{h=m5(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new ce(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new pn(f)}t._authCredentials=new cO(new sj(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ua(this.firestore,e,this._query)}}class _t{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Au(n,_t._jsonSchema))return new _t(e,s||null,new xe(st.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Lt("string",_t._jsonSchemaVersion),referencePath:Lt("string")};class Er extends Ua{constructor(e,n,s){super(e,n,Uf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new xe(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function nt(t,e,...n){if(t=Nt(t),ij("collection","path",e),t instanceof Xf){const s=st.fromString(e,...n);return vw(s),new Er(t,null,s)}{if(!(t instanceof _t||t instanceof Er))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(st.fromString(e,...n));return vw(s),new Er(t.firestore,null,s)}}function Ce(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=Xx.newId()),ij("doc","path",e),t instanceof Xf){const s=st.fromString(e,...n);return yw(s),new _t(t,null,new xe(s))}{if(!(t instanceof _t||t instanceof Er))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(st.fromString(e,...n));return yw(s),new _t(t.firestore,t instanceof Er?t.converter:null,new xe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="AsyncQueue";class l_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wj(this,"async_queue_retry"),this._c=()=>{const s=bp();s&&de(o_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=bp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new gi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!wl(e))throw e;de(o_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",c_(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=my.createAndSchedule(this,e,n,s,r=>this.hc(r));return this.tc.push(i),i}uc(){this.nc&&_e(47125,{Pc:c_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function c_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Qs extends Xf{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new l_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l_(e),this._firestoreClient=void 0,await e}}}function dL(t,e){const n=typeof t=="object"?t:mE(),s=typeof t=="string"?t:$h,i=Lx(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=h5("firestore");r&&uL(i,...r)}return i}function Mu(t){if(t._terminated)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hL(t),t._firestoreClient}function hL(t){var s,i,r,o;const e=t._freezeSettings(),n=cL(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new tL(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ds(un.fromBase64String(e))}catch(n){throw new ce(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ds(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ds._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Au(e,ds._jsonSchema))return ds.fromBase64String(e.bytes)}}ds._jsonSchemaVersion="firestore/bytes/1.0",ds._jsonSchema={type:Lt("string",ds._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$s._jsonSchemaVersion}}static fromJSON(e){if(Au(e,$s._jsonSchema))return new $s(e.latitude,e.longitude)}}$s._jsonSchemaVersion="firestore/geoPoint/1.0",$s._jsonSchema={type:Lt("string",$s._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Au(e,Ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ss(e.vectorValues);throw new ce(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ss._jsonSchemaVersion="firestore/vectorValue/1.0",Ss._jsonSchema={type:Lt("string",Ss._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=/^__.*__$/;class mL{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ru(e,this.data,n,this.fieldTransforms)}}class gA{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{dataSource:t})}}class Jf{constructor(e,n,s,i,r,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.validatePath(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Jf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ef(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(xA(this.dataSource)&&fL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class pL{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Qf(e)}createContext(e,n,s,i=!1){return new Jf({dataSource:e,methodName:n,targetDoc:s,path:an.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vu(t){const e=t._freezeSettings(),n=Qf(t._databaseId);return new pL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ny(t,e,n,s,i,r={}){const o=t.createContext(r.merge||r.mergeFields?2:0,e,n,i);Ey("Data must be an object, but it was:",o,s);const l=wA(s,o);let c,d;if(r.merge)c=new Fn(o.fieldMask),d=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const m of r.mergeFields){const f=tl(e,m,n);if(!o.contains(f))throw new ce(Q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);SA(h,f)||h.push(f)}c=new Fn(h),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new mL(new In(l),c,d)}class Zf extends Ou{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zf}}function yA(t,e,n){return new Jf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sy extends Ou{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=yA(this,e,!0),s=this.Ac.map(r=>Ba(r,n)),i=new Wo(s);return new Dj(e.path,i)}isEqual(e){return e instanceof Sy&&Ti(this.Ac,e.Ac)}}class Ty extends Ou{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=yA(this,e,!0),s=this.Ac.map(r=>Ba(r,n)),i=new Jo(s);return new Dj(e.path,i)}isEqual(e){return e instanceof Ty&&Ti(this.Ac,e.Ac)}}function vA(t,e,n,s){const i=t.createContext(1,e,n);Ey("Data must be an object, but it was:",i,s);const r=[],o=In.empty();$r(s,(c,d)=>{const h=NA(e,c,n);d=Nt(d);const m=i.childContextForFieldPath(h);if(d instanceof Zf)r.push(h);else{const f=Ba(d,m);f!=null&&(r.push(h),o.set(h,f))}});const l=new Fn(r);return new gA(o,l,i.fieldTransforms)}function bA(t,e,n,s,i,r){const o=t.createContext(1,e,n),l=[tl(e,s,n)],c=[i];if(r.length%2!=0)throw new ce(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)l.push(tl(e,r[f])),c.push(r[f+1]);const d=[],h=In.empty();for(let f=l.length-1;f>=0;--f)if(!SA(d,l[f])){const x=l[f];let v=c[f];v=Nt(v);const C=o.childContextForFieldPath(x);if(v instanceof Zf)d.push(x);else{const R=Ba(v,C);R!=null&&(d.push(x),h.set(x,R))}}const m=new Fn(d);return new gA(h,m,o.fieldTransforms)}function gL(t,e,n,s=!1){return Ba(n,t.createContext(s?4:3,e))}function Ba(t,e){if(_A(t=Nt(t)))return Ey("Unsupported field value:",e,t),wA(t,e);if(t instanceof Ou)return function(s,i){if(!xA(i.dataSource))throw i.createError(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const l of s){let c=Ba(l,i.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(s,i){if((s=Nt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return eV(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=lt.fromDate(s);return{timestampValue:qh(i.serializer,r)}}if(s instanceof lt){const r=new lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qh(i.serializer,r)}}if(s instanceof $s)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ds)return{bytesValue:zj(i.serializer,s._byteString)};if(s instanceof _t){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ry(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Ss)return function(o,l){const c=o instanceof Ss?o.toArray():o;return{mapValue:{fields:{[fj]:{stringValue:mj},[Hh]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw l.createError("VectorValues must only contain numeric values.");return ny(l.serializer,h)})}}}}}}(s,i);if(Kj(s))return s._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Vf(s)}`)}(t,e)}function wA(t,e){const n={};return oj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$r(t,(s,i)=>{const r=Ba(i,e.childContextForField(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function _A(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof $s||t instanceof ds||t instanceof _t||t instanceof Ou||t instanceof Ss||Kj(t))}function Ey(t,e,n){if(!_A(n)||!rj(n)){const s=Vf(n);throw s==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+s)}}function tl(t,e,n){if((e=Nt(e))instanceof Wf)return e._internalPath;if(typeof e=="string")return NA(t,e);throw ef("Field path arguments must be of type string or ",t,!1,void 0,n)}const xL=new RegExp("[~\\*/\\[\\]]");function NA(t,e,n){if(e.search(xL)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wf(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ef(t,e,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new ce(Q.INVALID_ARGUMENT,l+t+c)}function SA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return $r(e,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(e){var s,i,r;const n=(r=(i=(s=e.fields)==null?void 0:s[Hh].arrayValue)==null?void 0:i.values)==null?void 0:r.map(o=>Tt(o.doubleValue));return new Ss(n)}convertGeoPoint(e){return new $s(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=zf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Jc(e));default:return null}}convertTimestamp(e){const n=kr(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=st.fromString(e);$e(Gj(s),9688,{name:e});const i=new Zc(s.get(1),s.get(3)),r=new xe(s.popFirst(5));return i.isEqual(n)||Ai(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy extends yL{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function u_(...t){return new Sy("arrayUnion",t)}function _p(...t){return new Ty("arrayRemove",t)}const d_="@firebase/firestore",h_="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(tl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vL extends TA{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ay{}class bL extends Ay{}function Jt(t,e,...n){let s=[];e instanceof Ay&&s.push(e),s=s.concat(n),function(r){const o=r.filter(c=>c instanceof Cy).length,l=r.filter(c=>c instanceof em).length;if(o>1||o>0&&l>0)throw new ce(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class em extends bL{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new em(e,n,s)}_apply(e){const n=this._parse(e);return jA(e._query,n),new Ua(e.firestore,e.converter,t0(e._query,n))}_parse(e){const n=Vu(e.firestore);return function(r,o,l,c,d,h,m){let f;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){p_(m,h);const v=[];for(const C of m)v.push(m_(c,r,C));f={arrayValue:{values:v}}}else f=m_(c,r,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||p_(m,h),f=gL(l,o,m,h==="in"||h==="not-in");return Vt.create(d,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qt(t,e,n){const s=e,i=tl("where",t);return em._create(i,s,n)}class Cy extends Ay{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cy(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ts.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let o=i;const l=r.getFlattenedFilters();for(const c of l)jA(o,c),o=t0(o,c)}(e._query,n),new Ua(e.firestore,e.converter,t0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function m_(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new ce(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_j(e)&&n.indexOf("/")!==-1)throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(st.fromString(n));if(!xe.isDocumentKey(s))throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return jw(t,new xe(s))}if(n instanceof _t)return jw(t,n._key);throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vf(n)}.`)}function p_(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jA(t,e){const n=function(i,r){for(const o of i)for(const l of o.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Ry(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class nc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class va extends TA{constructor(e,n,s,i,r,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(tl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=va._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}va._jsonSchemaVersion="firestore/documentSnapshot/1.0",va._jsonSchema={type:Lt("string",va._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Wd extends va{data(e={}){return super.data(e)}}class ba{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new nc(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Wd(this._firestore,this._userDataWriter,s.key,s,new nc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new Wd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new nc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const c=new Wd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new nc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:wL(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ba._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ba._jsonSchemaVersion="firestore/querySnapshot/1.0",ba._jsonSchema={type:Lt("string",ba._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vu(e)}set(e,n,s){this._verifyNotCommitted();const i=Np(e,this._firestore),r=Ry(i.converter,n,s),o=Ny(this._dataReader,"WriteBatch.set",i._key,r,i.converter!==null,s);return this._mutations.push(o.toMutation(i._key,Sn.none())),this}update(e,n,s,...i){this._verifyNotCommitted();const r=Np(e,this._firestore);let o;return o=typeof(n=Nt(n))=="string"||n instanceof Wf?bA(this._dataReader,"WriteBatch.update",r._key,n,s,i):vA(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(o.toMutation(r._key,Sn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Np(e,this._firestore);return this._mutations=this._mutations.concat(new Gf(n._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Np(t,e){if((t=Nt(t)).firestore!==e)throw new ce(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){t=Nn(t,_t);const e=Nn(t.firestore,Qs),n=Mu(e);return rL(n,t._key).then(s=>AA(e,t,s))}function aa(t){t=Nn(t,Ua);const e=Nn(t.firestore,Qs),n=Mu(e),s=new jy(e);return EA(t._query),aL(n,t._query).then(i=>new ba(e,s,t,i))}function si(t,e,n){t=Nn(t,_t);const s=Nn(t.firestore,Qs),i=Ry(t.converter,e,n),r=Vu(s);return Pu(s,[Ny(r,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sn.none())])}function It(t,e,n,...s){t=Nn(t,_t);const i=Nn(t.firestore,Qs),r=Vu(i);let o;return o=typeof(e=Nt(e))=="string"||e instanceof Wf?bA(r,"updateDoc",t._key,e,n,s):vA(r,"updateDoc",t._key,e),Pu(i,[o.toMutation(t._key,Sn.exists(!0))])}function ks(t){return Pu(Nn(t.firestore,Qs),[new Gf(t._key,Sn.none())])}function Qi(t,e){const n=Nn(t.firestore,Qs),s=Ce(t),i=Ry(t.converter,e),r=Vu(t.firestore);return Pu(n,[Ny(r,"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,Sn.exists(!1))]).then(()=>s)}function Ds(t,...e){var d,h,m;t=Nt(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||f_(e[s])||(n=e[s++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(f_(e[s])){const f=e[s];e[s]=(d=f.next)==null?void 0:d.bind(f),e[s+1]=(h=f.error)==null?void 0:h.bind(f),e[s+2]=(m=f.complete)==null?void 0:m.bind(f)}let r,o,l;if(t instanceof _t)o=Nn(t.firestore,Qs),l=Uf(t._key.path),r={next:f=>{e[s]&&e[s](AA(o,t,f))},error:e[s+1],complete:e[s+2]};else{const f=Nn(t,Ua);o=Nn(f.firestore,Qs),l=f._query;const x=new jy(o);r={next:v=>{e[s]&&e[s](new ba(o,x,f,v))},error:e[s+1],complete:e[s+2]},EA(t._query)}const c=Mu(o);return iL(c,l,i,r)}function Pu(t,e){const n=Mu(t);return oL(n,e)}function AA(t,e,n){const s=n.docs.get(e._key),i=new jy(t);return new va(t,i,e._key,s,new nc(n.hasPendingWrites,n.fromCache),e.converter)}function NL(t){return t=Nn(t,Qs),Mu(t),new _L(t,e=>Pu(t,e))}(function(e,n=!0){oO(xl),Ko(new ja("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),l=new Qs(new uO(s.getProvider("auth-internal")),new fO(o,s.getProvider("app-check-internal")),RO(o,i),o);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Sr(d_,h_,e),Sr(d_,h_,"esm2020")})();const SL={apiKey:"AIzaSyDhlPxmMc9R471kObm-4ZWceT6O1xvCmVs",authDomain:"englishmaster-pro.web.app",projectId:"englishmaster-pro",storageBucket:"englishmaster-pro.firebasestorage.app",messagingSenderId:"165102982425",appId:"1:165102982425:web:f0185ec54947ccbccf6188"},CA=fE(SL),Ms=rO(CA),ue=dL(CA),RA=D.createContext(null);function ft(){const t=D.useContext(RA);if(!t)throw new Error("useAuth must be inside AuthProvider");return t}const g_="vidacristiana21@gmail.com";function TL({children:t}){var y;const[e,n]=D.useState(null),[s,i]=D.useState(null),[r,o]=D.useState(!0);D.useEffect(()=>{const _=localStorage.getItem("em_active_session");if(_)try{const M=JSON.parse(_);M.user&&M.profile&&(n(M.user),i(M.profile),o(!1))}catch{console.warn("Failed to parse saved session")}return QM(Ms,async M=>{if(M){console.log("Auth state changed: User logged in",M.uid),n(M);try{const L=await ir(Ce(ue,"users",M.uid));if(L.exists()){const T=L.data();i(T),localStorage.setItem(`profile_${M.uid}`,JSON.stringify(T)),localStorage.setItem("em_active_session",JSON.stringify({user:M,profile:T}))}else{console.warn("No Firestore profile found for user:",M.uid);const T=localStorage.getItem(`profile_${M.uid}`);T&&i(JSON.parse(T))}}catch(L){console.error("Could not fetch profile in onAuthStateChanged:",L.message);const T=localStorage.getItem(`profile_${M.uid}`);T&&i(JSON.parse(T))}}else n(null),i(null),localStorage.removeItem("em_active_session");o(!1)})},[]);const l=async(_,I)=>{try{console.log("Attempting login for:",_);const M=await rw(Ms,_,I);console.log("Firebase Auth success:",M.user.uid);const L=async()=>{const T=Ce(ue,"users",M.user.uid),p=await ir(T);if(p.exists()){let N=p.data();_.toLowerCase()===g_&&N.role!=="teacher"&&(console.warn("Correcting role for admin account..."),N.role="teacher",await si(T,{role:"teacher"},{merge:!0}).catch(E=>console.warn("Failed to update admin role:",E))),i(N),localStorage.setItem(`profile_${M.user.uid}`,JSON.stringify(N)),localStorage.setItem("em_active_session",JSON.stringify({user:M.user,profile:N}))}else console.warn("No profile found for user:",M.user.uid)};return await Promise.race([L(),new Promise(T=>setTimeout(T,3e3))]).catch(T=>console.error("Profile fetch error/timeout:",T)),M.user}catch(M){console.error("Firebase Login Error:",M.code,M.message);let L=M.message;throw M.code==="auth/user-not-found"||M.code==="auth/wrong-password"||M.code==="auth/invalid-credential"?L="Invalid email or password. Please try again.":M.code==="auth/too-many-requests"&&(L="Too many failed attempts. Please try again later."),new Error(L)}},c=async(_,I,M,L)=>{try{console.log("Starting registration for:",_);const T=await iw(Ms,_,I);console.log("User created:",T.user.uid),await pp(T.user,{displayName:M}).catch(N=>console.warn("Update profile failed:",N));const p={uid:T.user.uid,email:_,displayName:M,role:L,createdAt:new Date().toISOString(),avatar:null,preferences:{darkMode:!0,notifications:!0,language:"en"}};return si(Ce(ue,"users",T.user.uid),p).then(()=>console.log("Profile saved to Firestore")).catch(N=>console.error("Firestore profile save failed:",N.message)),localStorage.setItem(`profile_${T.user.uid}`,JSON.stringify(p)),localStorage.setItem("em_active_session",JSON.stringify({user:T.user,profile:p})),n(T.user),i(p),T.user}catch(T){console.error("Firebase Registration Error:",T.code,T.message);let p=T.message;throw T.code==="auth/email-already-in-use"?p="This email is already registered. Please Sign In instead.":T.code==="auth/weak-password"?p="Password should be at least 6 characters.":T.code==="auth/invalid-email"&&(p="Please enter a valid email address."),new Error(p)}},d=async(_,I)=>{const M=Math.random().toString(36).substring(2,8).toUpperCase();if(!e)throw new Error("Please log in as a teacher.");try{const L=Ce(ue,"pre_registered",_.toLowerCase()),T={email:_.toLowerCase(),name:I,code:M,createdAt:new Date().toISOString(),createdBy:e.uid},p=new Promise((N,E)=>setTimeout(()=>E(new Error("Request timed out. Please check your internet connection.")),1e4));return await Promise.race([si(L,T),p]),M}catch(L){throw console.error("Error pre-registering student:",L),new Error("Failed to generate student code: "+L.message)}},h=async(_,I)=>{const M=_.trim().toLowerCase(),L=I.trim().toUpperCase();try{console.log("Student login attempt:",M);const T=await rw(Ms,M,L);return console.log("Student auth success (returning student)"),T.user}catch(T){if(console.log("Auth failed, checking if first-time student:",T.code),T.code==="auth/user-not-found"||T.code==="auth/invalid-credential"){const p=Jt(nt(ue,"users"),Qt("email","==",M));if(!(await aa(p)).empty)throw console.log("Student already has a profile, invalid code."),new Error("Invalid Access Code. Please check and try again.");try{const E=await ir(Ce(ue,"pre_registered",M));if(E.exists()){const j=E.data();if(j.code===L){console.log("First-time student found! Creating account...");const A=await iw(Ms,M,L);await pp(A.user,{displayName:j.name});const w={uid:A.user.uid,email:M,displayName:j.name,role:"student",createdAt:new Date().toISOString(),avatar:null,preferences:{darkMode:!0,notifications:!0,language:"en"}};return await si(Ce(ue,"users",A.user.uid),w),n(A.user),i(w),A.user}else throw new Error("Invalid Access Code. Please check the code your teacher gave you.")}else throw new Error("Student not found. Please verify the email or ask your teacher to register you.")}catch(E){throw console.error("Database check failed:",E),E}}throw T.code==="auth/wrong-password"?new Error("Invalid Access Code. Please check and try again."):new Error(T.message)}},m=async _=>{const I=new ai,M=await m6(Ms,I),L=await ir(Ce(ue,"users",M.user.uid)).catch(()=>null);if(L!=null&&L.exists())i(L.data());else{const T={uid:M.user.uid,email:M.user.email,displayName:M.user.displayName,role:_,createdAt:new Date().toISOString(),avatar:M.user.photoURL,preferences:{darkMode:!0,notifications:!0,language:"en"}};try{await si(Ce(ue,"users",M.user.uid),T)}catch(p){console.warn("Could not save profile:",p.message)}localStorage.setItem(`profile_${M.user.uid}`,JSON.stringify(T)),localStorage.setItem("em_active_session",JSON.stringify({user:M.user,profile:T})),i(T)}return M.user},f=async()=>{try{await YM(Ms)}catch{}n(null),i(null),localStorage.removeItem("em_active_session")},x=_=>{const I={uid:_==="teacher"?"demo-teacher":"demo-student-1",email:`demo-${_}@englishmaster.pro`,displayName:_==="teacher"?"Prof. Anderson":"Alex Student"},M={...I,role:_,createdAt:new Date().toISOString(),avatar:null,preferences:{darkMode:!0,notifications:!0,language:"en"}};n(I),i(M),localStorage.setItem(`profile_${I.uid}`,JSON.stringify(M)),localStorage.setItem("em_active_session",JSON.stringify({user:I,profile:M})),o(!1)},v=async _=>{if(!e)throw new Error("No active user");const I={...s,..._};i(I);try{await si(Ce(ue,"users",e.uid),I,{merge:!0})}catch(M){console.warn("Could not save to Firestore:",M.message)}if(localStorage.setItem(`profile_${e.uid}`,JSON.stringify(I)),localStorage.setItem("em_active_session",JSON.stringify({user:e,profile:I})),_.displayName&&Ms.currentUser)try{await pp(Ms.currentUser,{displayName:_.displayName})}catch{}},C=async _=>{if(!e)throw new Error("Please log in as a teacher.");const I=_.trim().toLowerCase(),M=Math.random().toString(36).substring(2,8).toUpperCase();try{const L=Ce(ue,"pre_registered",I),T=await ir(L);await si(L,{...T.exists()?T.data():{email:I,createdBy:e.uid},code:M,resetAt:new Date().toISOString()},{merge:!0});try{await $M(Ms,I)}catch(p){console.log("Password reset email skipped (student may not have auth account):",p.code)}return M}catch(L){throw console.error("Error resetting student code:",L),new Error("Failed to reset student code: "+L.message)}},R=window.location.hostname!=="localhost"&&!window.location.hostname.includes("127.0.0.1"),S={user:e,userProfile:s,loading:r,login:l,register:c,loginWithGoogle:m,logout:f,demoLogin:x,updateUserData:v,isProduction:R,isTeacher:(s==null?void 0:s.role)==="teacher",isStudent:(s==null?void 0:s.role)==="student",isAdmin:((y=s==null?void 0:s.email)==null?void 0:y.toLowerCase())===g_,preRegisterStudent:d,loginWithStudentCode:h,resetStudentCode:C};return a.jsx(RA.Provider,{value:S,children:t})}const IA=D.createContext(null);function bn(){const t=D.useContext(IA);if(!t)throw new Error("useClasses must be inside ClassProvider");return t}function EL(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t[Math.floor(Math.random()*t.length)];return e}function jL({children:t}){const{user:e,userProfile:n,isTeacher:s,isStudent:i}=ft(),[r,o]=D.useState([]),[l,c]=D.useState([]),[d,h]=D.useState([]),[m,f]=D.useState([]),[x,v]=D.useState([]),[C,R]=D.useState([]),[S,y]=D.useState([]),[_,I]=D.useState(!0);D.useEffect(()=>{if(!e){o([]),c([]),h([]),f([]),I(!1);return}let $;s?$=Jt(nt(ue,"classes"),Qt("teacherId","==",e.uid)):$=Jt(nt(ue,"classes"),Qt("students","array-contains",e.uid));const G=Ds($,X=>{const se=X.docs.map(ae=>({id:ae.id,...ae.data()}));o(se),I(!1)}),re=Ds(Jt(nt(ue,"users"),Qt("role","==","student")),X=>{const se=X.docs.map(ae=>({id:ae.id,...ae.data(),status:"active"}));Ds(nt(ue,"pre_registered"),ae=>{const ee=ae.docs.map(oe=>({id:oe.id,...oe.data(),displayName:oe.data().name,status:"pending",joinedAt:oe.data().createdAt}));R([...se,...ee])})});return()=>{G(),re()}},[e,s]),D.useEffect(()=>{if(!e){y([]);return}if(i){const $=Jt(nt(ue,"teacher_requests"),Qt("studentId","==",e.uid),Qt("status","==","pending"));return Ds($,re=>{y(re.docs.map(X=>({id:X.id,...X.data()})))})}else if(s){const $=Jt(nt(ue,"teacher_requests"),Qt("teacherId","==",e.uid));return Ds($,re=>{y(re.docs.map(X=>({id:X.id,...X.data()})))})}},[e,s,i]),D.useEffect(()=>{if(r.length===0){c([]),f([]),v([]);return}const $=r.map(X=>X.id),G=[];for(let X=0;X<$.length;X+=10)G.push($.slice(X,X+10));const re=[];return G.forEach(X=>{const se=Jt(nt(ue,"assignments"),Qt("classId","in",X));re.push(Ds(se,ee=>{c(oe=>[...oe.filter(ge=>!X.includes(ge.classId)),...ee.docs.map(ge=>({id:ge.id,...ge.data()}))])}));const ae=Jt(nt(ue,"announcements"),Qt("classId","in",X));re.push(Ds(ae,ee=>{f(oe=>[...oe.filter(ge=>!X.includes(ge.classId)),...ee.docs.map(ge=>({id:ge.id,...ge.data()}))])}))}),()=>re.forEach(X=>X())},[r]),D.useEffect(()=>{if(e)if(s){if(l.length===0){h([]);return}const $=l.map(X=>X.id),G=[];for(let X=0;X<$.length;X+=10)G.push($.slice(X,X+10));if(G.length===0){h([]);return}const re=G.map(X=>{const se=Jt(nt(ue,"submissions"),Qt("assignmentId","in",X));return Ds(se,ae=>{h(ee=>{const oe=new Set(X),Ae=ee.filter(ye=>!oe.has(ye.assignmentId)),ge=ae.docs.map(ye=>({id:ye.id,...ye.data()}));return[...Ae,...ge]})})});return()=>re.forEach(X=>X())}else{if(l.length===0)return;const $=l.map(X=>X.id),G=[];for(let X=0;X<$.length;X+=10)G.push($.slice(X,X+10));if(G.length===0){h([]);return}const re=G.map(X=>{const se=Jt(nt(ue,"submissions"),Qt("assignmentId","in",X));return Ds(se,ae=>{h(ee=>{const oe=new Set(X),Ae=ee.filter(ye=>!oe.has(ye.assignmentId)),ge=ae.docs.map(ye=>({id:ye.id,...ye.data()}));return[...Ae,...ge]})})});return()=>re.forEach(X=>X())}},[e,s,l]);const M=async $=>{const G={...$,teacherId:e.uid,teacherName:(n==null?void 0:n.displayName)||"Teacher",code:EL(),createdAt:new Date().toISOString(),students:[],archived:!1};return{id:(await Qi(nt(ue,"classes"),G)).id,...G}},L=async($,G)=>{await It(Ce(ue,"classes",$),G)},T=async $=>{await ks(Ce(ue,"classes",$));const G=Jt(nt(ue,"assignments"),Qt("classId","==",$)),re=await aa(G);for(const ae of re.docs)await W(ae.id);const X=Jt(nt(ue,"announcements"),Qt("classId","==",$)),se=await aa(X);for(const ae of se.docs)await ks(Ce(ue,"announcements",ae.id))},p=async $=>{await It(Ce(ue,"classes",$),{archived:!0,archivedAt:new Date().toISOString()})},N=async $=>{await It(Ce(ue,"classes",$),{archived:!1,archivedAt:null})},E=async($,G)=>{if(!G)throw new Error("You must be logged in to join a class");if(!$)throw new Error("Please enter a class code");const re=Jt(nt(ue,"classes"),Qt("code","==",$.trim().toUpperCase())),X=await aa(re);if(X.empty)throw new Error("Class not found. Please check the code.");const se=X.docs[0],ae={id:se.id,...se.data()},ee=Array.isArray(ae.students)?ae.students:[];return ee.includes(G)?ae:(await It(Ce(ue,"classes",se.id),{students:[...ee,G]}),{...ae,students:[...ee,G]})},j=async($,G)=>{await It(Ce(ue,"classes",$),{students:_p(G)})},A=async $=>{const G=Jt(nt(ue,"classes"),Qt("students","array-contains",$)),X=(await aa(G)).docs.map(se=>It(Ce(ue,"classes",se.id),{students:_p($)}));await Promise.all(X)},w=async($,G)=>{const re=Ce(ue,"classes",$),X=await ir(re);if(!X.exists())throw new Error("Class not found");const se=X.data().students||[],ae=[...new Set([...se,...G])];await It(re,{students:ae})},k=async($,G)=>{await It(Ce(ue,"classes",$),{students:_p(G)})},O=async $=>{if($)try{$.status==="pending"?await ks(Ce(ue,"pre_registered",$.email.toLowerCase())):(await ks(Ce(ue,"users",$.id)),await A($.id))}catch(G){throw console.error("Error deleting student:",G),G}},V=async($,G,re)=>{try{re?await It(Ce(ue,"pre_registered",$),G):await It(Ce(ue,"users",$),G)}catch(X){throw console.error("Error updating student:",X),X}},U=async $=>{const G={...$,createdAt:new Date().toISOString(),status:"active"};return{id:(await Qi(nt(ue,"assignments"),G)).id,...G}},z=async($,G)=>{await It(Ce(ue,"assignments",$),{...G,updatedAt:new Date().toISOString()})},W=async $=>{await ks(Ce(ue,"assignments",$));const G=Jt(nt(ue,"submissions"),Qt("assignmentId","==",$)),X=(await aa(G)).docs.map(se=>ks(Ce(ue,"submissions",se.id)));await Promise.all(X)},F=async $=>{const G=l.find(Ae=>Ae.id===$);if(!G)throw new Error("Assignment not found");const{id:re,createdAt:X,updatedAt:se,...ae}=G,ee={...ae,title:`${ae.title} (Copy)`,createdAt:new Date().toISOString(),status:"active"};return{id:(await Qi(nt(ue,"assignments"),ee)).id,...ee}},Z=async($,G)=>{await It(Ce(ue,"assignments",$),{dueDate:new Date(G).toISOString(),updatedAt:new Date().toISOString()})},pe=$=>{var ae;const G=l.find(ee=>ee.id===$);if(!G)return{total:0,submitted:0,rate:0};const re=r.find(ee=>ee.id===G.classId),X=((ae=re==null?void 0:re.students)==null?void 0:ae.length)||0,se=d.filter(ee=>ee.assignmentId===$).length;return{total:X,submitted:se,rate:X>0?Math.round(se/X*100):0}},fe=async $=>{const G={...$,submittedAt:new Date().toISOString()};return{id:(await Qi(nt(ue,"submissions"),G)).id,...G}},Se=async($,G)=>{await It(Ce(ue,"submissions",$),{...G,gradedAt:G.grade!==void 0?new Date().toISOString():null})},Te=async $=>{await ks(Ce(ue,"submissions",$))},tt=async $=>{const G=$.map(({id:re,grade:X,feedback:se})=>It(Ce(ue,"submissions",re),{grade:X,feedback:se||"",status:"graded",gradedAt:new Date().toISOString()}));await Promise.all(G)},ne=async $=>{const G={...$,createdAt:new Date().toISOString(),pinned:!1,readBy:[]};return{id:(await Qi(nt(ue,"announcements"),G)).id,...G}},J=async $=>{await ks(Ce(ue,"announcements",$))},he=async($,G)=>{await It(Ce(ue,"announcements",$),{pinned:G})},me=async($,G)=>{await It(Ce(ue,"announcements",$),{readBy:u_(G)})},ve=async($,G)=>{const re={...G,classId:$,createdAt:new Date().toISOString(),uploadedBy:e.uid};return{id:(await Qi(nt(ue,"materials"),re)).id,...re}},xt=async $=>{await ks(Ce(ue,"materials",$))};D.useEffect(()=>{if(r.length===0){v([]);return}const $=r.map(se=>se.id),G=[];for(let se=0;se<$.length;se+=10)G.push($.slice(se,se+10));const re=G.map(se=>{const ae=Jt(nt(ue,"class_messages"),Qt("classId","in",se));return Ds(ae,ee=>{v(oe=>{const Ae=oe.filter(ye=>!se.includes(ye.classId)),ge=ee.docs.map(ye=>({id:ye.id,...ye.data()}));return ge.sort((ye,Rt)=>(ye.createdAt||"").localeCompare(Rt.createdAt||"")),[...Ae,...ge]})},ee=>{console.error("Chat listener error:",ee)})});return(async()=>{const se=new Date(Date.now()-6048e5).toISOString();for(const ae of G)try{const ee=Jt(nt(ue,"class_messages"),Qt("classId","in",ae)),oe=await aa(ee),Ae=NL(ue);let ge=0;oe.docs.forEach(ye=>{ye.data().createdAt<se&&(Ae.delete(ye.ref),ge++)}),ge>0&&await Ae.commit()}catch(ee){console.error("Chat cleanup error:",ee)}})(),()=>re.forEach(se=>se())},[r]);const Ct=async($,G,re,X)=>{const se={classId:$,text:G,authorId:e.uid,authorName:re,authorRole:X,createdAt:new Date().toISOString()};await Qi(nt(ue,"class_messages"),se)},Zn=async $=>{await ks(Ce(ue,"class_messages",$))},es=$=>x.filter(G=>G.classId===$),dn=async($,G)=>{var ee;if(S.find(oe=>oe.classId===$&&oe.studentId===G&&oe.status==="pending"))throw new Error("Request already sent to this student for this class.");const X=r.find(oe=>oe.id===$);if((ee=X==null?void 0:X.students)!=null&&ee.includes(G))throw new Error("Student is already in this class.");const se=C.find(oe=>oe.id===G),ae={teacherId:e.uid,teacherName:(n==null?void 0:n.displayName)||"Teacher",studentId:G,studentName:(se==null?void 0:se.displayName)||"Student",classId:$,className:(X==null?void 0:X.name)||"Class",status:"pending",createdAt:new Date().toISOString()};await Qi(nt(ue,"teacher_requests"),ae)},He=async($,G)=>{const re=S.find(X=>X.id===$);if(!re)throw new Error("Request not found.");if(G){const X=Ce(ue,"classes",re.classId);await It(X,{students:u_(re.studentId)}),await It(Ce(ue,"teacher_requests",$),{status:"accepted",respondedAt:new Date().toISOString()})}else await It(Ce(ue,"teacher_requests",$),{status:"rejected",respondedAt:new Date().toISOString()})},Ge=()=>S.filter($=>$.status==="pending"&&$.studentId===(e==null?void 0:e.uid)),Je=$=>S.filter(G=>G.classId===$),qe=$=>{const G=r.find(re=>re.id===$);return G?C.filter(re=>{var X;return(X=G.students)==null?void 0:X.includes(re.id)}):[]},ts=$=>l.filter(G=>G.classId===$),Ha=$=>m.filter(G=>G.classId===$),le=$=>d.filter(G=>G.studentId===$),Ke=$=>d.filter(G=>G.assignmentId===$),hn=$=>r.filter(G=>{var re;return(re=G.students)==null?void 0:re.includes($)}),ys=$=>{var oe;const G=l.filter(Ae=>Ae.classId===$),re=r.find(Ae=>Ae.id===$),X=((oe=re==null?void 0:re.students)==null?void 0:oe.length)||0,se=G.length*X,ae=d.filter(Ae=>G.some(ge=>ge.id===Ae.assignmentId)).length,ee=d.filter(Ae=>G.some(ge=>ge.id===Ae.assignmentId)&&Ae.grade!=null).length;return{totalExpected:se,totalSubmitted:ae,totalGraded:ee,studentCount:X,assignmentCount:G.length}},Tl={classes:r,assignments:l,submissions:d,announcements:m,allStudents:C,loading:_,addClass:M,updateClass:L,deleteClass:T,archiveClass:p,unarchiveClass:N,joinClass:E,leaveClass:k,removeStudentFromClass:j,removeStudentFromAllClasses:A,bulkAddStudentsToClass:w,deleteStudent:O,updateStudent:V,addAssignment:U,updateAssignment:z,deleteAssignment:W,duplicateAssignment:F,reassignDueDate:Z,getAssignmentCompletionRate:pe,submitAssignment:fe,updateSubmission:Se,deleteSubmission:Te,bulkGradeSubmissions:tt,addAnnouncement:ne,deleteAnnouncement:J,pinAnnouncement:he,markAnnouncementRead:me,addClassMaterial:ve,deleteClassMaterial:xt,getClassStudents:qe,getClassAssignments:ts,getClassAnnouncements:Ha,getStudentSubmissions:le,getAssignmentSubmissions:Ke,getStudentClasses:hn,getClassSubmissionStats:ys,getStudentProgress:$=>{const G=d.filter(ge=>ge.studentId===$),X=r.filter(ge=>{var ye;return(ye=ge.students)==null?void 0:ye.includes($)}).map(ge=>ge.id),se=l.filter(ge=>X.includes(ge.classId)),ae=G.length,ee=se.length,oe=G.filter(ge=>ge.grade!=null),Ae=oe.length>0?Math.round(oe.reduce((ge,ye)=>{const Rt=l.find(Cs=>Cs.id===ye.assignmentId),Qr=(Rt==null?void 0:Rt.totalPoints)||100;return ge+ye.grade/Qr*100},0)/oe.length):0;return{completed:ae,total:ee,completionRate:ee>0?Math.round(ae/ee*100):0,avgGrade:Ae}},getOverdueAssignments:$=>{const G=new Date,X=r.filter(ee=>{var oe;return(oe=ee.students)==null?void 0:oe.includes($)}).map(ee=>ee.id),ae=d.filter(ee=>ee.studentId===$).map(ee=>ee.assignmentId);return l.filter(ee=>X.includes(ee.classId)&&!ae.includes(ee.id)&&new Date(ee.dueDate)<G)},getPendingAssignments:$=>{const G=new Date,X=r.filter(ee=>{var oe;return(oe=ee.students)==null?void 0:oe.includes($)}).map(ee=>ee.id),ae=d.filter(ee=>ee.studentId===$).map(ee=>ee.assignmentId);return l.filter(ee=>X.includes(ee.classId)&&!ae.includes(ee.id)&&new Date(ee.dueDate)>=G)},exportClassGrades:$=>{const G=r.find(ae=>ae.id===$);if(!G)return"";const re=l.filter(ae=>ae.classId===$),X=C.filter(ae=>{var ee;return(ee=G.students)==null?void 0:ee.includes(ae.id)});let se="Student,"+re.map(ae=>ae.title).join(",")+`,Average
`;return X.forEach(ae=>{const ee=re.map(ge=>{const ye=d.find(Rt=>Rt.assignmentId===ge.id&&Rt.studentId===ae.id);return(ye==null?void 0:ye.grade)!=null?ye.grade:"N/A"}),oe=ee.filter(ge=>ge!=="N/A"),Ae=oe.length>0?Math.round(oe.reduce((ge,ye)=>ge+ye,0)/oe.length):"N/A";se+=`${ae.displayName},${ee.join(",")},${Ae}
`}),se},getLeaderboard:$=>{const G=r.find(se=>se.id===$);if(!G)return[];const re=l.filter(se=>se.classId===$);return C.filter(se=>{var ae;return(ae=G.students)==null?void 0:ae.includes(se.id)}).map(se=>{const ae=d.filter(ye=>re.some(Rt=>Rt.id===ye.assignmentId)&&ye.studentId===se.id),ee=ae.filter(ye=>ye.grade!=null),oe=ee.reduce((ye,Rt)=>ye+(Rt.grade||0),0),Ae=ee.reduce((ye,Rt)=>{const Qr=re.find(Cs=>Cs.id===Rt.assignmentId);return ye+((Qr==null?void 0:Qr.totalPoints)||100)},0),ge=Ae>0?Math.round(oe/Ae*100):0;return{id:se.id,name:se.displayName,avg:ge,totalPoints:oe,submitted:ae.length,total:re.length}}).sort((se,ae)=>ae.avg-se.avg)},getClassAnalytics:$=>{const G=ys($),re=l.filter(oe=>oe.classId===$),se=d.filter(oe=>re.some(Ae=>Ae.id===oe.assignmentId)).filter(oe=>oe.grade!=null),ae={A:0,B:0,C:0,D:0,F:0};se.forEach(oe=>{const Ae=re.find(Rt=>Rt.id===oe.assignmentId),ge=(Ae==null?void 0:Ae.totalPoints)||100,ye=oe.grade/ge*100;ye>=90?ae.A++:ye>=80?ae.B++:ye>=70?ae.C++:ye>=60?ae.D++:ae.F++});const ee=se.length>0?Math.round(se.reduce((oe,Ae)=>{const ge=re.find(Rt=>Rt.id===Ae.assignmentId),ye=(ge==null?void 0:ge.totalPoints)||100;return oe+Ae.grade/ye*100},0)/se.length):0;return{...G,gradeDistribution:ae,avgGrade:ee,totalGradedSubmissions:se.length}},getStudentStreak:$=>{const G=d.filter(ee=>ee.studentId===$&&ee.submittedAt).sort((ee,oe)=>new Date(oe.submittedAt)-new Date(ee.submittedAt));if(G.length===0)return 0;let re=1,X=new Date(G[0].submittedAt);X.setHours(0,0,0,0);const se=new Date;if(se.setHours(0,0,0,0),Math.floor((se-X)/(1e3*60*60*24))>1)return 0;for(let ee=1;ee<G.length;ee++){const oe=new Date(G[ee].submittedAt);oe.setHours(0,0,0,0);const Ae=Math.floor((X-oe)/(1e3*60*60*24));if(Ae===1)re++,X=oe;else if(Ae>1)break}return re},classMessages:x,addClassMessage:Ct,deleteClassMessage:Zn,getClassMessages:es,teacherRequests:S,sendTeacherRequest:dn,respondToRequest:He,getMyPendingRequests:Ge,getTeacherRequestsForClass:Je};return a.jsx(IA.Provider,{value:Tl,children:t})}const Iy=D.createContext({});function ky(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const tm=D.createContext(null),Dy=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class AL extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function CL({children:t,isPresent:e}){const n=D.useId(),s=D.useRef(null),i=D.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=D.useContext(Dy);return D.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=i.current;if(e||!s.current||!o||!l)return;s.current.dataset.motionPopId=n;const h=document.createElement("style");return r&&(h.nonce=r),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),a.jsx(AL,{isPresent:e,childRef:s,sizeRef:i,children:D.cloneElement(t,{ref:s})})}const RL=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:o})=>{const l=ky(IL),c=D.useId(),d=D.useCallback(m=>{l.set(m,!0);for(const f of l.values())if(!f)return;s&&s()},[l,s]),h=D.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:d,register:m=>(l.set(m,!1),()=>l.delete(m))}),r?[Math.random(),d]:[n,d]);return D.useMemo(()=>{l.forEach((m,f)=>l.set(f,!1))},[n]),D.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(t=a.jsx(CL,{isPresent:n,children:t})),a.jsx(tm.Provider,{value:h,children:t})};function IL(){return new Map}function kA(t=!0){const e=D.useContext(tm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,r=D.useId();D.useEffect(()=>{t&&i(r)},[t]);const o=D.useCallback(()=>t&&s&&s(r),[r,s,t]);return!n&&s?[!1,o]:[!0]}const Nd=t=>t.key||"";function x_(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const My=typeof window<"u",DA=My?D.useLayoutEffect:D.useEffect,Xn=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:r="sync",propagate:o=!1})=>{const[l,c]=kA(o),d=D.useMemo(()=>x_(t),[t]),h=o&&!l?[]:d.map(Nd),m=D.useRef(!0),f=D.useRef(d),x=ky(()=>new Map),[v,C]=D.useState(d),[R,S]=D.useState(d);DA(()=>{m.current=!1,f.current=d;for(let I=0;I<R.length;I++){const M=Nd(R[I]);h.includes(M)?x.delete(M):x.get(M)!==!0&&x.set(M,!1)}},[R,h.length,h.join("-")]);const y=[];if(d!==v){let I=[...d];for(let M=0;M<R.length;M++){const L=R[M],T=Nd(L);h.includes(T)||(I.splice(M,0,L),y.push(L))}r==="wait"&&y.length&&(I=y),S(x_(I)),C(d);return}const{forceRender:_}=D.useContext(Iy);return a.jsx(a.Fragment,{children:R.map(I=>{const M=Nd(I),L=o&&!l?!1:d===R||h.includes(M),T=()=>{if(x.has(M))x.set(M,!0);else return;let p=!0;x.forEach(N=>{N||(p=!1)}),p&&(_==null||_(),S(f.current),o&&(c==null||c()),s&&s())};return a.jsx(RL,{isPresent:L,initial:!m.current||n?void 0:!1,custom:L?void 0:e,presenceAffectsLayout:i,mode:r,onExitComplete:L?void 0:T,children:I},M)})})},Qn=t=>t;let MA=Qn;function Oy(t){let e;return()=>(e===void 0&&(e=t()),e)}const nl=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},xi=t=>t*1e3,yi=t=>t/1e3,kL={useManualTiming:!1};function DL(t){let e=new Set,n=new Set,s=!1,i=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){r.has(d)&&(c.schedule(d),t()),d(o)}const c={schedule:(d,h=!1,m=!1)=>{const x=m&&s?e:n;return h&&r.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),r.delete(d)},process:d=>{if(o=d,s){i=!0;return}s=!0,[e,n]=[n,e],e.forEach(l),e.clear(),s=!1,i&&(i=!1,c.process(d))}};return c}const Sd=["read","resolveKeyframes","update","preRender","render","postRender"],ML=40;function OA(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=Sd.reduce((S,y)=>(S[y]=DL(r),S),{}),{read:l,resolveKeyframes:c,update:d,preRender:h,render:m,postRender:f}=o,x=()=>{const S=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(S-i.timestamp,ML),1),i.timestamp=S,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),m.process(i),f.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(x))},v=()=>{n=!0,s=!0,i.isProcessing||t(x)};return{schedule:Sd.reduce((S,y)=>{const _=o[y];return S[y]=(I,M=!1,L=!1)=>(n||v(),_.schedule(I,M,L)),S},{}),cancel:S=>{for(let y=0;y<Sd.length;y++)o[Sd[y]].cancel(S)},state:i,steps:o}}const{schedule:ut,cancel:Pr,state:Zt,steps:Sp}=OA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qn,!0),VA=D.createContext({strict:!1}),y_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sl={};for(const t in y_)sl[t]={isEnabled:e=>y_[t].some(n=>!!e[n])};function OL(t){for(const e in t)sl[e]={...sl[e],...t[e]}}const VL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function tf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||VL.has(t)}let PA=t=>!tf(t);function PL(t){t&&(PA=e=>e.startsWith("on")?!tf(e):t(e))}try{PL(require("@emotion/is-prop-valid").default)}catch{}function LL(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(PA(i)||n===!0&&tf(i)||!e&&!tf(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}function zL(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const nm=D.createContext({});function tu(t){return typeof t=="string"||Array.isArray(t)}function sm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Vy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Py=["initial",...Vy];function im(t){return sm(t.animate)||Py.some(e=>tu(t[e]))}function LA(t){return!!(im(t)||t.variants)}function UL(t,e){if(im(t)){const{initial:n,animate:s}=t;return{initial:n===!1||tu(n)?n:void 0,animate:tu(s)?s:void 0}}return t.inherit!==!1?e:{}}function BL(t){const{initial:e,animate:n}=UL(t,D.useContext(nm));return D.useMemo(()=>({initial:e,animate:n}),[v_(e),v_(n)])}function v_(t){return Array.isArray(t)?t.join(" "):t}const FL=Symbol.for("motionComponentSymbol");function go(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $L(t,e,n){return D.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):go(n)&&(n.current=s))},[e])}const Ly=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HL="framerAppearId",zA="data-"+Ly(HL),{schedule:zy}=OA(queueMicrotask,!1),UA=D.createContext({});function GL(t,e,n,s,i){var r,o;const{visualElement:l}=D.useContext(nm),c=D.useContext(VA),d=D.useContext(tm),h=D.useContext(Dy).reducedMotion,m=D.useRef(null);s=s||c.renderer,!m.current&&s&&(m.current=s(t,{visualState:e,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const f=m.current,x=D.useContext(UA);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&KL(m.current,n,i,x);const v=D.useRef(!1);D.useInsertionEffect(()=>{f&&v.current&&f.update(n,d)});const C=n[zA],R=D.useRef(!!C&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,C))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,C)));return DA(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),zy.render(f.render),R.current&&f.animationState&&f.animationState.animateChanges())}),D.useEffect(()=>{f&&(!R.current&&f.animationState&&f.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)===null||S===void 0||S.call(window,C)}),R.current=!1))}),f}function KL(t,e,n,s){const{layoutId:i,layout:r,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:BA(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||l&&go(l),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:d})}function BA(t){if(t)return t.options.allowProjection!==!1?t.projection:BA(t.parent)}function QL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:i}){var r,o;t&&OL(t);function l(d,h){let m;const f={...D.useContext(Dy),...d,layoutId:YL(d)},{isStatic:x}=f,v=BL(d),C=s(d,x);if(!x&&My){qL();const R=XL(f);m=R.MeasureLayout,v.visualElement=GL(i,C,f,e,R.ProjectionNode)}return a.jsxs(nm.Provider,{value:v,children:[m&&v.visualElement?a.jsx(m,{visualElement:v.visualElement,...f}):null,n(i,d,$L(C,v.visualElement,h),C,x,v.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${(o=(r=i.displayName)!==null&&r!==void 0?r:i.name)!==null&&o!==void 0?o:""})`}`;const c=D.forwardRef(l);return c[FL]=i,c}function YL({layoutId:t}){const e=D.useContext(Iy).id;return e&&t!==void 0?e+"-"+t:t}function qL(t,e){D.useContext(VA).strict}function XL(t){const{drag:e,layout:n}=sl;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const WL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Uy(t){return typeof t!="string"||t.includes("-")?!1:!!(WL.indexOf(t)>-1||/[A-Z]/u.test(t))}function b_(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function By(t,e,n,s){if(typeof e=="function"){const[i,r]=b_(s);e=e(n!==void 0?n:t.custom,i,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,r]=b_(s);e=e(n!==void 0?n:t.custom,i,r)}return e}const h0=t=>Array.isArray(t),JL=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),ZL=t=>h0(t)?t[t.length-1]||0:t,xn=t=>!!(t&&t.getVelocity);function Jd(t){const e=xn(t)?t.get():t;return JL(e)?e.toValue():e}function e9({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},s,i,r){const o={latestValues:t9(s,i,r,t),renderState:e()};return n&&(o.onMount=l=>n({props:s,current:l,...o}),o.onUpdate=l=>n(l)),o}const FA=t=>(e,n)=>{const s=D.useContext(nm),i=D.useContext(tm),r=()=>e9(t,e,s,i);return n?r():ky(r)};function t9(t,e,n,s){const i={},r=s(t,{});for(const f in r)i[f]=Jd(r[f]);let{initial:o,animate:l}=t;const c=im(t),d=LA(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const m=h?l:o;if(m&&typeof m!="boolean"&&!sm(m)){const f=Array.isArray(m)?m:[m];for(let x=0;x<f.length;x++){const v=By(t,f[x]);if(v){const{transitionEnd:C,transition:R,...S}=v;for(const y in S){let _=S[y];if(Array.isArray(_)){const I=h?_.length-1:0;_=_[I]}_!==null&&(i[y]=_)}for(const y in C)i[y]=C[y]}}}return i}const Nl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fa=new Set(Nl),$A=t=>e=>typeof e=="string"&&e.startsWith(t),HA=$A("--"),n9=$A("var(--"),Fy=t=>n9(t)?s9.test(t.split("/*")[0].trim()):!1,s9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,GA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ri=(t,e,n)=>n>e?e:n<t?t:n,Sl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},nu={...Sl,transform:t=>Ri(0,1,t)},Td={...Sl,default:1},Lu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Yi=Lu("deg"),Hs=Lu("%"),be=Lu("px"),i9=Lu("vh"),r9=Lu("vw"),w_={...Hs,parse:t=>Hs.parse(t)/100,transform:t=>Hs.transform(t*100)},a9={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,radius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,top:be,right:be,bottom:be,left:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,backgroundPositionX:be,backgroundPositionY:be},o9={rotate:Yi,rotateX:Yi,rotateY:Yi,rotateZ:Yi,scale:Td,scaleX:Td,scaleY:Td,scaleZ:Td,skew:Yi,skewX:Yi,skewY:Yi,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:nu,originX:w_,originY:w_,originZ:be},__={...Sl,transform:Math.round},$y={...a9,...o9,zIndex:__,size:be,fillOpacity:nu,strokeOpacity:nu,numOctaves:__},l9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},c9=Nl.length;function u9(t,e,n){let s="",i=!0;for(let r=0;r<c9;r++){const o=Nl[r],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=GA(l,$y[o]);if(!c){i=!1;const h=l9[o]||o;s+=`${h}(${d}) `}n&&(e[o]=d)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function Hy(t,e,n){const{style:s,vars:i,transformOrigin:r}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(Fa.has(c)){o=!0;continue}else if(HA(c)){i[c]=d;continue}else{const h=GA(d,$y[c]);c.startsWith("origin")?(l=!0,r[c]=h):s[c]=h}}if(e.transform||(o||n?s.transform=u9(e,t.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=r;s.transformOrigin=`${c} ${d} ${h}`}}const d9={offset:"stroke-dashoffset",array:"stroke-dasharray"},h9={offset:"strokeDashoffset",array:"strokeDasharray"};function f9(t,e,n=1,s=0,i=!0){t.pathLength=1;const r=i?d9:h9;t[r.offset]=be.transform(-s);const o=be.transform(e),l=be.transform(n);t[r.array]=`${o} ${l}`}function N_(t,e,n){return typeof t=="string"?t:be.transform(e+n*t)}function m9(t,e,n){const s=N_(e,t.x,t.width),i=N_(n,t.y,t.height);return`${s} ${i}`}function Gy(t,{attrX:e,attrY:n,attrScale:s,originX:i,originY:r,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},h,m){if(Hy(t,d,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:x,dimensions:v}=t;f.transform&&(v&&(x.transform=f.transform),delete f.transform),v&&(i!==void 0||r!==void 0||x.transform)&&(x.transformOrigin=m9(v,i!==void 0?i:.5,r!==void 0?r:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),s!==void 0&&(f.scale=s),o!==void 0&&f9(f,o,l,c,!1)}const Ky=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),KA=()=>({...Ky(),attrs:{}}),Qy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function QA(t,{style:e,vars:n},s,i){Object.assign(t.style,e,i&&i.getProjectionStyles(s));for(const r in n)t.style.setProperty(r,n[r])}const YA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qA(t,e,n,s){QA(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(YA.has(i)?i:Ly(i),e.attrs[i])}const nf={};function p9(t){Object.assign(nf,t)}function XA(t,{layout:e,layoutId:n}){return Fa.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!nf[t]||t==="opacity")}function Yy(t,e,n){var s;const{style:i}=t,r={};for(const o in i)(xn(i[o])||e.style&&xn(e.style[o])||XA(o,t)||((s=n==null?void 0:n.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(r[o]=i[o]);return r}function WA(t,e,n){const s=Yy(t,e,n);for(const i in t)if(xn(t[i])||xn(e[i])){const r=Nl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=t[i]}return s}function g9(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const S_=["x","y","width","height","cx","cy","r"],x9={useVisualState:FA({scrapeMotionValuesFromProps:WA,createRenderState:KA,onUpdate:({props:t,prevProps:e,current:n,renderState:s,latestValues:i})=>{if(!n)return;let r=!!t.drag;if(!r){for(const l in i)if(Fa.has(l)){r=!0;break}}if(!r)return;let o=!e;if(e)for(let l=0;l<S_.length;l++){const c=S_[l];t[c]!==e[c]&&(o=!0)}o&&ut.read(()=>{g9(n,s),ut.render(()=>{Gy(s,i,Qy(n.tagName),t.transformTemplate),qA(n,s)})})}})},y9={useVisualState:FA({scrapeMotionValuesFromProps:Yy,createRenderState:Ky})};function JA(t,e,n){for(const s in e)!xn(e[s])&&!XA(s,n)&&(t[s]=e[s])}function v9({transformTemplate:t},e){return D.useMemo(()=>{const n=Ky();return Hy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function b9(t,e){const n=t.style||{},s={};return JA(s,n,t),Object.assign(s,v9(t,e)),s}function w9(t,e){const n={},s=b9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}function _9(t,e,n,s){const i=D.useMemo(()=>{const r=KA();return Gy(r,e,Qy(s),t.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};JA(r,t.style,t),i.style={...r,...i.style}}return i}function N9(t=!1){return(n,s,i,{latestValues:r},o)=>{const c=(Uy(n)?_9:w9)(s,r,o,n),d=LL(s,typeof n=="string",t),h=n!==D.Fragment?{...d,...c,ref:i}:{},{children:m}=s,f=D.useMemo(()=>xn(m)?m.get():m,[m]);return D.createElement(n,{...h,children:f})}}function S9(t,e){return function(s,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Uy(s)?x9:y9,preloadedFeatures:t,useRender:N9(i),createVisualElement:e,Component:s};return QL(o)}}function ZA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function rm(t,e,n){const s=t.getProps();return By(s,e,n!==void 0?n:s.custom,t)}const T9=Oy(()=>window.ScrollTimeline!==void 0);class E9{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(i=>{if(T9()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{s.forEach((i,r)=>{i&&i(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class j9 extends E9{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function qy(t,e){return t?t[e]||t.default||t:void 0}const f0=2e4;function eC(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<f0;)e+=n,s=t.next(e);return e>=f0?1/0:e}function Xy(t){return typeof t=="function"}function T_(t,e){t.timeline=e,t.onfinish=null}const Wy=t=>Array.isArray(t)&&typeof t[0]=="number",A9={linearEasing:void 0};function C9(t,e){const n=Oy(t);return()=>{var s;return(s=A9[e])!==null&&s!==void 0?s:n()}}const sf=C9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),tC=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let r=0;r<i;r++)s+=t(nl(0,i-1,r))+", ";return`linear(${s.substring(0,s.length-2)})`};function nC(t){return!!(typeof t=="function"&&sf()||!t||typeof t=="string"&&(t in m0||sf())||Wy(t)||Array.isArray(t)&&t.every(nC))}const sc=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,m0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sc([0,.65,.55,1]),circOut:sc([.55,0,1,.45]),backIn:sc([.31,.01,.66,-.59]),backOut:sc([.33,1.53,.69,.99])};function sC(t,e){if(t)return typeof t=="function"&&sf()?tC(t,e):Wy(t)?sc(t):Array.isArray(t)?t.map(n=>sC(n,e)||m0.easeOut):m0[t]}const bs={x:!1,y:!1};function iC(){return bs.x||bs.y}function R9(t,e,n){var s;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const r=(s=void 0)!==null&&s!==void 0?s:i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}function rC(t,e){const n=R9(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function E_(t){return e=>{e.pointerType==="touch"||iC()||t(e)}}function I9(t,e,n={}){const[s,i,r]=rC(t,n),o=E_(l=>{const{target:c}=l,d=e(l);if(typeof d!="function"||!c)return;const h=E_(m=>{d(m),c.removeEventListener("pointerleave",h)});c.addEventListener("pointerleave",h,i)});return s.forEach(l=>{l.addEventListener("pointerenter",o,i)}),r}const aC=(t,e)=>e?t===e?!0:aC(t,e.parentElement):!1,Jy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,k9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function D9(t){return k9.has(t.tagName)||t.tabIndex!==-1}const ic=new WeakSet;function j_(t){return e=>{e.key==="Enter"&&t(e)}}function Tp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const M9=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=j_(()=>{if(ic.has(n))return;Tp(n,"down");const i=j_(()=>{Tp(n,"up")}),r=()=>Tp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function A_(t){return Jy(t)&&!iC()}function O9(t,e,n={}){const[s,i,r]=rC(t,n),o=l=>{const c=l.currentTarget;if(!A_(l)||ic.has(c))return;ic.add(c);const d=e(l),h=(x,v)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",f),!(!A_(x)||!ic.has(c))&&(ic.delete(c),typeof d=="function"&&d(x,{success:v}))},m=x=>{h(x,n.useGlobalTarget||aC(c,x.target))},f=x=>{h(x,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",f,i)};return s.forEach(l=>{!D9(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),l.addEventListener("focus",d=>M9(d,i),i)}),r}function V9(t){return t==="x"||t==="y"?bs[t]?null:(bs[t]=!0,()=>{bs[t]=!1}):bs.x||bs.y?null:(bs.x=bs.y=!0,()=>{bs.x=bs.y=!1})}const oC=new Set(["width","height","top","left","right","bottom",...Nl]);let Zd;function P9(){Zd=void 0}const Gs={now:()=>(Zd===void 0&&Gs.set(Zt.isProcessing||kL.useManualTiming?Zt.timestamp:performance.now()),Zd),set:t=>{Zd=t,queueMicrotask(P9)}};function Zy(t,e){t.indexOf(e)===-1&&t.push(e)}function ev(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class tv{constructor(){this.subscriptions=[]}add(e){return Zy(this.subscriptions,e),()=>ev(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function lC(t,e){return e?t*(1e3/e):0}const C_=30,L9=t=>!isNaN(parseFloat(t));class z9{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const r=Gs.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=L9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new tv);const s=this.events[e].add(n);return e==="change"?()=>{s(),ut.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Gs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>C_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,C_);return lC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function su(t,e){return new z9(t,e)}function U9(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,su(n))}function B9(t,e){const n=rm(t,e);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const o in r){const l=ZL(r[o]);U9(t,o,l)}}function F9(t){return!!(xn(t)&&t.add)}function p0(t,e){const n=t.getValue("willChange");if(F9(n))return n.add(e)}function cC(t){return t.props[zA]}const uC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,$9=1e-7,H9=12;function G9(t,e,n,s,i){let r,o,l=0;do o=e+(n-e)/2,r=uC(o,s,i)-t,r>0?n=o:e=o;while(Math.abs(r)>$9&&++l<H9);return o}function zu(t,e,n,s){if(t===e&&n===s)return Qn;const i=r=>G9(r,0,1,t,n);return r=>r===0||r===1?r:uC(i(r),e,s)}const dC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hC=t=>e=>1-t(1-e),fC=zu(.33,1.53,.69,.99),nv=hC(fC),mC=dC(nv),pC=t=>(t*=2)<1?.5*nv(t):.5*(2-Math.pow(2,-10*(t-1))),sv=t=>1-Math.sin(Math.acos(t)),gC=hC(sv),xC=dC(sv),yC=t=>/^0[^.\s]+$/u.test(t);function K9(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||yC(t):!0}const Ec=t=>Math.round(t*1e5)/1e5,iv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Q9(t){return t==null}const Y9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rv=(t,e)=>n=>!!(typeof n=="string"&&Y9.test(n)&&n.startsWith(t)||e&&!Q9(n)&&Object.prototype.hasOwnProperty.call(n,e)),vC=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,r,o,l]=s.match(iv);return{[t]:parseFloat(i),[e]:parseFloat(r),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},q9=t=>Ri(0,255,t),Ep={...Sl,transform:t=>Math.round(q9(t))},ha={test:rv("rgb","red"),parse:vC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Ep.transform(t)+", "+Ep.transform(e)+", "+Ep.transform(n)+", "+Ec(nu.transform(s))+")"};function X9(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const g0={test:rv("#"),parse:X9,transform:ha.transform},xo={test:rv("hsl","hue"),parse:vC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Hs.transform(Ec(e))+", "+Hs.transform(Ec(n))+", "+Ec(nu.transform(s))+")"},mn={test:t=>ha.test(t)||g0.test(t)||xo.test(t),parse:t=>ha.test(t)?ha.parse(t):xo.test(t)?xo.parse(t):g0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ha.transform(t):xo.transform(t)},W9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function J9(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(iv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(W9))===null||n===void 0?void 0:n.length)||0)>0}const bC="number",wC="color",Z9="var",ez="var(",R_="${}",tz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function iu(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const l=e.replace(tz,c=>(mn.test(c)?(s.color.push(r),i.push(wC),n.push(mn.parse(c))):c.startsWith(ez)?(s.var.push(r),i.push(Z9),n.push(c)):(s.number.push(r),i.push(bC),n.push(parseFloat(c))),++r,R_)).split(R_);return{values:n,split:l,indexes:s,types:i}}function _C(t){return iu(t).values}function NC(t){const{split:e,types:n}=iu(t),s=e.length;return i=>{let r="";for(let o=0;o<s;o++)if(r+=e[o],i[o]!==void 0){const l=n[o];l===bC?r+=Ec(i[o]):l===wC?r+=mn.transform(i[o]):r+=i[o]}return r}}const nz=t=>typeof t=="number"?0:t;function sz(t){const e=_C(t);return NC(t)(e.map(nz))}const Lr={test:J9,parse:_C,createTransformer:NC,getAnimatableNone:sz},iz=new Set(["brightness","contrast","saturate","opacity"]);function rz(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(iv)||[];if(!s)return t;const i=n.replace(s,"");let r=iz.has(e)?1:0;return s!==n&&(r*=100),e+"("+r+i+")"}const az=/\b([a-z-]*)\(.*?\)/gu,x0={...Lr,getAnimatableNone:t=>{const e=t.match(az);return e?e.map(rz).join(" "):t}},oz={...$y,color:mn,backgroundColor:mn,outlineColor:mn,fill:mn,stroke:mn,borderColor:mn,borderTopColor:mn,borderRightColor:mn,borderBottomColor:mn,borderLeftColor:mn,filter:x0,WebkitFilter:x0},av=t=>oz[t];function SC(t,e){let n=av(t);return n!==x0&&(n=Lr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lz=new Set(["auto","none","0"]);function cz(t,e,n){let s=0,i;for(;s<t.length&&!i;){const r=t[s];typeof r=="string"&&!lz.has(r)&&iu(r).values.length&&(i=t[s]),s++}if(i&&n)for(const r of e)t[r]=SC(n,i)}const I_=t=>t===Sl||t===be,k_=(t,e)=>parseFloat(t.split(", ")[e]),D_=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return k_(i[1],e);{const r=s.match(/^matrix\((.+)\)$/u);return r?k_(r[1],t):0}},uz=new Set(["x","y","z"]),dz=Nl.filter(t=>!uz.has(t));function hz(t){const e=[];return dz.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const il={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:D_(4,13),y:D_(5,14)};il.translateX=il.x;il.translateY=il.y;const wa=new Set;let y0=!1,v0=!1;function TC(){if(v0){const t=Array.from(wa).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=hz(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([r,o])=>{var l;(l=s.getValue(r))===null||l===void 0||l.set(o)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}v0=!1,y0=!1,wa.forEach(t=>t.complete()),wa.clear()}function EC(){wa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(v0=!0)})}function fz(){EC(),TC()}class ov{constructor(e,n,s,i,r,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(wa.add(this),y0||(y0=!0,ut.read(EC),ut.resolveKeyframes(TC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;for(let r=0;r<e.length;r++)if(e[r]===null)if(r===0){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(s&&n){const c=s.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),wa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,wa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const jC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),mz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pz(t){const e=mz.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function AC(t,e,n=1){const[s,i]=pz(t);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const o=r.trim();return jC(o)?parseFloat(o):o}return Fy(i)?AC(i,e,n+1):i}const CC=t=>e=>e.test(t),gz={test:t=>t==="auto",parse:t=>t},RC=[Sl,be,Hs,Yi,r9,i9,gz],M_=t=>RC.find(CC(t));class IC extends ov{constructor(e,n,s,i,r){super(e,n,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Fy(d))){const h=AC(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!oC.has(s)||e.length!==2)return;const[i,r]=e,o=M_(i),l=M_(r);if(o!==l)if(I_(o)&&I_(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)K9(e[i])&&s.push(i);s.length&&cz(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=il[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const r=n.getValue(s);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=il[s](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{n.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const O_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Lr.test(t)||t==="0")&&!t.startsWith("url("));function xz(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yz(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],o=O_(i,e),l=O_(r,e);return!o||!l?!1:xz(t)||(n==="spring"||Xy(n))&&s}const vz=t=>t!==null;function am(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(vz),r=e&&n!=="loop"&&e%2===1?0:i.length-1;return!r||s===void 0?i[r]:s}const bz=40;class kC{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Gs.now(),this.options={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:r,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>bz?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&fz(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Gs.now(),this.hasAttemptedResolve=!0;const{name:s,type:i,velocity:r,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!yz(e,s,i,r))if(o)this.options.duration=0;else{c&&c(am(e,this.options,n)),l&&l(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const mt=(t,e,n)=>t+(e-t)*n;function jp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function wz({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,r=0,o=0;if(!e)i=r=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=jp(c,l,t+1/3),r=jp(c,l,t),o=jp(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:s}}function rf(t,e){return n=>n>0?e:t}const Ap=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},_z=[g0,ha,xo],Nz=t=>_z.find(e=>e.test(t));function V_(t){const e=Nz(t);if(!e)return!1;let n=e.parse(t);return e===xo&&(n=wz(n)),n}const P_=(t,e)=>{const n=V_(t),s=V_(e);if(!n||!s)return rf(t,e);const i={...n};return r=>(i.red=Ap(n.red,s.red,r),i.green=Ap(n.green,s.green,r),i.blue=Ap(n.blue,s.blue,r),i.alpha=mt(n.alpha,s.alpha,r),ha.transform(i))},Sz=(t,e)=>n=>e(t(n)),Uu=(...t)=>t.reduce(Sz),b0=new Set(["none","hidden"]);function Tz(t,e){return b0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ez(t,e){return n=>mt(t,e,n)}function lv(t){return typeof t=="number"?Ez:typeof t=="string"?Fy(t)?rf:mn.test(t)?P_:Cz:Array.isArray(t)?DC:typeof t=="object"?mn.test(t)?P_:jz:rf}function DC(t,e){const n=[...t],s=n.length,i=t.map((r,o)=>lv(r)(r,e[o]));return r=>{for(let o=0;o<s;o++)n[o]=i[o](r);return n}}function jz(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=lv(t[i])(t[i],e[i]));return i=>{for(const r in s)n[r]=s[r](i);return n}}function Az(t,e){var n;const s=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],l=t.indexes[o][i[o]],c=(n=t.values[l])!==null&&n!==void 0?n:0;s[r]=c,i[o]++}return s}const Cz=(t,e)=>{const n=Lr.createTransformer(e),s=iu(t),i=iu(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?b0.has(t)&&!i.values.length||b0.has(e)&&!s.values.length?Tz(t,e):Uu(DC(Az(s,i),i.values),n):rf(t,e)};function MC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mt(t,e,n):lv(t)(t,e)}const Rz=5;function OC(t,e,n){const s=Math.max(e-Rz,0);return lC(n-t(s),e-s)}const bt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Cp=.001;function Iz({duration:t=bt.duration,bounce:e=bt.bounce,velocity:n=bt.velocity,mass:s=bt.mass}){let i,r,o=1-e;o=Ri(bt.minDamping,bt.maxDamping,o),t=Ri(bt.minDuration,bt.maxDuration,yi(t)),o<1?(i=d=>{const h=d*o,m=h*t,f=h-n,x=w0(d,o),v=Math.exp(-m);return Cp-f/x*v},r=d=>{const m=d*o*t,f=m*n+n,x=Math.pow(o,2)*Math.pow(d,2)*t,v=Math.exp(-m),C=w0(Math.pow(d,2),o);return(-i(d)+Cp>0?-1:1)*((f-x)*v)/C}):(i=d=>{const h=Math.exp(-d*t),m=(d-n)*t+1;return-Cp+h*m},r=d=>{const h=Math.exp(-d*t),m=(n-d)*(t*t);return h*m});const l=5/t,c=Dz(i,r,l);if(t=xi(t),isNaN(c))return{stiffness:bt.stiffness,damping:bt.damping,duration:t};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:t}}}const kz=12;function Dz(t,e,n){let s=n;for(let i=1;i<kz;i++)s=s-t(s)/e(s);return s}function w0(t,e){return t*Math.sqrt(1-e*e)}const Mz=["duration","bounce"],Oz=["stiffness","damping","mass"];function L_(t,e){return e.some(n=>t[n]!==void 0)}function Vz(t){let e={velocity:bt.velocity,stiffness:bt.stiffness,damping:bt.damping,mass:bt.mass,isResolvedFromDuration:!1,...t};if(!L_(t,Oz)&&L_(t,Mz))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,r=2*Ri(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:bt.mass,stiffness:i,damping:r}}else{const n=Iz(t);e={...e,...n,mass:bt.mass},e.isResolvedFromDuration=!0}return e}function VC(t=bt.visualDuration,e=bt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:r},{stiffness:c,damping:d,mass:h,duration:m,velocity:f,isResolvedFromDuration:x}=Vz({...n,velocity:-yi(n.velocity||0)}),v=f||0,C=d/(2*Math.sqrt(c*h)),R=o-r,S=yi(Math.sqrt(c/h)),y=Math.abs(R)<5;s||(s=y?bt.restSpeed.granular:bt.restSpeed.default),i||(i=y?bt.restDelta.granular:bt.restDelta.default);let _;if(C<1){const M=w0(S,C);_=L=>{const T=Math.exp(-C*S*L);return o-T*((v+C*S*R)/M*Math.sin(M*L)+R*Math.cos(M*L))}}else if(C===1)_=M=>o-Math.exp(-S*M)*(R+(v+S*R)*M);else{const M=S*Math.sqrt(C*C-1);_=L=>{const T=Math.exp(-C*S*L),p=Math.min(M*L,300);return o-T*((v+C*S*R)*Math.sinh(p)+M*R*Math.cosh(p))/M}}const I={calculatedDuration:x&&m||null,next:M=>{const L=_(M);if(x)l.done=M>=m;else{let T=0;C<1&&(T=M===0?xi(v):OC(_,M,L));const p=Math.abs(T)<=s,N=Math.abs(o-L)<=i;l.done=p&&N}return l.value=l.done?o:L,l},toString:()=>{const M=Math.min(eC(I),f0),L=tC(T=>I.next(M*T).value,M,30);return M+"ms "+L}};return I}function z_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const m=t[0],f={done:!1,value:m},x=p=>l!==void 0&&p<l||c!==void 0&&p>c,v=p=>l===void 0?c:c===void 0||Math.abs(l-p)<Math.abs(c-p)?l:c;let C=n*e;const R=m+C,S=o===void 0?R:o(R);S!==R&&(C=S-m);const y=p=>-C*Math.exp(-p/s),_=p=>S+y(p),I=p=>{const N=y(p),E=_(p);f.done=Math.abs(N)<=d,f.value=f.done?S:E};let M,L;const T=p=>{x(f.value)&&(M=p,L=VC({keyframes:[f.value,v(f.value)],velocity:OC(_,p,f.value),damping:i,stiffness:r,restDelta:d,restSpeed:h}))};return T(0),{calculatedDuration:null,next:p=>{let N=!1;return!L&&M===void 0&&(N=!0,I(p),T(p)),M!==void 0&&p>=M?L.next(p-M):(!N&&I(p),f)}}}const Pz=zu(.42,0,1,1),Lz=zu(0,0,.58,1),PC=zu(.42,0,.58,1),zz=t=>Array.isArray(t)&&typeof t[0]!="number",Uz={linear:Qn,easeIn:Pz,easeInOut:PC,easeOut:Lz,circIn:sv,circInOut:xC,circOut:gC,backIn:nv,backInOut:mC,backOut:fC,anticipate:pC},U_=t=>{if(Wy(t)){MA(t.length===4);const[e,n,s,i]=t;return zu(e,n,s,i)}else if(typeof t=="string")return Uz[t];return t};function Bz(t,e,n){const s=[],i=n||MC,r=t.length-1;for(let o=0;o<r;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Qn:e;l=Uu(c,l)}s.push(l)}return s}function Fz(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const r=t.length;if(MA(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Bz(e,s,i),c=l.length,d=h=>{if(o&&h<t[0])return e[0];let m=0;if(c>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const f=nl(t[m],t[m+1],h);return l[m](f)};return n?h=>d(Ri(t[0],t[r-1],h)):d}function $z(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=nl(0,e,s);t.push(mt(n,1,i))}}function Hz(t){const e=[0];return $z(e,t.length-1),e}function Gz(t,e){return t.map(n=>n*e)}function Kz(t,e){return t.map(()=>e||PC).splice(0,t.length-1)}function af({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=zz(s)?s.map(U_):U_(s),r={done:!1,value:e[0]},o=Gz(n&&n.length===e.length?n:Hz(e),t),l=Fz(o,e,{ease:Array.isArray(i)?i:Kz(e,i)});return{calculatedDuration:t,next:c=>(r.value=l(c),r.done=c>=t,r)}}const Qz=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ut.update(e,!0),stop:()=>Pr(e),now:()=>Zt.isProcessing?Zt.timestamp:Gs.now()}},Yz={decay:z_,inertia:z_,tween:af,keyframes:af,spring:VC},qz=t=>t/100;class cv extends kC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:s,element:i,keyframes:r}=this.options,o=(i==null?void 0:i.KeyframeResolver)||ov,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(r,l,n,s,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=this.options,l=Xy(n)?n:Yz[n]||af;let c,d;l!==af&&typeof e[0]!="number"&&(c=Uu(qz,MC(e[0],e[1])),e=[0,100]);const h=l({...this.options,keyframes:e});r==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=eC(h));const{calculatedDuration:m}=h,f=m+i,x=f*(s+1)-i;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:f,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:p}=this.options;return{done:!0,value:p[p.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:h,resolvedDuration:m}=s;if(this.startTime===null)return r.next(0);const{delay:f,repeat:x,repeatType:v,repeatDelay:C,onUpdate:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const S=this.currentTime-f*(this.speed>=0?1:-1),y=this.speed>=0?S<0:S>h;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let _=this.currentTime,I=r;if(x){const p=Math.min(this.currentTime,h)/m;let N=Math.floor(p),E=p%1;!E&&p>=1&&(E=1),E===1&&N--,N=Math.min(N,x+1),!!(N%2)&&(v==="reverse"?(E=1-E,C&&(E-=C/m)):v==="mirror"&&(I=o)),_=Ri(0,1,E)*m}const M=y?{done:!1,value:c[0]}:I.next(_);l&&(M.value=l(M.value));let{done:L}=M;!y&&d!==null&&(L=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return T&&i!==void 0&&(M.value=am(c,this.options,i)),R&&R(M.value),T&&this.finish(),M}get duration(){const{resolved:e}=this;return e?yi(e.calculatedDuration):0}get time(){return yi(this.currentTime)}set time(e){e=xi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=yi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Qz,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Xz=new Set(["opacity","clipPath","filter","transform"]);function Wz(t,e,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[e]:n};c&&(d.offset=c);const h=sC(l,i);return Array.isArray(h)&&(d.easing=h),t.animate(d,{delay:s,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}const Jz=Oy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),of=10,Zz=2e4;function e8(t){return Xy(t.type)||t.type==="spring"||!nC(t.ease)}function t8(t,e){const n=new cv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const i=[];let r=0;for(;!s.done&&r<Zz;)s=n.sample(r),i.push(s.value),r+=of;return{times:void 0,keyframes:i,duration:r-of,ease:"linear"}}const LC={anticipate:pC,backInOut:mC,circInOut:xC};function n8(t){return t in LC}class B_ extends kC{constructor(e){super(e);const{name:n,motionValue:s,element:i,keyframes:r}=this.options;this.resolver=new IC(r,(o,l)=>this.onKeyframesResolved(o,l),n,s,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:s=300,times:i,ease:r,type:o,motionValue:l,name:c,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof r=="string"&&sf()&&n8(r)&&(r=LC[r]),e8(this.options)){const{onComplete:m,onUpdate:f,motionValue:x,element:v,...C}=this.options,R=t8(e,C);e=R.keyframes,e.length===1&&(e[1]=e[0]),s=R.duration,i=R.times,r=R.ease,o="keyframes"}const h=Wz(l.owner.current,c,e,{...this.options,duration:s,times:i,ease:r});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(T_(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:m}=this.options;l.set(am(e,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:s,times:i,type:o,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return yi(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return yi(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=xi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Qn;const{animation:s}=n;T_(s,e)}return Qn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:i,type:r,ease:o,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:m,element:f,...x}=this.options,v=new cv({...x,keyframes:s,duration:i,type:r,ease:o,times:l,isGenerator:!0}),C=xi(this.time);d.setWithVelocity(v.sample(C-of).value,v.sample(C).value,of)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:i,repeatType:r,damping:o,type:l}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=n.owner.getProps();return Jz()&&s&&Xz.has(s)&&!c&&!d&&!i&&r!=="mirror"&&o!==0&&l!=="inertia"}}const s8={type:"spring",stiffness:500,damping:25,restSpeed:10},i8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),r8={type:"keyframes",duration:.8},a8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},o8=(t,{keyframes:e})=>e.length>2?r8:Fa.has(t)?t.startsWith("scale")?i8(e[1]):s8:a8;function l8({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const uv=(t,e,n,s={},i,r)=>o=>{const l=qy(s,t)||{},c=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-xi(c);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:r?void 0:i};l8(l)||(h={...h,...o8(t,h)}),h.duration&&(h.duration=xi(h.duration)),h.repeatDelay&&(h.repeatDelay=xi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(m=!0)),m&&!r&&e.get()!==void 0){const f=am(h.keyframes,l);if(f!==void 0)return ut.update(()=>{h.onUpdate(f),h.onComplete()}),new j9([])}return!r&&B_.supports(h)?new B_(h):new cv(h)};function c8({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function zC(t,e,{delay:n=0,transitionOverride:s,type:i}={}){var r;let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;s&&(o=s);const d=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const m in c){const f=t.getValue(m,(r=t.latestValues[m])!==null&&r!==void 0?r:null),x=c[m];if(x===void 0||h&&c8(h,m))continue;const v={delay:n,...qy(o||{},m)};let C=!1;if(window.MotionHandoffAnimation){const S=cC(t);if(S){const y=window.MotionHandoffAnimation(S,m,ut);y!==null&&(v.startTime=y,C=!0)}}p0(t,m),f.start(uv(m,f,x,t.shouldReduceMotion&&oC.has(m)?{type:!1}:v,t,C));const R=f.animation;R&&d.push(R)}return l&&Promise.all(d).then(()=>{ut.update(()=>{l&&B9(t,l)})}),d}function _0(t,e,n={}){var s;const i=rm(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(zC(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:f}=r;return u8(t,e,h+d,m,f,n)}:()=>Promise.resolve(),{when:c}=r;if(c){const[d,h]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function u8(t,e,n=0,s=0,i=1,r){const o=[],l=(t.variantChildren.size-1)*s,c=i===1?(d=0)=>d*s:(d=0)=>l-d*s;return Array.from(t.variantChildren).sort(d8).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(_0(d,e,{...r,delay:n+c(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function d8(t,e){return t.sortNodePosition(e)}function h8(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(r=>_0(t,r,n));s=Promise.all(i)}else if(typeof e=="string")s=_0(t,e,n);else{const i=typeof e=="function"?rm(t,e,n.custom):e;s=Promise.all(zC(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const f8=Py.length;function UC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?UC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<f8;n++){const s=Py[n],i=t.props[s];(tu(i)||i===!1)&&(e[s]=i)}return e}const m8=[...Vy].reverse(),p8=Vy.length;function g8(t){return e=>Promise.all(e.map(({animation:n,options:s})=>h8(t,n,s)))}function x8(t){let e=g8(t),n=F_(),s=!0;const i=c=>(d,h)=>{var m;const f=rm(t,h,c==="exit"?(m=t.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(f){const{transition:x,transitionEnd:v,...C}=f;d={...d,...C,...v}}return d};function r(c){e=c(t)}function o(c){const{props:d}=t,h=UC(t.parent)||{},m=[],f=new Set;let x={},v=1/0;for(let R=0;R<p8;R++){const S=m8[R],y=n[S],_=d[S]!==void 0?d[S]:h[S],I=tu(_),M=S===c?y.isActive:null;M===!1&&(v=R);let L=_===h[S]&&_!==d[S]&&I;if(L&&s&&t.manuallyAnimateOnMount&&(L=!1),y.protectedKeys={...x},!y.isActive&&M===null||!_&&!y.prevProp||sm(_)||typeof _=="boolean")continue;const T=y8(y.prevProp,_);let p=T||S===c&&y.isActive&&!L&&I||R>v&&I,N=!1;const E=Array.isArray(_)?_:[_];let j=E.reduce(i(S),{});M===!1&&(j={});const{prevResolvedValues:A={}}=y,w={...A,...j},k=U=>{p=!0,f.has(U)&&(N=!0,f.delete(U)),y.needsAnimating[U]=!0;const z=t.getValue(U);z&&(z.liveStyle=!1)};for(const U in w){const z=j[U],W=A[U];if(x.hasOwnProperty(U))continue;let F=!1;h0(z)&&h0(W)?F=!ZA(z,W):F=z!==W,F?z!=null?k(U):f.add(U):z!==void 0&&f.has(U)?k(U):y.protectedKeys[U]=!0}y.prevProp=_,y.prevResolvedValues=j,y.isActive&&(x={...x,...j}),s&&t.blockInitialAnimation&&(p=!1),p&&(!(L&&T)||N)&&m.push(...E.map(U=>({animation:U,options:{type:S}})))}if(f.size){const R={};f.forEach(S=>{const y=t.getBaseTarget(S),_=t.getValue(S);_&&(_.liveStyle=!0),R[S]=y??null}),m.push({animation:R})}let C=!!m.length;return s&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(C=!1),s=!1,C?e(m):Promise.resolve()}function l(c,d){var h;if(n[c].isActive===d)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var x;return(x=f.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),n[c].isActive=d;const m=o(c);for(const f in n)n[f].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:r,getState:()=>n,reset:()=>{n=F_(),s=!0}}}function y8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ZA(e,t):!1}function Zr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function F_(){return{animate:Zr(!0),whileInView:Zr(),whileHover:Zr(),whileTap:Zr(),whileDrag:Zr(),whileFocus:Zr(),exit:Zr()}}class Gr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class v8 extends Gr{constructor(e){super(e),e.animationState||(e.animationState=x8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let b8=0;class w8 extends Gr{constructor(){super(...arguments),this.id=b8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const _8={animation:{Feature:v8},exit:{Feature:w8}};function ru(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Bu(t){return{point:{x:t.pageX,y:t.pageY}}}const N8=t=>e=>Jy(e)&&t(e,Bu(e));function jc(t,e,n,s){return ru(t,e,N8(n),s)}const $_=(t,e)=>Math.abs(t-e);function S8(t,e){const n=$_(t.x,e.x),s=$_(t.y,e.y);return Math.sqrt(n**2+s**2)}class BC{constructor(e,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Ip(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,x=S8(m.offset,{x:0,y:0})>=3;if(!f&&!x)return;const{point:v}=m,{timestamp:C}=Zt;this.history.push({...v,timestamp:C});const{onStart:R,onMove:S}=this.handlers;f||(R&&R(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Rp(f,this.transformPagePoint),ut.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:x,onSessionEnd:v,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Ip(m.type==="pointercancel"?this.lastMoveEventInfo:Rp(f,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,R),v&&v(m,R)},!Jy(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const o=Bu(e),l=Rp(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=Zt;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,Ip(l,this.history)),this.removeListeners=Uu(jc(this.contextWindow,"pointermove",this.handlePointerMove),jc(this.contextWindow,"pointerup",this.handlePointerUp),jc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Pr(this.updatePoint)}}function Rp(t,e){return e?{point:e(t.point)}:t}function H_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ip({point:t},e){return{point:t,delta:H_(t,FC(e)),offset:H_(t,T8(e)),velocity:E8(e,.1)}}function T8(t){return t[0]}function FC(t){return t[t.length-1]}function E8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=FC(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>xi(e)));)n--;if(!s)return{x:0,y:0};const r=yi(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const $C=1e-4,j8=1-$C,A8=1+$C,HC=.01,C8=0-HC,R8=0+HC;function Wn(t){return t.max-t.min}function I8(t,e,n){return Math.abs(t-e)<=n}function G_(t,e,n,s=.5){t.origin=s,t.originPoint=mt(e.min,e.max,t.origin),t.scale=Wn(n)/Wn(e),t.translate=mt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=j8&&t.scale<=A8||isNaN(t.scale))&&(t.scale=1),(t.translate>=C8&&t.translate<=R8||isNaN(t.translate))&&(t.translate=0)}function Ac(t,e,n,s){G_(t.x,e.x,n.x,s?s.originX:void 0),G_(t.y,e.y,n.y,s?s.originY:void 0)}function K_(t,e,n){t.min=n.min+e.min,t.max=t.min+Wn(e)}function k8(t,e,n){K_(t.x,e.x,n.x),K_(t.y,e.y,n.y)}function Q_(t,e,n){t.min=e.min-n.min,t.max=t.min+Wn(e)}function Cc(t,e,n){Q_(t.x,e.x,n.x),Q_(t.y,e.y,n.y)}function D8(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?mt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?mt(n,t,s.max):Math.min(t,n)),t}function Y_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function M8(t,{top:e,left:n,bottom:s,right:i}){return{x:Y_(t.x,n,i),y:Y_(t.y,e,s)}}function q_(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function O8(t,e){return{x:q_(t.x,e.x),y:q_(t.y,e.y)}}function V8(t,e){let n=.5;const s=Wn(t),i=Wn(e);return i>s?n=nl(e.min,e.max-s,t.min):s>i&&(n=nl(t.min,t.max-i,e.min)),Ri(0,1,n)}function P8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const N0=.35;function L8(t=N0){return t===!1?t=0:t===!0&&(t=N0),{x:X_(t,"left","right"),y:X_(t,"top","bottom")}}function X_(t,e,n){return{min:W_(t,e),max:W_(t,n)}}function W_(t,e){return typeof t=="number"?t:t[e]||0}const J_=()=>({translate:0,scale:1,origin:0,originPoint:0}),yo=()=>({x:J_(),y:J_()}),Z_=()=>({min:0,max:0}),St=()=>({x:Z_(),y:Z_()});function ss(t){return[t("x"),t("y")]}function GC({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function z8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function U8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function kp(t){return t===void 0||t===1}function S0({scale:t,scaleX:e,scaleY:n}){return!kp(t)||!kp(e)||!kp(n)}function oa(t){return S0(t)||KC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function KC(t){return e2(t.x)||e2(t.y)}function e2(t){return t&&t!=="0%"}function lf(t,e,n){const s=t-n,i=e*s;return n+i}function t2(t,e,n,s,i){return i!==void 0&&(t=lf(t,i,s)),lf(t,n,s)+e}function T0(t,e=0,n=1,s,i){t.min=t2(t.min,e,n,s,i),t.max=t2(t.max,e,n,s,i)}function QC(t,{x:e,y:n}){T0(t.x,e.translate,e.scale,e.originPoint),T0(t.y,n.translate,n.scale,n.originPoint)}const n2=.999999999999,s2=1.0000000000001;function B8(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let r,o;for(let l=0;l<i;l++){r=n[l],o=r.projectionDelta;const{visualElement:c}=r.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&bo(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,QC(t,o)),s&&oa(r.latestValues)&&bo(t,r.latestValues))}e.x<s2&&e.x>n2&&(e.x=1),e.y<s2&&e.y>n2&&(e.y=1)}function vo(t,e){t.min=t.min+e,t.max=t.max+e}function i2(t,e,n,s,i=.5){const r=mt(t.min,t.max,i);T0(t,e,n,r,s)}function bo(t,e){i2(t.x,e.x,e.scaleX,e.scale,e.originX),i2(t.y,e.y,e.scaleY,e.scale,e.originY)}function YC(t,e){return GC(U8(t.getBoundingClientRect(),e))}function F8(t,e,n){const s=YC(t,n),{scroll:i}=e;return i&&(vo(s.x,i.offset.x),vo(s.y,i.offset.y)),s}const qC=({current:t})=>t?t.ownerDocument.defaultView:null,$8=new WeakMap;class H8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Bu(h).point)},r=(h,m)=>{const{drag:f,dragPropagation:x,onDragStart:v}=this.getProps();if(f&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=V9(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ss(R=>{let S=this.getAxisMotionValue(R).get()||0;if(Hs.test(S)){const{projection:y}=this.visualElement;if(y&&y.layout){const _=y.layout.layoutBox[R];_&&(S=Wn(_)*(parseFloat(S)/100))}}this.originPoint[R]=S}),v&&ut.postRender(()=>v(h,m)),p0(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},o=(h,m)=>{const{dragPropagation:f,dragDirectionLock:x,onDirectionLock:v,onDrag:C}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:R}=m;if(x&&this.currentDirection===null){this.currentDirection=G8(R),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,R),this.updateAxis("y",m.point,R),this.visualElement.render(),C&&C(h,m)},l=(h,m)=>this.stop(h,m),c=()=>ss(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new BC(e,{onSessionStart:i,onStart:r,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:qC(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&ut.postRender(()=>r(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!Ed(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=D8(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;n&&go(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=M8(i.layoutBox,n):this.constraints=!1,this.elastic=L8(s),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ss(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=P8(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!go(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=F8(s,i.root,this.visualElement.getTransformPagePoint());let o=O8(i.layout.layoutBox,r);if(n){const l=n(z8(o));this.hasMutatedConstraints=!!l,l&&(o=GC(l))}return o}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ss(h=>{if(!Ed(h,n,this.currentDirection))return;let m=c&&c[h]||{};o&&(m={min:0,max:0});const f=i?200:1e6,x=i?40:1e7,v={type:"inertia",velocity:s?e[h]:0,bounceStiffness:f,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(h,v)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return p0(this.visualElement,e),s.start(uv(e,s,0,n,this.visualElement,!1))}stopAnimation(){ss(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ss(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ss(n=>{const{drag:s}=this.getProps();if(!Ed(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];r.set(e[n]-mt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!go(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ss(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=V8({min:c,max:c},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ss(o=>{if(!Ed(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(mt(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;$8.set(this.visualElement,this);const e=this.visualElement.current,n=jc(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();go(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ut.read(s);const o=ru(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ss(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=c[h].translate,m.set(m.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),r(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=N0,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:l}}}function Ed(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function G8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class K8 extends Gr{constructor(e){super(e),this.removeGroupControls=Qn,this.removeListeners=Qn,this.controls=new H8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const r2=t=>(e,n)=>{t&&ut.postRender(()=>t(e,n))};class Q8 extends Gr{constructor(){super(...arguments),this.removePointerDownListener=Qn}onPointerDown(e){this.session=new BC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:r2(e),onStart:r2(n),onMove:s,onEnd:(r,o)=>{delete this.session,i&&ut.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=jc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const eh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function a2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Gl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(be.test(t))t=parseFloat(t);else return t;const n=a2(t,e.target.x),s=a2(t,e.target.y);return`${n}% ${s}%`}},Y8={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=Lr.parse(t);if(i.length>5)return s;const r=Lr.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const d=mt(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),r(i)}};class q8 extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=e;p9(X8),r&&(n.group&&n.group.add(r),s&&s.register&&i&&s.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),eh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:r}=this.props,o=s.projection;return o&&(o.isPresent=r,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||ut.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function XC(t){const[e,n]=kA(),s=D.useContext(Iy);return a.jsx(q8,{...t,layoutGroup:s,switchLayoutGroup:D.useContext(UA),isPresent:e,safeToRemove:n})}const X8={borderRadius:{...Gl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gl,borderTopRightRadius:Gl,borderBottomLeftRadius:Gl,borderBottomRightRadius:Gl,boxShadow:Y8};function W8(t,e,n){const s=xn(t)?t:su(t);return s.start(uv("",s,e,n)),s.animation}function J8(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Z8=(t,e)=>t.depth-e.depth;class eU{constructor(){this.children=[],this.isDirty=!1}add(e){Zy(this.children,e),this.isDirty=!0}remove(e){ev(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Z8),this.isDirty=!1,this.children.forEach(e)}}function tU(t,e){const n=Gs.now(),s=({timestamp:i})=>{const r=i-n;r>=e&&(Pr(s),t(r-e))};return ut.read(s,!0),()=>Pr(s)}const WC=["TopLeft","TopRight","BottomLeft","BottomRight"],nU=WC.length,o2=t=>typeof t=="string"?parseFloat(t):t,l2=t=>typeof t=="number"||be.test(t);function sU(t,e,n,s,i,r){i?(t.opacity=mt(0,n.opacity!==void 0?n.opacity:1,iU(s)),t.opacityExit=mt(e.opacity!==void 0?e.opacity:1,0,rU(s))):r&&(t.opacity=mt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<nU;o++){const l=`border${WC[o]}Radius`;let c=c2(e,l),d=c2(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||l2(c)===l2(d)?(t[l]=Math.max(mt(o2(c),o2(d),s),0),(Hs.test(d)||Hs.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=mt(e.rotate||0,n.rotate||0,s))}function c2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const iU=JC(0,.5,gC),rU=JC(.5,.95,Qn);function JC(t,e,n){return s=>s<t?0:s>e?1:n(nl(t,e,s))}function u2(t,e){t.min=e.min,t.max=e.max}function ns(t,e){u2(t.x,e.x),u2(t.y,e.y)}function d2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function h2(t,e,n,s,i){return t-=e,t=lf(t,1/n,s),i!==void 0&&(t=lf(t,1/i,s)),t}function aU(t,e=0,n=1,s=.5,i,r=t,o=t){if(Hs.test(e)&&(e=parseFloat(e),e=mt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=mt(r.min,r.max,s);t===r&&(l-=e),t.min=h2(t.min,e,n,l,i),t.max=h2(t.max,e,n,l,i)}function f2(t,e,[n,s,i],r,o){aU(t,e[n],e[s],e[i],e.scale,r,o)}const oU=["x","scaleX","originX"],lU=["y","scaleY","originY"];function m2(t,e,n,s){f2(t.x,e,oU,n?n.x:void 0,s?s.x:void 0),f2(t.y,e,lU,n?n.y:void 0,s?s.y:void 0)}function p2(t){return t.translate===0&&t.scale===1}function ZC(t){return p2(t.x)&&p2(t.y)}function g2(t,e){return t.min===e.min&&t.max===e.max}function cU(t,e){return g2(t.x,e.x)&&g2(t.y,e.y)}function x2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function e4(t,e){return x2(t.x,e.x)&&x2(t.y,e.y)}function y2(t){return Wn(t.x)/Wn(t.y)}function v2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uU{constructor(){this.members=[]}add(e){Zy(this.members,e),e.scheduleRender()}remove(e){if(ev(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dU(t,e,n){let s="";const i=t.x.translate/e.x,r=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||r||o)&&(s=`translate3d(${i}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:f,skewX:x,skewY:v}=n;d&&(s=`perspective(${d}px) ${s}`),h&&(s+=`rotate(${h}deg) `),m&&(s+=`rotateX(${m}deg) `),f&&(s+=`rotateY(${f}deg) `),x&&(s+=`skewX(${x}deg) `),v&&(s+=`skewY(${v}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const la={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},rc=typeof window<"u"&&window.MotionDebug!==void 0,Dp=["","X","Y","Z"],hU={visibility:"hidden"},b2=1e3;let fU=0;function Mp(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function t4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=cC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ut,!(i||r))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&t4(s)}function n4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=fU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,rc&&(la.totalNodes=la.resolvedTargetDeltas=la.recalculatedProjection=0),this.nodes.forEach(gU),this.nodes.forEach(wU),this.nodes.forEach(_U),this.nodes.forEach(xU),rc&&window.MotionDebug.record(la)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new eU)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new tv),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=J8(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),t){let m;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=tU(f,250),eh.hasAnimatedSinceResize&&(eh.hasAnimatedSinceResize=!1,this.nodes.forEach(_2))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:f,hasRelativeTargetChanged:x,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||h.getDefaultTransition()||jU,{onLayoutAnimationStart:R,onLayoutAnimationComplete:S}=h.getProps(),y=!this.targetLayout||!e4(this.targetLayout,v)||x,_=!f&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,_);const I={...qy(C,"layout"),onPlay:R,onComplete:S};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else f||_2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&t4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(w2);return}this.isUpdating||this.nodes.forEach(vU),this.isUpdating=!1,this.nodes.forEach(bU),this.nodes.forEach(mU),this.nodes.forEach(pU),this.clearAllSnapshots();const l=Gs.now();Zt.delta=Ri(0,1e3/60,l-Zt.timestamp),Zt.timestamp=l,Zt.isProcessing=!0,Sp.update.process(Zt),Sp.preRender.process(Zt),Sp.render.process(Zt),Zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yU),this.sharedNodes.forEach(SU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ut.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ut.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!ZC(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(l||oa(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),AU(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return St();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(CU))){const{scroll:h}=this.root;h&&(vo(c.x,h.offset.x),vo(c.y,h.offset.y))}return c}removeElementScroll(o){var l;const c=St();if(ns(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:f}=h;h!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&ns(c,o),vo(c.x,m.offset.x),vo(c.y,m.offset.y))}return c}applyTransform(o,l=!1){const c=St();ns(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&bo(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),oa(h.latestValues)&&bo(c,h.latestValues)}return oa(this.latestValues)&&bo(c,this.latestValues),c}removeTransform(o){const l=St();ns(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!oa(d.latestValues))continue;S0(d.latestValues)&&d.updateSnapshot();const h=St(),m=d.measurePageBox();ns(h,m),m2(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return oa(this.latestValues)&&m2(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:f}=this.options;if(!(!this.layout||!(m||f))){if(this.resolvedRelativeTargetAt=Zt.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),Cc(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),k8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ns(this.target,this.layout.layoutBox),QC(this.target,this.targetDelta)):ns(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),Cc(this.relativeTargetOrigin,this.target,x.target),ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}rc&&la.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||S0(this.parent.latestValues)||KC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Zt.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;ns(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,x=this.treeScale.y;B8(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=St());const{target:v}=l;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(d2(this.prevProjectionDelta.x,this.projectionDelta.x),d2(this.prevProjectionDelta.y,this.projectionDelta.y)),Ac(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==x||!v2(this.projectionDelta.x,this.prevProjectionDelta.x)||!v2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),rc&&la.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yo(),this.projectionDelta=yo(),this.projectionDeltaWithTransform=yo()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},m=yo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=St(),x=c?c.source:void 0,v=this.layout?this.layout.source:void 0,C=x!==v,R=this.getStack(),S=!R||R.members.length<=1,y=!!(C&&!S&&this.options.crossfade===!0&&!this.path.some(EU));this.animationProgress=0;let _;this.mixTargetDelta=I=>{const M=I/1e3;N2(m.x,o.x,M),N2(m.y,o.y,M),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cc(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TU(this.relativeTarget,this.relativeTargetOrigin,f,M),_&&cU(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=St()),ns(_,this.relativeTarget)),C&&(this.animationValues=h,sU(h,d,this.latestValues,M,y,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ut.update(()=>{eh.hasAnimatedSinceResize=!0,this.currentAnimation=W8(0,b2,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(b2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&s4(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||St();const m=Wn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const f=Wn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}ns(l,c),bo(l,h),Ac(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new uU),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Mp("z",o,d,this.animationValues);for(let h=0;h<Dp.length;h++)Mp(`rotate${Dp[h]}`,o,d,this.animationValues),Mp(`skew${Dp[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hU;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Jd(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=Jd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!oa(this.latestValues)&&(C.transform=h?h({},""):"none",this.hasProjected=!1),C}const f=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=dU(this.projectionDeltaWithTransform,this.treeScale,f),h&&(d.transform=h(f,d.transform));const{x,y:v}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${v.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=m===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const C in nf){if(f[C]===void 0)continue;const{correct:R,applyTo:S}=nf[C],y=d.transform==="none"?f[C]:R(f[C],m);if(S){const _=S.length;for(let I=0;I<_;I++)d[S[I]]=y}else d[C]=y}return this.options.layoutId&&(d.pointerEvents=m===this?Jd(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(w2),this.root.sharedNodes.clear()}}}function mU(t){t.updateLayout()}function pU(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:r}=t.options,o=n.source!==t.layout.source;r==="size"?ss(m=>{const f=o?n.measuredBox[m]:n.layoutBox[m],x=Wn(f);f.min=s[m].min,f.max=f.min+x}):s4(r,n.layoutBox,s)&&ss(m=>{const f=o?n.measuredBox[m]:n.layoutBox[m],x=Wn(s[m]);f.max=f.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+x)});const l=yo();Ac(l,s,n.layoutBox);const c=yo();o?Ac(c,t.applyTransform(i,!0),n.measuredBox):Ac(c,s,n.layoutBox);const d=!ZC(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:x}=m;if(f&&x){const v=St();Cc(v,n.layoutBox,f.layoutBox);const C=St();Cc(C,s,x.layoutBox),e4(v,C)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=v,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function gU(t){rc&&la.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function xU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function yU(t){t.clearSnapshot()}function w2(t){t.clearMeasurements()}function vU(t){t.isLayoutDirty=!1}function bU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function wU(t){t.resolveTargetDelta()}function _U(t){t.calcProjection()}function NU(t){t.resetSkewAndRotation()}function SU(t){t.removeLeadSnapshot()}function N2(t,e,n){t.translate=mt(e.translate,0,n),t.scale=mt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function S2(t,e,n,s){t.min=mt(e.min,n.min,s),t.max=mt(e.max,n.max,s)}function TU(t,e,n,s){S2(t.x,e.x,n.x,s),S2(t.y,e.y,n.y,s)}function EU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jU={duration:.45,ease:[.4,0,.1,1]},T2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),E2=T2("applewebkit/")&&!T2("chrome/")?Math.round:Qn;function j2(t){t.min=E2(t.min),t.max=E2(t.max)}function AU(t){j2(t.x),j2(t.y)}function s4(t,e,n){return t==="position"||t==="preserve-aspect"&&!I8(y2(e),y2(n),.2)}function CU(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const RU=n4({attachResizeListener:(t,e)=>ru(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Op={current:void 0},i4=n4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Op.current){const t=new RU({});t.mount(window),t.setOptions({layoutScroll:!0}),Op.current=t}return Op.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),IU={pan:{Feature:Q8},drag:{Feature:K8,ProjectionNode:i4,MeasureLayout:XC}};function A2(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,r=s[i];r&&ut.postRender(()=>r(e,Bu(e)))}class kU extends Gr{mount(){const{current:e}=this.node;e&&(this.unmount=I9(e,n=>(A2(this.node,n,"Start"),s=>A2(this.node,s,"End"))))}unmount(){}}class DU extends Gr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Uu(ru(this.node.current,"focus",()=>this.onFocus()),ru(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function C2(t,e,n){const{props:s}=t;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),r=s[i];r&&ut.postRender(()=>r(e,Bu(e)))}class MU extends Gr{mount(){const{current:e}=this.node;e&&(this.unmount=O9(e,n=>(C2(this.node,n,"Start"),(s,{success:i})=>C2(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const E0=new WeakMap,Vp=new WeakMap,OU=t=>{const e=E0.get(t.target);e&&e(t)},VU=t=>{t.forEach(OU)};function PU({root:t,...e}){const n=t||document;Vp.has(n)||Vp.set(n,{});const s=Vp.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(VU,{root:t,...e})),s[i]}function LU(t,e,n){const s=PU(e);return E0.set(t,n),s.observe(t),()=>{E0.delete(t),s.unobserve(t)}}const zU={some:0,all:1};class UU extends Gr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:r}=e,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:zU[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),f=d?h:m;f&&f(c)};return LU(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(BU(e,n))&&this.startObserver()}unmount(){}}function BU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const FU={inView:{Feature:UU},tap:{Feature:MU},focus:{Feature:DU},hover:{Feature:kU}},$U={layout:{ProjectionNode:i4,MeasureLayout:XC}},j0={current:null},r4={current:!1};function HU(){if(r4.current=!0,!!My)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>j0.current=t.matches;t.addListener(e),e()}else j0.current=!1}const GU=[...RC,mn,Lr],KU=t=>GU.find(CC(t)),R2=new WeakMap;function QU(t,e,n){for(const s in e){const i=e[s],r=n[s];if(xn(i))t.addValue(s,i);else if(xn(r))t.addValue(s,su(i,{owner:t}));else if(r!==i)if(t.hasValue(s)){const o=t.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(s);t.addValue(s,su(o!==void 0?o:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const I2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YU{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ov,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Gs.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,ut.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:h}=o;this.onUpdate=h,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=im(n),this.isVariantNode=LA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in f){const v=f[x];c[x]!==void 0&&xn(v)&&v.set(c[x],!1)}}mount(e){this.current=e,R2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),r4.current||HU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:j0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){R2.delete(this.current),this.projection&&this.projection.unmount(),Pr(this.notifyUpdate),Pr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Fa.has(e),i=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&ut.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),r(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in sl){const n=sl[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<I2.length;s++){const i=I2[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=e[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=QU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=su(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(jC(i)||yC(i))?i=parseFloat(i):!KU(i)&&Lr.test(n)&&(i=SC(e,n)),this.setBaseTarget(e,xn(i)?i.get():i)),xn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const o=By(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(s&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!xn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new tv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class a4 extends YU{constructor(){super(...arguments),this.KeyframeResolver=IC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function qU(t){return window.getComputedStyle(t)}class XU extends a4{constructor(){super(...arguments),this.type="html",this.renderInstance=QA}readValueFromInstance(e,n){if(Fa.has(n)){const s=av(n);return s&&s.default||0}else{const s=qU(e),i=(HA(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return YC(e,n)}build(e,n,s){Hy(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return Yy(e,n,s)}}class WU extends a4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=St}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Fa.has(n)){const s=av(n);return s&&s.default||0}return n=YA.has(n)?n:Ly(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return WA(e,n,s)}build(e,n,s){Gy(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,i){qA(e,n,s,i)}mount(e){this.isSVGTag=Qy(e.tagName),super.mount(e)}}const JU=(t,e)=>Uy(t)?new WU(e):new XU(e,{allowProjection:t!==D.Fragment}),ZU=S9({..._8,...FU,...IU,...$U},JU),K=zL(ZU);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=t=>{const e=t7(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:o,...l},c)=>D.createElement("svg",{ref:c,...n7,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:o4("lucide",i),...!r&&!s7(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>D.createElement(d,h)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(t,e)=>{const n=D.forwardRef(({className:s,...i},r)=>D.createElement(i7,{ref:r,iconNode:e,className:o4(`lucide-${e7(k2(t))}`,`lucide-${t}`,s),...i}));return n.displayName=k2(t),n};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],a7=ie("archive-restore",r7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],D2=ie("archive",o7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],c7=ie("arrow-left",l7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],A0=ie("arrow-right",u7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],$a=ie("award",d7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],wo=ie("bell",h7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],At=ie("book-open",f7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],M2=ie("brain",m7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],l4=ie("calendar-days",p7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],dv=ie("calendar",g7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ii=ie("chart-column",x7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],c4=ie("chart-pie",y7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],b7=ie("check-check",v7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vi=ie("check",w7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],N7=ie("chevron-down",_7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ca=ie("chevron-left",S7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],au=ie("chevron-right",T7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],j7=ie("circle-alert",E7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zt=ie("circle-check",A7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ou=ie("circle-x",C7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ms=ie("clipboard-list",R7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jn=ie("clock",I7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],rl=ie("copy",k7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],C0=ie("crown",D7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],u4=ie("database",M7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],d4=ie("download",O7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],P7=ie("eye-off",V7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],h4=ie("eye",L7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],R0=ie("file-check",z7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],om=ie("file-text",U7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Rc=ie("flame",B7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],$7=ie("folder-open",F7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],G7=ie("gamepad-2",H7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Q7=ie("globe",K7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],hv=ie("graduation-cap",Y7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],f4=ie("grip-vertical",q7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],W7=ie("inbox",X7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Z7=ie("info",J7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],m4=ie("key-round",eB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],nB=ie("languages",tB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],p4=ie("layers",sB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],g4=ie("layout-dashboard",iB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],aB=ie("link-2",rB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],x4=ie("list-ordered",oB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cB=ie("lock",lB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],y4=ie("log-out",uB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hB=ie("mail",dB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],mB=ie("medal",fB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],gB=ie("megaphone",pB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],I0=ie("message-circle",xB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],O2=ie("message-square",yB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],bB=ie("moon",vB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_B=ie("palette",wB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],cf=ie("pen-line",NB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],v4=ie("pen-tool",SB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],V2=ie("pin",TB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nn=ie("plus",EB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Es=ie("rotate-ccw",jB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ki=ie("search",AB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],fv=ie("send",CB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],b4=ie("settings",RB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],kB=ie("shield",IB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],lm=ie("shuffle",DB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],lu=ie("sparkles",MB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],w4=ie("star",OB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fa=ie("target",VB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]],th=ie("text-cursor-input",PB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Pp=ie("timer",LB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zr=ie("trash-2",zB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Fu=ie("trending-up",UB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Di=ie("triangle-alert",BB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],$u=ie("trophy",FB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],_4=ie("type",$B);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],GB=ie("user-minus",HB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],QB=ie("user-plus",KB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],N4=ie("user",YB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Dn=ie("users",qB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],on=ie("x",XB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],cu=ie("zap",WB),S4=D.createContext(null);function xs(){const t=D.useContext(S4);if(!t)throw new Error("useToast must be inside ToastProvider");return t}const JB={success:zt,error:ou,warning:Di,info:Z7},ZB={success:{bg:"bg-neon-green/10",border:"border-neon-green/30",text:"text-neon-green",shadow:"shadow-[0_0_30px_rgba(0,255,136,0.1)]"},error:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",shadow:"shadow-[0_0_30px_rgba(239,68,68,0.1)]"},warning:{bg:"bg-neon-orange/10",border:"border-neon-orange/30",text:"text-neon-orange",shadow:"shadow-[0_0_30px_rgba(255,165,0,0.1)]"},info:{bg:"bg-neon-blue/10",border:"border-neon-blue/30",text:"text-neon-blue",shadow:"shadow-[0_0_30px_rgba(0,209,255,0.1)]"}};let eF=0;function tF({children:t}){const[e,n]=D.useState([]),s=D.useCallback((d,h="info",m=4e3)=>{const f=++eF;return n(x=>[...x,{id:f,message:d,type:h}]),m>0&&setTimeout(()=>{n(x=>x.filter(v=>v.id!==f))},m),f},[]),i=D.useCallback(d=>{n(h=>h.filter(m=>m.id!==d))},[]),r=D.useCallback((d,h)=>s(d,"success",h),[s]),o=D.useCallback((d,h)=>s(d,"error",h),[s]),l=D.useCallback((d,h)=>s(d,"warning",h),[s]),c=D.useCallback((d,h)=>s(d,"info",h),[s]);return a.jsxs(S4.Provider,{value:{addToast:s,removeToast:i,success:r,error:o,warning:l,info:c},children:[t,a.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 max-w-sm w-full pointer-events-none",style:{maxWidth:"380px"},children:a.jsx(Xn,{mode:"popLayout",children:e.map(d=>{const h=JB[d.type],m=ZB[d.type];return a.jsxs(K.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:100,scale:.9},transition:{type:"spring",stiffness:400,damping:30},className:`pointer-events-auto flex items-start gap-3 px-4 py-3.5 rounded-xl border backdrop-blur-2xl ${m.bg} ${m.border} ${m.shadow}`,children:[a.jsx(h,{size:18,className:`${m.text} mt-0.5 shrink-0`}),a.jsx("p",{className:"text-sm text-white/90 font-medium flex-1 leading-relaxed",children:d.message}),a.jsx("button",{onClick:()=>i(d.id),className:"text-white/30 hover:text-white/60 transition-colors shrink-0 mt-0.5",children:a.jsx(on,{size:14})})]},d.id)})})})]})}const T4=D.createContext(null);function nF(){const t=D.useContext(T4);if(!t)throw new Error("useNotifications must be inside NotificationProvider");return t}function sF({children:t}){const{user:e,isTeacher:n,isStudent:s}=ft(),{classes:i,assignments:r,submissions:o,announcements:l,classMessages:c}=bn(),[d,h]=D.useState(new Set),[m,f]=D.useState([]),[x,v]=D.useState(!0);D.useEffect(()=>{if(!e){h(new Set),f([]),v(!1);return}(async()=>{try{const M=Ce(ue,"notification_reads",e.uid),L=await ir(M);L.exists()&&h(new Set(L.data().readIds||[]))}catch(M){console.error("Error loading read notifications:",M)}finally{v(!1)}})()},[e]),D.useEffect(()=>{if(!e||x)return;const I=[],M=new Date;if(s){l.forEach(j=>{var w,k,O;if(!((w=j.readBy)==null?void 0:w.includes(e.uid))){const V=i.find(U=>U.id===j.classId);I.push({id:`ann-${j.id}`,type:"announcement",title:"New Announcement",message:`${(V==null?void 0:V.name)||"Class"}: ${((k=j.content)==null?void 0:k.substring(0,80))||"New announcement posted"}${((O=j.content)==null?void 0:O.length)>80?"...":""}`,icon:"megaphone",color:"blue",createdAt:j.createdAt,link:`/classes/${j.classId}`,pinned:j.pinned})}});const p=i.map(j=>j.id),N=o.filter(j=>j.studentId===e.uid).map(j=>j.assignmentId);r.forEach(j=>{if(!p.includes(j.classId)||N.includes(j.id))return;const A=new Date(j.dueDate),w=(A-M)/(1e3*60*60);if(w>0&&w<=48){const k=i.find(V=>V.id===j.classId),O=Math.round(w);I.push({id:`due-${j.id}`,type:"due_soon",title:"Assignment Due Soon",message:`"${j.title}" in ${(k==null?void 0:k.name)||"class"} is due in ${O<24?`${O}h`:`${Math.round(O/24)}d`}`,icon:"clock",color:"orange",createdAt:new Date(A.getTime()-48*60*60*1e3).toISOString(),link:`/assignments/${j.id}`})}if(w<0){const k=i.find(O=>O.id===j.classId);I.push({id:`overdue-${j.id}`,type:"overdue",title:"Assignment Overdue",message:`"${j.title}" in ${(k==null?void 0:k.name)||"class"} was due ${iF(A)}`,icon:"alert",color:"red",createdAt:j.dueDate,link:`/assignments/${j.id}`})}}),o.forEach(j=>{if(j.studentId!==e.uid||j.grade==null)return;const A=r.find(V=>V.id===j.assignmentId);if(!A)return;const w=i.find(V=>V.id===A.classId),k=A.totalPoints||100,O=Math.round(j.grade/k*100);I.push({id:`grade-${j.id}`,type:"graded",title:"Assignment Graded",message:`"${A.title}" in ${(w==null?void 0:w.name)||"class"}: ${j.grade}/${k} (${O}%)`,icon:"star",color:O>=80?"green":O>=60?"orange":"red",createdAt:j.gradedAt||j.submittedAt,link:"/grades"})}),r.forEach(j=>{if(!p.includes(j.classId))return;const A=new Date(j.createdAt);if((M-A)/(1e3*60*60*24)<=7&&!N.includes(j.id)){const k=i.find(O=>O.id===j.classId);I.push({id:`new-${j.id}`,type:"new_assignment",title:"New Assignment",message:`"${j.title}" posted in ${(k==null?void 0:k.name)||"class"}`,icon:"book",color:"purple",createdAt:j.createdAt,link:`/assignments/${j.id}`})}});const E=new Date(M.getTime()-24*60*60*1e3).toISOString();(c||[]).forEach(j=>{if(j.authorId===e.uid||j.createdAt<E)return;const A=i.find(w=>w.id===j.classId);I.push({id:`chat-${j.id}`,type:"chat_message",title:"New Chat Message",message:`${j.authorName||"Someone"} in ${(A==null?void 0:A.name)||"class"}: "${(j.text||"").substring(0,60)}${(j.text||"").length>60?"...":""}"`,icon:"megaphone",color:j.authorRole==="teacher"?"blue":"purple",createdAt:j.createdAt,link:`/classes/${j.classId}`})})}else if(n){const p=o.filter(j=>j.grade==null),N=i.map(j=>j.id);p.forEach(j=>{const A=r.find(k=>k.id===j.assignmentId);if(!A||!N.includes(A.classId))return;const w=i.find(k=>k.id===A.classId);I.push({id:`sub-${j.id}`,type:"submission",title:"New Submission",message:`New submission for "${A.title}" in ${(w==null?void 0:w.name)||"class"}`,icon:"inbox",color:"blue",createdAt:j.submittedAt,link:"/assignments"})}),r.forEach(j=>{var U;if(!N.includes(j.classId)||new Date(j.dueDate)>M)return;const w=i.find(z=>z.id===j.classId),k=((U=w==null?void 0:w.students)==null?void 0:U.length)||0;if(k===0)return;const O=o.filter(z=>z.assignmentId===j.id).length;O/k*100<50&&I.push({id:`low-${j.id}`,type:"low_completion",title:"Low Completion Rate",message:`"${j.title}" in ${(w==null?void 0:w.name)||"class"}: only ${O}/${k} students submitted`,icon:"alert",color:"orange",createdAt:j.dueDate,link:"/assignments"})});const E=new Date(M.getTime()-24*60*60*1e3).toISOString();(c||[]).forEach(j=>{if(j.authorId===e.uid||j.createdAt<E)return;const A=i.find(w=>w.id===j.classId);A&&I.push({id:`chat-${j.id}`,type:"chat_message",title:"New Chat Message",message:`${j.authorName||"Someone"} in ${(A==null?void 0:A.name)||"class"}: "${(j.text||"").substring(0,60)}${(j.text||"").length>60?"...":""}"`,icon:"megaphone",color:"blue",createdAt:j.createdAt,link:`/classes/${j.classId}`})})}const L=new Map;I.forEach(p=>{L.has(p.id)||L.set(p.id,p)});const T=Array.from(L.values()).sort((p,N)=>new Date(N.createdAt)-new Date(p.createdAt));f(T)},[e,n,s,i,r,o,l,c,x]);const C=D.useCallback(async I=>{if(e){h(M=>{const L=new Set(M);return L.add(I),L});try{const M=Ce(ue,"notification_reads",e.uid),L=await ir(M);if(L.exists()){const T=L.data().readIds||[];T.includes(I)||await It(M,{readIds:[...T,I]})}else await si(M,{readIds:[I],updatedAt:new Date().toISOString()})}catch(M){console.error("Error marking notification as read:",M)}}},[e]),R=D.useCallback(async()=>{if(!e)return;const I=m.map(M=>M.id);h(new Set(I));try{const M=Ce(ue,"notification_reads",e.uid);await si(M,{readIds:I,updatedAt:new Date().toISOString()})}catch(M){console.error("Error marking all notifications as read:",M)}},[e,m]),S=D.useCallback(I=>d.has(I),[d]),y=m.filter(I=>!d.has(I.id)).length,_={notifications:m,unreadCount:y,markAsRead:C,markAllAsRead:R,isRead:S,loading:x};return a.jsx(T4.Provider,{value:_,children:t})}function iF(t){const e=new Date,n=new Date(t),s=e-n,i=Math.floor(s/(1e3*60)),r=Math.floor(s/(1e3*60*60)),o=Math.floor(s/(1e3*60*60*24));return i<60?`${i}m ago`:r<24?`${r}h ago`:o<7?`${o}d ago`:n.toLocaleDateString()}const rF=[{to:"/dashboard",icon:g4,label:"Dashboard"},{to:"/classes",icon:At,label:"My Classes"},{to:"/students",icon:Dn,label:"Students"},{to:"/assignments",icon:ms,label:"Assignments"},{to:"/grades",icon:Ii,label:"Gradebook"},{to:"/question-bank",icon:u4,label:"Question Bank"},{to:"/reports",icon:c4,label:"Reports"},{to:"/settings",icon:b4,label:"Settings"}],aF=[{to:"/dashboard",icon:g4,label:"Dashboard"},{to:"/my-classes",icon:At,label:"My Classes"},{to:"/assignments",icon:ms,label:"Assignments"},{to:"/grades",icon:Ii,label:"My Grades"},{to:"/calendar",icon:l4,label:"Calendar"},{to:"/achievements",icon:$u,label:"Achievements"},{to:"/practice",icon:G7,label:"Practice"},{to:"/settings",icon:b4,label:"Settings"}];function oF({mobileOpen:t,onClose:e}){var f,x;const{userProfile:n,isTeacher:s,isAdmin:i,logout:r}=ft(),o=vn(),l=Fr(),c=s?rF:aF;D.useEffect(()=>{t&&e&&e()},[l.pathname]);const d=async()=>{await r(),o("/")},m=i&&s?{label:"Maestro  Admin",bgClass:"bg-amber-500/10 text-amber-400 border border-amber-500/20",dotClass:"bg-amber-400"}:s?{label:"Maestro",bgClass:"bg-neon-purple/10 text-neon-purple border border-neon-purple/20",dotClass:"bg-neon-purple"}:{label:"Estudiante",bgClass:"bg-neon-green/10 text-neon-green border border-neon-green/20",dotClass:"bg-neon-green"};return a.jsxs("aside",{className:`fixed left-0 top-0 h-full z-40 transition-all duration-300 flex flex-col w-64
                bg-surface-950/95 backdrop-blur-2xl border-r border-white/[0.06]
                ${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"p-5 flex items-center justify-between border-b border-white/[0.06]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center flex-shrink-0",children:a.jsx(hv,{size:22,className:"text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-display font-bold text-base bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:"EnglishMaster"}),a.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-widest",children:"Pro"})]})]}),a.jsx("button",{onClick:e,className:"lg:hidden w-8 h-8 rounded-lg bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white transition-colors",children:a.jsx(on,{size:16})})]}),a.jsx("div",{className:"px-5 pt-4 pb-2",children:a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider ${m.bgClass}`,children:[a.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${m.dotClass}`}),m.label]})}),a.jsx("nav",{className:"flex-1 py-2 px-3 space-y-1 overflow-y-auto",children:c.map(v=>a.jsxs(Zk,{to:v.to,className:({isActive:C})=>`flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200
              ${C?"bg-neon-blue/10 text-neon-blue shadow-[inset_0_0_20px_rgba(0,209,255,0.05)]":"text-white/50 hover:text-white/80 hover:bg-white/[0.04]"}`,children:[a.jsx(v.icon,{size:20,className:"flex-shrink-0"}),a.jsx("span",{children:v.label})]},v.to))}),a.jsxs("div",{className:"p-3 border-t border-white/[0.06]",children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.03]",children:[a.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:((x=(f=n==null?void 0:n.displayName)==null?void 0:f[0])==null?void 0:x.toUpperCase())||"?"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:n==null?void 0:n.displayName}),a.jsx("p",{className:"text-xs text-white/40 truncate",children:n==null?void 0:n.email})]})]}),a.jsxs("button",{onClick:d,className:"mt-2 w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm text-white/40 hover:text-red-400 hover:bg-red-500/10 transition-all duration-200",children:[a.jsx(y4,{size:18}),a.jsx("span",{children:"Sign Out"})]})]})]})}function lF(){const[t,e]=D.useState(!1);return a.jsxs("div",{className:"min-h-screen bg-surface-950 relative",children:[a.jsx("div",{className:"orb orb-1"}),a.jsx("div",{className:"orb orb-2"}),a.jsx("div",{className:"orb orb-3"}),a.jsx(oF,{mobileOpen:t,onClose:()=>e(!1)}),t&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>e(!1)}),a.jsxs("main",{className:"lg:ml-64 relative z-10 min-h-screen transition-all duration-300",children:[a.jsxs("div",{className:"lg:hidden sticky top-0 z-20 px-4 py-3 bg-surface-950/80 backdrop-blur-xl border-b border-white/[0.06] flex items-center gap-3",children:[a.jsx("button",{onClick:()=>e(!0),className:"w-10 h-10 rounded-xl bg-white/[0.04] border border-white/[0.08] flex items-center justify-center text-white/60 hover:text-white hover:border-neon-blue/30 transition-all",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[a.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),a.jsx("line",{x1:"3",y1:"12",x2:"15",y2:"12"}),a.jsx("line",{x1:"3",y1:"18",x2:"18",y2:"18"})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),a.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]})}),a.jsx("span",{className:"font-display font-bold text-sm bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:"EnglishMaster"})]})]}),a.jsx(Lk,{})]})]})}function cF(){const t=vn(),{demoLogin:e}=ft(),[n,s]=D.useState(!1),[i,r]=D.useState(null),[o,l]=D.useState(!1),c=d=>{e(d),t("/dashboard")};return a.jsxs("div",{className:"min-h-screen bg-surface-950 relative overflow-hidden",children:[a.jsx("div",{className:"orb orb-1"}),a.jsx("div",{className:"orb orb-2"}),a.jsx("div",{className:"orb orb-3"}),a.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"60px 60px"}}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("header",{className:"flex items-center justify-between px-8 py-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center",children:a.jsx(hv,{size:22,className:"text-white"})}),a.jsx("span",{className:"font-display font-bold text-lg bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:"EnglishMaster Pro"})]})}),a.jsxs("main",{className:"max-w-6xl mx-auto px-8 pt-16 pb-24",children:[a.jsxs(K.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-neon-blue/10 border border-neon-blue/20 mb-8",children:[a.jsx(lu,{size:14,className:"text-neon-blue"}),a.jsx("span",{className:"text-xs font-medium text-neon-blue",children:"Premium Class Management System"})]}),a.jsxs("h1",{className:"font-display text-5xl md:text-7xl font-extrabold mb-6 leading-tight",children:[a.jsx("span",{className:"text-white",children:"Master English"}),a.jsx("br",{}),a.jsx("span",{className:"bg-gradient-to-r from-neon-blue via-neon-purple to-neon-pink bg-clip-text text-transparent",children:"Like Never Before"})]}),a.jsx("p",{className:"text-lg text-white/50 max-w-2xl mx-auto mb-12 leading-relaxed",children:"The ultimate platform for teachers and students. Create classes, manage assignments, track progress, and achieve English fluency with a premium experience."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[a.jsxs("button",{onClick:()=>{r("teacher"),s(!0)},className:"group relative w-72",children:[a.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-neon-blue to-neon-purple rounded-2xl opacity-60 blur group-hover:opacity-100 transition-all duration-300"}),a.jsxs("div",{className:"relative glass-card p-6 flex items-center gap-4 cursor-pointer hover:scale-[1.02] transition-transform",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-neon-blue/20 to-neon-blue/5 border border-neon-blue/20 flex items-center justify-center",children:a.jsx(At,{className:"text-neon-blue",size:24})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold text-white",children:"I'm a Teacher"}),a.jsx("p",{className:"text-xs text-white/40",children:"Create & manage classes"})]}),a.jsx(A0,{size:18,className:"text-white/30 ml-auto group-hover:text-neon-blue group-hover:translate-x-1 transition-all"})]})]}),a.jsxs("button",{onClick:()=>{r("student"),s(!0)},className:"group relative w-72",children:[a.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-neon-purple to-neon-pink rounded-2xl opacity-60 blur group-hover:opacity-100 transition-all duration-300"}),a.jsxs("div",{className:"relative glass-card p-6 flex items-center gap-4 cursor-pointer hover:scale-[1.02] transition-transform",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-neon-purple/20 to-neon-purple/5 border border-neon-purple/20 flex items-center justify-center",children:a.jsx(Dn,{className:"text-neon-purple",size:24})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold text-white",children:"I'm a Student"}),a.jsx("p",{className:"text-xs text-white/40",children:"Join & learn"})]}),a.jsx(A0,{size:18,className:"text-white/30 ml-auto group-hover:text-neon-purple group-hover:translate-x-1 transition-all"})]})]})]})]}),a.jsx(K.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-3xl mx-auto",children:[{value:"50+",label:"Features"},{value:"",label:"Students"},{value:"Real-time",label:"Grading"},{value:"Premium",label:"Experience"}].map((d,h)=>a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsx("p",{className:"text-2xl font-display font-bold bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:d.value}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:d.label})]},h))})]})]}),a.jsx(Xn,{children:n&&a.jsx(uF,{role:i,isRegister:o,setIsRegister:l,onClose:()=>{s(!1),l(!1)},onDemoLogin:c})})]})}function uF({role:t,isRegister:e,setIsRegister:n,onClose:s,onDemoLogin:i}){const{login:r,register:o,loginWithStudentCode:l,isProduction:c}=ft(),d=vn(),[h,m]=D.useState(""),[f,x]=D.useState(""),[v,C]=D.useState(""),[R,S]=D.useState(!1),[y,_]=D.useState(""),[I,M]=D.useState(!1);t==="student"&&e&&n(!1);const L=async T=>{T.preventDefault(),_(""),M(!0);try{t==="student"?await l(h,f):e?await o(h,f,v,t):await r(h,f),d("/dashboard")}catch(p){_(p.message||"Authentication failed"),M(!1)}};return a.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:s}),a.jsxs(K.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md",children:[a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-neon-blue to-neon-purple rounded-3xl opacity-30 blur-xl"}),a.jsxs("div",{className:"relative glass-card p-8 rounded-2xl",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-14 h-14 mx-auto rounded-2xl bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center mb-4",children:t==="teacher"?a.jsx(At,{className:"text-white",size:28}):a.jsx(Dn,{className:"text-white",size:28})}),a.jsx("h2",{className:"text-2xl font-display font-bold text-white",children:e?"Create Account":"Welcome Back"}),a.jsx("p",{className:"text-sm text-white/40 mt-1 capitalize",children:t==="student"?"Enter your credentials":`Sign ${e?"up":"in"} as ${t}`})]}),y&&a.jsx("div",{className:"mb-4 p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-sm text-red-400",children:y}),a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e&&t==="teacher"&&a.jsxs("div",{className:"relative",children:[a.jsx(N4,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{type:"text",placeholder:"Full Name",value:v,onChange:T=>C(T.target.value),className:"input-glass pl-11",required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsx(hB,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{type:"email",placeholder:"Email Address",value:h,onChange:T=>m(T.target.value),className:"input-glass pl-11",required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsx(cB,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{type:R?"text":"password",placeholder:t==="student"?"Access Code (e.g. AB12CD)":"Password",value:f,onChange:T=>x(T.target.value),className:"input-glass pl-11 pr-11",required:!0,maxLength:t==="student"?6:void 0,style:t==="student"?{textTransform:"uppercase",letterSpacing:"2px"}:{}}),a.jsx("button",{type:"button",onClick:()=>S(!R),className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/30 hover:text-white/60",children:R?a.jsx(P7,{size:18}):a.jsx(h4,{size:18})})]}),a.jsx("button",{type:"submit",disabled:I,className:"btn-neon w-full",children:I?"Please wait...":e?"Create Account":t==="student"?"Enter Class":"Sign In"})]}),a.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[a.jsx("div",{className:"flex-1 h-px bg-white/10"}),a.jsx("span",{className:"text-xs text-white/30",children:"or"}),a.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),!c&&a.jsxs("button",{onClick:()=>i(t),className:"mt-4 btn-ghost w-full text-center flex items-center justify-center gap-2",children:[a.jsx(lu,{size:16}),"Try Demo Mode"]}),t==="teacher"&&a.jsxs("p",{className:"mt-4 text-center text-sm text-white/40",children:[e?"Already have an account?":"Don't have an account?"," ",a.jsx("button",{onClick:()=>n(!e),className:"text-neon-blue hover:underline",children:e?"Sign In":"Register"})]}),t==="student"&&a.jsx("p",{className:"mt-4 text-center text-xs text-white/30",children:"Don't have a code? Ask your teacher to register you."})]}),a.jsx("p",{className:"text-center text-xs text-white/20 mt-4",children:"Protected by reCAPTCHA and subject to the Google Privacy Policy and Terms of Service. v1.1.0"})]})]})}const dF={megaphone:gB,clock:Jn,alert:Di,star:w4,book:At,inbox:W7},P2={blue:{bg:"bg-neon-blue/10",border:"border-neon-blue/20",text:"text-neon-blue",dot:"bg-neon-blue",glow:"shadow-[0_0_12px_rgba(0,209,255,0.3)]"},purple:{bg:"bg-neon-purple/10",border:"border-neon-purple/20",text:"text-neon-purple",dot:"bg-neon-purple",glow:"shadow-[0_0_12px_rgba(168,85,247,0.3)]"},green:{bg:"bg-neon-green/10",border:"border-neon-green/20",text:"text-neon-green",dot:"bg-neon-green",glow:"shadow-[0_0_12px_rgba(0,255,136,0.3)]"},orange:{bg:"bg-neon-orange/10",border:"border-neon-orange/20",text:"text-neon-orange",dot:"bg-neon-orange",glow:"shadow-[0_0_12px_rgba(255,165,0,0.3)]"},red:{bg:"bg-red-500/10",border:"border-red-500/20",text:"text-red-400",dot:"bg-red-500",glow:"shadow-[0_0_12px_rgba(239,68,68,0.3)]"}};function hF(t){if(!t)return"";const e=new Date,n=new Date(t),s=e-n,i=Math.floor(s/(1e3*60)),r=Math.floor(s/(1e3*60*60)),o=Math.floor(s/(1e3*60*60*24));return i<1?"Just now":i<60?`${i}m ago`:r<24?`${r}h ago`:o<7?`${o}d ago`:n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function fF(){const[t,e]=D.useState(!1),[n,s]=D.useState("all"),i=D.useRef(null),r=vn(),{notifications:o,unreadCount:l,markAsRead:c,markAllAsRead:d,isRead:h}=nF();D.useEffect(()=>{function x(v){i.current&&!i.current.contains(v.target)&&e(!1)}if(t)return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[t]),D.useEffect(()=>{function x(v){v.key==="Escape"&&e(!1)}if(t)return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t]);const m=n==="unread"?o.filter(x=>!h(x.id)):o,f=x=>{c(x.id),x.link&&(r(x.link),e(!1))};return a.jsxs("div",{className:"relative",ref:i,children:[a.jsxs("button",{onClick:()=>e(!t),className:`relative w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 ${t?"bg-neon-blue/20 border border-neon-blue/40 text-neon-blue shadow-[0_0_20px_rgba(0,209,255,0.2)]":"bg-white/[0.04] border border-white/[0.06] text-white/40 hover:text-white hover:border-neon-blue/30"}`,children:[a.jsx(wo,{size:18,className:t?"animate-wiggle":""}),a.jsx(Xn,{children:l>0&&a.jsx(K.span,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"absolute -top-1.5 -right-1.5 min-w-[20px] h-5 px-1 rounded-full bg-gradient-to-r from-neon-blue to-neon-purple text-[10px] font-bold flex items-center justify-center text-white shadow-[0_0_12px_rgba(0,209,255,0.4)]",children:l>99?"99+":l})})]}),a.jsx(Xn,{children:t&&a.jsxs(K.div,{initial:{opacity:0,y:-8,scale:.96},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.96},transition:{type:"spring",stiffness:400,damping:30},className:"absolute right-0 top-[calc(100%+8px)] w-[380px] max-h-[520px] rounded-2xl border border-white/[0.08] bg-surface-950/95 backdrop-blur-2xl shadow-2xl shadow-black/40 overflow-hidden z-50",children:[a.jsxs("div",{className:"px-5 pt-5 pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2.5",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 border border-neon-blue/20 flex items-center justify-center",children:a.jsx(wo,{size:14,className:"text-neon-blue"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-white",children:"Notifications"}),a.jsx("p",{className:"text-[11px] text-white/30",children:l>0?`${l} unread`:"All caught up!"})]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[l>0&&a.jsxs("button",{onClick:d,className:"flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-[11px] font-medium text-neon-green/70 hover:text-neon-green hover:bg-neon-green/10 transition-all",title:"Mark all as read",children:[a.jsx(b7,{size:12}),a.jsx("span",{children:"Read all"})]}),a.jsx("button",{onClick:()=>e(!1),className:"w-7 h-7 rounded-lg flex items-center justify-center text-white/20 hover:text-white/50 hover:bg-white/5 transition-all",children:a.jsx(on,{size:14})})]})]}),a.jsxs("div",{className:"flex gap-1 p-0.5 rounded-lg bg-white/[0.03] border border-white/[0.04]",children:[a.jsxs("button",{onClick:()=>s("all"),className:`flex-1 py-1.5 rounded-md text-[11px] font-medium transition-all ${n==="all"?"bg-white/[0.08] text-white shadow-sm":"text-white/30 hover:text-white/50"}`,children:["All (",o.length,")"]}),a.jsxs("button",{onClick:()=>s("unread"),className:`flex-1 py-1.5 rounded-md text-[11px] font-medium transition-all ${n==="unread"?"bg-white/[0.08] text-white shadow-sm":"text-white/30 hover:text-white/50"}`,children:["Unread (",l,")"]})]})]}),a.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-white/[0.06] to-transparent"}),a.jsx("div",{className:"overflow-y-auto max-h-[350px] notification-scroll",children:m.length===0?a.jsxs("div",{className:"py-12 text-center",children:[a.jsx("div",{className:"w-14 h-14 mx-auto mb-3 rounded-2xl bg-white/[0.03] border border-white/[0.06] flex items-center justify-center",children:a.jsx(wo,{size:22,className:"text-white/10"})}),a.jsx("p",{className:"text-sm text-white/20 font-medium",children:n==="unread"?"No unread notifications":"No notifications yet"}),a.jsx("p",{className:"text-[11px] text-white/10 mt-1",children:n==="unread"?"You're all caught up! ":"Check back later"})]}):a.jsx("div",{className:"py-1",children:m.map((x,v)=>{const C=dF[x.icon]||wo,R=P2[x.color]||P2.blue,S=h(x.id);return a.jsxs(K.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:v*.03},onClick:()=>f(x),className:`w-full text-left px-5 py-3.5 flex items-start gap-3 transition-all duration-200 relative group ${S?"opacity-50 hover:opacity-80":"hover:bg-white/[0.03]"}`,children:[!S&&a.jsx("span",{className:`absolute left-1.5 top-1/2 -translate-y-1/2 w-1.5 h-1.5 rounded-full ${R.dot} ${R.glow}`}),a.jsx("div",{className:`w-9 h-9 rounded-xl ${R.bg} border ${R.border} flex items-center justify-center shrink-0 mt-0.5`,children:a.jsx(C,{size:15,className:R.text})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:`text-xs font-semibold ${S?"text-white/40":"text-white/80"}`,children:x.title}),x.pinned&&a.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-neon-orange/20 text-neon-orange font-bold",children:"PINNED"})]}),a.jsx("p",{className:`text-[11px] leading-relaxed mt-0.5 ${S?"text-white/20":"text-white/40"}`,children:x.message}),a.jsx("p",{className:"text-[10px] text-white/15 mt-1",children:hF(x.createdAt)})]}),!S&&a.jsx("button",{onClick:y=>{y.stopPropagation(),c(x.id)},className:"opacity-0 group-hover:opacity-100 w-7 h-7 rounded-lg flex items-center justify-center text-white/20 hover:text-neon-green hover:bg-neon-green/10 transition-all shrink-0 mt-1",title:"Mark as read",children:a.jsx(vi,{size:12})})]},x.id)})})}),o.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-white/[0.06] to-transparent"}),a.jsx("div",{className:"px-5 py-3 flex items-center justify-center",children:a.jsxs("p",{className:"text-[11px] text-white/15",children:["Showing ",m.length," of ",o.length," notifications"]})})]})]})})]})}function Ft({title:t,subtitle:e,actions:n}){const[s,i]=D.useState(!1);return a.jsxs("header",{className:"sticky top-0 z-30 bg-surface-950/60 backdrop-blur-xl border-b border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-display font-bold text-white",children:t}),e&&a.jsx("p",{className:"text-sm text-white/40 mt-0.5",children:e})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>i(!s),className:"w-10 h-10 rounded-xl bg-white/[0.04] border border-white/[0.06] flex items-center justify-center text-white/40 hover:text-white hover:border-neon-blue/30 transition-all",children:a.jsx(ki,{size:18})}),a.jsx(fF,{}),n]})]}),s&&a.jsx("div",{className:"px-6 pb-4 animate-slide-down",children:a.jsxs("div",{className:"relative",children:[a.jsx(ki,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{autoFocus:!0,placeholder:"Search classes, students, assignments...",className:"input-glass pl-11",onKeyDown:r=>r.key==="Escape"&&i(!1)})]})})]})}function mF(){var S;const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,allStudents:i,announcements:r,getClassSubmissionStats:o}=bn(),l=vn(),c=e.filter(y=>!y.archived),d=new Set(c.flatMap(y=>y.students||[])).size,h=n.length,m=s.filter(y=>y.status==="pending"||y.grade==null&&y.status!=="graded"),f=s.sort((y,_)=>new Date(_.submittedAt)-new Date(y.submittedAt)).slice(0,6),x=s.filter(y=>y.grade!=null),v=x.length>0?Math.round(x.reduce((y,_)=>{const I=n.find(L=>L.id===_.assignmentId),M=(I==null?void 0:I.totalPoints)||100;return y+_.grade/M*100},0)/x.length):0;r.sort((y,_)=>new Date(_.createdAt)-new Date(y.createdAt)).slice(0,3);const C={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},R={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:`Hello, ${((S=t==null?void 0:t.displayName)==null?void 0:S.split(" ")[0])||"Teacher"}`,subtitle:`${new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}`,actions:a.jsxs("button",{onClick:()=>l("/classes"),className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(nn,{size:16})," New Class"]})}),a.jsxs(K.div,{variants:C,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsx(K.div,{variants:R,className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[{icon:At,label:"Classes",value:c.length,color:"neon-blue",glow:"rgba(0,209,255,0.08)"},{icon:Dn,label:"Students",value:d,color:"neon-green",glow:"rgba(0,255,136,0.08)"},{icon:ms,label:"Assignments",value:h,color:"neon-purple",glow:"rgba(139,92,246,0.08)"},{icon:Ii,label:"Avg Grade",value:`${v}%`,color:"neon-orange",glow:"rgba(255,165,0,0.08)"}].map((y,_)=>a.jsxs("div",{className:"glass-card p-3 sm:p-5 group hover:scale-[1.02] transition-all cursor-pointer",style:{boxShadow:`0 0 30px ${y.glow}`},onClick:()=>l(_===0?"/classes":_===1?"/students":_===2?"/assignments":"/grades"),children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[a.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-${y.color}/10 border border-${y.color}/20 flex items-center justify-center`,children:a.jsx(y.icon,{size:16,className:`text-${y.color}`})}),a.jsx("p",{className:"text-xs sm:text-sm text-white/40",children:y.label})]}),a.jsx("p",{className:`text-xl sm:text-3xl font-display font-black text-${y.color}`,children:y.value})]},_))}),m.length>0&&a.jsx(K.div,{variants:R,className:"glass-card p-4 border-l-4 border-l-neon-orange bg-neon-orange/5 cursor-pointer hover:bg-neon-orange/10 transition-colors",onClick:()=>l("/grades"),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Di,{size:20,className:"text-neon-orange"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-neon-orange font-semibold text-sm",children:[m.length," submissions awaiting grading"]}),a.jsx("p",{className:"text-xs text-white/30 mt-0.5",children:"Click to open gradebook"})]}),a.jsx("span",{className:"px-3 py-1 rounded-lg bg-neon-orange/10 border border-neon-orange/20 text-neon-orange font-bold text-sm",children:m.length})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(K.div,{variants:R,className:"glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-base font-display font-bold text-white flex items-center gap-2",children:[a.jsx(R0,{size:18,className:"text-neon-blue"})," Recent Submissions"]}),a.jsx("button",{onClick:()=>l("/grades"),className:"text-xs text-neon-blue hover:text-neon-blue/80 transition-colors",children:"View All"})]}),f.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"No submissions yet"}):a.jsx("div",{className:"space-y-3",children:f.map(y=>{const _=n.find(L=>L.id===y.assignmentId),I=i.find(L=>L.id===y.studentId),M=y.grade!=null;return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${M?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-neon-orange/10 text-neon-orange border border-neon-orange/20"}`,children:M?a.jsx(zt,{size:16}):a.jsx(Jn,{size:16})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:(I==null?void 0:I.displayName)||y.studentName||"Student"}),a.jsx("p",{className:"text-xs text-white/30 truncate",children:_==null?void 0:_.title})]}),a.jsx("div",{className:"text-right shrink-0",children:M?a.jsxs("span",{className:"text-sm font-bold text-neon-green",children:[y.grade,"/",(_==null?void 0:_.totalPoints)||100]}):a.jsx("span",{className:"text-xs text-neon-orange",children:"Pending"})})]},y.id)})})]}),a.jsxs(K.div,{variants:R,className:"glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-base font-display font-bold text-white flex items-center gap-2",children:[a.jsx(At,{size:18,className:"text-neon-purple"})," Your Classes"]}),a.jsx("button",{onClick:()=>l("/classes"),className:"text-xs text-neon-blue hover:text-neon-blue/80 transition-colors",children:"Manage"})]}),c.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"Create your first class!"}):a.jsx("div",{className:"space-y-3",children:c.slice(0,5).map(y=>{var I;o(y.id);const _=n.filter(M=>M.classId===y.id);return a.jsxs("button",{onClick:()=>l(`/classes/${y.id}`),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.04] hover:border-neon-blue/20 transition-all text-left group",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 flex items-center justify-center shrink-0 border border-white/5",children:a.jsx(At,{size:18,className:"text-neon-blue"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:y.name}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/30 mt-0.5",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Dn,{size:10})," ",((I=y.students)==null?void 0:I.length)||0]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ms,{size:10})," ",_.length]})]})]}),a.jsx("div",{className:"text-right shrink-0",children:a.jsx("p",{className:"text-xs font-mono text-neon-blue/50",children:y.code})})]},y.id)})})]})]}),a.jsxs(K.div,{variants:R,children:[a.jsx("h3",{className:"text-sm text-white/30 uppercase tracking-wider mb-3",children:"Quick Actions"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{icon:nn,label:"New Class",action:()=>l("/classes"),color:"neon-blue"},{icon:ms,label:"New Assignment",action:()=>l("/assignments"),color:"neon-green"},{icon:$a,label:"Grade Work",action:()=>l("/grades"),color:"neon-purple"},{icon:Dn,label:"Manage Students",action:()=>l("/students"),color:"neon-orange"}].map((y,_)=>a.jsxs("button",{onClick:y.action,className:"glass-card p-4 text-center hover:scale-[1.03] transition-all group",children:[a.jsx("div",{className:`w-10 h-10 mx-auto rounded-xl bg-${y.color}/10 border border-${y.color}/20 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform`,children:a.jsx(y.icon,{size:20,className:`text-${y.color}`})}),a.jsx("p",{className:"text-xs sm:text-sm font-medium text-white/60 group-hover:text-white transition-colors",children:y.label})]},_))})]})]})]})}function pF(){const{classes:t,addClass:e,deleteClass:n,archiveClass:s,unarchiveClass:i,getClassAssignments:r}=bn(),{userProfile:o,isTeacher:l}=ft(),c=xs(),d=vn(),[h,m]=D.useState(!1),[f,x]=D.useState(null),[v,C]=D.useState(""),[R,S]=D.useState(!1),[y,_]=D.useState(null),I=(A,w)=>{w==null||w.stopPropagation(),navigator.clipboard.writeText(A),x(A),c.success("Code copied!"),setTimeout(()=>x(null),2e3)},M=async(A,w)=>{w==null||w.stopPropagation();try{await n(A),c.success("Class deleted"),_(null)}catch{c.error("Failed to delete class")}},L=async(A,w,k)=>{k==null||k.stopPropagation();try{w?(await i(A),c.info("Class restored")):(await s(A),c.info("Class archived"))}catch{c.error("Failed to update class")}},T=D.useMemo(()=>t.filter(A=>{if(!R&&A.archived||R&&!A.archived)return!1;if(v){const w=v.toLowerCase();return A.name.toLowerCase().includes(w)||(A.description||"").toLowerCase().includes(w)}return!0}),[t,v,R]),p=t.filter(A=>A.archived).length,N={blue:{bg:"from-neon-blue to-blue-600"},purple:{bg:"from-neon-purple to-purple-600"},green:{bg:"from-neon-green to-emerald-600"},orange:{bg:"from-neon-orange to-amber-600"}},E={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},j={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"My Classes",subtitle:`${t.filter(A=>!A.archived).length} active class${t.filter(A=>!A.archived).length!==1?"es":""}`,actions:l&&a.jsxs("button",{onClick:()=>m(!0),className:"btn-neon flex items-center gap-2 text-sm px-4 py-2",children:[a.jsx(nn,{size:16})," Create"]})}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(ki,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20"}),a.jsx("input",{value:v,onChange:A=>C(A.target.value),placeholder:"Search classes...",className:"input-glass pl-10 text-sm"})]}),p>0&&a.jsxs("button",{onClick:()=>S(!R),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-xs transition-all ${R?"bg-neon-orange/10 border border-neon-orange/20 text-neon-orange":"bg-white/[0.04] border border-white/[0.08] text-white/40 hover:text-white/60"}`,children:[a.jsx(D2,{size:14})," ",R?`Archived (${p})`:`Show Archived (${p})`]})]}),a.jsxs(K.div,{variants:E,initial:"hidden",animate:"show",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-5",children:[T.map(A=>{var O;const w=N[A.color]||N.blue,k=r(A.id);return a.jsx(K.div,{variants:j,children:a.jsxs("div",{className:`glass-card group hover:border-white/10 cursor-pointer transition-all duration-300 overflow-hidden ${A.archived?"opacity-60":""}`,onClick:()=>d(`/classes/${A.id}`),children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${w.bg}`}),a.jsxs("div",{className:"p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[a.jsx("div",{className:`w-10 h-10 sm:w-11 sm:h-11 rounded-xl bg-gradient-to-br ${w.bg} flex items-center justify-center shadow-lg shrink-0`,children:a.jsx(At,{size:18,className:"text-white"})}),a.jsxs("button",{onClick:V=>I(A.code,V),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-white/[0.04] border border-white/[0.06] text-xs text-white/50 hover:text-white hover:border-neon-blue/30 transition-all",children:[f===A.code?a.jsx(vi,{size:12,className:"text-neon-green"}):a.jsx(rl,{size:12}),a.jsx("span",{className:"font-mono",children:A.code})]})]}),a.jsx("h3",{className:"font-semibold text-white mb-1 group-hover:text-neon-blue transition-colors line-clamp-1 text-sm sm:text-base",children:A.name}),a.jsx("p",{className:"text-xs sm:text-sm text-white/40 line-clamp-2 mb-4",children:A.description}),a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-white/40",children:[a.jsx(Dn,{size:13})," ",((O=A.students)==null?void 0:O.length)||0]}),a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-white/40",children:[a.jsx(ms,{size:13})," ",k.length]}),a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-white/40 hidden sm:flex",children:[a.jsx(Jn,{size:13})," ",A.level||"All"]})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:V=>V.stopPropagation(),children:[a.jsx("button",{onClick:V=>L(A.id,A.archived,V),className:"p-1.5 rounded-lg text-white/20 hover:text-neon-orange hover:bg-neon-orange/10 transition-all",title:A.archived?"Restore":"Archive",children:A.archived?a.jsx(a7,{size:14}):a.jsx(D2,{size:14})}),y===A.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:V=>{V.stopPropagation(),_(null)},className:"text-[10px] text-white/40 px-1.5 py-1 rounded",children:"No"}),a.jsx("button",{onClick:V=>M(A.id,V),className:"text-[10px] text-red-400 bg-red-500/10 px-1.5 py-1 rounded font-bold",children:"Yes"})]}):a.jsx("button",{onClick:V=>{V.stopPropagation(),_(A.id)},className:"p-1.5 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Delete",children:a.jsx(zr,{size:14})})]})]})]})]})},A.id)}),l&&!R&&a.jsx(K.div,{variants:j,children:a.jsxs("button",{onClick:()=>m(!0),className:"w-full h-full min-h-[200px] rounded-2xl border-2 border-dashed border-white/10 hover:border-neon-blue/30 flex flex-col items-center justify-center gap-3 text-white/30 hover:text-neon-blue transition-all group",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/[0.04] group-hover:bg-neon-blue/10 flex items-center justify-center transition-all",children:a.jsx(nn,{size:24})}),a.jsx("span",{className:"text-sm font-medium",children:"Create New Class"})]})})]}),T.length===0&&a.jsxs("div",{className:"text-center py-16 text-white/30",children:[a.jsx(At,{size:48,className:"mx-auto mb-4 opacity-30"}),a.jsx("p",{className:"text-sm",children:R?"No archived classes":v?"No classes match your search":"No classes yet"})]})]})]}),a.jsx(Xn,{children:h&&a.jsx(gF,{onClose:()=>m(!1),onCreate:e})})]})}function gF({onClose:t,onCreate:e}){const n=xs(),[s,i]=D.useState(""),[r,o]=D.useState(""),[l,c]=D.useState("Beginner"),[d,h]=D.useState(""),[m,f]=D.useState("blue"),[x,v]=D.useState(!1),[C,R]=D.useState(""),S=async y=>{y.preventDefault(),v(!0),R("");try{await e({name:s,description:r,level:l,schedule:d,color:m}),n.success("Class created!"),t()}catch{R("Failed to create class. Please try again."),n.error("Failed to create class"),v(!1)}};return a.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),a.jsxs(K.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"relative w-full max-w-lg",children:[a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-neon-blue to-neon-purple rounded-3xl opacity-20 blur-xl"}),a.jsxs("div",{className:"relative glass-card p-5 sm:p-6 rounded-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-display font-bold text-white",children:"Create New Class"}),a.jsx("button",{onClick:t,className:"p-2 rounded-lg text-white/40 hover:text-white hover:bg-white/10 transition-all",children:a.jsx(on,{size:18})})]}),C&&a.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:C}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Class Name"}),a.jsx("input",{value:s,onChange:y=>i(y.target.value),placeholder:"e.g. English 201",className:"input-glass",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Description"}),a.jsx("textarea",{value:r,onChange:y=>o(y.target.value),placeholder:"What will students learn?",className:"input-glass h-24 resize-none",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Level"}),a.jsxs("select",{value:l,onChange:y=>c(y.target.value),className:"input-glass",children:[a.jsx("option",{value:"Beginner",children:"Beginner"}),a.jsx("option",{value:"Intermediate",children:"Intermediate"}),a.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Schedule"}),a.jsx("input",{value:d,onChange:y=>h(y.target.value),placeholder:"Mon, Wed 9 AM",className:"input-glass"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Color Theme"}),a.jsx("div",{className:"flex gap-3",children:["blue","purple","green","orange"].map(y=>a.jsx("button",{type:"button",onClick:()=>f(y),className:`w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-br ${y==="blue"?"from-neon-blue to-blue-600":y==="purple"?"from-neon-purple to-purple-600":y==="green"?"from-neon-green to-emerald-600":"from-neon-orange to-amber-600"} ${m===y?"ring-2 ring-white ring-offset-2 ring-offset-surface-950":"opacity-50 hover:opacity-80"} transition-all`},y))})]}),a.jsx("button",{type:"submit",disabled:x,className:"btn-neon w-full mt-4 flex items-center justify-center gap-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/30 border-t-white animate-spin"})," Creating..."]}):"Create Class"})]})]})]})]})}function xF(){const{id:t}=WT(),e=vn(),[n]=n5(),{userProfile:s,isTeacher:i,resetStudentCode:r}=ft(),{classes:o,getClassStudents:l,getClassAssignments:c,getClassAnnouncements:d,addAnnouncement:h,deleteAnnouncement:m,pinAnnouncement:f,removeStudentFromClass:x,allStudents:v,updateClass:C,submissions:R,getClassAnalytics:S,exportClassGrades:y,getLeaderboard:_,getAssignmentCompletionRate:I,addClassMessage:M,deleteClassMessage:L,getClassMessages:T,sendTeacherRequest:p,getTeacherRequestsForClass:N}=bn(),E=xs(),j=o.find(le=>le.id===t),[A,w]=D.useState(n.get("tab")||(i?"overview":"announcements")),[k,O]=D.useState(!1),[V,U]=D.useState(""),[z,W]=D.useState(""),[F,Z]=D.useState(!1),[pe,fe]=D.useState(null),[Se,Te]=D.useState("");D.useRef(null);const[tt,ne]=D.useState(null),[J,he]=D.useState(null);if(D.useEffect(()=>{const le=n.get("tab");le&&w(le)},[n]),!j)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("p",{className:"text-white/40",children:"Class not found"})});const me=l(t),ve=c(t),xt=d(t),Ct=S(t),Zn=_(t),es=()=>{navigator.clipboard.writeText(j.code),O(!0),E.success("Class code copied!"),setTimeout(()=>O(!1),2e3)},dn=()=>{if(!z.trim()){E.warning("Please enter a title");return}h({classId:t,title:z,content:V,author:(s==null?void 0:s.displayName)||"Teacher"}),W(""),U(""),E.success("Announcement posted!")},He=async le=>{try{await x(t,le),E.success("Student removed from class"),fe(null)}catch{E.error("Failed to remove student")}},Ge=async le=>{try{await m(le),E.success("Announcement deleted")}catch{E.error("Failed to delete")}},Je=async(le,Ke)=>{await f(le,!Ke),E.info(Ke?"Unpinned":"Pinned")},qe=()=>{const le=y(t),Ke=new Blob([le],{type:"text/csv"}),hn=URL.createObjectURL(Ke),ys=document.createElement("a");ys.href=hn,ys.download=`${j.name}_grades.csv`,ys.click(),URL.revokeObjectURL(hn),E.success("Grades exported!")},ts=i?["overview","students","assignments","announcements","chat"]:["announcements","chat"],Ha={blue:"from-neon-blue to-blue-600",purple:"from-neon-purple to-purple-600",green:"from-neon-green to-emerald-600",orange:"from-neon-orange to-amber-600"};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:j.name,subtitle:`${j.level||""}  ${j.schedule||"No schedule"}`,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:qe,className:"btn-ghost flex items-center gap-1.5 text-sm px-3 py-2",title:"Export Grades",children:[a.jsx(d4,{size:14})," CSV"]}),a.jsxs("button",{onClick:()=>e("/classes"),className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(c7,{size:16})," Back"]})]})}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card overflow-hidden",children:[a.jsxs("div",{className:`h-24 sm:h-32 bg-gradient-to-r ${Ha[j.color]||Ha.blue} relative`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/20"}),a.jsxs("div",{className:"absolute bottom-3 sm:bottom-4 left-4 sm:left-6 flex items-center gap-3 sm:gap-4",children:[a.jsxs("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:[a.jsx(At,{size:24,className:"text-white sm:hidden"}),a.jsx(At,{size:32,className:"text-white hidden sm:block"})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-white",children:j.name}),a.jsx("p",{className:"text-xs sm:text-sm text-white/70 line-clamp-1",children:j.description})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-6 px-4 sm:px-6 py-3 sm:py-4 border-b border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dn,{size:14,className:"text-neon-blue"}),a.jsxs("span",{className:"text-xs sm:text-sm text-white/60",children:[me.length," Students"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ms,{size:14,className:"text-neon-purple"}),a.jsxs("span",{className:"text-xs sm:text-sm text-white/60",children:[ve.length," Assignments"]})]}),a.jsx("div",{className:"flex-1"}),a.jsxs("button",{onClick:es,className:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-neon-blue/10 border border-neon-blue/20 text-xs sm:text-sm text-neon-blue hover:bg-neon-blue/20 transition-all",children:[k?a.jsx(vi,{size:14}):a.jsx(rl,{size:14}),a.jsx("span",{className:"hidden sm:inline",children:"Code:"})," ",j.code]})]}),a.jsx("div",{className:"flex gap-1 px-4 sm:px-6 py-2 overflow-x-auto",children:ts.map(le=>a.jsx("button",{onClick:()=>w(le),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium capitalize transition-all whitespace-nowrap
                                    ${A===le?"bg-neon-blue/10 text-neon-blue":"text-white/40 hover:text-white/60 hover:bg-white/[0.04]"}`,children:le},le))})]}),A==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsxs("p",{className:"text-2xl sm:text-3xl font-display font-black text-neon-blue",children:[Ct.avgGrade,"%"]}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Class Avg"})]}),a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsx("p",{className:"text-2xl sm:text-3xl font-display font-black text-neon-green",children:Ct.totalSubmitted}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Submitted"})]}),a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsx("p",{className:"text-2xl sm:text-3xl font-display font-black text-neon-purple",children:Ct.totalGraded}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Graded"})]}),a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsx("p",{className:"text-2xl sm:text-3xl font-display font-black text-neon-orange",children:Ct.totalExpected-Ct.totalSubmitted}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Missing"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"glass-card p-5",children:[a.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(dv,{size:16,className:"text-neon-blue"})," Details"]}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/40",children:"Level"}),a.jsx("span",{className:"text-white",children:j.level||"Beginner"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/40",children:"Schedule"}),a.jsx("span",{className:"text-white",children:j.schedule||"TBD"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/40",children:"Created"}),a.jsx("span",{className:"text-white",children:new Date(j.createdAt).toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/40",children:"Teacher"}),a.jsx("span",{className:"text-white",children:j.teacherName})]})]})]}),a.jsxs("div",{className:"glass-card p-5",children:[a.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx($a,{size:16,className:"text-neon-purple"})," Leaderboard"]}),Zn.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-6",children:"No grades yet"}):a.jsx("div",{className:"space-y-2",children:Zn.slice(0,5).map((le,Ke)=>a.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-white/[0.02]",children:[a.jsx("span",{className:`w-6 h-6 rounded-full text-xs font-bold flex items-center justify-center ${Ke===0?"bg-yellow-500/20 text-yellow-400":Ke===1?"bg-gray-400/20 text-gray-300":Ke===2?"bg-orange-500/20 text-orange-400":"bg-white/5 text-white/30"}`,children:Ke+1}),a.jsx("span",{className:"flex-1 text-sm text-white truncate",children:le.name}),a.jsxs("span",{className:`text-sm font-bold ${le.avg>=90?"text-neon-green":le.avg>=70?"text-neon-blue":"text-neon-orange"}`,children:[le.avg,"%"]})]},le.id))})]})]}),a.jsxs("div",{className:"glass-card p-5",children:[a.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(Ii,{size:16,className:"text-neon-green"})," Grade Distribution"]}),a.jsx("div",{className:"flex items-end gap-3 h-24",children:Object.entries(Ct.gradeDistribution||{}).map(([le,Ke])=>{const hn=Math.max(...Object.values(Ct.gradeDistribution||{}),1),ys=`${Ke/hn*100}%`,Kr={A:"neon-green",B:"neon-blue",C:"neon-purple",D:"neon-orange",F:"red-400"};return a.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 h-full",children:[a.jsx("span",{className:"text-[10px] text-white/30",children:Ke}),a.jsx("div",{className:"w-full flex-1 flex items-end",children:a.jsx("div",{className:`w-full rounded-t-md bg-${Kr[le]}/20 border-t border-${Kr[le]}/30`,style:{height:Ke>0?ys:"2px"}})}),a.jsx("span",{className:`text-xs font-bold text-${Kr[le]}`,children:le})]},le)})})]})]}),A==="students"&&a.jsxs("div",{className:"glass-card p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-semibold text-white",children:["Enrolled Students (",me.length,")"]}),a.jsxs("button",{onClick:()=>Z(!0),className:"px-3 py-2 rounded-xl bg-neon-blue/10 border border-neon-blue/20 text-xs text-neon-blue hover:bg-neon-blue/20 transition-all flex items-center gap-2",children:[a.jsx(QB,{size:14})," Add"]})]}),a.jsx("div",{className:"space-y-2",children:me.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Dn,{size:48,className:"mx-auto text-white/10 mb-4"}),a.jsx("p",{className:"text-white/40 text-sm",children:"No students enrolled yet."}),a.jsxs("p",{className:"text-xs text-white/20 mt-1",children:["Share code ",a.jsx("span",{className:"text-neon-blue font-mono",children:j.code})]})]}):me.map(le=>{var Ke;return a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 p-3 rounded-xl hover:bg-white/[0.03] transition-all group",children:[a.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white font-bold text-xs sm:text-sm shrink-0",children:((Ke=le.displayName)==null?void 0:Ke[0])||"S"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:le.displayName}),a.jsx("p",{className:"text-xs text-white/40 truncate",children:le.email})]}),pe===le.id?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>fe(null),className:"text-xs text-white/40 hover:text-white px-2 py-1 rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>He(le.id),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1 rounded-lg font-semibold hover:bg-red-500/20 transition-colors",children:"Remove"})]}):a.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[a.jsx("button",{onClick:async()=>{if(!le.email){E.error("No email for this student");return}he(le.id);try{const hn=await r(le.email);ne({studentName:le.displayName,newCode:hn}),E.success("New access code generated!")}catch(hn){E.error(hn.message)}finally{he(null)}},className:"p-2 rounded-lg text-white/20 hover:text-neon-orange hover:bg-neon-orange/10 transition-all",title:"Reset access code",disabled:J===le.id,children:a.jsx(m4,{size:16,className:J===le.id?"animate-spin":""})}),a.jsx("button",{onClick:()=>fe(le.id),className:"p-2 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Remove student",children:a.jsx(GB,{size:16})})]})]},le.id)})})]}),A==="assignments"&&a.jsxs("div",{className:"glass-card p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-semibold text-white",children:["Assignments (",ve.length,")"]}),a.jsxs("button",{onClick:()=>e("/assignments"),className:"btn-neon text-sm flex items-center gap-2",children:[a.jsx(nn,{size:14})," New"]})]}),a.jsx("div",{className:"space-y-3",children:ve.length===0?a.jsx("p",{className:"text-white/40 text-sm text-center py-8",children:"No assignments yet."}):ve.map(le=>{const Ke=I(le.id);return a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl bg-white/[0.02] border border-white/[0.04] hover:border-white/10 transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-neon-purple/10 border border-neon-purple/20 flex items-center justify-center shrink-0",children:a.jsx(ms,{size:18,className:"text-neon-purple"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-white text-sm truncate",children:le.title}),a.jsxs("p",{className:"text-xs text-white/40",children:[le.type,"  ",le.totalPoints," pts  ",Ke.rate,"% done"]})]}),a.jsxs("div",{className:"text-right shrink-0",children:[a.jsx("p",{className:"text-xs text-white/40",children:"Due"}),a.jsx("p",{className:"text-sm text-neon-orange",children:new Date(le.dueDate).toLocaleDateString()})]})]},le.id)})})]}),A==="announcements"&&a.jsxs("div",{className:"space-y-4",children:[i&&a.jsxs("div",{className:"glass-card p-4 sm:p-5",children:[a.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(O2,{size:16,className:"text-neon-blue"})," Post Announcement"]}),a.jsx("input",{value:z,onChange:le=>W(le.target.value),placeholder:"Announcement title...",className:"input-glass mb-3"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("textarea",{value:V,onChange:le=>U(le.target.value),placeholder:"Write your announcement...",className:"input-glass flex-1 h-20 resize-none"}),a.jsx("button",{onClick:dn,className:"btn-neon self-end px-4",children:a.jsx(fv,{size:16})})]})]}),xt.length===0&&a.jsxs("div",{className:"glass-card p-8 text-center",children:[a.jsx(O2,{size:40,className:"mx-auto text-white/10 mb-3"}),a.jsx("p",{className:"text-white/40 text-sm",children:"No announcements yet."})]}),xt.sort((le,Ke)=>(Ke.pinned?1:0)-(le.pinned?1:0)||new Date(Ke.createdAt)-new Date(le.createdAt)).map(le=>a.jsxs("div",{className:`glass-card p-4 sm:p-5 ${le.pinned?"border-l-4 border-l-neon-orange":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2 gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[le.pinned&&a.jsx(V2,{size:12,className:"text-neon-orange shrink-0"}),a.jsx("h4",{className:"font-semibold text-white truncate",children:le.title})]}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[i&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>Je(le.id,le.pinned),className:`p-1.5 rounded-lg transition-all ${le.pinned?"text-neon-orange":"text-white/20 hover:text-neon-orange"} hover:bg-white/5`,title:le.pinned?"Unpin":"Pin",children:a.jsx(V2,{size:14})}),a.jsx("button",{onClick:()=>Ge(le.id),className:"p-1.5 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Delete",children:a.jsx(zr,{size:14})})]}),a.jsx("span",{className:"text-xs text-white/30 ml-2",children:new Date(le.createdAt).toLocaleDateString()})]})]}),a.jsx("p",{className:"text-sm text-white/60",children:le.content}),a.jsxs("p",{className:"text-xs text-white/30 mt-2",children:[" ",le.author]})]},le.id))]}),A==="chat"&&a.jsx(bF,{classId:t,isTeacher:i,userProfile:s,addClassMessage:M,deleteClassMessage:L,getClassMessages:T,toast:E})]}),a.jsxs(Xn,{children:[F&&a.jsx(yF,{cls:j,allStudents:v,onClose:()=>Z(!1),onSendRequest:async le=>{try{await p(j.id,le),E.success("Solicitud enviada al estudiante!")}catch(Ke){E.error(Ke.message)}},pendingRequests:N(j.id)}),tt&&a.jsx(vF,{result:tt,onClose:()=>ne(null)})]})]})}function yF({cls:t,allStudents:e,onClose:n,onSendRequest:s,pendingRequests:i=[]}){const[r,o]=D.useState(""),[l,c]=D.useState(!1),d=e.filter(f=>{var x,v;return(((x=f.displayName)==null?void 0:x.toLowerCase().includes(r.toLowerCase()))||((v=f.email)==null?void 0:v.toLowerCase().includes(r.toLowerCase())))&&!(t.students||[]).includes(f.id)}),h=f=>i.some(x=>x.studentId===f&&x.status==="pending"),m=()=>{navigator.clipboard.writeText(t.code),c(!0),setTimeout(()=>c(!1),2e3)};return a.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:n}),a.jsxs(K.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative glass-card w-full max-w-lg overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-white/10 flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-display font-bold text-white",children:"Add Student"}),a.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-white/10 text-white/40 hover:text-white transition-colors",children:a.jsx(on,{size:20})})]}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-white/40 mb-2 uppercase tracking-wider font-bold",children:"Share Class Code"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"flex-1 p-3 rounded-xl bg-white/[0.04] border border-white/[0.06] text-center font-mono text-xl sm:text-2xl text-neon-blue tracking-widest",children:t.code}),a.jsx("button",{onClick:m,className:"p-3 sm:p-4 rounded-xl bg-neon-blue/10 border border-neon-blue/20 text-neon-blue hover:bg-neon-blue/20 transition-all flex items-center justify-center",children:l?a.jsx(vi,{size:20}):a.jsx(rl,{size:20})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ki,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20"}),a.jsx("input",{value:r,onChange:f=>o(f.target.value),placeholder:"Search by email or name...",className:"input-glass pl-10"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:d.length===0?a.jsx("p",{className:"text-center py-8 text-white/40 text-sm",children:"No students found."}):d.map(f=>{var v;const x=h(f.id);return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/[0.04] group transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-xs font-bold text-white shrink-0",children:((v=f.displayName)==null?void 0:v[0])||"S"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-white group-hover:text-neon-blue transition-colors truncate",children:f.displayName}),a.jsx("p",{className:"text-xs text-white/40 truncate",children:f.email})]}),x?a.jsx("span",{className:"text-[10px] font-bold px-2 py-1 rounded-lg bg-amber-500/10 text-amber-400 border border-amber-500/20",children:"Pending"}):a.jsx("button",{onClick:()=>{s(f.id)},className:"p-2 rounded-lg bg-neon-blue/10 text-neon-blue hover:bg-neon-blue/20 opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(nn,{size:16})})]},f.id)})})]})]})]})}function vF({result:t,onClose:e}){const[n,s]=D.useState(!1),i=()=>{navigator.clipboard.writeText(t.newCode),s(!0),setTimeout(()=>s(!1),2e3)};return a.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:e}),a.jsxs(K.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative glass-card w-full max-w-md overflow-hidden flex flex-col items-center text-center p-6 sm:p-8",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-neon-orange/10 flex items-center justify-center mb-4",children:a.jsx(m4,{size:32,className:"text-neon-orange"})}),a.jsx("h2",{className:"text-2xl font-display font-bold text-white mb-2",children:"New Access Code"}),a.jsxs("p",{className:"text-white/60 text-sm mb-6",children:["A new code has been generated for ",a.jsx("span",{className:"text-white font-semibold",children:t.studentName}),".",a.jsx("br",{}),"Please share this code with them immediately."]}),a.jsxs("div",{className:"w-full flex items-center gap-2 mb-6",children:[a.jsx("div",{className:"flex-1 p-4 rounded-xl bg-white/[0.04] border border-white/[0.06] font-mono text-3xl text-neon-orange tracking-widest",children:t.newCode}),a.jsx("button",{onClick:i,className:"p-4 rounded-xl bg-neon-orange/10 border border-neon-orange/20 text-neon-orange hover:bg-neon-orange/20 transition-all",children:n?a.jsx(vi,{size:24}):a.jsx(rl,{size:24})})]}),a.jsx("p",{className:"text-xs text-white/30 mb-6",children:"Note: If the student already has an account, a password reset email has also been sent to their email address."}),a.jsx("button",{onClick:e,className:"btn-primary w-full",children:"Done"})]})]})}function bF({classId:t,isTeacher:e,userProfile:n,addClassMessage:s,deleteClassMessage:i,getClassMessages:r,toast:o}){const[l,c]=D.useState(""),d=D.useRef(null),h=r(t);D.useEffect(()=>{var C;(C=d.current)==null||C.scrollIntoView({behavior:"smooth"})},[h.length]);const m=async()=>{const C=l.trim();if(C)try{await s(t,C,(n==null?void 0:n.displayName)||"User",e?"teacher":"student"),c("")}catch{o.error("Failed to send message")}},f=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),m())},x=async C=>{try{await i(C),o.info("Message deleted")}catch{o.error("Failed to delete")}},v=C=>{const R=new Date(C),y=new Date-R,_=Math.floor(y/(1e3*60)),I=Math.floor(y/(1e3*60*60)),M=Math.floor(y/(1e3*60*60*24));return _<1?"Just now":_<60?`${_}m ago`:I<24?`${I}h ago`:M<7?`${M}d ago`:R.toLocaleDateString()};return a.jsxs("div",{className:"glass-card flex flex-col",style:{height:"70vh"},children:[a.jsxs("div",{className:"p-4 border-b border-white/[0.06] flex items-center gap-2",children:[a.jsx(I0,{size:18,className:"text-neon-green"}),a.jsx("h3",{className:"font-semibold text-white",children:"Class Chat"}),a.jsx("span",{className:"text-[10px] text-white/30 ml-auto uppercase tracking-wider",children:"Messages auto-delete after 7 days"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[h.length===0&&a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[a.jsx(I0,{size:48,className:"text-white/10 mb-3"}),a.jsx("p",{className:"text-white/40 text-sm",children:"No messages yet."}),a.jsx("p",{className:"text-white/20 text-xs mt-1",children:"Start the conversation!"})]}),h.map(C=>{var R;return a.jsxs(K.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"group flex gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${C.authorRole==="teacher"?"bg-gradient-to-br from-neon-blue to-neon-purple text-white":"bg-white/10 text-white/60"}`,children:((R=C.authorName)==null?void 0:R[0])||"?"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[a.jsx("span",{className:"text-sm font-medium text-white truncate",children:C.authorName}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wider ${C.authorRole==="teacher"?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.06] text-white/40 border border-white/[0.06]"}`,children:C.authorRole==="teacher"?"Teacher":"Student"}),a.jsx("span",{className:"text-[10px] text-white/20",children:v(C.createdAt)})]}),a.jsx("p",{className:"text-sm text-white/70 break-words whitespace-pre-wrap",children:C.text})]}),e&&a.jsx("button",{onClick:()=>x(C.id),className:"p-1.5 rounded-lg text-white/10 hover:text-red-400 hover:bg-red-500/10 opacity-0 group-hover:opacity-100 transition-all self-start",title:"Delete message",children:a.jsx(zr,{size:13})})]},C.id)}),a.jsx("div",{ref:d})]}),a.jsx("div",{className:"p-3 border-t border-white/[0.06]",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{value:l,onChange:C=>c(C.target.value),onKeyDown:f,placeholder:"Type a message...",className:"input-glass flex-1"}),a.jsx("button",{onClick:m,disabled:!l.trim(),className:"btn-neon px-4 disabled:opacity-30 disabled:pointer-events-none",children:a.jsx(fv,{size:16})})]})})]})}function wF(){const{classes:t,allStudents:e,deleteStudent:n,updateStudent:s,getStudentClasses:i,getStudentProgress:r}=bn(),{preRegisterStudent:o,isAdmin:l}=ft(),c=xs(),[d,h]=D.useState(""),[m,f]=D.useState(!1),[x,v]=D.useState(null),[C,R]=D.useState(null),[S,y]=D.useState(!1),[_,I]=D.useState(""),[M,L]=D.useState(""),[T,p]=D.useState(null),[N,E]=D.useState(!1),[j,A]=D.useState(""),[w,k]=D.useState(""),[O,V]=D.useState(""),U=l?null:new Set(t.flatMap(J=>J.students||[])),W=(l?e:e.filter(J=>U.has(J.id))).filter(J=>(J.displayName||"").toLowerCase().includes(d.toLowerCase())||(J.email||"").toLowerCase().includes(d.toLowerCase())),F=J=>{v(J),k(J.displayName),V(J.email),A("")},Z=async J=>{J.preventDefault(),y(!0);try{const he=x.status==="pending",me=he?x.email.toLowerCase():x.id;await s(me,{displayName:w,...he?{name:w}:{}},he),v(null),c.success("Student updated!")}catch(he){A(he.message),c.error("Failed to update")}finally{y(!1)}},pe=async J=>{try{await n(J),c.success(`${J.displayName} removed`),R(null)}catch{c.error("Failed to delete student")}},fe=async J=>{J.preventDefault(),y(!0),A("");try{const he=await o(M,_);p(he),c.success("Student registered!")}catch(he){A(he.message),c.error(he.message)}finally{y(!1)}},Se=()=>{navigator.clipboard.writeText(T),E(!0),c.success("Code copied!"),setTimeout(()=>E(!1),2e3)},Te=()=>{f(!1),p(null),I(""),L(""),A("")},tt={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},ne={hidden:{opacity:0,y:15},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Students",subtitle:`${e.length} total students`,actions:a.jsxs("button",{onClick:()=>f(!0),className:"btn-neon flex items-center gap-2 text-sm px-4 py-2",children:[a.jsx(nn,{size:16})," Add Student"]})}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"glass-card p-3 sm:p-4 text-center",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-display font-bold text-neon-blue",children:e.length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Total"})]}),a.jsxs("div",{className:"glass-card p-3 sm:p-4 text-center",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-display font-bold text-neon-green",children:e.filter(J=>J.status!=="pending").length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Active"})]}),a.jsxs("div",{className:"glass-card p-3 sm:p-4 text-center",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-display font-bold text-neon-orange",children:e.filter(J=>J.status==="pending").length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Pending"})]}),a.jsxs("div",{className:"glass-card p-3 sm:p-4 text-center",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-display font-bold text-neon-purple",children:t.length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Classes"})]})]}),a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(ki,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{value:d,onChange:J=>h(J.target.value),placeholder:"Search students...",className:"input-glass pl-11"})]}),a.jsxs(K.div,{variants:tt,initial:"hidden",animate:"show",className:"glass-card overflow-hidden hidden sm:block",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-3 border-b border-white/[0.06] text-xs text-white/40 uppercase tracking-wider font-medium",children:[a.jsx("div",{className:"col-span-3",children:"Student"}),a.jsx("div",{className:"col-span-3",children:"Email"}),a.jsx("div",{className:"col-span-2",children:"Status"}),a.jsx("div",{className:"col-span-2 text-center",children:"Classes"}),a.jsx("div",{className:"col-span-2 text-right",children:"Actions"})]}),W.map(J=>{const he=i(J.id);return a.jsxs(K.div,{variants:ne,className:"grid grid-cols-12 gap-4 px-6 py-4 border-b border-white/[0.02] hover:bg-white/[0.02] transition-all items-center",children:[a.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white text-sm font-bold shadow-lg shrink-0",children:(J.displayName||"S")[0]}),a.jsx("span",{className:"text-sm font-medium text-white truncate",children:J.displayName})]}),a.jsx("div",{className:"col-span-3 text-sm text-white/50 truncate",children:J.email}),a.jsx("div",{className:"col-span-2",children:J.status==="pending"?a.jsxs("div",{className:"flex items-center gap-2 group/code",children:[a.jsx("code",{className:"text-xs font-mono font-bold text-neon-orange bg-neon-orange/10 px-2 py-1 rounded truncate",children:J.code}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(J.code),c.success("Code copied!")},className:"opacity-0 group-hover/code:opacity-100 p-1 rounded hover:bg-white/10 text-white/40 hover:text-white transition-all",children:a.jsx(rl,{size:12})})]}):a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-neon-green/60",children:[a.jsx(vi,{size:12})," Registered"]})}),a.jsx("div",{className:"col-span-2 flex justify-center",children:a.jsx("div",{className:"flex -space-x-2",children:he.length>0?a.jsxs(a.Fragment,{children:[he.slice(0,3).map((me,ve)=>a.jsx("div",{className:`w-6 h-6 rounded-md bg-gradient-to-br ${ve===0?"from-neon-blue to-blue-600":ve===1?"from-neon-purple to-purple-600":"from-neon-green to-emerald-600"} flex items-center justify-center text-[10px] text-white font-bold border-2 border-surface-950`,title:me.name,children:me.name[0]},me.id)),he.length>3&&a.jsxs("div",{className:"w-6 h-6 rounded-md bg-white/5 flex items-center justify-center text-[8px] text-white/40 border-2 border-surface-950 font-bold",children:["+",he.length-3]})]}):a.jsx("span",{className:"text-xs text-white/20 italic",children:"None"})})}),a.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[l&&a.jsx("button",{onClick:()=>F(J),className:"p-2 rounded-lg text-white/20 hover:text-neon-blue hover:bg-neon-blue/10 transition-all",title:"Edit",children:a.jsx(cf,{size:16})}),l&&(C===J.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>R(null),className:"text-[10px] text-white/40 px-2 py-1 rounded-lg hover:bg-white/5",children:"Cancel"}),a.jsx("button",{onClick:()=>pe(J),className:"text-[10px] text-red-400 bg-red-500/10 px-2 py-1 rounded-lg font-bold hover:bg-red-500/20",children:"Delete"})]}):a.jsx("button",{onClick:()=>R(J.id),className:"p-2 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Delete",children:a.jsx(zr,{size:16})}))]})]},J.id)}),W.length===0&&a.jsxs("div",{className:"text-center py-12 text-white/30",children:[a.jsx(Dn,{size:40,className:"mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No students found"})]})]}),a.jsx("div",{className:"sm:hidden space-y-3",children:W.length===0?a.jsxs("div",{className:"text-center py-12 text-white/30 glass-card p-6",children:[a.jsx(Dn,{size:40,className:"mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No students found"})]}):W.map(J=>{const he=i(J.id);return a.jsxs("div",{className:"glass-card p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white text-sm font-bold shrink-0",children:(J.displayName||"S")[0]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:J.displayName}),a.jsx("p",{className:"text-xs text-white/40 truncate",children:J.email})]}),J.status==="pending"&&a.jsx("span",{className:"text-[10px] text-neon-orange bg-neon-orange/10 px-2 py-1 rounded-lg font-bold uppercase",children:"Pending"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/30",children:[a.jsx(At,{size:12}),a.jsxs("span",{children:[he.length," classes"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[l&&a.jsx("button",{onClick:()=>F(J),className:"p-2 rounded-lg text-white/30 hover:text-neon-blue transition-all",children:a.jsx(cf,{size:14})}),l&&(C===J.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>R(null),className:"text-[10px] text-white/40 px-2 py-1 rounded-lg",children:"No"}),a.jsx("button",{onClick:()=>pe(J),className:"text-[10px] text-red-400 bg-red-500/10 px-2 py-1 rounded-lg font-bold",children:"Yes"})]}):a.jsx("button",{onClick:()=>R(J.id),className:"p-2 rounded-lg text-white/30 hover:text-red-400 transition-all",children:a.jsx(zr,{size:14})}))]})]})]},J.id)})})]}),a.jsx(Xn,{children:m&&a.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:Te}),a.jsxs(K.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"relative w-full max-w-md glass-card p-6 rounded-2xl border border-white/10 shadow-2xl",children:[a.jsx("button",{onClick:Te,className:"absolute top-4 right-4 text-white/30 hover:text-white transition-colors",children:a.jsx(on,{size:20})}),a.jsx("h2",{className:"text-xl font-display font-bold text-white mb-1",children:"Add New Student"}),a.jsx("p",{className:"text-sm text-white/40 mb-6",children:"Create credentials for a student to log in."}),T?a.jsxs("div",{className:"space-y-6 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto",children:a.jsx(vi,{size:32,className:"text-green-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Student Registered!"}),a.jsxs("p",{className:"text-sm text-white/50 px-4",children:["Share this code with ",a.jsx("strong",{children:_}),"."]})]}),a.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase tracking-wider",children:"Access Code"}),a.jsx("p",{className:"text-2xl font-mono font-bold text-neon-blue tracking-widest",children:T})]}),a.jsx("button",{onClick:Se,className:"p-3 rounded-lg hover:bg-white/10 transition-colors text-white/50 hover:text-white",children:N?a.jsx(vi,{size:20,className:"text-green-400"}):a.jsx(rl,{size:20})})]}),a.jsx("button",{onClick:Te,className:"btn-ghost w-full",children:"Done, add another"})]}):a.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[j&&a.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:j}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-white/60 ml-1",children:"Full Name"}),a.jsx("input",{required:!0,value:_,onChange:J=>I(J.target.value),placeholder:"e.g. Juan Perez",className:"input-glass w-full"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-white/60 ml-1",children:"Email Address"}),a.jsx("input",{required:!0,type:"email",value:M,onChange:J=>L(J.target.value),placeholder:"e.g. juan@student.com",className:"input-glass w-full"})]}),a.jsx("button",{type:"submit",disabled:S,className:"btn-neon w-full mt-2",children:S?"Generating...":"Generate Access Code"})]})]})]})}),a.jsx(Xn,{children:x&&a.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>v(null)}),a.jsxs(K.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-card border border-white/10 p-6 sm:p-8 rounded-2xl shadow-2xl w-full max-w-md relative z-10",children:[a.jsx("button",{onClick:()=>v(null),className:"absolute top-4 right-4 p-2 rounded-xl hover:bg-white/5 text-white/40 hover:text-white transition-all",children:a.jsx(on,{size:20})}),a.jsx("h2",{className:"text-xl font-display font-bold text-white mb-1",children:"Edit Student"}),a.jsx("p",{className:"text-sm text-white/40 mb-6",children:"Update student information."}),a.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[j&&a.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:j}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-white/60 ml-1",children:"Full Name"}),a.jsx("input",{required:!0,value:w,onChange:J=>k(J.target.value),className:"input-glass w-full"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-white/30 ml-1",children:"Email (Read-only)"}),a.jsx("input",{disabled:!0,value:O,className:"input-glass w-full opacity-50 cursor-not-allowed"})]}),a.jsx("button",{type:"submit",disabled:S,className:"btn-neon w-full mt-2",children:S?"Saving...":"Save Changes"}),a.jsx("button",{type:"button",onClick:()=>v(null),className:"btn-ghost w-full",children:"Cancel"})]})]})]})})]})}const Ic={quiz:{icon:zt,label:"Quiz",gradient:"from-neon-blue to-cyan-400",bg:"bg-neon-blue/10",border:"border-neon-blue/20",text:"text-neon-blue",dot:"bg-neon-blue"},exam:{icon:hv,label:"Exam",gradient:"from-red-500 to-orange-500",bg:"bg-red-500/10",border:"border-red-500/20",text:"text-red-400",dot:"bg-red-500"},essay:{icon:om,label:"Essay",gradient:"from-neon-purple to-fuchsia-400",bg:"bg-neon-purple/10",border:"border-neon-purple/20",text:"text-neon-purple",dot:"bg-neon-purple"},homework:{icon:v4,label:"Homework",gradient:"from-amber-400 to-yellow-500",bg:"bg-amber-400/10",border:"border-amber-400/20",text:"text-amber-400",dot:"bg-amber-400"},project:{icon:$7,label:"Project",gradient:"from-pink-500 to-rose-400",bg:"bg-pink-500/10",border:"border-pink-500/20",text:"text-pink-400",dot:"bg-pink-500"},assignment:{icon:ms,label:"Task",gradient:"from-neon-green to-emerald-400",bg:"bg-neon-green/10",border:"border-neon-green/20",text:"text-neon-green",dot:"bg-neon-green"}},L2={blue:"from-neon-blue/20 to-neon-blue/5",purple:"from-neon-purple/20 to-neon-purple/5",green:"from-neon-green/20 to-neon-green/5",orange:"from-orange-500/20 to-orange-500/5",pink:"from-neon-pink/20 to-neon-pink/5",cyan:"from-cyan-400/20 to-cyan-400/5"};function _F(){const{assignments:t,classes:e,submissions:n,allStudents:s,addAssignment:i,updateAssignment:r,deleteAssignment:o,getAssignmentSubmissions:l}=bn(),{isTeacher:c,userProfile:d}=ft(),h=xs(),m=vn(),[f,x]=D.useState(!1),[v,C]=D.useState(null),[R,S]=D.useState("all"),[y,_]=D.useState("all"),[I,M]=D.useState(""),[L,T]=D.useState(null),[p,N]=D.useState(null),E=D.useMemo(()=>t.filter(k=>R==="all"||k.type===R).filter(k=>y==="all"||k.classId===y).filter(k=>k.title.toLowerCase().includes(I.toLowerCase())||k.description.toLowerCase().includes(I.toLowerCase())).sort((k,O)=>new Date(O.createdAt)-new Date(k.createdAt)),[t,R,y,I]),j=D.useMemo(()=>{const k=t.length,O=t.filter(W=>new Date(W.dueDate)>=new Date).length,V=k-O,U=n.length,z=n.filter(W=>W.grade===null||W.grade===void 0).length;return{total:k,active:O,overdue:V,totalSubs:U,pending:z}},[t,n]),A={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},w={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.4}}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Assignments",subtitle:`${t.length} total across ${e.length} classes`,actions:c&&a.jsxs("button",{onClick:()=>x(!0),className:"btn-neon flex items-center gap-2 text-sm px-4 py-2",children:[a.jsx(nn,{size:16})," ",a.jsx("span",{className:"hidden sm:inline",children:"New"})," Assignment"]})}),a.jsx("div",{className:"px-4 sm:px-6 pt-4 sm:pt-6 max-w-7xl mx-auto",children:a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:[{label:"Total",value:j.total,icon:p4,color:"text-neon-blue",bg:"bg-neon-blue/10"},{label:"Active",value:j.active,icon:cu,color:"text-neon-green",bg:"bg-neon-green/10"},{label:"Overdue",value:j.overdue,icon:j7,color:"text-red-400",bg:"bg-red-500/10"},{label:"Submissions",value:j.totalSubs,icon:fa,color:"text-neon-purple",bg:"bg-neon-purple/10"},{label:"Pending",value:j.pending,icon:Jn,color:"text-neon-orange",bg:"bg-orange-500/10"}].map((k,O)=>a.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:O*.05},className:"glass-card p-4 flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl ${k.bg} flex items-center justify-center`,children:a.jsx(k.icon,{size:18,className:k.color})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xl font-bold text-white",children:k.value}),a.jsx("p",{className:"text-[11px] text-white/40 uppercase tracking-wider",children:k.label})]})]},k.label))})}),a.jsx("div",{className:"px-4 sm:px-6 pt-5 pb-2 max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[a.jsx(ki,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{value:I,onChange:k=>M(k.target.value),placeholder:"Search assignments...",className:"input-glass pl-10 text-sm h-10"})]}),a.jsx("div",{className:"flex items-center gap-1 p-1 rounded-xl bg-white/[0.03] border border-white/[0.06]",children:[{key:"all",label:"All"},{key:"quiz",label:"Quizzes",icon:zt},{key:"essay",label:"Essays",icon:om},{key:"assignment",label:"Tasks",icon:ms}].map(k=>a.jsxs("button",{onClick:()=>S(k.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-all
                                    ${R===k.key?"bg-white/10 text-white shadow-sm":"text-white/40 hover:text-white/60"}`,children:[k.icon&&a.jsx(k.icon,{size:13}),k.label]},k.key))}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:y,onChange:k=>_(k.target.value),className:"input-glass text-sm h-10 pr-8 appearance-none cursor-pointer min-w-[160px]",children:[a.jsx("option",{value:"all",children:"All Classes"}),e.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))]}),a.jsx(N7,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/30 pointer-events-none"})]})]})}),a.jsx(K.div,{variants:A,initial:"hidden",animate:"show",className:"p-4 sm:p-6 grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-7xl mx-auto",children:E.map(k=>{var tt;const O=e.find(ne=>ne.id===k.classId),V=Ic[k.type]||Ic.assignment,U=V.icon,z=new Date(k.dueDate)<new Date,W=l(k.id),Z=((O==null?void 0:O.students)||[]).filter(ne=>s.some(J=>J.id===ne&&J.status==="active")).length||0,pe=Z>0?Math.round(W.length/Z*100):0,fe=Math.ceil((new Date(k.dueDate)-new Date)/(1e3*60*60*24)),Se=L===k.id,Te=W.filter(ne=>ne.grade!=null).length>0?Math.round(W.filter(ne=>ne.grade!=null).reduce((ne,J)=>ne+J.grade/k.totalPoints*100,0)/W.filter(ne=>ne.grade!=null).length):null;return a.jsx(K.div,{variants:w,layout:!0,children:a.jsxs("div",{className:`glass-card overflow-hidden transition-all duration-300 hover:border-white/[0.12] cursor-pointer group
                                    ${Se?"ring-1 ring-white/10":""}`,onClick:()=>T(Se?null:k.id),children:[a.jsx("div",{className:`h-1 bg-gradient-to-r ${V.gradient}`}),a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${V.gradient} flex items-center justify-center shrink-0 shadow-lg`,children:a.jsx(U,{size:22,className:"text-white"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white text-[15px] leading-tight group-hover:text-white/90 transition-colors",children:k.title}),a.jsx("p",{className:"text-sm text-white/35 mt-1 line-clamp-2",children:k.description})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[c&&a.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[a.jsx("button",{onClick:ne=>{ne.stopPropagation(),C(k)},className:"p-1.5 rounded-lg text-white/20 hover:text-neon-blue hover:bg-neon-blue/10 transition-all",title:"Edit Assignment",children:a.jsx(cf,{size:14})}),p===k.id?a.jsxs("div",{className:"flex items-center gap-1",onClick:ne=>ne.stopPropagation(),children:[a.jsx("button",{onClick:ne=>{ne.stopPropagation(),N(null)},className:"text-[10px] text-white/40 px-1.5 py-1 rounded",children:"No"}),a.jsx("button",{onClick:async ne=>{ne.stopPropagation(),await o(k.id),h.success("Assignment deleted"),N(null)},className:"text-[10px] text-red-400 bg-red-500/10 px-1.5 py-1 rounded font-bold",children:"Yes"})]}):a.jsx("button",{onClick:ne=>{ne.stopPropagation(),N(k.id)},className:"p-1.5 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Delete Assignment",children:a.jsx(zr,{size:14})})]}),a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium
                                                        ${z?"bg-red-500/10 text-red-400 border border-red-500/20":"bg-neon-green/10 text-neon-green border border-neon-green/20"}`,children:[a.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${z?"bg-red-400":"bg-neon-green animate-pulse"}`}),z?"Overdue":"Active"]})]})]})})]}),a.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 mt-4 text-xs text-white/40",children:[O&&a.jsxs("span",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${L2[O.color]||L2.blue}`}),O.name]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx($a,{size:12,className:V.text})," ",k.totalPoints," pts"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(dv,{size:12}),z?"Was due":"Due",": ",new Date(k.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),!z&&a.jsxs("span",{className:`flex items-center gap-1 ${fe<=3?"text-orange-400":""}`,children:[a.jsx(Jn,{size:12})," ",fe,"d left"]}),c&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Dn,{size:12})," ",W.length,"/",Z," submitted"]})]}),c&&a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-[10px] text-white/30 uppercase tracking-wider",children:"Submission Progress"}),a.jsxs("span",{className:"text-xs text-white/50 font-medium",children:[pe,"%"]})]}),a.jsx("div",{className:"w-full h-1.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx(K.div,{initial:{width:0},animate:{width:`${pe}%`},transition:{duration:.8,ease:"easeOut"},className:`h-full rounded-full bg-gradient-to-r ${V.gradient}`})})]}),a.jsx(Xn,{children:Se&&a.jsx(K.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:a.jsxs("div",{className:"mt-4 pt-4 border-t border-white/[0.06] space-y-3",children:[c&&a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{className:"rounded-lg bg-white/[0.03] p-3 text-center",children:[a.jsx("p",{className:"text-lg font-bold text-white",children:((tt=k.questions)==null?void 0:tt.length)||0}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Questions"})]}),a.jsxs("div",{className:"rounded-lg bg-white/[0.03] p-3 text-center",children:[a.jsx("p",{className:"text-lg font-bold text-white",children:W.filter(ne=>ne.grade!=null).length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Graded"})]}),a.jsxs("div",{className:"rounded-lg bg-white/[0.03] p-3 text-center",children:[a.jsx("p",{className:`text-lg font-bold ${Te!==null?Te>=80?"text-neon-green":Te>=60?"text-neon-orange":"text-red-400":"text-white/30"}`,children:Te!==null?`${Te}%`:""}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Avg Grade"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium ${V.bg} ${V.text} border ${V.border}`,children:[a.jsx(U,{size:13})," ",V.label]}),a.jsxs("span",{className:"text-xs text-white/30",children:["Created ",new Date(k.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),!c&&a.jsx("button",{onClick:ne=>{ne.stopPropagation(),m(`/assignments/${k.id}`)},className:`px-4 py-2 rounded-xl text-sm font-bold transition-all shadow-lg
                                                                    ${n.find(ne=>ne.assignmentId===k.id&&ne.studentId===(d==null?void 0:d.uid))?"bg-white/10 text-white/60 hover:bg-white/20":`bg-gradient-to-r ${V.gradient} text-white hover:opacity-90 active:scale-95`}`,children:n.find(ne=>ne.assignmentId===k.id&&ne.studentId===(d==null?void 0:d.uid))?"View Submission":"Take Assignment"})]})]})})})]})]})},k.id)})}),E.length===0&&a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-white/[0.03] border border-white/[0.06] flex items-center justify-center mb-4",children:a.jsx(ms,{size:28,className:"text-white/20"})}),a.jsx("p",{className:"text-white/40 text-sm",children:"No assignments found"}),a.jsx("p",{className:"text-white/20 text-xs mt-1",children:"Try adjusting filters or create a new assignment"})]}),a.jsx(Xn,{children:(f||v)&&a.jsx(NF,{classes:e,assignment:v,onClose:()=>{x(!1),C(null)},onSave:v?k=>r(v.id,k):i})})]})}function NF({classes:t,assignment:e,onClose:n,onSave:s}){var w;const i=xs(),r=!!e,[o,l]=D.useState((e==null?void 0:e.title)||""),[c,d]=D.useState((e==null?void 0:e.description)||""),[h,m]=D.useState((e==null?void 0:e.classId)||((w=t[0])==null?void 0:w.id)||""),[f,x]=D.useState((e==null?void 0:e.type)||"quiz"),[v,C]=D.useState(e!=null&&e.dueDate?new Date(e.dueDate).toISOString().split("T")[0]:""),[R,S]=D.useState((e==null?void 0:e.totalPoints)||100),[y,_]=D.useState((e==null?void 0:e.questions)||[{id:"q1",text:"",type:"multiple-choice",options:["","","",""],correctAnswer:0,points:10}]),[I,M]=D.useState((e==null?void 0:e.timeLimit)||0),L=(k="multiple-choice")=>{const O={id:`q${Date.now()}`,text:"",type:k,points:10};k==="multiple-choice"?(O.options=["","","",""],O.correctAnswer=0):k==="true-false"?(O.options=["True","False"],O.correctAnswer=0):k==="fill-in-blank"?O.correctText="":k==="ordering"?O.items=["","",""]:k==="matching"?O.pairs=[{left:"",right:""},{left:"",right:""},{left:"",right:""}]:k==="word-scramble"?O.correctText="":k==="sentence-builder"?O.correctSentence="":k==="categorize"?O.categories=[{name:"",items:[""]},{name:"",items:[""]}]:k==="error-correction"?(O.errorSentence="",O.correctText=""):k==="translation"?(O.sourceText="",O.correctText=""):O.options=[],_([...y,O])},T=k=>{y.length<=1||_(y.filter((O,V)=>V!==k))},p=(k,O,V)=>{const U=[...y];if(U[k]={...U[k],[O]:V},O==="type"){const z=U[k];delete z.pairs,delete z.categories,delete z.correctText,delete z.correctSentence,delete z.errorSentence,delete z.sourceText,delete z.correctAnswer,z.options=[],z.items=[],V==="multiple-choice"?(z.options=["","","",""],z.correctAnswer=0):V==="true-false"?(z.options=["True","False"],z.correctAnswer=0):V==="fill-in-blank"?z.correctText="":V==="ordering"?z.items=["","",""]:V==="matching"?z.pairs=[{left:"",right:""},{left:"",right:""},{left:"",right:""}]:V==="word-scramble"?z.correctText="":V==="sentence-builder"?z.correctSentence="":V==="categorize"?z.categories=[{name:"",items:[""]},{name:"",items:[""]}]:V==="error-correction"?(z.errorSentence="",z.correctText=""):V==="translation"&&(z.sourceText="",z.correctText="")}_(U)},N=(k,O,V)=>{const U=[...y];U[k].options[O]=V,_(U)},E=k=>JSON.parse(JSON.stringify(k)),j=async k=>{k.preventDefault();try{const O=E(y);await s({title:o,description:c,classId:h,type:f,dueDate:new Date(v).toISOString(),totalPoints:O.reduce((V,U)=>V+(Number(U.points)||0),0),questions:O,timeLimit:Number(I)||0}),i.success(r?"Assignment updated!":"Assignment created!"),n()}catch{i.error("Failed to save assignment")}},A=Ic[f]||Ic.assignment;return a.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-auto",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md",onClick:n}),a.jsxs(K.div,{initial:{scale:.9,y:30,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:30,opacity:0},transition:{type:"spring",duration:.5},className:"relative w-full max-w-3xl my-8",children:[a.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r ${A.gradient} rounded-3xl opacity-20 blur-xl`}),a.jsxs("div",{className:"relative glass-card rounded-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsx("div",{className:`h-1 bg-gradient-to-r ${A.gradient}`}),a.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between bg-white/[0.02]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${A.gradient} flex items-center justify-center shadow-lg`,children:a.jsx(A.icon,{size:20,className:"text-white"})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-display font-bold text-white",children:[r?"Edit":"Create"," Assignment"]}),a.jsx("p",{className:"text-xs text-white/40",children:r?"Modify your assignment details":`Add a new ${f} for your students`})]})]}),a.jsx("button",{onClick:n,className:"p-2 rounded-lg text-white/40 hover:text-white hover:bg-white/10 transition-all",children:a.jsx(on,{size:18})})]}),a.jsxs("form",{onSubmit:j,className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Assignment Title"}),a.jsxs("div",{className:"relative group",children:[a.jsx(_4,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20 group-focus-within:text-neon-blue transition-colors"}),a.jsx("input",{value:o,onChange:k=>l(k.target.value),placeholder:"Enter title...",className:"input-glass pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Target Class"}),a.jsx("select",{value:h,onChange:k=>m(k.target.value),className:"input-glass",children:t.map(k=>a.jsx("option",{value:k.id,children:k.name},k.id))})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Due Date"}),a.jsxs("div",{className:"relative group",children:[a.jsx(dv,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20 group-focus-within:text-neon-blue transition-colors"}),a.jsx("input",{type:"date",value:v,onChange:k=>C(k.target.value),className:"input-glass pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:" Time Limit (minutes)"}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{type:"number",value:I,onChange:k=>M(k.target.value),placeholder:"0 = no limit",className:"input-glass",min:"0"}),a.jsx("p",{className:"text-[10px] text-white/20 mt-1",children:I>0?`Students have ${I} minutes to complete`:"No time limit"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Global Mode"}),a.jsx("div",{className:"flex gap-2",children:Object.entries(Ic).map(([k,O])=>a.jsxs("button",{type:"button",onClick:()=>x(k),className:`flex-1 flex flex-col items-center gap-1 p-2 rounded-xl border text-[10px] transition-all
                                                    ${f===k?`${O.bg} ${O.border} ${O.text} font-bold shadow-lg`:"border-white/[0.06] text-white/40 hover:border-white/10 hover:text-white/60"}`,children:[a.jsx(O.icon,{size:14}),O.label]},k))})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Instructions & Description"}),a.jsx("textarea",{value:c,onChange:k=>d(k.target.value),className:"input-glass h-24 resize-none p-3",placeholder:"Provide clear instructions for your students..."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between border-b border-white/5 pb-2 gap-2",children:[a.jsxs("label",{className:"text-xs text-white/50 uppercase tracking-wider font-bold",children:["Coursework Questions (",y.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:["multiple-choice","true-false","fill-in-blank","short-answer","essay","ordering","matching","word-scramble","sentence-builder","categorize","error-correction","translation"].map(k=>a.jsxs("button",{type:"button",onClick:()=>L(k),className:"btn-ghost flex items-center gap-1 text-[10px] py-1 px-2 h-auto",children:[a.jsx(nn,{size:12})," ",k.split("-").map(O=>O[0].toUpperCase()+O.slice(1)).join(" ")]},k))})]}),a.jsx("div",{className:"space-y-4",children:y.map((k,O)=>a.jsxs(K.div,{layout:!0,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"relative group/q",children:[a.jsx("div",{className:"absolute -left-3 top-4 w-6 h-6 rounded-full bg-white/[0.03] border border-white/10 flex items-center justify-center text-[10px] font-bold text-white/20 group-hover/q:text-neon-blue group-hover/q:border-neon-blue/30 transition-all",children:O+1}),a.jsxs("div",{className:"p-5 rounded-2xl bg-white/[0.02] border border-white/[0.06] hover:border-white/10 transition-all space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-1 space-y-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("select",{value:k.type,onChange:V=>p(O,"type",V.target.value),className:"bg-transparent border-none text-xs text-neon-blue font-bold cursor-pointer focus:ring-0 p-0",children:[a.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),a.jsx("option",{value:"true-false",children:"True/False"}),a.jsx("option",{value:"fill-in-blank",children:"Fill in Blank"}),a.jsx("option",{value:"short-answer",children:"Short Answer"}),a.jsx("option",{value:"essay",children:"Essay"}),a.jsx("option",{value:"ordering",children:"Ordering"}),a.jsx("option",{value:"matching",children:"Matching"}),a.jsx("option",{value:"word-scramble",children:"Word Scramble"}),a.jsx("option",{value:"sentence-builder",children:"Sentence Builder"}),a.jsx("option",{value:"categorize",children:"Categorize"}),a.jsx("option",{value:"error-correction",children:"Error Correction"}),a.jsx("option",{value:"translation",children:"Translation"})]}),a.jsx("div",{className:"h-3 w-px bg-white/10"}),a.jsx("input",{value:k.text,onChange:V=>p(O,"text",V.target.value),placeholder:"Enter question text...",className:"bg-transparent border-none text-sm text-white placeholder:text-white/20 w-full focus:ring-0 p-0"})]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-black/20 rounded-lg border border-white/5",children:[a.jsx("input",{type:"number",value:k.points,onChange:V=>p(O,"points",Number(V.target.value)),className:"bg-transparent border-none text-xs text-white w-8 text-center focus:ring-0 p-0",min:1}),a.jsx("span",{className:"text-[10px] text-white/30 font-bold uppercase",children:"pts"})]}),y.length>1&&a.jsx("button",{type:"button",onClick:()=>T(O),className:"p-1.5 rounded-lg text-white/10 hover:text-red-400 hover:bg-red-500/10 transition-all",children:a.jsx(zr,{size:14})})]})]}),(k.type==="multiple-choice"||k.type==="true-false")&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-2",children:k.options.map((V,U)=>a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${k.correctAnswer===U?"bg-neon-green/5 border-neon-green/30":"bg-white/[0.01] border-white/5"}`,children:[a.jsx("button",{type:"button",onClick:()=>p(O,"correctAnswer",U),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 transition-all
                                                                    ${k.correctAnswer===U?"border-neon-green bg-neon-green/20":"border-white/10 hover:border-white/30"}`,children:k.correctAnswer===U&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-neon-green shadow-[0_0_5px_rgba(52,211,153,0.5)]"})}),a.jsx("input",{value:V,onChange:z=>N(O,U,z.target.value),placeholder:k.type==="true-false"?U===0?"True":"False":`Option ${U+1}`,readOnly:k.type==="true-false",className:"bg-transparent border-none text-xs text-white/80 placeholder:text-white/10 w-full focus:ring-0 p-0"})]},U))}),k.type==="fill-in-blank"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter the correct answer. Students must type this exactly."}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-green/5 border border-neon-green/20",children:[a.jsx(th,{size:14,className:"text-neon-green shrink-0"}),a.jsx("input",{value:k.correctText||"",onChange:V=>p(O,"correctText",V.target.value),placeholder:"Correct answer...",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]}),k.type==="ordering"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter items in the CORRECT order. Students will see them shuffled."}),(k.items||[]).map((V,U)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-xl bg-white/[0.02] border border-white/5",children:[a.jsx("span",{className:"text-[10px] text-neon-blue font-bold w-5 text-center shrink-0",children:U+1}),a.jsx("input",{value:V,onChange:z=>{const W=[...k.items||[]];W[U]=z.target.value,p(O,"items",W)},placeholder:`Item ${U+1}...`,className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"}),(k.items||[]).length>2&&a.jsx("button",{type:"button",onClick:()=>{const z=(k.items||[]).filter((W,F)=>F!==U);p(O,"items",z)},className:"text-white/10 hover:text-red-400 p-1",children:a.jsx(on,{size:12})})]},U)),a.jsxs("button",{type:"button",onClick:()=>p(O,"items",[...k.items||[],""]),className:"text-[10px] text-neon-blue hover:text-neon-blue/80 flex items-center gap-1",children:[a.jsx(nn,{size:12})," Add item"]})]}),k.type==="short-answer"&&a.jsx("div",{className:"bg-black/20 border border-white/5 rounded-xl p-3 text-[10px] text-white/30 italic",children:" Students will type a short text response. Teacher grades manually."}),k.type==="essay"&&a.jsx("div",{className:"bg-black/20 border border-white/5 rounded-xl p-3 text-[10px] text-white/30 italic",children:" Students will write a long-form response. Teacher grades manually."}),k.type==="matching"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter matching pairs. Students will see Right column shuffled."}),(k.pairs||[]).map((V,U)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{value:V.left,onChange:z=>{const W=[...k.pairs||[]];W[U]={...W[U],left:z.target.value},p(O,"pairs",W)},placeholder:`Left ${U+1}`,className:"flex-1 input-glass text-xs py-2"}),a.jsx("span",{className:"text-white/20 text-xs",children:""}),a.jsx("input",{value:V.right,onChange:z=>{const W=[...k.pairs||[]];W[U]={...W[U],right:z.target.value},p(O,"pairs",W)},placeholder:`Right ${U+1}`,className:"flex-1 input-glass text-xs py-2"}),(k.pairs||[]).length>2&&a.jsx("button",{type:"button",onClick:()=>p(O,"pairs",(k.pairs||[]).filter((z,W)=>W!==U)),className:"text-white/10 hover:text-red-400 p-1",children:a.jsx(on,{size:12})})]},U)),a.jsxs("button",{type:"button",onClick:()=>p(O,"pairs",[...k.pairs||[],{left:"",right:""}]),className:"text-[10px] text-neon-blue flex items-center gap-1",children:[a.jsx(nn,{size:12})," Add pair"]})]}),k.type==="word-scramble"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter the correct word. Letters will be scrambled for students."}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-green/5 border border-neon-green/20",children:[a.jsx(th,{size:14,className:"text-neon-green shrink-0"}),a.jsx("input",{value:k.correctText||"",onChange:V=>p(O,"correctText",V.target.value),placeholder:"Correct word...",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]}),k.type==="sentence-builder"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter the correct sentence. Words will be shuffled for students to reorder."}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-purple/5 border border-neon-purple/20",children:[a.jsx(x4,{size:14,className:"text-neon-purple shrink-0"}),a.jsx("input",{value:k.correctSentence||"",onChange:V=>p(O,"correctSentence",V.target.value),placeholder:"The cat sat on the mat",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]}),k.type==="categorize"&&a.jsxs("div",{className:"space-y-3 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Define categories and their items. Students will sort items into the correct category."}),(k.categories||[]).map((V,U)=>a.jsxs("div",{className:"p-3 rounded-xl bg-white/[0.02] border border-white/5 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{value:V.name,onChange:z=>{const W=[...k.categories||[]];W[U]={...W[U],name:z.target.value},p(O,"categories",W)},placeholder:`Category ${U+1} name`,className:"bg-transparent border-none text-xs text-neon-blue font-bold w-full focus:ring-0 p-0"}),(k.categories||[]).length>2&&a.jsx("button",{type:"button",onClick:()=>p(O,"categories",(k.categories||[]).filter((z,W)=>W!==U)),className:"text-white/10 hover:text-red-400 p-1",children:a.jsx(on,{size:12})})]}),(V.items||[]).map((z,W)=>a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a.jsx("span",{className:"text-[10px] text-white/20",children:""}),a.jsx("input",{value:z,onChange:F=>{const Z=[...k.categories||[]],pe=[...Z[U].items];pe[W]=F.target.value,Z[U]={...Z[U],items:pe},p(O,"categories",Z)},placeholder:"Item...",className:"bg-transparent border-none text-xs text-white/60 w-full focus:ring-0 p-0"}),(V.items||[]).length>1&&a.jsx("button",{type:"button",onClick:()=>{const F=[...k.categories||[]];F[U]={...F[U],items:F[U].items.filter((Z,pe)=>pe!==W)},p(O,"categories",F)},className:"text-white/10 hover:text-red-400 p-0.5",children:a.jsx(on,{size:10})})]},W)),a.jsxs("button",{type:"button",onClick:()=>{const z=[...k.categories||[]];z[U]={...z[U],items:[...z[U].items,""]},p(O,"categories",z)},className:"text-[10px] text-neon-blue ml-4 flex items-center gap-1",children:[a.jsx(nn,{size:10})," item"]})]},U)),a.jsxs("button",{type:"button",onClick:()=>p(O,"categories",[...k.categories||[],{name:"",items:[""]}]),className:"text-[10px] text-neon-blue flex items-center gap-1",children:[a.jsx(nn,{size:12})," Add category"]})]}),k.type==="error-correction"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter a sentence WITH errors, then the corrected version."}),a.jsx("input",{value:k.errorSentence||"",onChange:V=>p(O,"errorSentence",V.target.value),placeholder:"Sentence with error: He go to school yesterday",className:"input-glass text-xs"}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-green/5 border border-neon-green/20",children:[a.jsx(zt,{size:14,className:"text-neon-green shrink-0"}),a.jsx("input",{value:k.correctText||"",onChange:V=>p(O,"correctText",V.target.value),placeholder:"Correct: He went to school yesterday",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]}),k.type==="translation"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Source text to translate, and the correct translation."}),a.jsx("input",{value:k.sourceText||"",onChange:V=>p(O,"sourceText",V.target.value),placeholder:"Source: Hola, cmo ests?",className:"input-glass text-xs"}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-green/5 border border-neon-green/20",children:[a.jsx(th,{size:14,className:"text-neon-green shrink-0"}),a.jsx("input",{value:k.correctText||"",onChange:V=>p(O,"correctText",V.target.value),placeholder:"Translation: Hello, how are you?",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]})]})]},k.id))})]})]}),a.jsx("div",{className:"p-6 border-t border-white/10 bg-white/[0.02]",children:a.jsxs("button",{type:"submit",onClick:j,className:`w-full py-4 rounded-xl bg-gradient-to-r ${A.gradient} text-white font-bold transition-all hover:opacity-90 hover:shadow-[0_0_20px_rgba(255,255,255,0.1)] active:scale-[0.99] flex items-center justify-center gap-2`,children:[r?a.jsx(cu,{size:18}):a.jsx(nn,{size:18}),r?"Save Changes":`Launch ${A.label}`]})})]})]})]})}function SF(){const{classes:t,assignments:e,submissions:n,allStudents:s,updateSubmission:i,deleteSubmission:r,bulkGradeSubmissions:o}=bn(),l=xs(),[c,d]=D.useState(null),[h,m]=D.useState("all"),[f,x]=D.useState("all"),[v,C]=D.useState(""),R=E=>E>=90?"text-neon-green":E>=70?"text-neon-blue":E>=50?"text-neon-orange":"text-red-400",S=E=>E>=90?"from-neon-green/20 to-neon-green/5":E>=70?"from-neon-blue/20 to-neon-blue/5":E>=50?"from-neon-orange/20 to-neon-orange/5":"from-red-500/20 to-red-500/5",y=async(E,j,A)=>{try{await i(E,{grade:parseInt(j),questionScores:A,status:"graded"}),l.success("Grade saved!"),d(null)}catch{l.error("Failed to save grade")}},_=async E=>{try{await r(E),l.success("Submission deleted  student can retake the assignment"),d(null)}catch{l.error("Failed to allow retake")}},I=D.useMemo(()=>n.filter(E=>{const j=e.find(w=>w.id===E.assignmentId),A=s.find(w=>w.id===E.studentId);if(h!=="all"&&(j==null?void 0:j.classId)!==h||f==="pending"&&E.grade!=null||f==="graded"&&E.grade==null)return!1;if(v){const w=v.toLowerCase(),k=((A==null?void 0:A.displayName)||E.studentName||"").toLowerCase().includes(w),O=((j==null?void 0:j.title)||"").toLowerCase().includes(w);if(!k&&!O)return!1}return!0}).sort((E,j)=>E.grade==null&&j.grade!=null?-1:E.grade!=null&&j.grade==null?1:new Date(j.submittedAt)-new Date(E.submittedAt)),[n,e,s,h,f,v]),M=n.filter(E=>E.grade!=null),L=n.filter(E=>E.grade==null).length,T=M.length>0?Math.round(M.reduce((E,j)=>{const A=e.find(k=>k.id===j.assignmentId),w=(A==null?void 0:A.totalPoints)||100;return E+Number(j.grade)/w*100},0)/M.length):0,p={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},N={hidden:{opacity:0,y:15},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Gradebook",subtitle:"View and manage student grades"}),a.jsxs(K.div,{variants:p,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[{label:"Average",value:`${T}%`,icon:$a,color:"neon-green",glow:"rgba(0,255,136,0.08)"},{label:"Submissions",value:n.length,icon:Ii,color:"neon-blue",glow:"rgba(0,209,255,0.08)"},{label:"Graded",value:M.length,icon:Fu,color:"neon-purple",glow:"rgba(139,92,246,0.08)"},{label:"Pending",value:L,icon:Jn,color:L>0?"neon-orange":"white/40",glow:L>0?"rgba(255,165,0,0.08)":"transparent"}].map((E,j)=>a.jsxs(K.div,{variants:N,className:"glass-card p-3 sm:p-5",style:{boxShadow:`0 0 30px ${E.glow}`},children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(E.icon,{size:16,className:`text-${E.color}`}),a.jsx("span",{className:"text-xs text-white/40",children:E.label})]}),a.jsx("p",{className:`text-xl sm:text-3xl font-display font-bold text-${E.color}`,children:E.value})]},j))}),L>0&&a.jsx(K.div,{variants:N,className:"glass-card p-3 border-l-4 border-l-neon-orange bg-neon-orange/5 cursor-pointer",onClick:()=>x("pending"),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Di,{size:18,className:"text-neon-orange"}),a.jsxs("span",{className:"text-sm text-neon-orange font-medium",children:[L," submissions need grading"]})]})}),a.jsxs(K.div,{variants:N,className:"flex flex-wrap gap-3 items-center",children:[a.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[a.jsx(ki,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20"}),a.jsx("input",{value:v,onChange:E=>C(E.target.value),placeholder:"Search student or assignment...",className:"input-glass pl-10 text-sm"})]}),a.jsxs("select",{value:h,onChange:E=>m(E.target.value),className:"input-glass text-sm px-3 py-2.5 w-auto min-w-[140px]",children:[a.jsx("option",{value:"all",children:"All Classes"}),t.map(E=>a.jsx("option",{value:E.id,children:E.name},E.id))]}),a.jsx("div",{className:"flex rounded-xl border border-white/[0.08] overflow-hidden",children:["all","pending","graded"].map(E=>a.jsx("button",{onClick:()=>x(E),className:`px-3 py-2 text-xs capitalize transition-all ${f===E?"bg-neon-blue/10 text-neon-blue":"text-white/40 hover:text-white/60 hover:bg-white/[0.04]"}`,children:E},E))})]}),a.jsxs(K.div,{variants:N,className:"glass-card overflow-hidden",children:[a.jsxs("div",{className:"hidden sm:grid grid-cols-12 gap-4 px-6 py-3 border-b border-white/[0.06] text-xs text-white/40 uppercase tracking-wider",children:[a.jsx("div",{className:"col-span-3",children:"Student"}),a.jsx("div",{className:"col-span-3",children:"Assignment"}),a.jsx("div",{className:"col-span-2",children:"Class"}),a.jsx("div",{className:"col-span-2",children:"Grade"}),a.jsx("div",{className:"col-span-2 text-right",children:"Action"})]}),I.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(Ii,{size:28,className:"mx-auto text-white/10 mb-3"}),a.jsx("p",{className:"text-white/40 text-sm",children:n.length===0?"No submissions yet":"No matching submissions"})]}):I.map(E=>{var O,V;const j=s.find(U=>U.id===E.studentId),A=e.find(U=>U.id===E.assignmentId),w=t.find(U=>U.id===(A==null?void 0:A.classId)),k=E.grade!=null?Math.round(E.grade/((A==null?void 0:A.totalPoints)||100)*100):null;return a.jsxs("div",{onClick:()=>d({sub:E,assignment:A,student:j}),className:"sm:grid sm:grid-cols-12 sm:gap-4 px-4 sm:px-6 py-3 sm:py-4 border-b border-white/[0.02] hover:bg-white/[0.02] transition-all items-center cursor-pointer group flex flex-col sm:flex-row gap-2 sm:gap-4",children:[a.jsxs("div",{className:"sm:col-span-3 flex items-center gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shrink-0 ${E.grade!=null?"bg-gradient-to-br from-neon-blue to-neon-purple":"bg-gradient-to-br from-neon-orange to-amber-500"}`,children:((O=j==null?void 0:j.displayName)==null?void 0:O[0])||((V=E.studentName)==null?void 0:V[0])||"?"}),a.jsx("span",{className:"text-sm text-white truncate",children:(j==null?void 0:j.displayName)||E.studentName||"Unknown"})]}),a.jsx("div",{className:"sm:col-span-3 text-sm text-white/60 truncate",children:(A==null?void 0:A.title)||"Unknown"}),a.jsx("div",{className:"sm:col-span-2 font-mono text-xs text-neon-blue/60 hidden sm:block",children:(w==null?void 0:w.name)||""}),a.jsx("div",{className:"sm:col-span-2",children:E.grade!=null?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${S(k)} flex items-center justify-center`,children:a.jsx("span",{className:`text-xs font-bold ${R(k)}`,children:E.grade})}),a.jsxs("span",{className:"text-xs text-white/30",children:["/ ",(A==null?void 0:A.totalPoints)||100]})]}):a.jsxs("span",{className:"text-xs text-neon-orange flex items-center gap-1",children:[a.jsx(Jn,{size:12})," Pending"]})}),a.jsx("div",{className:"sm:col-span-2 text-right hidden sm:block",children:a.jsx("button",{className:"p-2 rounded-lg bg-white/[0.02] border border-white/[0.05] text-white/40 group-hover:text-neon-blue group-hover:border-neon-blue/30 transition-all",children:a.jsx(h4,{size:16})})})]},E.id)})]})]}),a.jsx(Xn,{children:c&&a.jsx(TF,{submission:c.sub,assignment:c.assignment,student:c.student,onClose:()=>d(null),onGrade:y,onRetake:_})})]})}function TF({submission:t,assignment:e,student:n,onClose:s,onGrade:i,onRetake:r}){var m;const o=()=>{var x;const f={};return(x=e==null?void 0:e.questions)==null||x.forEach((v,C)=>{var S,y,_;const R=(S=t.answers)==null?void 0:S[C];if(v.type==="multiple-choice"||v.type==="true-false"){const I=(y=v.options)==null?void 0:y[v.correctAnswer];f[C]=R===I&&v.points||0}else if(v.type==="fill-in-blank"||v.type==="word-scramble"||v.type==="error-correction"||v.type==="translation"){const I=(R||"").trim().toLowerCase(),M=(v.correctText||"").trim().toLowerCase();f[C]=I&&M&&I===M&&v.points||0}else if(v.type==="sentence-builder"){const I=(R||"").trim().toLowerCase(),M=(v.correctSentence||"").trim().toLowerCase();f[C]=I&&M&&I===M&&v.points||0}else if(v.type==="ordering"){const I=v.items||[],M=JSON.stringify(R)===JSON.stringify(I);f[C]=M&&v.points||0}else f[C]=((_=t.questionScores)==null?void 0:_[C])??""}),f},[l,c]=D.useState(o),d=Object.values(l).reduce((f,x)=>f+(Number(x)||0),0),h={"multiple-choice":"Multiple Choice","true-false":"True / False","fill-in-blank":"Fill in Blank","short-answer":"Short Answer",essay:"Essay",ordering:"Ordering","word-scramble":"Word Scramble","sentence-builder":"Sentence Builder","error-correction":"Error Correction",translation:"Translation",categorize:"Categorize",matching:"Matching"};return a.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:s}),a.jsxs(K.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative glass-card w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-white/10 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl font-display font-bold text-white",children:"Review Submission"}),a.jsxs("p",{className:"text-xs sm:text-sm text-white/40",children:[(n==null?void 0:n.displayName)||t.studentName,"  ",e==null?void 0:e.title]})]}),a.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-white/10 text-white/40 hover:text-white transition-colors",children:a.jsx(on,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4",children:(m=e==null?void 0:e.questions)==null?void 0:m.map((f,x)=>{var A,w;const v=(A=t.answers)==null?void 0:A[x],C=f.type==="multiple-choice"||f.type==="true-false",R=f.type==="fill-in-blank",S=f.type==="ordering",y=f.type==="word-scramble"||f.type==="sentence-builder"||f.type==="error-correction"||f.type==="translation",_=f.type==="essay"||f.type==="short-answer",I=f.type==="categorize",M=f.type==="matching";let L=null,T=!1;if(C)L=(w=f.options)==null?void 0:w[f.correctAnswer],T=v===L;else if(R||f.type==="word-scramble"||f.type==="error-correction"||f.type==="translation"){L=f.correctText;const k=(v||"").trim().toLowerCase(),O=(L||"").trim().toLowerCase();T=k&&O&&k===O}else if(f.type==="sentence-builder"){L=f.correctSentence;const k=(v||"").trim().toLowerCase(),O=(L||"").trim().toLowerCase();T=k&&O&&k===O}else if(S)T=JSON.stringify(v)===JSON.stringify(f.items||[]);else if(I){const O=(f.categories||[]).reduce((V,U,z)=>[...V,...U.items.map(()=>z)],[]);T=v&&typeof v=="object"&&O.every((V,U)=>v[U]===V)}else M&&(T=(f.pairs||[]).every((k,O)=>(v==null?void 0:v[O])===k.right));const p=l[x],N=C||R||S||y||I||M,E=_?"bg-white/[0.02] border-white/[0.04]":T?"bg-neon-green/5 border-neon-green/20":"bg-red-500/5 border-red-500/20",j=v==null?" No answer ":typeof v=="string"?v||" No answer ":Array.isArray(v)?v.join(", ")||" No answer ":typeof v=="object"?JSON.stringify(v):String(v);return a.jsxs("div",{className:`p-4 rounded-xl border ${E}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("p",{className:"text-xs text-white/40",children:["Q",x+1,"  ",h[f.type]||f.type]}),a.jsxs("div",{className:"flex items-center gap-2",children:[N&&a.jsx("span",{className:`text-xs font-bold ${T?"text-neon-green":"text-red-400"}`,children:T?` +${f.points}`:" 0"}),_&&a.jsxs("div",{className:"flex items-center gap-1 bg-black/30 px-2 py-1 rounded-lg border border-white/10",children:[a.jsx("input",{type:"number",min:"0",max:f.points,value:p,onChange:k=>c({...l,[x]:k.target.value}),className:"bg-transparent border-none text-sm text-neon-blue w-10 text-center focus:ring-0 p-0 font-bold",placeholder:"0"}),a.jsxs("span",{className:"text-[10px] text-white/30",children:["/ ",f.points]})]})]})]}),a.jsx("p",{className:"text-white mb-3 font-medium text-sm",children:f.text}),a.jsxs("div",{className:"p-3 rounded-lg bg-black/20 border border-white/5",children:[a.jsx("p",{className:"text-xs text-neon-blue mb-1 uppercase tracking-wider font-bold",children:"Student Answer:"}),S?a.jsxs("div",{className:"space-y-1",children:[(Array.isArray(v)?v:[]).map((k,O)=>a.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/80",children:[a.jsxs("span",{className:"text-[10px] text-white/30 w-4",children:[O+1,"."]}),k]},O)),(!v||!Array.isArray(v)||v.length===0)&&a.jsx("p",{className:"text-white/30 text-sm",children:" No answer "})]}):M?a.jsx("div",{className:"space-y-1",children:(f.pairs||[]).map((k,O)=>a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-white/60",children:k.left}),a.jsx("span",{className:"text-white/20",children:""}),a.jsx("span",{className:(v==null?void 0:v[O])===k.right?"text-neon-green":"text-red-400",children:(v==null?void 0:v[O])||""})]},O))}):I?a.jsx("div",{className:"space-y-4 mt-2",children:(f.categories||[]).map((k,O)=>{const V=(f.categories||[]).reduce((z,W)=>[...z,...W.items||[]],[]),U=Object.entries(v||{}).filter(([z,W])=>Number(W)===O).map(([z])=>V[z]).filter(Boolean);return a.jsxs("div",{className:"bg-white/[0.03] p-2 rounded-lg mb-2",children:[a.jsx("p",{className:"text-xs text-white/50 mb-2 uppercase font-bold",children:k.name}),a.jsx("div",{className:"flex flex-wrap gap-2",children:U.length>0?U.map((z,W)=>a.jsx("span",{className:"px-2 py-1 bg-neon-blue/10 border border-neon-blue/20 rounded text-xs text-white",children:z},W)):a.jsx("span",{className:"text-xs text-white/20 italic",children:"No items placed"})})]},O)})}):a.jsx("p",{className:"text-white/80 text-sm whitespace-pre-wrap",children:j})]}),(C||R||y)&&!T&&L&&a.jsx("div",{className:"mt-2 p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:a.jsxs("p",{className:"text-xs text-neon-green",children:[" Correct: ",L]})}),S&&!T&&a.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:[a.jsx("p",{className:"text-xs text-neon-green mb-1",children:" Correct order:"}),(f.items||[]).map((k,O)=>a.jsxs("p",{className:"text-xs text-neon-green/70 ml-2",children:[O+1,". ",k]},O))]}),M&&!T&&a.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:[a.jsx("p",{className:"text-xs text-neon-green mb-1",children:" Correct matches:"}),(f.pairs||[]).map((k,O)=>a.jsxs("p",{className:"text-xs text-neon-green/70 ml-2",children:[k.left,"  ",k.right]},O))]})]},x)})}),a.jsxs("div",{className:"p-4 sm:p-6 border-t border-white/10 bg-white/[0.02] flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-white/40 uppercase block mb-1",children:"Total Score"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl font-display font-black text-neon-blue",children:d}),a.jsxs("span",{className:"text-white/30 text-sm",children:["/ ",(e==null?void 0:e.totalPoints)||100]}),a.jsxs("span",{className:"text-xs text-white/20 ml-2",children:["(",Math.round(d/((e==null?void 0:e.totalPoints)||100)*100),"%)"]})]})]}),a.jsxs("button",{onClick:()=>i(t.id,d,l),className:"btn-neon h-12 px-6 sm:px-8 flex items-center justify-center gap-2 disabled:opacity-40",children:[a.jsx(zt,{size:18})," ",t.grade!=null?"Update":"Save"," Grade"]}),a.jsxs("button",{onClick:()=>r(t.id),className:"h-12 px-5 rounded-xl bg-neon-orange/10 border border-neon-orange/20 text-neon-orange text-sm font-medium flex items-center justify-center gap-2 hover:bg-neon-orange/20 transition-all",children:[a.jsx(Es,{size:16})," Allow Retake"]})]})]})]})}function EF(){var w;const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,announcements:i,joinClass:r,getOverdueAssignments:o,getPendingAssignments:l,getStudentProgress:c,getStudentStreak:d}=bn(),h=xs(),m=vn(),[f,x]=D.useState(""),[v,C]=D.useState(!1),[R,S]=D.useState(!1),y=t==null?void 0:t.uid,_=e.filter(k=>{var O;return(O=k.students)==null?void 0:O.includes(y)}),I=c(y),M=o(y),L=l(y),T=d(y),p=s.filter(k=>k.studentId===y&&k.grade!=null).sort((k,O)=>new Date(O.gradedAt||O.submittedAt)-new Date(k.gradedAt||k.submittedAt)).slice(0,5),N=i.filter(k=>_.some(O=>O.id===k.classId)).sort((k,O)=>new Date(O.createdAt)-new Date(k.createdAt)).slice(0,4),E=async()=>{if(f.trim()){C(!0);try{await r(f.trim(),y),h.success("Successfully joined class!"),x(""),S(!1)}catch(k){h.error(k.message)}finally{C(!1)}}},j={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},A={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:`Welcome back, ${((w=t==null?void 0:t.displayName)==null?void 0:w.split(" ")[0])||"Student"}`,subtitle:`${new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}`,actions:a.jsxs("button",{onClick:()=>S(!R),className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(nn,{size:16})," Join Class"]})}),a.jsxs(K.div,{variants:j,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[R&&a.jsxs(K.div,{variants:A,className:"glass-card p-4 sm:p-6 border border-neon-blue/20",children:[a.jsx("h3",{className:"text-white font-semibold mb-3",children:"Join a Class"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("input",{placeholder:"Enter class code...",value:f,onChange:k=>x(k.target.value.toUpperCase()),onKeyDown:k=>k.key==="Enter"&&E(),className:"input-glass flex-1 uppercase tracking-widest font-mono",maxLength:6}),a.jsx("button",{onClick:E,disabled:v,className:"btn-neon px-6 shrink-0",children:v?"Joining...":"Join"})]})]}),a.jsx(K.div,{variants:A,className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[{icon:At,label:"Classes",value:_.length,color:"neon-blue",glow:"rgba(0,209,255,0.1)"},{icon:R0,label:"Completed",value:`${I.completed}/${I.total}`,color:"neon-green",glow:"rgba(0,255,136,0.1)"},{icon:Ii,label:"Average",value:`${I.avgGrade}%`,color:"neon-purple",glow:"rgba(139,92,246,0.1)"},{icon:Rc,label:"Streak",value:`${T}d`,color:"neon-orange",glow:"rgba(255,165,0,0.1)"}].map((k,O)=>a.jsxs("div",{className:"glass-card p-3 sm:p-5 group hover:scale-[1.02] transition-all",style:{boxShadow:`0 0 30px ${k.glow}`},children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[a.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-${k.color}/10 border border-${k.color}/20 flex items-center justify-center`,children:a.jsx(k.icon,{size:16,className:`text-${k.color}`})}),a.jsx("p",{className:"text-xs sm:text-sm text-white/40",children:k.label})]}),a.jsx("p",{className:`text-xl sm:text-3xl font-display font-black text-${k.color}`,children:k.value})]},O))}),M.length>0&&a.jsxs(K.div,{variants:A,className:"glass-card p-4 border-l-4 border-l-red-500 bg-red-500/5",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Di,{size:18,className:"text-red-400"}),a.jsxs("h3",{className:"text-red-400 font-semibold text-sm",children:["Overdue Assignments (",M.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:M.slice(0,3).map(k=>a.jsxs("button",{onClick:()=>m(`/assignments/${k.id}`),className:"w-full flex items-center justify-between p-2 rounded-lg bg-white/[0.02] hover:bg-white/[0.05] transition-colors text-left",children:[a.jsx("span",{className:"text-sm text-white/60",children:k.title}),a.jsx("span",{className:"text-xs text-red-400",children:new Date(k.dueDate).toLocaleDateString()})]},k.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(K.div,{variants:A,className:"glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-display font-bold text-white flex items-center gap-2",children:[a.jsx(Jn,{size:18,className:"text-neon-blue"})," Upcoming"]}),a.jsx("span",{className:"badge-glass text-xs",children:L.length})]}),L.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"No upcoming assignments!"}):a.jsx("div",{className:"space-y-3",children:L.slice(0,5).map(k=>{const O=e.find(U=>U.id===k.classId),V=Math.ceil((new Date(k.dueDate)-new Date)/(1e3*60*60*24));return a.jsxs("button",{onClick:()=>m(`/assignments/${k.id}`),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] hover:bg-white/[0.05] border border-white/[0.04] hover:border-neon-blue/20 transition-all text-left group",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-neon-blue/10 border border-neon-blue/20 flex items-center justify-center shrink-0",children:a.jsx(R0,{size:18,className:"text-neon-blue"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:k.title}),a.jsx("p",{className:"text-xs text-white/30",children:O==null?void 0:O.name})]}),a.jsx("div",{className:"text-right shrink-0",children:a.jsxs("p",{className:`text-xs font-bold ${V<=1?"text-red-400":V<=3?"text-neon-orange":"text-neon-green"}`,children:[V,"d left"]})}),a.jsx(au,{size:14,className:"text-white/20 group-hover:text-neon-blue transition-colors shrink-0"})]},k.id)})})]}),a.jsxs(K.div,{variants:A,className:"glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-display font-bold text-white flex items-center gap-2",children:[a.jsx($a,{size:18,className:"text-neon-green"})," Recent Grades"]}),a.jsx("button",{onClick:()=>m("/grades"),className:"text-xs text-neon-blue hover:text-neon-blue/80 transition-colors",children:"View All"})]}),p.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"No grades yet"}):a.jsx("div",{className:"space-y-3",children:p.map(k=>{const O=n.find(W=>W.id===k.assignmentId),V=(O==null?void 0:O.totalPoints)||100,U=Math.round(k.grade/V*100),z=U>=90?"neon-green":U>=70?"neon-blue":U>=50?"neon-orange":"red-400";return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg bg-${z}/10 border border-${z}/20 flex items-center justify-center`,children:a.jsxs("span",{className:`text-${z} font-bold text-sm`,children:[U,"%"]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:(O==null?void 0:O.title)||"Assignment"}),a.jsxs("p",{className:"text-xs text-white/30",children:[k.grade,"/",V," pts"]})]})]},k.id)})})]})]}),N.length>0&&a.jsxs(K.div,{variants:A,className:"glass-card p-4 sm:p-6",children:[a.jsx("h3",{className:"text-lg font-display font-bold text-white mb-4",children:" Recent Announcements"}),a.jsx("div",{className:"space-y-3",children:N.map(k=>{const O=e.find(V=>V.id===k.classId);return a.jsxs("div",{className:"p-3 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-neon-purple",children:O==null?void 0:O.name}),a.jsx("span",{className:"text-[10px] text-white/20",children:""}),a.jsx("span",{className:"text-[10px] text-white/30",children:new Date(k.createdAt).toLocaleDateString()}),k.pinned&&a.jsx("span",{className:"text-[10px] text-neon-orange",children:""})]}),a.jsx("p",{className:"text-sm text-white/60 leading-relaxed",children:k.content})]},k.id)})})]})]})]})}function jF(){const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,leaveClass:i,getAssignmentCompletionRate:r,getMyPendingRequests:o,respondToRequest:l}=bn(),c=xs(),d=vn(),[h,m]=D.useState(""),[f,x]=D.useState(null),[v,C]=D.useState(null),R=t==null?void 0:t.uid,S=e.filter(p=>{var N;return((N=p.students)==null?void 0:N.includes(R))&&!p.archived}),y=S.filter(p=>{var N,E;return((N=p.name)==null?void 0:N.toLowerCase().includes(h.toLowerCase()))||((E=p.teacherName)==null?void 0:E.toLowerCase().includes(h.toLowerCase()))}),_=async p=>{try{await i(p,R),c.success("Successfully left the class."),x(null)}catch(N){c.error("Failed to leave class: "+N.message)}},I={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},M={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},L=o(),T=async(p,N)=>{C(p);try{await l(p,N),c.success(N?"Te uniste a la clase!":"Solicitud rechazada.")}catch(E){c.error("Error: "+E.message)}finally{C(null)}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"My Classes",subtitle:`${S.length} enrolled classes`}),a.jsxs(K.div,{variants:I,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(K.div,{variants:M,className:"relative",children:[a.jsx(ki,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{placeholder:"Search classes...",value:h,onChange:p=>m(p.target.value),className:"input-glass pl-11"})]}),L.length>0&&a.jsxs(K.div,{variants:M,className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wo,{size:16,className:"text-amber-400"}),a.jsx("h2",{className:"text-sm font-bold text-white uppercase tracking-wider",children:"Solicitudes Pendientes"}),a.jsx("span",{className:"ml-auto text-[10px] font-bold px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400",children:L.length})]}),L.map(p=>a.jsx(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-50},className:"glass-card p-4 border border-amber-500/10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center text-amber-400 shrink-0",children:a.jsx(At,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:p.className}),a.jsxs("p",{className:"text-xs text-white/40 truncate",children:["de ",p.teacherName]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>T(p.id,!1),disabled:v===p.id,className:"p-2 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-all disabled:opacity-50",title:"Rechazar",children:a.jsx(on,{size:16})}),a.jsx("button",{onClick:()=>T(p.id,!0),disabled:v===p.id,className:"p-2 rounded-lg bg-neon-green/10 text-neon-green hover:bg-neon-green/20 transition-all disabled:opacity-50",title:"Aceptar",children:a.jsx(vi,{size:16})})]})]})},p.id))]}),y.length===0?a.jsxs(K.div,{variants:M,className:"glass-card p-12 text-center",children:[a.jsx(At,{size:40,className:"text-white/10 mx-auto mb-4"}),a.jsx("p",{className:"text-white/30 text-sm",children:h?"No classes match your search.":"You haven't joined any classes yet."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:y.map(p=>{var V;const N=n.filter(U=>U.classId===p.id),E=s.filter(U=>U.studentId===R&&N.some(z=>z.id===U.assignmentId)),j=E.length,A=N.length,w=A>0?Math.round(j/A*100):0,k=E.filter(U=>U.grade!=null),O=k.length>0?Math.round(k.reduce((U,z)=>{const W=N.find(F=>F.id===z.assignmentId);return U+z.grade/((W==null?void 0:W.totalPoints)||100)*100},0)/k.length):null;return a.jsxs(K.div,{variants:M,className:"glass-card group overflow-hidden hover:border-white/10 transition-all",children:[a.jsx("div",{className:"h-1 bg-white/[0.02]",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-neon-blue to-neon-green transition-all duration-500",style:{width:`${w}%`}})}),a.jsxs("div",{className:"p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"text-base sm:text-lg font-display font-bold text-white truncate",children:p.name}),a.jsx("p",{className:"text-xs text-white/40 mt-0.5",children:p.teacherName})]}),a.jsx("div",{className:"text-right shrink-0",children:O!=null&&a.jsxs("span",{className:`text-sm font-bold ${O>=90?"text-neon-green":O>=70?"text-neon-blue":"text-neon-orange"}`,children:[O,"%"]})})]}),p.description&&a.jsx("p",{className:"text-xs text-white/30 leading-relaxed mb-4 line-clamp-2",children:p.description}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[a.jsxs("div",{className:"text-center p-2 rounded-lg bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("p",{className:"text-xs text-white/30",children:"Students"}),a.jsx("p",{className:"text-sm font-bold text-white",children:((V=p.students)==null?void 0:V.length)||0})]}),a.jsxs("div",{className:"text-center p-2 rounded-lg bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("p",{className:"text-xs text-white/30",children:"Done"}),a.jsxs("p",{className:"text-sm font-bold text-neon-green",children:[j,"/",A]})]}),a.jsxs("div",{className:"text-center p-2 rounded-lg bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("p",{className:"text-xs text-white/30",children:"Level"}),a.jsx("p",{className:"text-sm font-bold text-neon-purple",children:p.level||""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-4 bg-white/[0.02] px-3 py-2 rounded-lg border border-white/[0.04]",children:[a.jsx("span",{className:"text-[10px] text-white/30 uppercase tracking-wider",children:"Code"}),a.jsx("span",{className:"text-sm font-mono font-bold text-neon-blue tracking-widest",children:p.code})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>d("/assignments"),className:"flex-1 btn-ghost flex items-center justify-center gap-2 text-sm py-2 rounded-lg",children:[a.jsx(ms,{size:14})," Assignments"]}),a.jsxs("button",{onClick:()=>d(`/class/${p.id}?tab=chat`),className:"flex-1 btn-ghost flex items-center justify-center gap-2 text-sm py-2 rounded-lg",children:[a.jsx(I0,{size:14})," Chat"]}),a.jsx("button",{onClick:()=>x(p.id),className:"w-9 h-9 rounded-lg bg-red-500/5 border border-red-500/10 flex items-center justify-center text-red-400/40 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Leave class",children:a.jsx(y4,{size:14})})]})]}),a.jsx(Xn,{children:f===p.id&&a.jsx(K.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-red-500/10 bg-red-500/5 overflow-hidden",children:a.jsxs("div",{className:"p-4 text-center space-y-3",children:[a.jsxs("p",{className:"text-sm text-red-400",children:["Leave ",a.jsx("strong",{children:p.name}),"?"]}),a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx("button",{onClick:()=>x(null),className:"px-4 py-1.5 rounded-lg bg-white/5 text-white/50 text-sm hover:bg-white/10 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>_(p.id),className:"px-4 py-1.5 rounded-lg bg-red-500/20 text-red-400 text-sm font-semibold hover:bg-red-500/30 transition-colors",children:"Leave"})]})]})})})]},p.id)})})]})]})}function AF(){const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,getStudentProgress:i}=bn(),r=vn(),o=t==null?void 0:t.uid,[l,c]=D.useState("all"),[d,h]=D.useState("recent"),m=e.filter(I=>{var M;return(M=I.students)==null?void 0:M.includes(o)}),f=i(o),x=D.useMemo(()=>s.filter(I=>I.studentId===o&&I.grade!=null).map(I=>{const M=n.find(N=>N.id===I.assignmentId),L=e.find(N=>N.id===(M==null?void 0:M.classId)),T=(M==null?void 0:M.totalPoints)||100,p=Math.round(I.grade/T*100);return{...I,assignment:M,class:L,pct:p,max:T}}).filter(I=>{var M;return l==="all"||((M=I.class)==null?void 0:M.id)===l}).sort((I,M)=>d==="recent"?new Date(M.gradedAt||M.submittedAt)-new Date(I.gradedAt||I.submittedAt):d==="highest"?M.pct-I.pct:d==="lowest"?I.pct-M.pct:0),[s,n,e,o,l,d]),v=f.avgGrade,C=v>=90?"neon-green":v>=70?"neon-blue":v>=50?"neon-orange":"red-400",R=D.useMemo(()=>{const I={A:0,B:0,C:0,D:0,F:0};return x.forEach(M=>{M.pct>=90?I.A++:M.pct>=80?I.B++:M.pct>=70?I.C++:M.pct>=60?I.D++:I.F++}),I},[x]),S=Math.max(...Object.values(R),1),y={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},_={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"My Grades",subtitle:`${x.length} graded assignments`}),a.jsxs(K.div,{variants:y,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(K.div,{variants:_,className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center",children:[a.jsx(Fu,{size:20,className:`text-${C} mx-auto mb-2`}),a.jsxs("p",{className:`text-3xl sm:text-4xl font-display font-black text-${C}`,children:[v,"%"]}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider mt-1",children:"Overall Average"})]}),a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center",children:[a.jsx(zt,{size:20,className:"text-neon-green mx-auto mb-2"}),a.jsx("p",{className:"text-3xl sm:text-4xl font-display font-black text-white",children:f.completed}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider mt-1",children:"Completed"})]}),a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center",children:[a.jsx(Jn,{size:20,className:"text-neon-orange mx-auto mb-2"}),a.jsx("p",{className:"text-3xl sm:text-4xl font-display font-black text-white",children:f.total-f.completed}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider mt-1",children:"Remaining"})]}),a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center",children:[a.jsx(Ii,{size:20,className:"text-neon-purple mx-auto mb-2"}),a.jsxs("p",{className:"text-3xl sm:text-4xl font-display font-black text-white",children:[f.completionRate,"%"]}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider mt-1",children:"Completion Rate"})]})]}),a.jsxs(K.div,{variants:_,className:"glass-card p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base font-display font-bold text-white mb-4",children:"Grade Distribution"}),a.jsx("div",{className:"flex items-end gap-2 sm:gap-3 h-32",children:Object.entries(R).map(([I,M])=>{const L=`${M/S*100}%`,p={A:"neon-green",B:"neon-blue",C:"neon-purple",D:"neon-orange",F:"red-400"}[I];return a.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 h-full",children:[a.jsx("span",{className:"text-[10px] font-bold text-white/40",children:M}),a.jsx("div",{className:"w-full flex-1 flex items-end",children:a.jsx("div",{className:`w-full rounded-t-lg bg-${p}/20 border border-${p}/30 transition-all duration-500`,style:{height:M>0?L:"4px"}})}),a.jsx("span",{className:`text-xs font-bold text-${p}`,children:I})]},I)})})]}),a.jsxs(K.div,{variants:_,className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("select",{value:l,onChange:I=>c(I.target.value),className:"input-glass flex-1 text-sm",children:[a.jsx("option",{value:"all",children:"All Classes"}),m.map(I=>a.jsx("option",{value:I.id,children:I.name},I.id))]}),a.jsxs("select",{value:d,onChange:I=>h(I.target.value),className:"input-glass text-sm sm:w-48",children:[a.jsx("option",{value:"recent",children:"Most Recent"}),a.jsx("option",{value:"highest",children:"Highest Grade"}),a.jsx("option",{value:"lowest",children:"Lowest Grade"})]})]}),x.length===0?a.jsxs(K.div,{variants:_,className:"glass-card p-12 text-center",children:[a.jsx($a,{size:40,className:"text-white/10 mx-auto mb-4"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No grades yet. Complete some assignments!"})]}):a.jsx("div",{className:"space-y-3",children:x.map(I=>{var L,T;const M=I.pct>=90?"neon-green":I.pct>=70?"neon-blue":I.pct>=50?"neon-orange":"red-400";return a.jsx(K.div,{variants:_,children:a.jsx("button",{onClick:()=>r(`/assignments/${I.assignmentId}`),className:"w-full glass-card p-3 sm:p-4 hover:border-white/10 transition-all text-left group",children:a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsx("div",{className:`w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-${M}/10 border border-${M}/20 flex items-center justify-center shrink-0`,children:a.jsxs("span",{className:`text-${M} font-display font-black text-lg sm:text-xl`,children:[I.pct,"%"]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm sm:text-base font-medium text-white truncate",children:((L=I.assignment)==null?void 0:L.title)||"Assignment"}),a.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[a.jsxs("span",{className:"text-xs text-white/30 flex items-center gap-1",children:[a.jsx(At,{size:10})," ",(T=I.class)==null?void 0:T.name]}),a.jsx("span",{className:"text-xs text-white/20",children:""}),a.jsxs("span",{className:"text-xs text-white/30",children:[I.grade,"/",I.max," pts"]})]})]}),a.jsx("div",{className:"hidden sm:block w-24",children:a.jsx("div",{className:"h-2 rounded-full bg-white/[0.04]",children:a.jsx("div",{className:`h-full rounded-full bg-${M}`,style:{width:`${I.pct}%`}})})}),a.jsx(au,{size:16,className:"text-white/20 group-hover:text-neon-blue transition-colors shrink-0"})]})})},I.id)})})]})]})}function E4(t,e){const n=[...t];let s=e;for(let i=n.length-1;i>0;i--){s=(s*9301+49297)%233280;const r=Math.floor(s/233280*(i+1));[n[i],n[r]]=[n[r],n[i]]}return n}function CF(){var z,W;const{assignmentId:t}=WT(),e=vn(),{userProfile:n}=ft(),{assignments:s,classes:i,submissions:r,submitAssignment:o}=bn(),l=xs(),c=s.find(F=>F.id===t),d=i.find(F=>F.id===(c==null?void 0:c.classId)),[h,m]=D.useState({}),[f,x]=D.useState(!1),v=D.useMemo(()=>r.find(F=>F.assignmentId===t&&F.studentId===(n==null?void 0:n.uid)),[r,t,n==null?void 0:n.uid]),C=!!v,R=(c==null?void 0:c.timeLimit)>0,S=`timer_${t}_${n==null?void 0:n.uid}`,[y,_]=D.useState(()=>{if(!R||C)return 0;const F=sessionStorage.getItem(S);if(F){const Z=Math.max(0,Math.floor((Number(F)-Date.now())/1e3));return Z>0?Z:0}return((c==null?void 0:c.timeLimit)||0)*60}),[I,M]=D.useState(!1),L=D.useRef(null),T=D.useRef(!1),p=D.useCallback(()=>{if(!R||C||I)return;M(!0);const F=Date.now()+y*1e3;sessionStorage.setItem(S,String(F))},[R,C,I,y,S]);D.useEffect(()=>{R&&!C&&sessionStorage.getItem(S)&&M(!0)},[R,C,S]),D.useEffect(()=>{if(!(!I||C||y<=0))return L.current=setInterval(()=>{_(F=>F<=1?(clearInterval(L.current),0):F-1)},1e3),()=>clearInterval(L.current)},[I,C]),D.useEffect(()=>{y===0&&I&&!C&&!T.current&&(T.current=!0,w())},[y,I,C]),D.useEffect(()=>{if(R&&I&&!C){const F=Z=>{Z.preventDefault(),Z.returnValue="You have a timed exam in progress. Are you sure you want to leave?"};return window.addEventListener("beforeunload",F),()=>window.removeEventListener("beforeunload",F)}},[R,I,C]);const N=()=>{sessionStorage.removeItem(S),clearInterval(L.current)},E=F=>{const Z=Math.floor(F/60),pe=F%60;return`${Z}:${pe.toString().padStart(2,"0")}`},j=R?y/(((c==null?void 0:c.timeLimit)||1)*60)*100:100,A=async()=>{var pe;if(f||C)return;const F=((pe=c.questions)==null?void 0:pe.length)||0;if(Object.keys(h).filter(fe=>h[fe]!==""&&h[fe]!==void 0).length<F){l.warning("Please answer all questions before submitting.");return}x(!0);try{let fe=0,Se="graded",Te=!1;c.questions.forEach((ne,J)=>{const he=h[J];if(ne.type==="multiple-choice"||ne.type==="true-false"){const me=ne.options[ne.correctAnswer];he===me&&(fe+=ne.points||0)}else if(ne.type==="fill-in-blank"){const me=(he||"").trim().toLowerCase(),ve=(ne.correctText||"").trim().toLowerCase();me&&ve&&me===ve&&(fe+=ne.points||0)}else if(ne.type==="ordering")JSON.stringify(he)===JSON.stringify(ne.items||[])&&(fe+=ne.points||0);else if(ne.type==="matching")(ne.pairs||[]).every((ve,xt)=>(he==null?void 0:he[xt])===ve.right)&&(fe+=ne.points||0);else if(ne.type==="word-scramble"){const me=(he||"").trim().toLowerCase(),ve=(ne.correctText||"").trim().toLowerCase();me&&ve&&me===ve&&(fe+=ne.points||0)}else if(ne.type==="sentence-builder"){const me=(he||"").trim().toLowerCase(),ve=(ne.correctSentence||"").trim().toLowerCase();me&&ve&&me===ve&&(fe+=ne.points||0)}else if(ne.type==="categorize"){let me=!0,ve=0;(ne.categories||[]).forEach((xt,Ct)=>{(xt.items||[]).forEach(()=>{(he==null?void 0:he[ve])!==Ct&&(me=!1),ve++})}),me&&ve>0&&(fe+=ne.points||0)}else ne.type==="error-correction"||ne.type==="translation"?(he||"").trim().toLowerCase()===(ne.correctText||"").trim().toLowerCase()&&(fe+=ne.points||0):(ne.type==="essay"||ne.type==="short-answer")&&(Te=!0)}),Te&&(Se="pending");const tt={assignmentId:t,classId:c.classId,studentId:n==null?void 0:n.uid,studentName:(n==null?void 0:n.displayName)||"Student",answers:h,grade:fe,maxPoints:c.totalPoints||100,submittedAt:new Date().toISOString(),status:Se};await o(tt),N(),l.success(`Assignment submitted! You scored ${fe}/${c.totalPoints||0} points.`)}catch(fe){l.error("Submission failed: "+fe.message)}finally{x(!1)}},w=async()=>{if(!(f||C)){x(!0);try{let F=0,Z="graded",pe=!1;c.questions.forEach((fe,Se)=>{const Te=h[Se];if(!(!Te&&Te!==0))if(fe.type==="multiple-choice"||fe.type==="true-false"){const tt=fe.options[fe.correctAnswer];Te===tt&&(F+=fe.points||0)}else fe.type==="fill-in-blank"?(Te||"").trim().toLowerCase()===(fe.correctText||"").trim().toLowerCase()&&(F+=fe.points||0):fe.type==="ordering"?JSON.stringify(Te)===JSON.stringify(fe.items||[])&&(F+=fe.points||0):(fe.type==="essay"||fe.type==="short-answer")&&(pe=!0)}),pe&&(Z="pending"),await o({assignmentId:t,classId:c.classId,studentId:n==null?void 0:n.uid,studentName:(n==null?void 0:n.displayName)||"Student",answers:h,grade:F,maxPoints:c.totalPoints||100,submittedAt:new Date().toISOString(),status:Z,autoSubmitted:!0}),N(),l.warning(" Time is up! Your answers were auto-submitted.")}catch(F){l.error("Auto-submit failed: "+F.message)}finally{x(!1)}}};if(!c)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl bg-white/[0.04] animate-pulse mb-4"}),a.jsx("p",{className:"text-white/40 text-sm",children:"Loading assignment..."})]})});const k={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},O={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},V=C&&v.grade!=null?Math.round(v.grade/(c.totalPoints||100)*100):0,U=V>=90?"text-neon-green":V>=70?"text-neon-blue":V>=50?"text-neon-orange":"text-red-400";return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:c.title,subtitle:`${(d==null?void 0:d.name)||"Class"}  Due ${new Date(c.dueDate).toLocaleDateString()}`,actions:a.jsxs("button",{onClick:()=>e(-1),className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(ca,{size:16})," Back"]})}),R&&!C&&a.jsx("div",{className:`sticky top-0 z-30 px-4 py-3 ${I?"bg-surface-950/95 backdrop-blur-xl border-b border-white/[0.06]":"bg-neon-blue/5 border-b border-neon-blue/20"}`,children:a.jsx("div",{className:"max-w-4xl mx-auto",children:I?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pp,{size:16,className:`${y<=60?"text-red-400 animate-pulse":y<=300?"text-neon-orange":"text-neon-green"}`}),a.jsx("span",{className:`text-2xl font-mono font-black tracking-wider ${y<=60?"text-red-400 animate-pulse":y<=300?"text-neon-orange":"text-neon-green"}`,children:E(y)})]}),a.jsx("span",{className:"text-[10px] text-white/30",children:y<=60?" Less than 1 minute!":y<=300?" Hurry up!":`${Math.ceil(y/60)} min remaining`})]}),a.jsx("div",{className:"h-1.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx(K.div,{className:`h-full rounded-full transition-colors duration-1000 ${y<=60?"bg-red-500":y<=300?"bg-neon-orange":"bg-neon-green"}`,animate:{width:`${j}%`},transition:{duration:.5,ease:"linear"}})})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-neon-blue/10 border border-neon-blue/20 flex items-center justify-center",children:a.jsx(Pp,{size:20,className:"text-neon-blue"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-bold text-white",children:["Timed Exam  ",c.timeLimit," minutes"]}),a.jsx("p",{className:"text-[10px] text-white/40",children:"Timer starts when you click 'Start Exam'. You cannot pause once started."})]})]}),a.jsxs("button",{onClick:p,className:"btn-neon text-sm px-5 py-2.5 flex items-center gap-2 animate-pulse",children:[a.jsx(Pp,{size:16})," Start Exam"]})]})})}),a.jsx(K.div,{variants:k,initial:"hidden",animate:"show",className:"max-w-4xl mx-auto p-4 sm:p-6",children:C?a.jsxs(a.Fragment,{children:[a.jsxs(K.div,{variants:O,className:"glass-card p-6 sm:p-8 text-center space-y-4 mb-6",children:[a.jsx("div",{className:`w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-2 ${V>=70?"bg-neon-green/10 border border-neon-green/20":"bg-neon-orange/10 border border-neon-orange/20"}`,children:V>=70?a.jsx($u,{size:36,className:"text-neon-green"}):a.jsx(Di,{size:36,className:"text-neon-orange"})}),a.jsx("h2",{className:"text-2xl sm:text-3xl font-display font-bold text-white",children:v.status==="graded"?"Results":"Submitted  Awaiting Review"}),v.status==="graded"&&a.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:`text-4xl sm:text-5xl font-display font-black ${U}`,children:v.grade}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Points Earned"})]}),a.jsx("div",{className:"w-px h-12 bg-white/10"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-4xl sm:text-5xl font-display font-black text-white/30",children:c.totalPoints||0}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Total Points"})]}),a.jsx("div",{className:"w-px h-12 bg-white/10"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:`text-4xl sm:text-5xl font-display font-black ${U}`,children:[V,"%"]}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Score"})]})]}),a.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[a.jsx("button",{onClick:()=>e("/dashboard"),className:"btn-neon text-sm px-4 py-2",children:"Dashboard"}),a.jsx("button",{onClick:()=>e("/grades"),className:"btn-ghost text-sm px-4 py-2",children:"My Grades"})]})]}),a.jsx("div",{className:"space-y-4",children:(z=c.questions)==null?void 0:z.map((F,Z)=>{var es,dn;const pe=(es=v.answers)==null?void 0:es[Z],fe=F.type==="multiple-choice"||F.type==="true-false",Se=F.type==="fill-in-blank",Te=F.type==="ordering",tt=F.type==="essay"||F.type==="short-answer",ne=F.type==="word-scramble",J=F.type==="sentence-builder",he=ne||J||F.type==="error-correction"||F.type==="translation";let me=null,ve=!1;if(fe)me=F.options[F.correctAnswer],ve=pe===me;else if(Se){me=F.correctText;const He=(pe||"").trim().toLowerCase(),Ge=(me||"").trim().toLowerCase();ve=He&&Ge&&He===Ge}else if(Te)ve=JSON.stringify(pe)===JSON.stringify(F.items||[]);else if(ne||F.type==="error-correction"||F.type==="translation"){me=F.correctText;const He=(pe||"").trim().toLowerCase(),Ge=(me||"").trim().toLowerCase();ve=He&&Ge&&He===Ge}else if(J){me=F.correctSentence;const He=(pe||"").trim().toLowerCase(),Ge=(me||"").trim().toLowerCase();ve=He&&Ge&&He===Ge}else if(F.type==="categorize"){let He=!0,Ge=0;(F.categories||[]).forEach((Je,qe)=>{(Je.items||[]).forEach(()=>{(pe==null?void 0:pe[Ge])!==qe&&(He=!1),Ge++})}),ve=He&&Ge>0}else F.type==="matching"&&(ve=(F.pairs||[]).every((He,Ge)=>(pe==null?void 0:pe[Ge])===He.right));const xt=tt?"border-l-neon-blue":ve?"border-l-neon-green":"border-l-red-500",Ct=tt?"bg-neon-blue/10 border-neon-blue/20":ve?"bg-neon-green/10 border-neon-green/20":"bg-red-500/10 border-red-500/20",Zn=tt?"bg-white/[0.03] text-white/30 border-white/5":ve?"bg-neon-green/10 text-neon-green border-neon-green/20":"bg-red-500/10 text-red-400 border-red-500/20";return a.jsx(K.div,{variants:O,className:`glass-card p-4 sm:p-6 border-l-4 ${xt}`,children:a.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 border ${Ct}`,children:tt?a.jsx("span",{className:"text-neon-blue font-bold text-sm",children:Z+1}):ve?a.jsx(zt,{size:16,className:"text-neon-green"}):a.jsx(ou,{size:16,className:"text-red-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[a.jsx("h4",{className:"text-white font-semibold text-sm sm:text-base leading-tight",children:F.text}),a.jsx("span",{className:`px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider shrink-0 border ${Zn}`,children:tt?`${F.points} pts`:ve?`+${F.points}`:"0"})]}),fe&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:(dn=F.options)==null?void 0:dn.map((He,Ge)=>{const Je=pe===He,qe=He===me;let ts="bg-white/[0.01] border-white/5 text-white/40";return qe?ts="bg-neon-green/10 border-neon-green/40 text-neon-green":Je&&!qe&&(ts="bg-red-500/10 border-red-500/40 text-red-400"),a.jsxs("div",{className:`p-3 rounded-xl border text-sm flex items-center gap-3 ${ts}`,children:[a.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center shrink-0 ${qe?"border-neon-green bg-neon-green":Je?"border-red-400 bg-red-400":"border-white/10"}`,children:(qe||Je)&&a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),a.jsx("span",{className:"font-medium",children:He}),qe&&a.jsx(zt,{size:14,className:"ml-auto text-neon-green shrink-0"}),Je&&!qe&&a.jsx(ou,{size:14,className:"ml-auto text-red-400 shrink-0"})]},Ge)})}),Se&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"bg-white/[0.02] border border-white/5 rounded-xl p-3",children:a.jsx("p",{className:"text-sm text-white/60",children:pe||"No answer provided"})}),!ve&&me&&a.jsx("div",{className:"p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:a.jsxs("p",{className:"text-xs text-neon-green",children:[" Correct: ",me]})})]}),Te&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase mb-1",children:"Your order:"}),(Array.isArray(pe)?pe:[]).map((He,Ge)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-white/[0.02] border border-white/5 text-sm text-white/60",children:[a.jsxs("span",{className:"text-[10px] text-white/30 w-4",children:[Ge+1,"."]}),He]},Ge)),!ve&&a.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:[a.jsx("p",{className:"text-xs text-neon-green mb-1",children:" Correct order:"}),(F.items||[]).map((He,Ge)=>a.jsxs("p",{className:"text-xs text-neon-green/70 ml-2",children:[Ge+1,". ",He]},Ge))]})]}),he&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"bg-white/[0.02] border border-white/5 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase mb-1",children:"Your answer:"}),a.jsx("p",{className:"text-sm text-white/60",children:pe||"No answer provided"})]}),!ve&&me&&a.jsx("div",{className:"p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:a.jsxs("p",{className:"text-xs text-neon-green",children:[" Correct: ",me]})})]}),F.type==="categorize"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase mb-1",children:"Your categorization:"}),a.jsx("p",{className:"text-sm text-white/60",children:ve?"All items correctly categorized":"Some items were incorrectly categorized"})]}),F.type==="matching"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase mb-1",children:"Your matches:"}),a.jsx("p",{className:"text-sm text-white/60",children:ve?"All pairs matched correctly":"Some pairs were incorrect"})]}),tt&&a.jsxs("div",{className:"bg-white/[0.02] border border-white/5 rounded-xl p-3",children:[a.jsx("p",{className:"text-sm text-white/60 leading-relaxed whitespace-pre-wrap",children:pe||"No answer provided"}),v.status==="pending"&&a.jsxs("p",{className:"text-xs text-neon-orange mt-2 flex items-center gap-1",children:[a.jsx(Jn,{size:12})," Awaiting teacher review"]})]})]})]})},Z)})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(K.div,{variants:O,className:"glass-card p-4 sm:p-6 border-l-4 border-l-neon-blue",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-2 flex items-center gap-2",children:[a.jsx(At,{size:18,className:"text-neon-blue"})," Instructions"]}),a.jsx("p",{className:"text-white/60 leading-relaxed font-light text-sm sm:text-base",children:c.description}),a.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 sm:gap-6 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white/[0.03] px-3 py-1.5 rounded-lg border border-white/5",children:[a.jsx(Jn,{size:14,className:"text-neon-blue"}),a.jsx("span",{className:"text-white/50",children:"Due:"}),a.jsx("span",{className:"text-white font-medium text-xs sm:text-sm",children:new Date(c.dueDate).toLocaleString()})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/[0.03] px-3 py-1.5 rounded-lg border border-white/5",children:[a.jsx($a,{size:14,className:"text-neon-green"}),a.jsx("span",{className:"text-white/50",children:"Points:"}),a.jsx("span",{className:"text-white font-medium",children:c.totalPoints||0})]})]})]}),a.jsx("div",{className:"space-y-4 sm:space-y-6",children:(W=c.questions)==null?void 0:W.map((F,Z)=>{var ne;const pe=F.type==="multiple-choice"||F.type==="true-false",fe=F.type==="ordering",Se=F.type==="fill-in-blank",Te=F.type==="short-answer",tt=F.type==="essay";if(fe&&!h[Z]){const J=[...F.items||[]].sort(()=>Math.random()-.5);h[Z]||setTimeout(()=>m(he=>({...he,[Z]:J})),0)}return a.jsxs(K.div,{variants:O,className:"glass-card p-4 sm:p-6 relative group overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-neon-blue/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-neon-blue/10 border border-neon-blue/20 flex items-center justify-center text-neon-blue font-bold text-sm shrink-0",children:Z+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4",children:[a.jsx("h4",{className:"text-white font-semibold text-sm sm:text-lg leading-tight",children:F.text}),a.jsxs("span",{className:"px-2 py-1 rounded-md bg-white/[0.03] border border-white/5 text-[10px] font-bold text-white/30 uppercase tracking-wider shrink-0",children:[F.points," pts"]})]}),pe&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:(ne=F.options)==null?void 0:ne.map((J,he)=>a.jsx("button",{onClick:()=>m({...h,[Z]:J}),className:`p-3 sm:p-4 rounded-xl text-left transition-all border group/opt ${h[Z]===J?"bg-neon-blue/10 border-neon-blue text-white shadow-[0_0_20px_rgba(0,209,255,0.1)]":"bg-white/[0.01] border-white/5 text-white/50 hover:border-white/20 hover:bg-white/[0.03]"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${h[Z]===J?"border-neon-blue bg-neon-blue shadow-[0_0_10px_rgba(0,209,255,0.5)]":"border-white/10 group-hover/opt:border-white/30"}`,children:h[Z]===J&&a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),a.jsx("span",{className:"text-sm font-medium",children:J})]})},he))}),Se&&a.jsx("div",{className:"relative",children:a.jsx("input",{type:"text",placeholder:"Type your answer...",value:h[Z]||"",onChange:J=>m({...h,[Z]:J.target.value}),className:"input-glass w-full text-sm"})}),Te&&a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{placeholder:"Write a brief answer...",value:h[Z]||"",onChange:J=>m({...h,[Z]:J.target.value}),className:"input-glass w-full min-h-[80px] resize-none p-4 text-sm leading-relaxed"}),a.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] text-white/20 font-medium",children:[(h[Z]||"").length," chars"]})]}),fe&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-white/30 mb-2",children:"Drag or use arrows to arrange in the correct order:"}),(Array.isArray(h[Z])?h[Z]:[]).map((J,he)=>a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-white/[0.02] border border-white/5 hover:border-neon-blue/20 transition-all",children:[a.jsx("span",{className:"text-neon-blue font-bold text-xs w-5 text-center",children:he+1}),a.jsx("span",{className:"text-sm text-white/80 flex-1",children:J}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",disabled:he===0,onClick:()=>{const me=[...h[Z]];[me[he-1],me[he]]=[me[he],me[he-1]],m({...h,[Z]:me})},className:"p-1 rounded text-white/20 hover:text-neon-blue disabled:opacity-20 disabled:cursor-not-allowed transition-colors text-xs",children:""}),a.jsx("button",{type:"button",disabled:he===(h[Z]||[]).length-1,onClick:()=>{const me=[...h[Z]];[me[he+1],me[he]]=[me[he],me[he+1]],m({...h,[Z]:me})},className:"p-1 rounded text-white/20 hover:text-neon-blue disabled:opacity-20 disabled:cursor-not-allowed transition-colors text-xs",children:""})]})]},he))]}),tt&&a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{placeholder:"Write your detailed response here...",value:h[Z]||"",onChange:J=>m({...h,[Z]:J.target.value}),className:"input-glass w-full min-h-[140px] sm:min-h-[200px] resize-none p-4 text-sm leading-relaxed"}),a.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] text-white/20 font-medium",children:[(h[Z]||"").length," chars"]})]}),F.type==="matching"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Match the items on the left with the correct option on the right."}),(F.pairs||[]).map((J,he)=>{var me;return a.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center p-3 rounded-xl bg-white/[0.02] border border-white/5",children:[a.jsx("div",{className:"text-sm font-medium text-white/80",children:J.left}),a.jsxs("select",{value:((me=h[Z])==null?void 0:me[he])||"",onChange:ve=>{const xt=[...h[Z]||[]];xt[he]=ve.target.value,m({...h,[Z]:xt})},className:"bg-black/20 border border-white/10 rounded-lg text-sm text-neon-blue p-2 focus:ring-1 focus:ring-neon-blue outline-none",children:[a.jsx("option",{value:"",children:"Select match..."}),[...F.pairs||[]].sort((ve,xt)=>ve.right.localeCompare(xt.right)).map((ve,xt)=>a.jsx("option",{value:ve.right,children:ve.right},xt))]})]},he)})]}),F.type==="word-scramble"&&a.jsx(RF,{q:F,idx:Z,answers:h,setAnswers:m,startTimer:p}),F.type==="sentence-builder"&&a.jsx(IF,{q:F,idx:Z,answers:h,setAnswers:m,startTimer:p}),F.type==="categorize"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-white/40",children:"Assign each item to its correct category."}),a.jsx("div",{className:"space-y-2",children:(()=>{let J=0;return(F.categories||[]).flatMap((he,me)=>(he.items||[]).map((ve,xt)=>{var Zn;const Ct=J++;return a.jsxs("div",{className:"flex items-center justify-between gap-4 p-3 rounded-xl bg-white/[0.02] border border-white/5",children:[a.jsx("span",{className:"text-sm text-white/80 font-medium",children:ve}),a.jsxs("select",{value:((Zn=h[Z])==null?void 0:Zn[Ct])??"",onChange:es=>{const dn={...h[Z]||{}};dn[Ct]=Number(es.target.value),m({...h,[Z]:dn})},className:"bg-black/20 border border-white/10 rounded-lg text-xs text-neon-blue p-2 focus:ring-1 focus:ring-neon-blue outline-none max-w-[150px]",children:[a.jsx("option",{value:"",children:"Select Category..."}),(F.categories||[]).map((es,dn)=>a.jsx("option",{value:dn,children:es.name},dn))]})]},`${me}-${xt}`)})).sort(()=>Math.random()-.5)})()})]}),F.type==="error-correction"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-3 rounded-xl bg-red-500/10 border border-red-500/20",children:[a.jsx("p",{className:"text-xs text-red-300 uppercase font-bold mb-1",children:"Incorrect Sentence:"}),a.jsx("p",{className:"text-sm text-white/90",children:F.errorSentence})]}),a.jsx("input",{type:"text",placeholder:"Type the corrected sentence here...",value:h[Z]||"",onChange:J=>m({...h,[Z]:J.target.value}),className:"input-glass w-full"})]}),F.type==="translation"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-3 rounded-xl bg-neon-blue/10 border border-neon-blue/20",children:[a.jsx("p",{className:"text-xs text-neon-blue uppercase font-bold mb-1",children:"Translate to English:"}),a.jsx("p",{className:"text-sm text-white/90",children:F.sourceText})]}),a.jsx("input",{type:"text",placeholder:"Type the English translation...",value:h[Z]||"",onChange:J=>m({...h,[Z]:J.target.value}),className:"input-glass w-full"})]})]})]})]},Z)})}),a.jsx(K.div,{variants:O,className:"flex justify-end",children:a.jsx("button",{onClick:A,disabled:f,className:"btn-neon flex items-center gap-2 text-sm sm:text-base disabled:opacity-50",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Submitting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fv,{size:16})," Submit Assignment"]})})})]})})]})}function RF({q:t,idx:e,answers:n,setAnswers:s,startTimer:i}){const r=t.correctText||"",o=D.useMemo(()=>{const d=r.split("");return E4(d,r.length*7+e*31+42)},[r,e]),l=n[e]||"",c=r.toLowerCase();return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2 justify-center p-4 bg-white/[0.02] rounded-xl border border-white/5",children:o.map((d,h)=>a.jsx("span",{className:"w-8 h-8 flex items-center justify-center bg-neon-purple/10 border border-neon-purple/30 rounded text-neon-purple font-bold text-sm",children:d},h))}),a.jsx("div",{className:"flex flex-wrap gap-1.5 justify-center min-h-[40px] p-3 rounded-xl bg-black/20 border border-white/5",children:l.length>0?l.split("").map((d,h)=>{const m=h<c.length&&d.toLowerCase()===c[h];return a.jsx("span",{className:`w-8 h-8 flex items-center justify-center rounded font-bold text-sm border transition-all duration-200 ${m?"bg-neon-green/15 border-neon-green/40 text-neon-green":"bg-red-500/15 border-red-500/40 text-red-400"}`,children:d},h)}):a.jsx("span",{className:"text-xs text-white/20",children:"Type below to see letter feedback..."})}),a.jsx("input",{type:"text",placeholder:"Unscramble the word...",value:l,onChange:d=>{i==null||i(),s(h=>({...h,[e]:d.target.value}))},className:"input-glass w-full text-center tracking-widest font-bold text-lg"})]})}function IF({q:t,idx:e,answers:n,setAnswers:s,startTimer:i}){const r=t.correctSentence||"",o=D.useMemo(()=>r.split(" ").filter(Boolean),[r]),l=D.useMemo(()=>E4(o,r.length*13+e*37+99),[o,r.length,e]),c=n[e]||"",d=c?c.split(" ").filter(Boolean):[],h=D.useMemo(()=>{const x=[...d],v=new Set;return x.forEach(C=>{for(let R=0;R<l.length;R++)if(!v.has(R)&&l[R]===C){v.add(R);break}}),l.map((C,R)=>!v.has(R))},[l,d]),m=x=>{i==null||i(),s(v=>({...v,[e]:(v[e]?v[e]+" ":"")+x}))},f=()=>{const x=d.slice(0,-1).join(" ");s(v=>({...v,[e]:x}))};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-white/40",children:"Tap words to build the sentence:"}),a.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[44px] p-3 rounded-xl bg-black/20 border border-white/5",children:l.map((x,v)=>a.jsx("button",{type:"button",disabled:!h[v],onClick:()=>m(x),className:`px-3 py-1.5 rounded-lg text-xs font-medium border transition-all duration-200 ${h[v]?"bg-neon-blue/10 text-neon-blue border-neon-blue/20 hover:bg-neon-blue/20 hover:scale-105 cursor-pointer":"bg-white/[0.02] text-white/10 border-white/[0.03] cursor-not-allowed"}`,children:x},v))}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[44px] p-3 rounded-xl bg-white/[0.02] border border-white/5 items-center",children:d.length>0?d.map((x,v)=>a.jsx("span",{className:"px-2 py-1 rounded bg-neon-green/10 text-neon-green border border-neon-green/20 text-sm font-medium",children:x},v)):a.jsx("span",{className:"text-xs text-white/20",children:"Click words above to build sentence..."})}),a.jsx("div",{className:"flex justify-end gap-2 mt-2",children:d.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:f,className:"text-xs text-neon-orange hover:text-neon-orange/80 px-2 py-1 rounded-lg bg-neon-orange/5 border border-neon-orange/10",children:"Undo"}),a.jsx("button",{type:"button",onClick:()=>s(x=>({...x,[e]:""})),className:"text-xs text-red-400 hover:text-red-300 px-2 py-1 rounded-lg bg-red-500/5 border border-red-500/10",children:"Clear"})]})})]})]})}const kF=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],z2=["January","February","March","April","May","June","July","August","September","October","November","December"],ea={quiz:{bg:"bg-neon-blue/20",text:"text-neon-blue",dot:"bg-neon-blue"},exam:{bg:"bg-red-500/20",text:"text-red-400",dot:"bg-red-500"},essay:{bg:"bg-neon-purple/20",text:"text-neon-purple",dot:"bg-neon-purple"},homework:{bg:"bg-amber-400/20",text:"text-amber-400",dot:"bg-amber-400"},project:{bg:"bg-pink-500/20",text:"text-pink-400",dot:"bg-pink-500"},assignment:{bg:"bg-neon-green/20",text:"text-neon-green",dot:"bg-neon-green"}};function DF(){const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s}=bn(),i=vn(),r=t==null?void 0:t.uid,[o,l]=D.useState(new Date),[c,d]=D.useState(null),h=e.filter(A=>{var w;return(w=A.students)==null?void 0:w.includes(r)}),m=h.map(A=>A.id),f=n.filter(A=>m.includes(A.classId)),x=D.useMemo(()=>{const A={};return f.forEach(w=>{if(!w.dueDate)return;const k=new Date(w.dueDate).toDateString();A[k]||(A[k]=[]),A[k].push(w)}),A},[f]),v=o.getFullYear(),C=o.getMonth(),R=new Date(v,C,1).getDay(),S=new Date(v,C+1,0).getDate(),y=new Date;y.setHours(0,0,0,0);const _=[];for(let A=0;A<R;A++)_.push(null);for(let A=1;A<=S;A++)_.push(A);const I=()=>l(new Date(v,C-1,1)),M=()=>l(new Date(v,C+1,1)),L=()=>{l(new Date),d(new Date().toDateString())},T=c?x[c]||[]:[],p=new Date(y);p.setDate(p.getDate()+7);const N=f.filter(A=>{const w=new Date(A.dueDate);return w>=y&&w<=p}).sort((A,w)=>new Date(A.dueDate)-new Date(w.dueDate)),E={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},j={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Calendar",subtitle:`${z2[C]} ${v}`}),a.jsx(K.div,{variants:E,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(K.div,{variants:j,className:"lg:col-span-2 glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("button",{onClick:I,className:"w-9 h-9 rounded-lg bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white hover:border-neon-blue/30 transition-all",children:a.jsx(ca,{size:18})}),a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold text-white",children:[z2[C]," ",v]}),a.jsx("button",{onClick:L,className:"text-xs text-neon-blue hover:text-neon-blue/80 transition-colors",children:"Today"})]}),a.jsx("button",{onClick:M,className:"w-9 h-9 rounded-lg bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white hover:border-neon-blue/30 transition-all",children:a.jsx(au,{size:18})})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:kF.map(A=>a.jsx("div",{className:"text-center text-[10px] sm:text-xs font-bold text-white/30 uppercase tracking-wider py-2",children:A},A))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:_.map((A,w)=>{if(A===null)return a.jsx("div",{},`empty-${w}`);const k=new Date(v,C,A),O=k.toDateString(),V=O===y.toDateString(),U=O===c,z=x[O]||[],W=z.length>0,F=k<y,Z=z.some(pe=>!s.find(Se=>Se.assignmentId===pe.id&&Se.studentId===r)&&F);return a.jsxs("button",{onClick:()=>d(O),className:`relative aspect-square rounded-xl flex flex-col items-center justify-center transition-all text-sm
                                            ${U?"bg-neon-blue/15 border-2 border-neon-blue shadow-[0_0_20px_rgba(0,209,255,0.15)]":V?"bg-neon-blue/5 border border-neon-blue/30":W?"bg-white/[0.02] border border-white/[0.06] hover:border-neon-blue/20":"border border-transparent hover:bg-white/[0.02]"}
                                            ${F&&!V?"opacity-50":""}`,children:[a.jsx("span",{className:`font-semibold text-xs sm:text-sm ${V?"text-neon-blue":U?"text-white":"text-white/60"}`,children:A}),W&&a.jsx("div",{className:"flex gap-0.5 mt-1",children:z.slice(0,3).map((pe,fe)=>{const Se=ea[pe.type]||ea.assignment;return a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Se.dot}`},fe)})}),Z&&a.jsx("div",{className:"absolute top-0.5 right-0.5 w-2 h-2 rounded-full bg-red-500 animate-pulse"})]},A)})}),a.jsx("div",{className:"flex flex-wrap gap-3 mt-4 pt-4 border-t border-white/[0.06]",children:Object.entries(ea).map(([A,w])=>a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${w.dot}`}),a.jsx("span",{className:"text-[10px] text-white/30 capitalize",children:A})]},A))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(K.div,{variants:j,className:"glass-card p-4 sm:p-5",children:[a.jsxs("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(l4,{size:14,className:"text-neon-blue"}),c?new Date(c).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}):"Select a day"]}),c?T.length>0?a.jsx("div",{className:"space-y-2",children:T.map(A=>{const w=h.find(V=>V.id===A.classId),k=s.find(V=>V.assignmentId===A.id&&V.studentId===r),O=ea[A.type]||ea.assignment;return a.jsx("button",{onClick:()=>i(`/assignments/${A.id}`),className:"w-full text-left p-3 rounded-xl bg-white/[0.02] border border-white/[0.06] hover:border-neon-blue/20 transition-all group",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg ${O.bg} flex items-center justify-center shrink-0`,children:a.jsx("div",{className:`w-2 h-2 rounded-full ${O.dot}`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:A.title}),a.jsxs("p",{className:"text-[10px] text-white/30",children:[w==null?void 0:w.name,"  ",A.totalPoints||0," pts"]})]}),k?a.jsx(zt,{size:14,className:"text-neon-green shrink-0 mt-1"}):a.jsx(Jn,{size:14,className:"text-white/20 shrink-0 mt-1"})]})},A.id)})}):a.jsx("p",{className:"text-sm text-white/20 text-center py-4",children:"No assignments due"}):a.jsx("p",{className:"text-sm text-white/20 text-center py-4",children:"Click a date to see details"})]}),a.jsxs(K.div,{variants:j,className:"glass-card p-4 sm:p-5",children:[a.jsxs("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(Jn,{size:14,className:"text-neon-orange"})," This Week (",N.length,")"]}),N.length===0?a.jsx("p",{className:"text-sm text-white/20 text-center py-4",children:"Nothing due this week! "}):a.jsx("div",{className:"space-y-2",children:N.map(A=>{const w=h.find(z=>z.id===A.classId),k=new Date(A.dueDate),O=Math.ceil((k-y)/(1e3*60*60*24)),V=s.find(z=>z.assignmentId===A.id&&z.studentId===r),U=ea[A.type]||ea.assignment;return a.jsx("button",{onClick:()=>i(`/assignments/${A.id}`),className:"w-full text-left p-3 rounded-xl bg-white/[0.02] border border-white/[0.06] hover:border-neon-blue/20 transition-all",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-2 h-full min-h-[32px] rounded-full ${U.dot}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-white/80 font-medium truncate",children:A.title}),a.jsx("p",{className:"text-[10px] text-white/30",children:w==null?void 0:w.name})]}),V?a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-neon-green/10 text-neon-green border border-neon-green/20 font-bold",children:"Done"}):a.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${O<=1?"bg-red-500/10 text-red-400 border border-red-500/20":O<=3?"bg-neon-orange/10 text-neon-orange border border-neon-orange/20":"bg-white/[0.03] text-white/30 border border-white/5"}`,children:[O,"d"]})]})},A.id)})})]})]})]})})]})}const Lp=[{id:"first-sub",icon:w4,label:"First Steps",desc:"Submit your first assignment",color:"neon-blue",gradient:"from-neon-blue to-cyan-400",check:t=>t.totalSubs>=1},{id:"five-subs",icon:fa,label:"Getting Started",desc:"Submit 5 assignments",color:"neon-green",gradient:"from-neon-green to-emerald-400",check:t=>t.totalSubs>=5},{id:"ten-subs",icon:cu,label:"On Fire",desc:"Submit 10 assignments",color:"neon-orange",gradient:"from-neon-orange to-amber-400",check:t=>t.totalSubs>=10},{id:"twenty-subs",icon:kB,label:"Unstoppable",desc:"Submit 20 assignments",color:"neon-purple",gradient:"from-neon-purple to-fuchsia-400",check:t=>t.totalSubs>=20},{id:"perfect-score",icon:C0,label:"Perfectionist",desc:"Get a perfect score",color:"amber-400",gradient:"from-amber-400 to-yellow-300",check:t=>t.perfectScores>=1},{id:"five-perfect",icon:$u,label:"Gold Standard",desc:"Get 5 perfect scores",color:"amber-400",gradient:"from-amber-500 to-orange-400",check:t=>t.perfectScores>=5},{id:"avg-90",icon:Fu,label:"Honor Roll",desc:"Maintain 90%+ average",color:"neon-green",gradient:"from-neon-green to-teal-400",check:t=>t.avgGrade>=90},{id:"streak-3",icon:Rc,label:"Streak 3",desc:"3-day activity streak",color:"neon-orange",gradient:"from-orange-500 to-red-400",check:t=>t.streak>=3},{id:"streak-7",icon:Rc,label:"Weekly Warrior",desc:"7-day activity streak",color:"red-400",gradient:"from-red-500 to-pink-500",check:t=>t.streak>=7},{id:"streak-14",icon:Rc,label:"Legendary",desc:"14-day activity streak",color:"neon-purple",gradient:"from-purple-500 to-pink-500",check:t=>t.streak>=14},{id:"multi-class",icon:At,label:"Scholar",desc:"Join 3+ classes",color:"neon-blue",gradient:"from-blue-500 to-indigo-400",check:t=>t.classCount>=3},{id:"early-bird",icon:zt,label:"Early Bird",desc:"Submit 5 before deadline",color:"neon-green",gradient:"from-green-400 to-lime-400",check:t=>t.earlySubmissions>=5}],MF=t=>{const e=Math.floor(t/200)+1,n=t%200;return{level:e,xpInLevel:n,xpForNext:200,totalXP:t}},U2=["Beginner","Apprentice","Student","Scholar","Expert","Master","Grand Master","Legend","Champion","Mythic"];function OF(){const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,getStudentStreak:i,getLeaderboard:r,allStudents:o}=bn(),[l,c]=D.useState("badges"),[d,h]=D.useState("all"),m=t==null?void 0:t.uid,f=e.filter(p=>{var N;return(N=p.students)==null?void 0:N.includes(m)}),x=s.filter(p=>p.studentId===m),v=i(m),C=D.useMemo(()=>{const p=x.filter(A=>A.grade!=null),N=p.length>0?Math.round(p.reduce((A,w)=>{const k=n.find(V=>V.id===w.assignmentId),O=(k==null?void 0:k.totalPoints)||100;return A+w.grade/O*100},0)/p.length):0,E=p.filter(A=>{const w=n.find(k=>k.id===A.assignmentId);return w&&A.grade>=(w.totalPoints||100)}).length,j=x.filter(A=>{const w=n.find(k=>k.id===A.assignmentId);return!w||!w.dueDate||!A.submittedAt?!1:new Date(A.submittedAt)<new Date(w.dueDate)}).length;return{totalSubs:x.length,gradedCount:p.length,avgGrade:N,perfectScores:E,earlySubmissions:j,streak:v,classCount:f.length}},[x,n,v,f.length]),R=Lp.filter(p=>p.check(C)),S=Lp.filter(p=>!p.check(C)),y=D.useMemo(()=>{let p=0;p+=x.length*50;const N=x.filter(E=>{const j=n.find(A=>A.id===E.assignmentId);return j&&E.grade!=null&&E.grade>=(j.totalPoints||100)}).length;return p+=N*100,p+=v*20,p+=R.length*30,p},[x,n,v,R.length]),_=MF(y),I=U2[Math.min(_.level-1,U2.length-1)],M=D.useMemo(()=>{const p=d==="all"?f:f.filter(E=>E.id===d),N={};return p.forEach(E=>{(E.students||[]).forEach(j=>{if(!N[j]){const A=o.find(w=>w.id===j);N[j]={id:j,name:(A==null?void 0:A.displayName)||"Student",subs:0,totalGrade:0,gradedCount:0,xp:0}}})}),s.forEach(E=>{if(!N[E.studentId])return;const j=n.find(w=>w.id===E.assignmentId);!j||!p.some(w=>w.id===j.classId)||(N[E.studentId].subs+=1,N[E.studentId].xp+=50,E.grade!=null&&(N[E.studentId].totalGrade+=E.grade,N[E.studentId].gradedCount+=1,E.grade>=(j.totalPoints||100)&&(N[E.studentId].xp+=100)))}),Object.values(N).map(E=>({...E,avgGrade:E.gradedCount>0?Math.round(E.totalGrade/E.gradedCount):0})).sort((E,j)=>j.xp-E.xp).slice(0,20)},[d,f,s,n,o]),L={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},T={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Achievements",subtitle:`Level ${_.level}  ${I}`}),a.jsxs(K.div,{variants:L,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(K.div,{variants:T,className:"glass-card p-5 sm:p-8 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-neon-purple/5 via-neon-blue/5 to-neon-green/5"}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row items-center gap-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-full bg-gradient-to-br from-neon-blue via-neon-purple to-neon-green p-[3px]",children:a.jsxs("div",{className:"w-full h-full rounded-full bg-surface-950 flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-3xl sm:text-4xl font-display font-black bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:_.level}),a.jsx("span",{className:"text-[10px] text-white/40 uppercase tracking-widest",children:"Level"})]})}),a.jsx("div",{className:"absolute -top-1 -right-1 w-8 h-8 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center shadow-lg shadow-neon-blue/30",children:a.jsx(lu,{size:14,className:"text-white"})})]}),a.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-white mb-1",children:I}),a.jsxs("p",{className:"text-sm text-white/40 mb-4",children:[y," XP total  ",R.length,"/",Lp.length," badges earned"]}),a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[a.jsxs("span",{children:["Level ",_.level]}),a.jsxs("span",{children:[_.xpInLevel,"/",_.xpForNext," XP"]}),a.jsxs("span",{children:["Level ",_.level+1]})]}),a.jsx("div",{className:"h-3 rounded-full bg-white/[0.06] border border-white/[0.08] overflow-hidden",children:a.jsx(K.div,{className:"h-full rounded-full bg-gradient-to-r from-neon-blue via-neon-purple to-neon-green",initial:{width:0},animate:{width:`${_.xpInLevel/_.xpForNext*100}%`},transition:{duration:1.2,ease:"easeOut"}})})]})]}),a.jsx("div",{className:"grid grid-cols-3 gap-3 sm:gap-4",children:[{icon:Rc,label:"Streak",value:`${v}d`,color:"neon-orange"},{icon:$u,label:"Badges",value:R.length,color:"amber-400"},{icon:Fu,label:"Avg",value:`${C.avgGrade}%`,color:"neon-green"}].map((p,N)=>a.jsxs("div",{className:"text-center p-3 rounded-xl bg-white/[0.03] border border-white/[0.06]",children:[a.jsx(p.icon,{size:18,className:`text-${p.color} mx-auto mb-1`}),a.jsx("p",{className:`text-lg font-bold text-${p.color}`,children:p.value}),a.jsx("p",{className:"text-[10px] text-white/30",children:p.label})]},N))})]})]}),a.jsx(K.div,{variants:T,className:"flex gap-2",children:[{id:"badges",label:"Badges",icon:mB},{id:"leaderboard",label:"Leaderboard",icon:C0}].map(p=>a.jsxs("button",{onClick:()=>c(p.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold transition-all ${l===p.id?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20 shadow-[0_0_20px_rgba(0,209,255,0.1)]":"bg-white/[0.02] text-white/40 border border-white/[0.06] hover:text-white/60"}`,children:[a.jsx(p.icon,{size:16}),p.label]},p.id))}),l==="badges"&&a.jsxs("div",{className:"space-y-6",children:[R.length>0&&a.jsxs(K.div,{variants:T,children:[a.jsxs("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(lu,{size:14,className:"text-neon-green"})," Earned (",R.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:R.map(p=>a.jsxs(K.div,{variants:T,className:"glass-card p-4 sm:p-5 text-center group hover:scale-[1.03] transition-transform relative overflow-hidden",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${p.gradient} opacity-5 group-hover:opacity-10 transition-opacity`}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`w-14 h-14 sm:w-16 sm:h-16 mx-auto rounded-2xl bg-gradient-to-br ${p.gradient} flex items-center justify-center mb-3 shadow-lg`,style:{boxShadow:"0 8px 30px rgba(0,0,0,0.3)"},children:a.jsx(p.icon,{size:24,className:"text-white"})}),a.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:p.label}),a.jsx("p",{className:"text-[10px] text-white/40 leading-tight",children:p.desc}),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-neon-green/10 text-neon-green border border-neon-green/20 font-bold",children:" Earned"})})]})]},p.id))})]}),S.length>0&&a.jsxs(K.div,{variants:T,children:[a.jsxs("h3",{className:"text-sm font-bold text-white/30 uppercase tracking-wider mb-3",children:["Locked (",S.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:S.map(p=>a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center opacity-50 grayscale",children:[a.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 mx-auto rounded-2xl bg-white/[0.04] border border-white/10 flex items-center justify-center mb-3",children:a.jsx(p.icon,{size:24,className:"text-white/20"})}),a.jsx("h4",{className:"text-sm font-bold text-white/40 mb-1",children:p.label}),a.jsx("p",{className:"text-[10px] text-white/20 leading-tight",children:p.desc}),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-white/[0.03] text-white/20 border border-white/5 font-bold",children:" Locked"})})]},p.id))})]})]}),l==="leaderboard"&&a.jsxs(K.div,{variants:T,className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[a.jsx("button",{onClick:()=>h("all"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition-all ${d==="all"?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06] hover:text-white/60"}`,children:"All Classes"}),f.map(p=>a.jsx("button",{onClick:()=>h(p.id),className:`px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition-all ${d===p.id?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06] hover:text-white/60"}`,children:p.name},p.id))]}),M.length>=3&&a.jsx("div",{className:"flex items-end justify-center gap-3 py-4",children:[M[1],M[0],M[2]].map((p,N)=>{const E=N===1?1:N===0?2:3,j=E===1?"h-32":E===2?"h-24":"h-20",A=E===1?"from-amber-400 to-yellow-500 border-amber-400/30":E===2?"from-slate-300 to-slate-400 border-slate-300/30":"from-amber-700 to-orange-800 border-amber-700/30",w=p.id===m;return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br ${A} flex items-center justify-center text-white font-bold text-sm mb-2 ${w?"ring-2 ring-neon-blue ring-offset-2 ring-offset-surface-950":""}`,children:E===1?a.jsx(C0,{size:20}):E}),a.jsx("p",{className:`text-xs font-bold mb-1 ${w?"text-neon-blue":"text-white"} text-center truncate max-w-[80px]`,children:p.name}),a.jsxs("p",{className:"text-[10px] text-white/40 mb-2",children:[p.xp," XP"]}),a.jsx("div",{className:`w-20 sm:w-24 ${j} rounded-t-xl bg-gradient-to-b ${A} border border-b-0 flex items-center justify-center`,children:a.jsxs("span",{className:"text-white font-black text-2xl",children:["#",E]})})]},p.id)})}),a.jsxs("div",{className:"glass-card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/[0.06]",children:[a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold w-12",children:"#"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold",children:"Student"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold text-center",children:"XP"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold text-center",children:"Subs"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold text-center hidden sm:table-cell",children:"Avg"})]})}),a.jsx("tbody",{children:M.map((p,N)=>{var A,w;const E=p.id===m,j=N===0?"text-amber-400":N===1?"text-slate-300":N===2?"text-amber-700":"text-white/30";return a.jsxs("tr",{className:`border-b border-white/[0.03] transition-colors ${E?"bg-neon-blue/[0.04]":"hover:bg-white/[0.02]"}`,children:[a.jsx("td",{className:`px-4 py-3 font-bold text-sm ${j}`,children:N+1}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs ${E?"bg-neon-blue/20 text-neon-blue border border-neon-blue/30":"bg-white/[0.04] text-white/40 border border-white/10"}`,children:((w=(A=p.name)==null?void 0:A[0])==null?void 0:w.toUpperCase())||"?"}),a.jsxs("span",{className:`text-sm font-medium ${E?"text-neon-blue":"text-white/70"}`,children:[p.name," ",E&&a.jsx("span",{className:"text-[10px] text-neon-blue/60",children:"(You)"})]})]})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("span",{className:"text-sm font-bold text-neon-purple",children:p.xp})}),a.jsx("td",{className:"px-4 py-3 text-center text-sm text-white/50",children:p.subs}),a.jsxs("td",{className:"px-4 py-3 text-center text-sm text-white/50 hidden sm:table-cell",children:[p.avgGrade,"%"]})]},p.id)})})]})}),M.length===0&&a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"No students to rank yet."})]})]})]})]})}const kc=[{value:"multiple-choice",label:"Multiple Choice",icon:zt},{value:"true-false",label:"True/False",icon:zt},{value:"fill-in-blank",label:"Fill in Blank",icon:th},{value:"short-answer",label:"Short Answer",icon:v4},{value:"essay",label:"Essay",icon:om},{value:"ordering",label:"Ordering",icon:x4}],j4=["Grammar","Vocabulary","Reading","Writing","Listening","Speaking","Pronunciation","Culture","Custom"];function VF(){const{user:t}=ft(),{assignments:e,addAssignment:n,classes:s}=bn(),i=xs(),[r,o]=D.useState(()=>{const w=localStorage.getItem(`qbank_${t==null?void 0:t.uid}`);return w?JSON.parse(w):[]}),[l,c]=D.useState(""),[d,h]=D.useState("all"),[m,f]=D.useState("all"),[x,v]=D.useState(!1),[C,R]=D.useState(null),[S,y]=D.useState(!1),[_,I]=D.useState([]),M=w=>{o(w),localStorage.setItem(`qbank_${t==null?void 0:t.uid}`,JSON.stringify(w))},L=D.useMemo(()=>r.filter(w=>!(d!=="all"&&w.type!==d||m!=="all"&&w.category!==m||l&&!w.text.toLowerCase().includes(l.toLowerCase())&&!(w.tags||[]).some(k=>k.toLowerCase().includes(l.toLowerCase())))),[r,l,d,m]),T=w=>{if(C){const k=r.map(O=>O.id===C.id?{...w,id:C.id,updatedAt:new Date().toISOString()}:O);M(k),i.success("Question updated!")}else{const k={...w,id:`qb_${Date.now()}`,createdAt:new Date().toISOString()};M([k,...r]),i.success("Question saved to bank!")}v(!1),R(null)},p=w=>{M(r.filter(k=>k.id!==w)),I(_.filter(k=>k!==w)),i.success("Question deleted")},N=w=>{I(k=>k.includes(w)?k.filter(O=>O!==w):[...k,w])},E=async w=>{try{let k=r;w.category!=="all"&&(k=k.filter(z=>z.category===w.category)),w.type!=="all"&&(k=k.filter(z=>z.type===w.type));const V=[...k].sort(()=>Math.random()-.5).slice(0,w.count);if(V.length===0){i.error("No questions match your filters!");return}const U=V.map((z,W)=>{const F={id:`q${Date.now()}_${W}`,text:z.text,type:z.type,points:z.points||10};return z.type==="multiple-choice"?(F.options=[...z.options],F.correctAnswer=z.correctAnswer):z.type==="true-false"?(F.options=["True","False"],F.correctAnswer=z.correctAnswer):z.type==="fill-in-blank"?F.correctText=z.correctText:z.type==="ordering"?F.items=[...z.items||[]]:F.options=[],F});await n({title:w.title||`Auto Quiz - ${new Date().toLocaleDateString()}`,description:`Auto-generated quiz with ${V.length} questions from the question bank.`,classId:w.classId,type:"quiz",dueDate:new Date(w.dueDate).toISOString(),totalPoints:U.reduce((z,W)=>z+(W.points||10),0),questions:U,timeLimit:w.timeLimit||0}),i.success(`Quiz created with ${V.length} questions!`),y(!1)}catch{i.error("Failed to create quiz")}},j={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},A={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Question Bank",subtitle:`${r.length} questions saved`,actions:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(lm,{size:14})," Generate Quiz"]}),a.jsxs("button",{onClick:()=>{R(null),v(!0)},className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(nn,{size:16})," Add Question"]})]})}),a.jsxs(K.div,{variants:j,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-4 max-w-7xl mx-auto",children:[a.jsxs(K.div,{variants:A,className:"flex flex-wrap gap-3 items-center",children:[a.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[a.jsx(ki,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20"}),a.jsx("input",{placeholder:"Search questions or tags...",value:l,onChange:w=>c(w.target.value),className:"input-glass w-full pl-9 text-sm"})]}),a.jsxs("select",{value:d,onChange:w=>h(w.target.value),className:"input-glass text-sm min-w-[140px]",children:[a.jsx("option",{value:"all",children:"All Types"}),kc.map(w=>a.jsx("option",{value:w.value,children:w.label},w.value))]}),a.jsxs("select",{value:m,onChange:w=>f(w.target.value),className:"input-glass text-sm min-w-[140px]",children:[a.jsx("option",{value:"all",children:"All Categories"}),j4.map(w=>a.jsx("option",{value:w,children:w},w))]})]}),a.jsx(K.div,{variants:A,className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Total",value:r.length,color:"neon-blue"},{label:"MC/TF",value:r.filter(w=>w.type==="multiple-choice"||w.type==="true-false").length,color:"neon-green"},{label:"Manual",value:r.filter(w=>w.type==="essay"||w.type==="short-answer").length,color:"neon-purple"},{label:"Categories",value:[...new Set(r.map(w=>w.category).filter(Boolean))].length,color:"neon-orange"}].map((w,k)=>a.jsxs("div",{className:"glass-card p-3 text-center",children:[a.jsx("p",{className:`text-xl font-bold text-${w.color}`,children:w.value}),a.jsx("p",{className:"text-[10px] text-white/30",children:w.label})]},k))}),a.jsx("div",{className:"space-y-3",children:L.length===0?a.jsxs(K.div,{variants:A,className:"glass-card p-12 text-center",children:[a.jsx(u4,{size:40,className:"text-white/10 mx-auto mb-3"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No questions found."}),a.jsx("button",{onClick:()=>v(!0),className:"mt-3 text-neon-blue text-sm hover:text-neon-blue/80",children:"Create your first question "})]}):L.map(w=>{const k=kc.find(V=>V.value===w.type)||kc[0],O=_.includes(w.id);return a.jsx(K.div,{variants:A,className:`glass-card p-4 hover:border-white/10 transition-all ${O?"border-neon-blue/30 bg-neon-blue/[0.03]":""}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:()=>N(w.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 mt-0.5 transition-all ${O?"border-neon-blue bg-neon-blue":"border-white/10 hover:border-white/30"}`,children:O&&a.jsx("div",{className:"w-2 h-2 rounded-sm bg-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-neon-blue/10 text-neon-blue border border-neon-blue/20 font-bold uppercase",children:k.label}),w.category&&a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-neon-purple/10 text-neon-purple border border-neon-purple/20",children:w.category}),(w.tags||[]).map(V=>a.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-white/[0.03] text-white/30 border border-white/5",children:["#",V]},V)),a.jsxs("span",{className:"text-[10px] text-white/20 ml-auto",children:[w.points||10," pts"]})]}),a.jsx("p",{className:"text-sm text-white/80 font-medium",children:w.text}),w.type==="multiple-choice"&&w.options&&a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:w.options.map((V,U)=>a.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded ${U===w.correctAnswer?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-white/[0.02] text-white/30 border border-white/5"}`,children:V},U))})]}),a.jsxs("div",{className:"flex gap-1 shrink-0",children:[a.jsx("button",{onClick:()=>{R(w),v(!0)},className:"p-1.5 rounded-lg text-white/20 hover:text-neon-blue hover:bg-neon-blue/10 transition-all",children:a.jsx(cf,{size:14})}),a.jsx("button",{onClick:()=>p(w.id),className:"p-1.5 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",children:a.jsx(zr,{size:14})})]})]})},w.id)})})]}),a.jsxs(Xn,{children:[x&&a.jsx(PF,{question:C,onSave:T,onClose:()=>{v(!1),R(null)}}),S&&a.jsx(LF,{classes:s,categories:[...new Set(r.map(w=>w.category).filter(Boolean))],onGenerate:E,onClose:()=>y(!1)})]})]})}function PF({question:t,onSave:e,onClose:n}){const[s,i]=D.useState((t==null?void 0:t.text)||""),[r,o]=D.useState((t==null?void 0:t.type)||"multiple-choice"),[l,c]=D.useState((t==null?void 0:t.category)||""),[d,h]=D.useState(((t==null?void 0:t.tags)||[]).join(", ")),[m,f]=D.useState((t==null?void 0:t.points)||10),[x,v]=D.useState((t==null?void 0:t.options)||["","","",""]),[C,R]=D.useState((t==null?void 0:t.correctAnswer)||0),[S,y]=D.useState((t==null?void 0:t.correctText)||""),[_,I]=D.useState((t==null?void 0:t.items)||["","",""]),M=L=>{if(L.preventDefault(),!s.trim())return;const T={text:s,type:r,category:l,points:Number(m),tags:d.split(",").map(p=>p.trim()).filter(Boolean)};r==="multiple-choice"?(T.options=x,T.correctAnswer=C):r==="true-false"?(T.options=["True","False"],T.correctAnswer=C):r==="fill-in-blank"?T.correctText=S:r==="ordering"&&(T.items=_),e(T)};return a.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:n,children:a.jsxs(K.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"glass-card p-6 w-full max-w-lg max-h-[85vh] overflow-y-auto",onClick:L=>L.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:t?"Edit Question":"Add Question"}),a.jsx("button",{onClick:n,className:"p-1 text-white/30 hover:text-white",children:a.jsx(on,{size:18})})]}),a.jsxs("form",{onSubmit:M,className:"space-y-4",children:[a.jsx("textarea",{value:s,onChange:L=>i(L.target.value),placeholder:"Question text...",className:"input-glass w-full min-h-[80px] resize-none text-sm",required:!0}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("select",{value:r,onChange:L=>o(L.target.value),className:"input-glass text-sm",children:kc.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))}),a.jsxs("select",{value:l,onChange:L=>c(L.target.value),className:"input-glass text-sm",children:[a.jsx("option",{value:"",children:"Category..."}),j4.map(L=>a.jsx("option",{value:L,children:L},L))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("input",{type:"number",value:m,onChange:L=>f(L.target.value),placeholder:"Points",className:"input-glass text-sm"}),a.jsx("input",{value:d,onChange:L=>h(L.target.value),placeholder:"Tags (comma separated)",className:"input-glass text-sm"})]}),r==="multiple-choice"&&a.jsx("div",{className:"space-y-2",children:x.map((L,T)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>R(T),className:`w-5 h-5 rounded-full border-2 shrink-0 ${T===C?"border-neon-green bg-neon-green":"border-white/10"}`}),a.jsx("input",{value:L,onChange:p=>{const N=[...x];N[T]=p.target.value,v(N)},placeholder:`Option ${T+1}`,className:"input-glass flex-1 text-sm"})]},T))}),r==="true-false"&&a.jsx("div",{className:"flex gap-3",children:["True","False"].map((L,T)=>a.jsx("button",{type:"button",onClick:()=>R(T),className:`flex-1 p-3 rounded-xl border text-sm ${T===C?"bg-neon-green/10 border-neon-green text-neon-green":"bg-white/[0.02] border-white/5 text-white/40"}`,children:L},L))}),r==="fill-in-blank"&&a.jsx("input",{value:S,onChange:L=>y(L.target.value),placeholder:"Correct answer...",className:"input-glass w-full text-sm"}),r==="ordering"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Items in correct order:"}),_.map((L,T)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-neon-blue font-bold w-4",children:T+1}),a.jsx("input",{value:L,onChange:p=>{const N=[..._];N[T]=p.target.value,I(N)},placeholder:`Item ${T+1}`,className:"input-glass flex-1 text-sm"}),_.length>2&&a.jsx("button",{type:"button",onClick:()=>I(_.filter((p,N)=>N!==T)),className:"text-white/10 hover:text-red-400",children:a.jsx(on,{size:14})})]},T)),a.jsxs("button",{type:"button",onClick:()=>I([..._,""]),className:"text-xs text-neon-blue",children:[a.jsx(nn,{size:12,className:"inline"})," Add item"]})]}),a.jsx("button",{type:"submit",className:"btn-neon w-full py-2.5 text-sm",children:t?"Update Question":"Save to Bank"})]})]})})}function LF({classes:t,categories:e,onGenerate:n,onClose:s}){var y;const[i,r]=D.useState(""),[o,l]=D.useState(((y=t[0])==null?void 0:y.id)||""),[c,d]=D.useState(10),[h,m]=D.useState("all"),[f,x]=D.useState("all"),[v,C]=D.useState(""),[R,S]=D.useState(0);return a.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:s,children:a.jsxs(K.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"glass-card p-6 w-full max-w-md",onClick:_=>_.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[a.jsx(lm,{size:18,className:"text-neon-blue"})," Generate Quiz"]}),a.jsx("button",{onClick:s,className:"p-1 text-white/30 hover:text-white",children:a.jsx(on,{size:18})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{value:i,onChange:_=>r(_.target.value),placeholder:"Quiz title (optional)",className:"input-glass w-full text-sm"}),a.jsx("select",{value:o,onChange:_=>l(_.target.value),className:"input-glass w-full text-sm",children:t.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-white/30 mb-1 block",children:"# Questions"}),a.jsx("input",{type:"number",value:c,onChange:_=>d(Number(_.target.value)),min:1,max:50,className:"input-glass w-full text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-white/30 mb-1 block",children:"Time Limit (min)"}),a.jsx("input",{type:"number",value:R,onChange:_=>S(Number(_.target.value)),min:0,className:"input-glass w-full text-sm",placeholder:"0 = none"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("select",{value:h,onChange:_=>m(_.target.value),className:"input-glass text-sm",children:[a.jsx("option",{value:"all",children:"All Categories"}),e.map(_=>a.jsx("option",{value:_,children:_},_))]}),a.jsxs("select",{value:f,onChange:_=>x(_.target.value),className:"input-glass text-sm",children:[a.jsx("option",{value:"all",children:"All Types"}),kc.map(_=>a.jsx("option",{value:_.value,children:_.label},_.value))]})]}),a.jsx("input",{type:"date",value:v,onChange:_=>C(_.target.value),className:"input-glass w-full text-sm"}),a.jsx("button",{onClick:()=>n({title:i,classId:o,count:c,category:h,type:f,dueDate:v||new Date(Date.now()+7*864e5).toISOString(),timeLimit:R}),className:"btn-neon w-full py-2.5 text-sm",disabled:!o,children:" Generate Random Quiz"})]})]})})}function zF(){var L,T;const{user:t}=ft(),{classes:e,assignments:n,submissions:s,allStudents:i,exportClassGrades:r}=bn(),o=xs(),[l,c]=D.useState(((L=e[0])==null?void 0:L.id)||"all"),[d,h]=D.useState("overview"),m=l==="all"?e:e.filter(p=>p.id===l),f=m.map(p=>p.id),x=n.filter(p=>f.includes(p.classId)),v=s.filter(p=>x.some(N=>N.id===p.assignmentId)),C=D.useMemo(()=>{const p=v.filter(w=>w.grade!=null),N=new Set;m.forEach(w=>(w.students||[]).forEach(k=>N.add(k)));const E=p.length>0?Math.round(p.reduce((w,k)=>{const O=x.find(U=>U.id===k.assignmentId),V=(O==null?void 0:O.totalPoints)||100;return w+k.grade/V*100},0)/p.length):0,j=x.length>0&&N.size>0?Math.round(v.length/(x.length*N.size)*100):0,A=v.filter(w=>w.status==="pending"||w.grade==null).length;return{totalStudents:N.size,totalAssignments:x.length,totalSubmissions:v.length,avgGrade:E,submissionRate:j,pendingGrading:A,gradedCount:p.length}},[m,x,v]),R=D.useMemo(()=>x.map(p=>{const N=v.filter(z=>z.assignmentId===p.id),E=N.filter(z=>z.grade!=null),j=p.totalPoints||100,A=E.length>0?Math.round(E.reduce((z,W)=>z+W.grade/j*100,0)/E.length):null,w=E.length>0?Math.max(...E.map(z=>Math.round(z.grade/j*100))):null,k=E.length>0?Math.min(...E.map(z=>Math.round(z.grade/j*100))):null,O=e.find(z=>z.id===p.classId),V=((O==null?void 0:O.students)||[]).length,U=(p.questions||[]).map((z,W)=>{var fe;const F=N.map(Se=>{var Te;return(Te=Se.answers)==null?void 0:Te[W]}).filter(Boolean);let Z=0;if(z.type==="multiple-choice"||z.type==="true-false"){const Se=(fe=z.options)==null?void 0:fe[z.correctAnswer];Z=F.filter(Te=>Te===Se).length}else z.type==="fill-in-blank"?Z=F.filter(Se=>(Se||"").trim().toLowerCase()===(z.correctText||"").trim().toLowerCase()).length:z.type==="ordering"&&(Z=F.filter(Se=>JSON.stringify(Se)===JSON.stringify(z.items||[])).length);const pe=F.length>0?Math.round(Z/F.length*100):null;return{question:z.text,type:z.type,successRate:pe,total:F.length,correct:Z}});return{id:p.id,title:p.title,type:p.type,className:(O==null?void 0:O.name)||"Unknown",submitted:N.length,total:V,avgScore:A,highScore:w,lowScore:k,questionStats:U}}).sort((p,N)=>(p.avgScore??101)-(N.avgScore??101)),[x,v,e]),S=D.useMemo(()=>{const p=new Set;return m.forEach(N=>(N.students||[]).forEach(E=>p.add(E))),[...p].map(N=>{const E=i.find(k=>k.id===N),j=v.filter(k=>k.studentId===N),A=j.filter(k=>k.grade!=null),w=A.length>0?Math.round(A.reduce((k,O)=>{const V=x.find(U=>U.id===O.assignmentId);return k+O.grade/((V==null?void 0:V.totalPoints)||100)*100},0)/A.length):null;return{id:N,name:(E==null?void 0:E.displayName)||"Student",email:(E==null?void 0:E.email)||"",submitted:j.length,totalAssignments:x.length,avgGrade:w,gradedCount:A.length}}).sort((N,E)=>(E.avgGrade??-1)-(N.avgGrade??-1))},[m,v,x,i]),y=()=>{var p;try{const N=["Student","Email","Submitted","Graded","Average Grade"],E=S.map(O=>[O.name,O.email,O.submitted,O.gradedCount,O.avgGrade??"N/A"]),j=[N,...E].map(O=>O.map(V=>`"${V}"`).join(",")).join(`
`),A=new Blob([j],{type:"text/csv"}),w=URL.createObjectURL(A),k=document.createElement("a");k.href=w,k.download=`report_${l==="all"?"all":((p=m[0])==null?void 0:p.name)||"class"}_${new Date().toLocaleDateString()}.csv`,k.click(),URL.revokeObjectURL(w),o.success("CSV exported!")}catch{o.error("Export failed")}},_=D.useMemo(()=>{const p=[];return R.forEach(N=>{N.questionStats.forEach((E,j)=>{E.successRate!==null&&E.successRate<50&&p.push({...E,assignmentTitle:N.title,assignmentId:N.id})})}),p.sort((N,E)=>(N.successRate??100)-(E.successRate??100)).slice(0,10)},[R]),I={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},M={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Reports & Analytics",subtitle:l==="all"?"All classes":(T=m[0])==null?void 0:T.name,actions:a.jsxs("button",{onClick:y,className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(d4,{size:16})," Export CSV"]})}),a.jsxs(K.div,{variants:I,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(K.div,{variants:M,className:"flex flex-wrap gap-3",children:[a.jsxs("select",{value:l,onChange:p=>c(p.target.value),className:"input-glass text-sm",children:[a.jsx("option",{value:"all",children:"All Classes"}),e.map(p=>a.jsx("option",{value:p.id,children:p.name},p.id))]}),[{id:"overview",label:"Overview",icon:c4},{id:"assignments",label:"Assignments",icon:om},{id:"students",label:"Students",icon:Dn},{id:"questions",label:"Hard Questions",icon:Di}].map(p=>a.jsxs("button",{onClick:()=>h(p.id),className:`flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-semibold transition-all ${d===p.id?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06] hover:text-white/60"}`,children:[a.jsx(p.icon,{size:14})," ",p.label]},p.id))]}),d==="overview"&&a.jsxs(a.Fragment,{children:[a.jsx(K.div,{variants:M,className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[{label:"Students",value:C.totalStudents,icon:Dn,color:"neon-blue"},{label:"Avg Grade",value:`${C.avgGrade}%`,icon:Fu,color:"neon-green"},{label:"Submit Rate",value:`${C.submissionRate}%`,icon:zt,color:"neon-purple"},{label:"Pending",value:C.pendingGrading,icon:Di,color:"neon-orange"}].map((p,N)=>a.jsxs("div",{className:"glass-card p-4 group hover:scale-[1.02] transition-transform",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg bg-${p.color}/10 border border-${p.color}/20 flex items-center justify-center`,children:a.jsx(p.icon,{size:16,className:`text-${p.color}`})}),a.jsx("p",{className:"text-xs text-white/40",children:p.label})]}),a.jsx("p",{className:`text-2xl font-display font-black text-${p.color}`,children:p.value})]},N))}),a.jsxs(K.div,{variants:M,className:"glass-card p-5",children:[a.jsxs("h3",{className:"text-sm font-bold text-white/60 uppercase mb-4 flex items-center gap-2",children:[a.jsx(Ii,{size:14,className:"text-neon-blue"})," Grade Distribution"]}),a.jsx("div",{className:"space-y-2",children:[{label:"A (90-100%)",min:90,max:101,color:"bg-neon-green"},{label:"B (80-89%)",min:80,max:90,color:"bg-neon-blue"},{label:"C (70-79%)",min:70,max:80,color:"bg-neon-orange"},{label:"D (60-69%)",min:60,max:70,color:"bg-amber-500"},{label:"F (0-59%)",min:0,max:60,color:"bg-red-500"}].map(p=>{const N=v.filter(A=>A.grade!=null),E=N.filter(A=>{const w=x.find(O=>O.id===A.assignmentId),k=A.grade/((w==null?void 0:w.totalPoints)||100)*100;return k>=p.min&&k<p.max}).length,j=N.length>0?E/N.length*100:0;return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs text-white/40 w-24 shrink-0",children:p.label}),a.jsx("div",{className:"flex-1 h-6 rounded-lg bg-white/[0.03] overflow-hidden border border-white/[0.04]",children:a.jsx(K.div,{className:`h-full rounded-lg ${p.color}/80`,initial:{width:0},animate:{width:`${j}%`},transition:{duration:.8,ease:"easeOut"}})}),a.jsxs("span",{className:"text-xs text-white/30 w-12 text-right",children:[E," (",Math.round(j),"%)"]})]},p.label)})})]})]}),d==="assignments"&&a.jsxs(K.div,{variants:M,className:"glass-card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/[0.06]",children:[a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30",children:"Assignment"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Class"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Submitted"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Avg"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center hidden sm:table-cell",children:"High"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center hidden sm:table-cell",children:"Low"})]})}),a.jsx("tbody",{children:R.map(p=>{const N=p.avgScore===null?"text-white/20":p.avgScore>=80?"text-neon-green":p.avgScore>=60?"text-neon-orange":"text-red-400";return a.jsxs("tr",{className:"border-b border-white/[0.03] hover:bg-white/[0.02] transition-colors",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-white/70",children:p.title}),a.jsx("td",{className:"px-4 py-3 text-xs text-white/40 text-center",children:p.className}),a.jsxs("td",{className:"px-4 py-3 text-sm text-center text-white/50",children:[p.submitted,"/",p.total]}),a.jsx("td",{className:`px-4 py-3 text-sm text-center font-bold ${N}`,children:p.avgScore!==null?`${p.avgScore}%`:""}),a.jsx("td",{className:"px-4 py-3 text-sm text-center text-neon-green/60 hidden sm:table-cell",children:p.highScore!==null?`${p.highScore}%`:""}),a.jsx("td",{className:"px-4 py-3 text-sm text-center text-red-400/60 hidden sm:table-cell",children:p.lowScore!==null?`${p.lowScore}%`:""})]},p.id)})})]})}),R.length===0&&a.jsx("p",{className:"text-sm text-white/20 text-center py-8",children:"No assignments yet"})]}),d==="students"&&a.jsxs(K.div,{variants:M,className:"glass-card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/[0.06]",children:[a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30",children:"#"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30",children:"Student"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Submitted"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Avg Grade"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center hidden sm:table-cell",children:"Status"})]})}),a.jsx("tbody",{children:S.map((p,N)=>{const E=p.avgGrade===null?"text-white/20":p.avgGrade>=80?"text-neon-green":p.avgGrade>=60?"text-neon-orange":"text-red-400",j=p.totalAssignments>0?Math.round(p.submitted/p.totalAssignments*100):0;return a.jsxs("tr",{className:"border-b border-white/[0.03] hover:bg-white/[0.02] transition-colors",children:[a.jsx("td",{className:"px-4 py-3 text-xs text-white/30",children:N+1}),a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("p",{className:"text-sm text-white/70 font-medium",children:p.name}),a.jsx("p",{className:"text-[10px] text-white/30",children:p.email})]}),a.jsxs("td",{className:"px-4 py-3 text-sm text-center text-white/50",children:[p.submitted,"/",p.totalAssignments]}),a.jsx("td",{className:`px-4 py-3 text-sm text-center font-bold ${E}`,children:p.avgGrade!==null?`${p.avgGrade}%`:""}),a.jsx("td",{className:"px-4 py-3 text-center hidden sm:table-cell",children:a.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${j>=80?"bg-neon-green/10 text-neon-green border border-neon-green/20":j>=50?"bg-neon-orange/10 text-neon-orange border border-neon-orange/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:[j,"% complete"]})})]},p.id)})})]})}),S.length===0&&a.jsx("p",{className:"text-sm text-white/20 text-center py-8",children:"No students yet"})]}),d==="questions"&&a.jsxs(K.div,{variants:M,className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-white/40",children:"Questions with less than 50% success rate  consider reviewing these topics with students."}),_.length===0?a.jsxs("div",{className:"glass-card p-12 text-center",children:[a.jsx(zt,{size:40,className:"text-neon-green/20 mx-auto mb-3"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No problematic questions found!"})]}):_.map((p,N)=>a.jsx("div",{className:"glass-card p-4 border-l-4 border-l-red-500",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-500/10 border border-red-500/20 flex items-center justify-center shrink-0",children:a.jsxs("span",{className:"text-red-400 font-bold text-sm",children:[p.successRate,"%"]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-white/80 font-medium mb-1",children:p.question}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("span",{className:"text-[10px] text-white/30",children:["From: ",p.assignmentTitle]}),a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/[0.03] text-white/20 capitalize",children:p.type}),a.jsxs("span",{className:"text-[10px] text-red-400",children:[p.correct,"/",p.total," correct"]})]})]}),a.jsx("div",{className:"w-20 h-2 rounded-full bg-white/[0.06] overflow-hidden shrink-0 mt-2",children:a.jsx("div",{className:"h-full rounded-full bg-red-500",style:{width:`${p.successRate}%`}})})]})},N))]})]})]})}function js(t){const e=[...t];for(let n=e.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[e[n],e[s]]=[e[s],e[n]]}return e}function UF(t){let e=js(t.split("")).join("");for(;e===t&&t.length>1;)e=js(t.split("")).join("");return e}function BF({front:t,back:e,flipped:n,onFlip:s}){return a.jsx("div",{className:"perspective-1000 w-full max-w-lg mx-auto cursor-pointer",onClick:s,style:{perspective:"1000px"},children:a.jsxs(K.div,{className:"relative w-full aspect-[3/2] sm:aspect-[16/9]",animate:{rotateY:n?180:0},transition:{duration:.5,type:"spring",stiffness:200,damping:25},style:{transformStyle:"preserve-3d"},children:[a.jsxs("div",{className:"absolute inset-0 glass-card p-6 sm:p-8 flex flex-col items-center justify-center text-center backface-hidden",style:{backfaceVisibility:"hidden"},children:[a.jsx("div",{className:"absolute top-3 right-3 text-[10px] text-white/20 uppercase tracking-widest",children:"Question"}),a.jsx("p",{className:"text-lg sm:text-xl font-display font-bold text-white leading-relaxed",children:t}),a.jsx("p",{className:"text-[10px] text-white/20 mt-4",children:"Tap to reveal answer"})]}),a.jsxs("div",{className:"absolute inset-0 glass-card p-6 sm:p-8 flex flex-col items-center justify-center text-center bg-gradient-to-br from-neon-green/[0.03] to-neon-blue/[0.03] border-neon-green/20",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[a.jsx("div",{className:"absolute top-3 right-3 text-[10px] text-neon-green/40 uppercase tracking-widest",children:"Answer"}),a.jsx("p",{className:"text-lg sm:text-xl font-display font-bold text-neon-green leading-relaxed",children:e}),a.jsx("p",{className:"text-[10px] text-white/20 mt-4",children:"Tap to flip back"})]})]})})}function FF({items:t,correctOrder:e,onComplete:n}){const[s,i]=D.useState(()=>js(t)),[r,o]=D.useState(null),[l,c]=D.useState(!1),[d,h]=D.useState(!1),m=R=>o(R),f=(R,S)=>{if(R.preventDefault(),r===null||r===S)return;const y=[...s],[_]=y.splice(r,1);y.splice(S,0,_),i(y),o(S)},x=()=>o(null),v=()=>{const R=JSON.stringify(s)===JSON.stringify(e);h(R),c(!0),n==null||n(R)},C=()=>{i(js(t)),c(!1),h(!1)};return a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Drag items into the correct order:"}),a.jsx("div",{className:"space-y-2",children:s.map((R,S)=>a.jsxs(K.div,{draggable:!0,onDragStart:()=>m(S),onDragOver:y=>f(y,S),onDragEnd:x,layout:!0,className:`flex items-center gap-3 p-3 rounded-xl border cursor-grab active:cursor-grabbing transition-all ${l&&d?"bg-neon-green/5 border-neon-green/20":l&&!d?"bg-red-500/5 border-red-500/20":r===S?"bg-neon-blue/10 border-neon-blue/30 scale-[1.02]":"bg-white/[0.02] border-white/[0.06] hover:border-white/10"}`,children:[a.jsx(f4,{size:14,className:"text-white/20 shrink-0"}),a.jsx("span",{className:"text-xs font-bold text-neon-blue w-5",children:S+1}),a.jsx("span",{className:"text-sm text-white/80 flex-1",children:R})]},`${R}-${S}`))}),a.jsx("div",{className:"flex gap-2",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-bold ${d?"bg-neon-green/10 text-neon-green":"bg-red-500/10 text-red-400"}`,children:d?a.jsxs(a.Fragment,{children:[a.jsx(zt,{size:14})," Correct!"]}):a.jsxs(a.Fragment,{children:[a.jsx(ou,{size:14})," Incorrect"]})}),a.jsxs("button",{onClick:C,className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]})]}):a.jsxs("button",{onClick:v,className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(zt,{size:14})," Check"]})})]})}function $F({sentence:t,answer:e,onComplete:n}){const[s,i]=D.useState(""),[r,o]=D.useState(!1),l=s.trim().toLowerCase()===e.trim().toLowerCase(),c=()=>{o(!0),n==null||n(l)};return a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-white/80 leading-relaxed",children:t.split("___").map((d,h,m)=>a.jsxs("span",{children:[d,h<m.length-1&&a.jsx("span",{className:"inline-block mx-1 px-3 py-0.5 rounded-lg bg-neon-blue/10 border border-neon-blue/20 min-w-[80px] text-center",children:r?a.jsx("span",{className:l?"text-neon-green font-bold":"text-red-400 font-bold",children:s||"..."}):a.jsx("input",{value:s,onChange:f=>i(f.target.value),onKeyDown:f=>f.key==="Enter"&&c(),className:"bg-transparent border-none text-sm text-neon-blue text-center w-full focus:ring-0 p-0",placeholder:"type here"})})]},h))}),r&&!l&&a.jsxs("p",{className:"text-xs text-neon-green/60",children:["Correct: ",a.jsx("span",{className:"font-bold text-neon-green",children:e})]}),a.jsx("div",{className:"flex gap-2",children:r?a.jsxs("button",{onClick:()=>{i(""),o(!1)},className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Again"]}):a.jsx("button",{onClick:c,className:"btn-neon text-sm px-4 py-2",disabled:!s.trim(),children:"Check"})})]})}function HF({word:t,hint:e,onComplete:n}){const[s]=D.useState(()=>UF(t.toUpperCase())),[i,r]=D.useState(""),[o,l]=D.useState(!1),c=i.trim().toLowerCase()===t.trim().toLowerCase();return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:s.split("").map((d,h)=>a.jsx(K.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:h*.05},className:"w-10 h-10 rounded-xl bg-gradient-to-br from-neon-purple/20 to-fuchsia-500/20 border border-neon-purple/30 flex items-center justify-center text-lg font-bold text-white shadow-lg",children:d},h))}),e&&a.jsxs("p",{className:"text-xs text-white/30 text-center italic",children:["Hint: ",e]}),a.jsx("input",{value:i,onChange:d=>r(d.target.value),onKeyDown:d=>d.key==="Enter"&&!o&&l(!0),placeholder:"Unscramble the word...",className:"input-glass text-center text-sm"}),o&&a.jsx("div",{className:`text-center text-sm font-bold ${c?"text-neon-green":"text-red-400"}`,children:c?" Correct!":` The answer is: ${t}`}),a.jsx("div",{className:"flex justify-center gap-2",children:o?a.jsxs("button",{onClick:()=>{r(""),l(!1)},className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:()=>l(!0),className:"btn-neon text-sm px-4 py-2",disabled:!i.trim(),children:"Check"})})]})}function GF({correctSentence:t,onComplete:e}){const n=t.split(" "),[s,i]=D.useState(()=>js(n)),[r,o]=D.useState([]),[l,c]=D.useState(!1),d=r.join(" ").toLowerCase()===t.toLowerCase(),h=(x,v)=>{o([...r,x]),i(s.filter((C,R)=>R!==v))},m=(x,v)=>{i([...s,x]),o(r.filter((C,R)=>R!==v))},f=()=>{i(js(n)),o([]),c(!1)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"min-h-[48px] p-3 rounded-xl border border-dashed border-white/10 bg-white/[0.01] flex flex-wrap gap-2",children:[r.length===0&&a.jsx("span",{className:"text-xs text-white/20 italic",children:"Tap words below to build the sentence..."}),r.map((x,v)=>a.jsx(K.button,{layout:!0,initial:{scale:0},animate:{scale:1},onClick:()=>!l&&m(x,v),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${l?d?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-red-500/10 text-red-400 border border-red-500/20":"bg-neon-blue/10 text-neon-blue border border-neon-blue/20 hover:bg-neon-blue/20 cursor-pointer"}`,children:x},`s-${v}`))]}),a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:s.map((x,v)=>a.jsx(K.button,{layout:!0,onClick:()=>!l&&h(x,v),className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-white/[0.04] border border-white/[0.08] text-white/60 hover:text-white hover:border-neon-blue/30 hover:bg-neon-blue/5 transition-all cursor-pointer",children:x},`a-${v}`))}),l&&!d&&a.jsxs("p",{className:"text-xs text-neon-green/60 text-center",children:["Correct: ",a.jsx("span",{className:"font-bold text-neon-green",children:t})]}),a.jsx("div",{className:"flex justify-center gap-2",children:l?a.jsxs("button",{onClick:f,className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsxs("button",{onClick:()=>{c(!0),e==null||e(d)},className:"btn-neon text-sm px-4 py-2",disabled:s.length>0,children:[a.jsx(zt,{size:14,className:"mr-1"})," Check"]})})]})}function KF({pairs:t,onComplete:e}){const n=t.map(C=>C.left),[s]=D.useState(()=>js(t.map(C=>C.right))),[i,r]=D.useState(null),[o,l]=D.useState({}),[c,d]=D.useState(!1),h=C=>{i===null||c||(l(R=>({...R,[i]:C})),r(null))},m=Object.keys(o).length===n.length,f=()=>{d(!0);const C=n.every((R,S)=>o[S]===t[S].right);e==null||e(C)},x=()=>{l({}),d(!1),r(null)},v=Object.values(o);return a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-white/40",children:"Tap a left item, then tap its match on the right."}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("div",{className:"space-y-2",children:n.map((C,R)=>{const S=o[R],y=c&&S===t[R].right,_=c&&S&&S!==t[R].right;return a.jsxs("button",{onClick:()=>!c&&r(R),className:`w-full text-left p-3 rounded-xl border text-xs transition-all ${i===R?"bg-neon-blue/10 border-neon-blue/30 text-neon-blue":y?"bg-neon-green/10 border-neon-green/20 text-neon-green":_?"bg-red-500/10 border-red-500/20 text-red-400":S?"bg-white/[0.04] border-white/10 text-white/60":"bg-white/[0.02] border-white/[0.06] text-white/50 hover:border-white/15"}`,children:[a.jsxs("span",{className:"font-bold mr-1",children:[R+1,"."]})," ",C," ",S&&a.jsxs("span",{className:"text-[10px] float-right opacity-60",children:[" ",S]})]},R)})}),a.jsx("div",{className:"space-y-2",children:s.map((C,R)=>a.jsx("button",{onClick:()=>h(C),disabled:v.includes(C)||c,className:`w-full text-left p-3 rounded-xl border text-xs transition-all ${v.includes(C)?"bg-white/[0.02] border-white/5 text-white/20 opacity-40":"bg-white/[0.02] border-white/[0.06] text-white/50 hover:border-neon-purple/30 hover:text-neon-purple cursor-pointer"}`,children:C},R))})]}),a.jsx("div",{className:"flex gap-2",children:c?a.jsxs("button",{onClick:x,className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:f,className:"btn-neon text-sm px-4 py-2",disabled:!m,children:"Check Matches"})})]})}function QF({categories:t,onComplete:e}){const n=D.useMemo(()=>js(t.flatMap((v,C)=>v.items.map(R=>({item:R,catIdx:C})))),[]),[s,i]=D.useState(n),[r,o]=D.useState(()=>t.map(()=>[])),[l,c]=D.useState(!1),d=(v,C)=>{i(R=>R.filter(S=>S!==C)),o(R=>R.map((S,y)=>y===v?[...S,C]:S))},h=(v,C)=>{const R=r[v][C];o(S=>S.map((y,_)=>_===v?y.filter((I,M)=>M!==C):y)),i(S=>[...S,R])},m=s.length===0,f=()=>{c(!0);const v=r.every((C,R)=>C.every(S=>S.catIdx===R));e==null||e(v)},x=()=>{i(js(n)),o(t.map(()=>[])),c(!1)};return a.jsxs("div",{className:"space-y-4",children:[s.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 p-3 rounded-xl bg-white/[0.01] border border-dashed border-white/10 min-h-[40px]",children:s.map((v,C)=>a.jsx("span",{className:"px-3 py-1 rounded-lg text-xs font-medium bg-neon-blue/10 text-neon-blue border border-neon-blue/20 cursor-pointer hover:bg-neon-blue/20 transition-all",children:v.item},C))}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:t.map((v,C)=>a.jsxs("div",{className:`p-3 rounded-xl border min-h-[80px] transition-all ${l?r[C].every(R=>R.catIdx===C)?"border-neon-green/20 bg-neon-green/[0.02]":"border-red-500/20 bg-red-500/[0.02]":"border-white/[0.08] bg-white/[0.02]"}`,children:[a.jsx("p",{className:"text-xs font-bold text-neon-purple mb-2",children:v.name}),a.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[30px]",children:r[C].map((R,S)=>a.jsx("button",{onClick:()=>!l&&h(C,S),className:"px-2 py-0.5 rounded text-[10px] bg-white/5 border border-white/10 text-white/60 hover:text-red-400 transition-all",children:R.item},S))}),!l&&s.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.map((R,S)=>a.jsxs("button",{onClick:()=>d(C,R),className:"text-[10px] px-2 py-0.5 rounded bg-neon-purple/10 text-neon-purple border border-neon-purple/20 hover:bg-neon-purple/20 transition-all",children:["+ ",R.item]},S))})]},C))}),a.jsx("div",{className:"flex gap-2",children:l?a.jsxs("button",{onClick:x,className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:f,className:"btn-neon text-sm px-4 py-2",disabled:!m,children:"Check"})})]})}function YF({errorSentence:t,correctText:e,onComplete:n}){const[s,i]=D.useState(""),[r,o]=D.useState(!1),l=s.trim().toLowerCase()===e.trim().toLowerCase();return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 rounded-xl bg-red-500/5 border border-red-500/20",children:[a.jsx("p",{className:"text-xs text-red-400/60 uppercase tracking-wider font-bold mb-1",children:" Sentence with error:"}),a.jsx("p",{className:"text-sm text-white/80 font-medium",children:t})]}),a.jsx("input",{value:s,onChange:c=>i(c.target.value),onKeyDown:c=>c.key==="Enter"&&!r&&o(!0),placeholder:"Type the corrected sentence...",className:"input-glass text-sm"}),r&&a.jsx("div",{className:`p-3 rounded-xl text-sm font-bold ${l?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:l?" Perfect!":a.jsxs(a.Fragment,{children:[a.jsx("span",{children:" Correct answer: "}),a.jsx("span",{className:"text-neon-green",children:e})]})}),a.jsx("div",{className:"flex gap-2",children:r?a.jsxs("button",{onClick:()=>{i(""),o(!1)},className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:()=>{o(!0),n==null||n(l)},className:"btn-neon text-sm px-4 py-2",disabled:!s.trim(),children:"Check"})})]})}function qF({sourceText:t,correctText:e,onComplete:n}){const[s,i]=D.useState(""),[r,o]=D.useState(!1),l=s.trim().toLowerCase()===e.trim().toLowerCase();return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 rounded-xl bg-neon-blue/5 border border-neon-blue/20",children:[a.jsx("p",{className:"text-xs text-neon-blue/60 uppercase tracking-wider font-bold mb-1",children:" Translate:"}),a.jsx("p",{className:"text-sm text-white/80 font-medium",children:t})]}),a.jsx("input",{value:s,onChange:c=>i(c.target.value),onKeyDown:c=>c.key==="Enter"&&!r&&o(!0),placeholder:"Your translation...",className:"input-glass text-sm"}),r&&a.jsx("div",{className:`p-3 rounded-xl text-sm font-bold ${l?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:l?" Perfect translation!":a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Correct: "}),a.jsx("span",{className:"text-neon-green",children:e})]})}),a.jsx("div",{className:"flex gap-2",children:r?a.jsxs("button",{onClick:()=>{i(""),o(!1)},className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:()=>{o(!0),n==null||n(l)},className:"btn-neon text-sm px-4 py-2",disabled:!s.trim(),children:"Check"})})]})}const zp={drag:{label:"Reorder",color:"neon-purple",icon:f4},fill:{label:"Fill Blank",color:"neon-blue",icon:_4},scramble:{label:"Word Scramble",color:"neon-orange",icon:lm},sentence:{label:"Sentence Builder",color:"neon-pink",icon:p4},matching:{label:"Matching",color:"neon-green",icon:aB},categorize:{label:"Categorize",color:"cyan-400",icon:fa},"error-correction":{label:"Error Fix",color:"red-400",icon:Di},translation:{label:"Translation",color:"amber-400",icon:nB}};function XF(){const{userProfile:t}=ft(),{classes:e,assignments:n}=bn(),s=t==null?void 0:t.uid,[i,r]=D.useState(null),[o,l]=D.useState("all"),[c,d]=D.useState(0),[h,m]=D.useState(!1),[f,x]=D.useState({}),[v,C]=D.useState(!1),[R,S]=D.useState({correct:0,total:0}),[y,_]=D.useState(0),I=e.filter(O=>{var V;return(V=O.students)==null?void 0:V.includes(s)}),M=I.map(O=>O.id),L=D.useMemo(()=>{const O=o==="all"?n.filter(U=>M.includes(U.classId)):n.filter(U=>U.classId===o),V=[];return O.forEach(U=>{(U.questions||[]).forEach(z=>{V.push({...z,assignmentTitle:U.title,classId:U.classId})})}),V},[n,o,M]),T=D.useMemo(()=>L.filter(O=>["multiple-choice","true-false","fill-in-blank","word-scramble","translation"].includes(O.type)).map(O=>{var V;return{front:O.type==="translation"&&O.sourceText||O.text,back:O.type==="fill-in-blank"||O.type==="word-scramble"||O.type==="translation"?O.correctText:((V=O.options)==null?void 0:V[O.correctAnswer])||"N/A",id:O.id}}),[L]),p=D.useMemo(()=>{const O=L.filter(V=>V.type==="multiple-choice"||V.type==="true-false");return js(O).slice(0,10)},[L,i]),N=D.useMemo(()=>{const O=[];return L.forEach(V=>{var U,z,W;if(V.type==="ordering"&&((U=V.items)==null?void 0:U.length)>=2&&O.push({type:"drag",question:V.text,items:V.items,correctOrder:V.items,id:V.id}),V.type==="fill-in-blank"&&V.correctText){const F=V.text.includes("___")?V.text:V.text+" ___";O.push({type:"fill",question:V.text,sentence:F,answer:V.correctText,id:V.id})}V.type==="word-scramble"&&V.correctText&&O.push({type:"scramble",question:V.text,word:V.correctText,id:V.id}),V.type==="sentence-builder"&&V.correctSentence&&O.push({type:"sentence",question:V.text,correctSentence:V.correctSentence,id:V.id}),V.type==="matching"&&((z=V.pairs)==null?void 0:z.length)>=2&&O.push({type:"matching",question:V.text,pairs:V.pairs,id:V.id}),V.type==="categorize"&&((W=V.categories)==null?void 0:W.length)>=2&&O.push({type:"categorize",question:V.text,categories:V.categories,id:V.id}),V.type==="error-correction"&&V.errorSentence&&V.correctText&&O.push({type:"error-correction",question:V.text,errorSentence:V.errorSentence,correctText:V.correctText,id:V.id}),V.type==="translation"&&V.sourceText&&V.correctText&&O.push({type:"translation",question:V.text,sourceText:V.sourceText,correctText:V.correctText,id:V.id})}),js(O)},[L,i]),E=(O,V)=>{v||x(U=>({...U,[O]:V}))},j=()=>{let O=0;p.forEach((V,U)=>{var z;f[U]===((z=V.options)==null?void 0:z[V.correctAnswer])&&O++}),S({correct:O,total:p.length}),C(!0)},A=()=>{x({}),C(!1),S({correct:0,total:0})},w={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},k={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};if(!i)return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Practice Mode",subtitle:"Study without pressure  no grades!"}),a.jsxs(K.div,{variants:w,initial:"hidden",animate:"show",className:"p-4 sm:p-6 max-w-5xl mx-auto space-y-6",children:[a.jsxs(K.div,{variants:k,className:"flex gap-2 overflow-x-auto pb-2",children:[a.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition-all ${o==="all"?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06]"}`,children:"All Classes"}),I.map(O=>a.jsx("button",{onClick:()=>l(O.id),className:`px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition-all ${o===O.id?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06]"}`,children:O.name},O.id))]}),a.jsxs(K.div,{variants:k,className:"glass-card p-4 flex items-center gap-6 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(M2,{size:18,className:"text-neon-purple"}),a.jsxs("span",{className:"text-sm text-white/60",children:[a.jsx("span",{className:"text-white font-bold",children:L.length})," questions"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(At,{size:16,className:"text-neon-blue"}),a.jsxs("span",{className:"text-sm text-white/60",children:[a.jsx("span",{className:"text-white font-bold",children:T.length})," flashcards"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fa,{size:16,className:"text-neon-green"}),a.jsxs("span",{className:"text-sm text-white/60",children:[a.jsx("span",{className:"text-white font-bold",children:N.length})," exercises"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cu,{size:16,className:"text-neon-orange"}),a.jsxs("span",{className:"text-sm text-white/60",children:[a.jsx("span",{className:"text-white font-bold",children:"12"})," types"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{id:"flashcards",icon:At,title:"Flashcards",desc:"Flip cards to memorize questions and answers.",color:"neon-blue",gradient:"from-neon-blue to-cyan-400",count:T.length,disabled:T.length===0},{id:"quiz",icon:cu,title:"Practice Quiz",desc:"Random quiz  no grades! MC & True/False.",color:"neon-green",gradient:"from-neon-green to-emerald-400",count:p.length,disabled:p.length===0},{id:"exercises",icon:fa,title:"Exercises",desc:"Drag, match, scramble, build, translate & more!",color:"neon-purple",gradient:"from-neon-purple to-fuchsia-400",count:N.length,disabled:N.length===0}].map(O=>a.jsxs(K.button,{variants:k,onClick:()=>!O.disabled&&r(O.id),disabled:O.disabled,className:`glass-card p-6 text-left group hover:scale-[1.03] transition-all relative overflow-hidden ${O.disabled?"opacity-40 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${O.gradient} opacity-0 group-hover:opacity-5 transition-opacity`}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${O.gradient} flex items-center justify-center mb-4 shadow-lg`,children:a.jsx(O.icon,{size:24,className:"text-white"})}),a.jsx("h3",{className:"text-lg font-display font-bold text-white mb-1",children:O.title}),a.jsx("p",{className:"text-xs text-white/40 leading-relaxed mb-3",children:O.desc}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full bg-${O.color}/10 text-${O.color} border border-${O.color}/20 font-bold`,children:[O.count," items"]}),!O.disabled&&a.jsx(A0,{size:16,className:`text-${O.color} opacity-0 group-hover:opacity-100 transition-opacity`})]})]})]},O.id))}),N.length>0&&a.jsxs(K.div,{variants:k,className:"glass-card p-4",children:[a.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider font-bold mb-3",children:"Available Exercise Types"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(zp).map(([O,V])=>{const U=N.filter(z=>z.type===O).length;return U===0?null:a.jsxs("span",{className:`text-[10px] px-2.5 py-1 rounded-lg bg-${V.color}/10 text-${V.color} border border-${V.color}/20 font-bold flex items-center gap-1`,children:[a.jsx(V.icon,{size:10})," ",V.label," (",U,")"]},O)})})]}),L.length===0&&a.jsxs(K.div,{variants:k,className:"glass-card p-12 text-center",children:[a.jsx(M2,{size:48,className:"text-white/10 mx-auto mb-3"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No questions available yet."}),a.jsx("p",{className:"text-white/20 text-[10px] mt-1",children:"Questions from your assignments will appear here for practice."})]})]})]});if(i==="flashcards"){const O=T[c]||{front:"No cards",back:""};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Flashcards",subtitle:`${c+1} of ${T.length}`,actions:a.jsxs("button",{onClick:()=>{r(null),d(0),m(!1)},className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(ca,{size:16})," Back"]})}),a.jsxs(K.div,{variants:w,initial:"hidden",animate:"show",className:"p-4 sm:p-6 max-w-3xl mx-auto space-y-6",children:[a.jsxs(K.div,{variants:k,className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-1.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx(K.div,{className:"h-full rounded-full bg-gradient-to-r from-neon-blue to-neon-purple",animate:{width:`${(c+1)/T.length*100}%`},transition:{duration:.3}})}),a.jsxs("span",{className:"text-[10px] text-white/30 font-mono",children:[c+1,"/",T.length]})]}),a.jsx(K.div,{variants:k,children:a.jsx(BF,{front:O.front,back:O.back,flipped:h,onFlip:()=>m(!h)})}),a.jsxs(K.div,{variants:k,className:"flex items-center justify-center gap-3",children:[a.jsx("button",{onClick:()=>{d(Math.max(0,c-1)),m(!1)},disabled:c===0,className:"w-12 h-12 rounded-xl bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white hover:border-neon-blue/30 transition-all disabled:opacity-30",children:a.jsx(ca,{size:20})}),a.jsxs("button",{onClick:()=>m(!h),className:"px-6 py-3 rounded-xl bg-neon-blue/10 border border-neon-blue/20 text-neon-blue text-sm font-bold hover:bg-neon-blue/20 transition-all flex items-center gap-2",children:[a.jsx(Es,{size:14})," Flip"]}),a.jsx("button",{onClick:()=>{d(0),m(!1)},className:"px-4 py-3 rounded-xl bg-white/[0.04] border border-white/10 text-white/50 text-sm hover:text-white transition-all flex items-center gap-2",children:a.jsx(lm,{size:14})}),a.jsx("button",{onClick:()=>{d(Math.min(T.length-1,c+1)),m(!1)},disabled:c===T.length-1,className:"w-12 h-12 rounded-xl bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white hover:border-neon-blue/30 transition-all disabled:opacity-30",children:a.jsx(au,{size:20})})]}),a.jsx("p",{className:"text-center text-[10px] text-white/15",children:"Tip: Use arrow keys to navigate, space to flip"})]})]})}if(i==="quiz")return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Practice Quiz",subtitle:v?`Score: ${R.correct}/${R.total}`:`${Object.keys(f).length}/${p.length} answered`,actions:a.jsxs("button",{onClick:()=>{r(null),A()},className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(ca,{size:16})," Back"]})}),a.jsxs(K.div,{variants:w,initial:"hidden",animate:"show",className:"p-4 sm:p-6 max-w-3xl mx-auto space-y-4",children:[a.jsxs(K.div,{variants:k,className:"glass-card p-3 border-l-4 border-l-neon-green bg-neon-green/[0.02] flex items-center gap-3",children:[a.jsx(lu,{size:16,className:"text-neon-green shrink-0"}),a.jsxs("p",{className:"text-xs text-white/50",children:["Practice mode  ",a.jsx("span",{className:"text-neon-green font-bold",children:"no grades recorded"}),". Learn freely!"]})]}),v&&a.jsxs(K.div,{variants:k,className:"glass-card p-8 text-center space-y-4",children:[a.jsx("div",{className:`w-20 h-20 rounded-2xl mx-auto flex items-center justify-center ${R.correct/R.total>=.7?"bg-neon-green/10 border border-neon-green/20":"bg-neon-orange/10 border border-neon-orange/20"}`,children:R.correct/R.total>=.7?a.jsx($u,{size:36,className:"text-neon-green"}):a.jsx(fa,{size:36,className:"text-neon-orange"})}),a.jsx("h2",{className:"text-2xl font-display font-bold text-white",children:"Practice Complete!"}),a.jsxs("p",{className:"text-4xl font-display font-black text-neon-blue",children:[R.correct,"/",R.total]}),a.jsxs("p",{className:"text-sm text-white/40",children:[Math.round(R.correct/R.total*100),"% correct"]}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsxs("button",{onClick:A,className:"btn-neon text-sm px-5 py-2.5 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Try Again"]}),a.jsx("button",{onClick:()=>{r(null),A()},className:"btn-ghost text-sm px-5 py-2.5",children:"Back to Menu"})]})]}),a.jsx("div",{className:"space-y-4",children:p.map((O,V)=>{var F;const U=f[V],z=(F=O.options)==null?void 0:F[O.correctAnswer],W=U===z;return a.jsxs(K.div,{variants:k,className:`glass-card p-4 sm:p-5 transition-all ${v?W?"border-neon-green/20 bg-neon-green/[0.02]":"border-red-500/20 bg-red-500/[0.02]":U?"border-neon-blue/10":""}`,children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx("span",{className:"text-xs font-bold text-neon-blue bg-neon-blue/10 border border-neon-blue/20 w-7 h-7 rounded-lg flex items-center justify-center shrink-0",children:V+1}),a.jsx("p",{className:"text-sm text-white/80 font-medium flex-1",children:O.text}),v&&(W?a.jsx(zt,{size:18,className:"text-neon-green shrink-0"}):a.jsx(ou,{size:18,className:"text-red-400 shrink-0"}))]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 pl-10",children:(O.options||[]).map((Z,pe)=>{const fe=U===Z,Se=Z===z;let Te="bg-white/[0.02] border-white/[0.06] text-white/60 hover:border-white/15 hover:bg-white/[0.04]";return v?Se?Te="bg-neon-green/10 border-neon-green/30 text-neon-green":fe&&!Se?Te="bg-red-500/10 border-red-500/30 text-red-400":Te="bg-white/[0.01] border-white/[0.04] text-white/30":fe&&(Te="bg-neon-blue/10 border-neon-blue/30 text-neon-blue"),a.jsxs("button",{onClick:()=>E(V,Z),disabled:v,className:`text-left p-3 rounded-xl border text-sm transition-all ${Te}`,children:[a.jsxs("span",{className:"font-bold mr-2",children:[String.fromCharCode(65+pe),"."]})," ",Z]},pe)})})]},O.id||V)})}),!v&&p.length>0&&a.jsx(K.div,{variants:k,className:"flex justify-center pt-4",children:a.jsxs("button",{onClick:j,className:"btn-neon text-sm px-8 py-3 flex items-center gap-2",disabled:Object.keys(f).length<p.length,children:[a.jsx(zt,{size:16})," Check Answers (",Object.keys(f).length,"/",p.length,")"]})})]})]});if(i==="exercises"){const O=N[c],V=O?zp[O.type]||zp.fill:null;return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ft,{title:"Interactive Exercises",subtitle:N.length>0?`${c+1} of ${N.length}`:"No exercises",actions:a.jsxs("button",{onClick:()=>{r(null),d(0)},className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(ca,{size:16})," Back"]})}),a.jsxs(K.div,{variants:w,initial:"hidden",animate:"show",className:"p-4 sm:p-6 max-w-3xl mx-auto space-y-6",children:[N.length>0&&a.jsxs(K.div,{variants:k,className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-1.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx(K.div,{className:"h-full rounded-full bg-gradient-to-r from-neon-purple to-fuchsia-400",animate:{width:`${(c+1)/N.length*100}%`},transition:{duration:.3}})}),a.jsxs("span",{className:"text-[10px] text-white/30 font-mono",children:[c+1,"/",N.length]})]}),O?a.jsxs(K.div,{variants:k,className:"glass-card p-5 sm:p-6",children:[a.jsx("div",{className:"flex items-center gap-2 mb-4",children:V&&a.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold uppercase bg-${V.color}/10 text-${V.color} border border-${V.color}/20 flex items-center gap-1`,children:[a.jsx(V.icon,{size:10})," ",V.label]})}),a.jsx("h3",{className:"text-sm font-bold text-white mb-4",children:O.question}),O.type==="drag"&&a.jsx(FF,{items:O.items,correctOrder:O.correctOrder}),O.type==="fill"&&a.jsx($F,{sentence:O.sentence,answer:O.answer}),O.type==="scramble"&&a.jsx(HF,{word:O.word,hint:O.question}),O.type==="sentence"&&a.jsx(GF,{correctSentence:O.correctSentence}),O.type==="matching"&&a.jsx(KF,{pairs:O.pairs}),O.type==="categorize"&&a.jsx(QF,{categories:O.categories}),O.type==="error-correction"&&a.jsx(YF,{errorSentence:O.errorSentence,correctText:O.correctText}),O.type==="translation"&&a.jsx(qF,{sourceText:O.sourceText,correctText:O.correctText})]},`${c}-${y}`):a.jsxs("div",{className:"glass-card p-12 text-center",children:[a.jsx(fa,{size:48,className:"text-white/10 mx-auto mb-3"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No exercises available yet."})]}),N.length>0&&a.jsxs(K.div,{variants:k,className:"flex items-center justify-center gap-3",children:[a.jsx("button",{onClick:()=>{d(Math.max(0,c-1)),_(U=>U+1)},disabled:c===0,className:"w-10 h-10 rounded-xl bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white transition-all disabled:opacity-30",children:a.jsx(ca,{size:18})}),a.jsxs("span",{className:"text-sm text-white/40",children:[c+1," / ",N.length]}),a.jsx("button",{onClick:()=>{d(Math.min(N.length-1,c+1)),_(U=>U+1)},disabled:c===N.length-1,className:"w-10 h-10 rounded-xl bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white transition-all disabled:opacity-30",children:a.jsx(au,{size:18})})]})]})]})}return null}function WF(){var C,R,S,y,_;const{userProfile:t,updateUserData:e}=ft(),[n,s]=D.useState((t==null?void 0:t.displayName)||""),[i,r]=D.useState(((C=t==null?void 0:t.preferences)==null?void 0:C.darkMode)!==!1),[o,l]=D.useState(((R=t==null?void 0:t.preferences)==null?void 0:R.notifications)!==!1),[c,d]=D.useState(((S=t==null?void 0:t.preferences)==null?void 0:S.language)||"en"),[h,m]=D.useState(!1),[f,x]=D.useState(null),v=async()=>{m(!0),x(null);try{await e({displayName:n,preferences:{darkMode:i,notifications:o,language:c}}),x({type:"success",message:"Changes saved successfully! "}),setTimeout(()=>x(null),3e3)}catch{x({type:"error",message:"Failed to save changes. Please try again."})}finally{m(!1)}};return a.jsxs("div",{children:[a.jsx(Ft,{title:"Settings",subtitle:"Manage your account and preferences"}),a.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 space-y-6 max-w-3xl",children:[f&&a.jsx(K.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:`p-4 rounded-xl border ${f.type==="success"?"bg-neon-green/10 border-neon-green/20 text-neon-green":"bg-red-500/10 border-red-500/20 text-red-500"} text-sm font-medium`,children:f.message}),a.jsxs("div",{className:"glass-card p-6",children:[a.jsxs("h3",{className:"font-display font-semibold text-white mb-5 flex items-center gap-2",children:[a.jsx(N4,{size:18,className:"text-neon-blue"})," Profile"]}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white text-2xl font-bold",children:((_=(y=t==null?void 0:t.displayName)==null?void 0:y[0])==null?void 0:_.toUpperCase())||"?"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white",children:t==null?void 0:t.displayName}),a.jsx("p",{className:"text-sm text-white/40",children:t==null?void 0:t.email}),a.jsx("span",{className:"badge-blue mt-2 capitalize",children:t==null?void 0:t.role})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Display Name"}),a.jsx("input",{value:n,onChange:I=>s(I.target.value),className:"input-glass"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Email"}),a.jsx("input",{value:t==null?void 0:t.email,className:"input-glass",disabled:!0,title:"Email cannot be changed"})]})]})]}),a.jsxs("div",{className:"glass-card p-6",children:[a.jsxs("h3",{className:"font-display font-semibold text-white mb-5 flex items-center gap-2",children:[a.jsx(_B,{size:18,className:"text-neon-purple"})," Preferences"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(bB,{size:18,className:`transition-colors ${i?"text-neon-blue":"text-white/20"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"Dark Mode"}),a.jsx("p",{className:"text-xs text-white/40",children:"Use dark theme"})]})]}),a.jsx("button",{onClick:()=>r(!i),className:`w-12 h-7 rounded-full transition-all ${i?"bg-neon-blue":"bg-white/10"} relative`,children:a.jsx("div",{className:`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-lg ${i?"left-6":"left-1"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(wo,{size:18,className:`transition-colors ${o?"text-neon-green":"text-white/20"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"Notifications"}),a.jsx("p",{className:"text-xs text-white/40",children:"Email notifications"})]})]}),a.jsx("button",{onClick:()=>l(!o),className:`w-12 h-7 rounded-full transition-all ${o?"bg-neon-green":"bg-white/10"} relative`,children:a.jsx("div",{className:`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-lg ${o?"left-6":"left-1"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Q7,{size:18,className:"text-neon-orange"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"Language"}),a.jsx("p",{className:"text-xs text-white/40",children:"Interface language"})]})]}),a.jsxs("select",{value:c,onChange:I=>d(I.target.value),className:"input-glass w-32 text-sm",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"es",children:"Espaol"}),a.jsx("option",{value:"fr",children:"Franais"})]})]})]})]}),a.jsx("div",{className:"flex justify-end gap-3 pt-4",children:a.jsx("button",{onClick:v,disabled:h,className:`btn-neon px-8 h-12 flex items-center gap-2 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):"Save Changes"})})]})]})}function JF({children:t}){const{user:e,loading:n}=ft();return n?a.jsx("div",{className:"min-h-screen bg-surface-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl bg-gradient-to-br from-neon-blue to-neon-purple animate-pulse mb-4"}),a.jsx("p",{className:"text-white/40 text-sm",children:"Loading..."})]})}):e?t:a.jsx(tE,{to:"/",replace:!0})}function ZF(){const{isTeacher:t}=ft();return t?a.jsx(mF,{}):a.jsx(EF,{})}function e$(){const{isTeacher:t}=ft();return a.jsx(_F,{})}function t$(){const{isTeacher:t}=ft();return t?a.jsx(SF,{}):a.jsx(AF,{})}function n$(){return a.jsx(qk,{children:a.jsx(tF,{children:a.jsx(TL,{children:a.jsx(jL,{children:a.jsx(sF,{children:a.jsxs(Uk,{children:[a.jsx(Kt,{path:"/",element:a.jsx(cF,{})}),a.jsxs(Kt,{path:"/",element:a.jsx(JF,{children:a.jsx(lF,{})}),children:[a.jsx(Kt,{path:"dashboard",element:a.jsx(ZF,{})}),a.jsx(Kt,{path:"classes",element:a.jsx(pF,{})}),a.jsx(Kt,{path:"classes/:id",element:a.jsx(xF,{})}),a.jsx(Kt,{path:"students",element:a.jsx(wF,{})}),a.jsx(Kt,{path:"assignments",element:a.jsx(e$,{})}),a.jsx(Kt,{path:"assignments/:assignmentId",element:a.jsx(CF,{})}),a.jsx(Kt,{path:"grades",element:a.jsx(t$,{})}),a.jsx(Kt,{path:"my-classes",element:a.jsx(jF,{})}),a.jsx(Kt,{path:"calendar",element:a.jsx(DF,{})}),a.jsx(Kt,{path:"achievements",element:a.jsx(OF,{})}),a.jsx(Kt,{path:"practice",element:a.jsx(XF,{})}),a.jsx(Kt,{path:"question-bank",element:a.jsx(VF,{})}),a.jsx(Kt,{path:"reports",element:a.jsx(zF,{})}),a.jsx(Kt,{path:"settings",element:a.jsx(WF,{})})]}),a.jsx(Kt,{path:"*",element:a.jsx(tE,{to:"/",replace:!0})})]})})})})})})}Q3.createRoot(document.getElementById("root")).render(a.jsx(W2.StrictMode,{children:a.jsx(n$,{})}));
