function Z4(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function Y2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var q2={exports:{}},gf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eR=Symbol.for("react.transitional.element"),tR=Symbol.for("react.fragment");function X2(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:eR,type:t,key:s,ref:e!==void 0?e:null,props:n}}gf.Fragment=tR;gf.jsx=X2;gf.jsxs=X2;q2.exports=gf;var a=q2.exports,W2={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0=Symbol.for("react.transitional.element"),nR=Symbol.for("react.portal"),sR=Symbol.for("react.fragment"),iR=Symbol.for("react.strict_mode"),rR=Symbol.for("react.profiler"),aR=Symbol.for("react.consumer"),oR=Symbol.for("react.context"),lR=Symbol.for("react.forward_ref"),cR=Symbol.for("react.suspense"),uR=Symbol.for("react.memo"),J2=Symbol.for("react.lazy"),dR=Symbol.for("react.activity"),lb=Symbol.iterator;function hR(t){return t===null||typeof t!="object"?null:(t=lb&&t[lb]||t["@@iterator"],typeof t=="function"?t:null)}var Z2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eN=Object.assign,tN={};function ll(t,e,n){this.props=t,this.context=e,this.refs=tN,this.updater=n||Z2}ll.prototype.isReactComponent={};ll.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ll.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nN(){}nN.prototype=ll.prototype;function B0(t,e,n){this.props=t,this.context=e,this.refs=tN,this.updater=n||Z2}var F0=B0.prototype=new nN;F0.constructor=B0;eN(F0,ll.prototype);F0.isPureReactComponent=!0;var cb=Array.isArray;function Gp(){}var ct={H:null,A:null,T:null,S:null},sN=Object.prototype.hasOwnProperty;function $0(t,e,n){var s=n.ref;return{$$typeof:U0,type:t,key:e,ref:s!==void 0?s:null,props:n}}function fR(t,e){return $0(t.type,e,t.props)}function H0(t){return typeof t=="object"&&t!==null&&t.$$typeof===U0}function mR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ub=/\/+/g;function Rm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mR(""+t.key):e.toString(36)}function pR(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Gp,Gp):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Ja(t,e,n,s,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case U0:case nR:o=!0;break;case J2:return o=t._init,Ja(o(t._payload),e,n,s,i)}}if(o)return i=i(t),o=s===""?"."+Rm(t,0):s,cb(i)?(n="",o!=null&&(n=o.replace(ub,"$&/")+"/"),Ja(i,e,n,"",function(d){return d})):i!=null&&(H0(i)&&(i=fR(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(ub,"$&/")+"/")+o)),e.push(i)),1;o=0;var l=s===""?".":s+":";if(cb(t))for(var c=0;c<t.length;c++)s=t[c],r=l+Rm(s,c),o+=Ja(s,e,n,r,i);else if(c=hR(t),typeof c=="function")for(t=c.call(t),c=0;!(s=t.next()).done;)s=s.value,r=l+Rm(s,c++),o+=Ja(s,e,n,r,i);else if(r==="object"){if(typeof t.then=="function")return Ja(pR(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function ad(t,e,n){if(t==null)return t;var s=[],i=0;return Ja(t,s,"","",function(r){return e.call(n,r,i++)}),s}function gR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var db=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},xR={map:ad,forEach:function(t,e,n){ad(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ad(t,function(){e++}),e},toArray:function(t){return ad(t,function(e){return e})||[]},only:function(t){if(!H0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Activity=dR;Re.Children=xR;Re.Component=ll;Re.Fragment=sR;Re.Profiler=rR;Re.PureComponent=B0;Re.StrictMode=iR;Re.Suspense=cR;Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct;Re.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ct.H.useMemoCache(t)}};Re.cache=function(t){return function(){return t.apply(null,arguments)}};Re.cacheSignal=function(){return null};Re.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=eN({},t.props),i=t.key;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)!sN.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var o=Array(r),l=0;l<r;l++)o[l]=arguments[l+2];s.children=o}return $0(t.type,i,s)};Re.createContext=function(t){return t={$$typeof:oR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:aR,_context:t},t};Re.createElement=function(t,e,n){var s,i={},r=null;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)sN.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)i[s]===void 0&&(i[s]=o[s]);return $0(t,r,i)};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:lR,render:t}};Re.isValidElement=H0;Re.lazy=function(t){return{$$typeof:J2,_payload:{_status:-1,_result:t},_init:gR}};Re.memo=function(t,e){return{$$typeof:uR,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=ct.T,n={};ct.T=n;try{var s=t(),i=ct.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(Gp,db)}catch(r){db(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),ct.T=e}};Re.unstable_useCacheRefresh=function(){return ct.H.useCacheRefresh()};Re.use=function(t){return ct.H.use(t)};Re.useActionState=function(t,e,n){return ct.H.useActionState(t,e,n)};Re.useCallback=function(t,e){return ct.H.useCallback(t,e)};Re.useContext=function(t){return ct.H.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t,e){return ct.H.useDeferredValue(t,e)};Re.useEffect=function(t,e){return ct.H.useEffect(t,e)};Re.useEffectEvent=function(t){return ct.H.useEffectEvent(t)};Re.useId=function(){return ct.H.useId()};Re.useImperativeHandle=function(t,e,n){return ct.H.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return ct.H.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return ct.H.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return ct.H.useMemo(t,e)};Re.useOptimistic=function(t,e){return ct.H.useOptimistic(t,e)};Re.useReducer=function(t,e,n){return ct.H.useReducer(t,e,n)};Re.useRef=function(t){return ct.H.useRef(t)};Re.useState=function(t){return ct.H.useState(t)};Re.useSyncExternalStore=function(t,e,n){return ct.H.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return ct.H.useTransition()};Re.version="19.2.3";W2.exports=Re;var R=W2.exports;const iN=Y2(R),yR=Z4({__proto__:null,default:iN},[R]);var rN={exports:{}},xf={},aN={exports:{}},oN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,B){var z=O.length;O.push(B);e:for(;0<z;){var $=z-1>>>1,U=O[$];if(0<i(U,B))O[$]=B,O[z]=U,z=$;else break e}}function n(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var B=O[0],z=O.pop();if(z!==B){O[0]=z;e:for(var $=0,U=O.length,Y=U>>>1;$<Y;){var Z=2*($+1)-1,se=O[Z],pe=Z+1,xe=O[pe];if(0>i(se,z))pe<U&&0>i(xe,se)?(O[$]=xe,O[pe]=z,$=pe):(O[$]=se,O[Z]=z,$=Z);else if(pe<U&&0>i(xe,z))O[$]=xe,O[pe]=z,$=pe;else break e}}return B}function i(O,B){var z=O.sortIndex-B.sortIndex;return z!==0?z:O.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,f=null,m=3,g=!1,b=!1,N=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function I(O){for(var B=n(d);B!==null;){if(B.callback===null)s(d);else if(B.startTime<=O)s(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(d)}}function k(O){if(N=!1,I(O),!b)if(n(c)!==null)b=!0,L||(L=!0,A());else{var B=n(d);B!==null&&P(k,B.startTime-O)}}var L=!1,T=-1,p=5,E=-1;function j(){return C?!0:!(t.unstable_now()-E<p)}function D(){if(C=!1,L){var O=t.unstable_now();E=O;var B=!0;try{e:{b=!1,N&&(N=!1,y(T),T=-1),g=!0;var z=m;try{t:{for(I(O),f=n(c);f!==null&&!(f.expirationTime>O&&j());){var $=f.callback;if(typeof $=="function"){f.callback=null,m=f.priorityLevel;var U=$(f.expirationTime<=O);if(O=t.unstable_now(),typeof U=="function"){f.callback=U,I(O),B=!0;break t}f===n(c)&&s(c),I(O)}else s(c);f=n(c)}if(f!==null)B=!0;else{var Y=n(d);Y!==null&&P(k,Y.startTime-O),B=!1}}break e}finally{f=null,m=z,g=!1}B=void 0}}finally{B?A():L=!1}}}var A;if(typeof S=="function")A=function(){S(D)};else if(typeof MessageChannel<"u"){var v=new MessageChannel,V=v.port2;v.port1.onmessage=D,A=function(){V.postMessage(null)}}else A=function(){w(D,0)};function P(O,B){T=w(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):p=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var z=m;m=B;try{return O()}finally{m=z}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=m;m=O;try{return B()}finally{m=z}},t.unstable_scheduleCallback=function(O,B,z){var $=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?$+z:$):z=$,O){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=z+U,O={id:h++,callback:B,priorityLevel:O,startTime:z,expirationTime:U,sortIndex:-1},z>$?(O.sortIndex=z,e(d,O),n(c)===null&&O===n(d)&&(N?(y(T),T=-1):N=!0,P(k,z-$))):(O.sortIndex=U,e(c,O),b||g||(b=!0,L||(L=!0,A()))),O},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(O){var B=m;return function(){var z=m;m=B;try{return O.apply(this,arguments)}finally{m=z}}}})(oN);aN.exports=oN;var vR=aN.exports,lN={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bR=R;function cN(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Yi(){}var wn={d:{f:Yi,r:function(){throw Error(cN(522))},D:Yi,C:Yi,L:Yi,m:Yi,X:Yi,S:Yi,M:Yi},p:0,findDOMNode:null},wR=Symbol.for("react.portal");function _R(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wR,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var cc=bR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function yf(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=wn;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(cN(299));return _R(t,e,null,n)};Sn.flushSync=function(t){var e=cc.T,n=wn.p;try{if(cc.T=null,wn.p=2,t)return t()}finally{cc.T=e,wn.p=n,wn.d.f()}};Sn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,wn.d.C(t,e))};Sn.prefetchDNS=function(t){typeof t=="string"&&wn.d.D(t)};Sn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=yf(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?wn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:r}):n==="script"&&wn.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Sn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=yf(e.as,e.crossOrigin);wn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&wn.d.M(t)};Sn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=yf(n,e.crossOrigin);wn.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Sn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=yf(e.as,e.crossOrigin);wn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else wn.d.m(t)};Sn.requestFormReset=function(t){wn.d.r(t)};Sn.unstable_batchedUpdates=function(t,e){return t(e)};Sn.useFormState=function(t,e,n){return cc.H.useFormState(t,e,n)};Sn.useFormStatus=function(){return cc.H.useHostTransitionStatus()};Sn.version="19.2.3";function uN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uN)}catch(t){console.error(t)}}uN(),lN.exports=Sn;var NR=lN.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt=vR,dN=R,SR=NR;function X(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function hN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mN(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hb(t){if(fu(t)!==t)throw Error(X(188))}function TR(t){var e=t.alternate;if(!e){if(e=fu(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return hb(i),t;if(r===s)return hb(i),e;r=r.sibling}throw Error(X(188))}if(n.return!==s.return)n=i,s=r;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==s)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function pN(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=pN(t),e!==null)return e;t=t.sibling}return null}var dt=Object.assign,ER=Symbol.for("react.element"),od=Symbol.for("react.transitional.element"),ql=Symbol.for("react.portal"),ro=Symbol.for("react.fragment"),gN=Symbol.for("react.strict_mode"),Kp=Symbol.for("react.profiler"),xN=Symbol.for("react.consumer"),oi=Symbol.for("react.context"),G0=Symbol.for("react.forward_ref"),Qp=Symbol.for("react.suspense"),Yp=Symbol.for("react.suspense_list"),K0=Symbol.for("react.memo"),Ji=Symbol.for("react.lazy"),qp=Symbol.for("react.activity"),jR=Symbol.for("react.memo_cache_sentinel"),fb=Symbol.iterator;function Ul(t){return t===null||typeof t!="object"?null:(t=fb&&t[fb]||t["@@iterator"],typeof t=="function"?t:null)}var AR=Symbol.for("react.client.reference");function Xp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===AR?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ro:return"Fragment";case Kp:return"Profiler";case gN:return"StrictMode";case Qp:return"Suspense";case Yp:return"SuspenseList";case qp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ql:return"Portal";case oi:return t.displayName||"Context";case xN:return(t._context.displayName||"Context")+".Consumer";case G0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case K0:return e=t.displayName||null,e!==null?e:Xp(t.type)||"Memo";case Ji:e=t._payload,t=t._init;try{return Xp(t(e))}catch{}}return null}var Xl=Array.isArray,Ne=dN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$e=SR.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ga={pending:!1,data:null,method:null,action:null},Wp=[],ao=-1;function Ys(t){return{current:t}}function en(t){0>ao||(t.current=Wp[ao],Wp[ao]=null,ao--)}function it(t,e){ao++,Wp[ao]=t.current,t.current=e}var zs=Ys(null),Vc=Ys(null),pr=Ys(null),oh=Ys(null);function lh(t,e){switch(it(pr,e),it(Vc,t),it(zs,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?v1(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=v1(e),t=PT(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}en(zs),it(zs,t)}function Vo(){en(zs),en(Vc),en(pr)}function Jp(t){t.memoizedState!==null&&it(oh,t);var e=zs.current,n=PT(e,t.type);e!==n&&(it(Vc,t),it(zs,n))}function ch(t){Vc.current===t&&(en(zs),en(Vc)),oh.current===t&&(en(oh),Qc._currentValue=ga)}var Im,mb;function sa(t){if(Im===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Im=e&&e[1]||"",mb=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Im+t+mb}var km=!1;function Dm(t,e){if(!t||km)return"";km=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(g){var m=g}Reflect.construct(t,[],f)}else{try{f.call()}catch(g){m=g}t.call(f.prototype)}}else{try{throw Error()}catch(g){m=g}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(g){if(g&&m&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),o=r[0],l=r[1];if(o&&l){var c=o.split(`
`),d=l.split(`
`);for(i=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;i<d.length&&!d[i].includes("DetermineComponentFrameRoot");)i++;if(s===c.length||i===d.length)for(s=c.length-1,i=d.length-1;1<=s&&0<=i&&c[s]!==d[i];)i--;for(;1<=s&&0<=i;s--,i--)if(c[s]!==d[i]){if(s!==1||i!==1)do if(s--,i--,0>i||c[s]!==d[i]){var h=`
`+c[s].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=s&&0<=i);break}}}finally{km=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?sa(n):""}function CR(t,e){switch(t.tag){case 26:case 27:case 5:return sa(t.type);case 16:return sa("Lazy");case 13:return t.child!==e&&e!==null?sa("Suspense Fallback"):sa("Suspense");case 19:return sa("SuspenseList");case 0:case 15:return Dm(t.type,!1);case 11:return Dm(t.type.render,!1);case 1:return Dm(t.type,!0);case 31:return sa("Activity");default:return""}}function pb(t){try{var e="",n=null;do e+=CR(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Zp=Object.prototype.hasOwnProperty,Q0=Kt.unstable_scheduleCallback,Mm=Kt.unstable_cancelCallback,RR=Kt.unstable_shouldYield,IR=Kt.unstable_requestPaint,Kn=Kt.unstable_now,kR=Kt.unstable_getCurrentPriorityLevel,yN=Kt.unstable_ImmediatePriority,vN=Kt.unstable_UserBlockingPriority,uh=Kt.unstable_NormalPriority,DR=Kt.unstable_LowPriority,bN=Kt.unstable_IdlePriority,MR=Kt.log,OR=Kt.unstable_setDisableYieldValue,mu=null,Qn=null;function lr(t){if(typeof MR=="function"&&OR(t),Qn&&typeof Qn.setStrictMode=="function")try{Qn.setStrictMode(mu,t)}catch{}}var Yn=Math.clz32?Math.clz32:LR,VR=Math.log,PR=Math.LN2;function LR(t){return t>>>=0,t===0?32:31-(VR(t)/PR|0)|0}var ld=256,cd=262144,ud=4194304;function ia(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function vf(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var l=s&134217727;return l!==0?(s=l&~r,s!==0?i=ia(s):(o&=l,o!==0?i=ia(o):n||(n=l&~t,n!==0&&(i=ia(n))))):(l=s&~r,l!==0?i=ia(l):o!==0?i=ia(o):n||(n=s&~t,n!==0&&(i=ia(n)))),i===0?0:e!==0&&e!==i&&!(e&r)&&(r=i&-i,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:i}function pu(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function zR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wN(){var t=ud;return ud<<=1,!(ud&62914560)&&(ud=4194304),t}function Om(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gu(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function UR(t,e,n,s,i,r){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=o&~n;0<n;){var h=31-Yn(n),f=1<<h;l[h]=0,c[h]=-1;var m=d[h];if(m!==null)for(d[h]=null,h=0;h<m.length;h++){var g=m[h];g!==null&&(g.lane&=-536870913)}n&=~f}s!==0&&_N(t,s,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(o&~e))}function _N(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Yn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function NN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Yn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function SN(t,e){var n=e&-e;return n=n&42?1:Y0(n),n&(t.suspendedLanes|e)?0:n}function Y0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function q0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function TN(){var t=$e.p;return t!==0?t:(t=window.event,t===void 0?32:YT(t.type))}function gb(t,e){var n=$e.p;try{return $e.p=t,e()}finally{$e.p=n}}var Fr=Math.random().toString(36).slice(2),an="__reactFiber$"+Fr,On="__reactProps$"+Fr,cl="__reactContainer$"+Fr,eg="__reactEvents$"+Fr,BR="__reactListeners$"+Fr,FR="__reactHandles$"+Fr,xb="__reactResources$"+Fr,xu="__reactMarker$"+Fr;function X0(t){delete t[an],delete t[On],delete t[eg],delete t[BR],delete t[FR]}function oo(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cl]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=S1(t);t!==null;){if(n=t[an])return n;t=S1(t)}return e}t=n,n=t.parentNode}return null}function ul(t){if(t=t[an]||t[cl]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Wl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(X(33))}function So(t){var e=t[xb];return e||(e=t[xb]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Jt(t){t[xu]=!0}var EN=new Set,jN={};function Oa(t,e){Po(t,e),Po(t+"Capture",e)}function Po(t,e){for(jN[t]=e,t=0;t<e.length;t++)EN.add(e[t])}var $R=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yb={},vb={};function HR(t){return Zp.call(vb,t)?!0:Zp.call(yb,t)?!1:$R.test(t)?vb[t]=!0:(yb[t]=!0,!1)}function kd(t,e,n){if(HR(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function dd(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Js(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function rs(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GR(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tg(t){if(!t._valueTracker){var e=AN(t)?"checked":"value";t._valueTracker=GR(t,e,""+t[e])}}function CN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=AN(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function dh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var KR=/[\n"\\]/g;function ls(t){return t.replace(KR,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function ng(t,e,n,s,i,r,o,l){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+rs(e)):t.value!==""+rs(e)&&(t.value=""+rs(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?sg(t,o,rs(e)):n!=null?sg(t,o,rs(n)):s!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+rs(l):t.removeAttribute("name")}function RN(t,e,n,s,i,r,o,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){tg(t);return}n=n!=null?""+rs(n):"",e=e!=null?""+rs(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=l?t.checked:!!s,t.defaultChecked=!!s,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),tg(t)}function sg(t,e,n){e==="number"&&dh(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function To(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+rs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function IN(t,e,n){if(e!=null&&(e=""+rs(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+rs(n):""}function kN(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(X(92));if(Xl(s)){if(1<s.length)throw Error(X(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=rs(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),tg(t)}function Lo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var QR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bb(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||QR.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function DN(t,e,n){if(e!=null&&typeof e!="object")throw Error(X(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&bb(t,i,s)}else for(var r in e)e.hasOwnProperty(r)&&bb(t,r,e[r])}function W0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dd(t){return qR.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function li(){}var ig=null;function J0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lo=null,Eo=null;function wb(t){var e=ul(t);if(e&&(t=e.stateNode)){var n=t[On]||null;e:switch(t=e.stateNode,e.type){case"input":if(ng(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ls(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[On]||null;if(!i)throw Error(X(90));ng(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&CN(s)}break e;case"textarea":IN(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&To(t,!!n.multiple,e,!1)}}}var Vm=!1;function MN(t,e,n){if(Vm)return t(e,n);Vm=!0;try{var s=t(e);return s}finally{if(Vm=!1,(lo!==null||Eo!==null)&&(If(),lo&&(e=lo,t=Eo,Eo=lo=null,wb(e),t)))for(e=0;e<t.length;e++)wb(t[e])}}function Pc(t,e){var n=t.stateNode;if(n===null)return null;var s=n[On]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rg=!1;if(bi)try{var Bl={};Object.defineProperty(Bl,"passive",{get:function(){rg=!0}}),window.addEventListener("test",Bl,Bl),window.removeEventListener("test",Bl,Bl)}catch{rg=!1}var cr=null,Z0=null,Md=null;function ON(){if(Md)return Md;var t,e=Z0,n=e.length,s,i="value"in cr?cr.value:cr.textContent,r=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===i[r-s];s++);return Md=i.slice(t,1<s?1-s:void 0)}function Od(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hd(){return!0}function _b(){return!1}function Pn(t){function e(n,s,i,r,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?hd:_b,this.isPropagationStopped=_b,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hd)},persist:function(){},isPersistent:hd}),e}var Va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bf=Pn(Va),yu=dt({},Va,{view:0,detail:0}),XR=Pn(yu),Pm,Lm,Fl,wf=dt({},yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ex,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fl&&(Fl&&t.type==="mousemove"?(Pm=t.screenX-Fl.screenX,Lm=t.screenY-Fl.screenY):Lm=Pm=0,Fl=t),Pm)},movementY:function(t){return"movementY"in t?t.movementY:Lm}}),Nb=Pn(wf),WR=dt({},wf,{dataTransfer:0}),JR=Pn(WR),ZR=dt({},yu,{relatedTarget:0}),zm=Pn(ZR),eI=dt({},Va,{animationName:0,elapsedTime:0,pseudoElement:0}),tI=Pn(eI),nI=dt({},Va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sI=Pn(nI),iI=dt({},Va,{data:0}),Sb=Pn(iI),rI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oI[t])?!!e[t]:!1}function ex(){return lI}var cI=dt({},yu,{key:function(t){if(t.key){var e=rI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Od(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ex,charCode:function(t){return t.type==="keypress"?Od(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Od(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uI=Pn(cI),dI=dt({},wf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tb=Pn(dI),hI=dt({},yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ex}),fI=Pn(hI),mI=dt({},Va,{propertyName:0,elapsedTime:0,pseudoElement:0}),pI=Pn(mI),gI=dt({},wf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xI=Pn(gI),yI=dt({},Va,{newState:0,oldState:0}),vI=Pn(yI),bI=[9,13,27,32],tx=bi&&"CompositionEvent"in window,uc=null;bi&&"documentMode"in document&&(uc=document.documentMode);var wI=bi&&"TextEvent"in window&&!uc,VN=bi&&(!tx||uc&&8<uc&&11>=uc),Eb=" ",jb=!1;function PN(t,e){switch(t){case"keyup":return bI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var co=!1;function _I(t,e){switch(t){case"compositionend":return LN(e);case"keypress":return e.which!==32?null:(jb=!0,Eb);case"textInput":return t=e.data,t===Eb&&jb?null:t;default:return null}}function NI(t,e){if(co)return t==="compositionend"||!tx&&PN(t,e)?(t=ON(),Md=Z0=cr=null,co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return VN&&e.locale!=="ko"?null:e.data;default:return null}}var SI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ab(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SI[t.type]:e==="textarea"}function zN(t,e,n,s){lo?Eo?Eo.push(s):Eo=[s]:lo=s,e=Ch(e,"onChange"),0<e.length&&(n=new bf("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var dc=null,Lc=null;function TI(t){MT(t,0)}function _f(t){var e=Wl(t);if(CN(e))return t}function Cb(t,e){if(t==="change")return e}var UN=!1;if(bi){var Um;if(bi){var Bm="oninput"in document;if(!Bm){var Rb=document.createElement("div");Rb.setAttribute("oninput","return;"),Bm=typeof Rb.oninput=="function"}Um=Bm}else Um=!1;UN=Um&&(!document.documentMode||9<document.documentMode)}function Ib(){dc&&(dc.detachEvent("onpropertychange",BN),Lc=dc=null)}function BN(t){if(t.propertyName==="value"&&_f(Lc)){var e=[];zN(e,Lc,t,J0(t)),MN(TI,e)}}function EI(t,e,n){t==="focusin"?(Ib(),dc=e,Lc=n,dc.attachEvent("onpropertychange",BN)):t==="focusout"&&Ib()}function jI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _f(Lc)}function AI(t,e){if(t==="click")return _f(e)}function CI(t,e){if(t==="input"||t==="change")return _f(e)}function RI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:RI;function zc(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Zp.call(e,i)||!Wn(t[i],e[i]))return!1}return!0}function kb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Db(t,e){var n=kb(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kb(n)}}function FN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $N(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=dh(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dh(t.document)}return e}function nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var II=bi&&"documentMode"in document&&11>=document.documentMode,uo=null,ag=null,hc=null,og=!1;function Mb(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;og||uo==null||uo!==dh(s)||(s=uo,"selectionStart"in s&&nx(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),hc&&zc(hc,s)||(hc=s,s=Ch(ag,"onSelect"),0<s.length&&(e=new bf("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=uo)))}function ea(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ho={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionrun:ea("Transition","TransitionRun"),transitionstart:ea("Transition","TransitionStart"),transitioncancel:ea("Transition","TransitionCancel"),transitionend:ea("Transition","TransitionEnd")},Fm={},HN={};bi&&(HN=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Pa(t){if(Fm[t])return Fm[t];if(!ho[t])return t;var e=ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in HN)return Fm[t]=e[n];return t}var GN=Pa("animationend"),KN=Pa("animationiteration"),QN=Pa("animationstart"),kI=Pa("transitionrun"),DI=Pa("transitionstart"),MI=Pa("transitioncancel"),YN=Pa("transitionend"),qN=new Map,lg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lg.push("scrollEnd");function As(t,e){qN.set(t,e),Oa(e,[t])}var hh=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},is=[],fo=0,sx=0;function Nf(){for(var t=fo,e=sx=fo=0;e<t;){var n=is[e];is[e++]=null;var s=is[e];is[e++]=null;var i=is[e];is[e++]=null;var r=is[e];if(is[e++]=null,s!==null&&i!==null){var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}r!==0&&XN(n,i,r)}}function Sf(t,e,n,s){is[fo++]=t,is[fo++]=e,is[fo++]=n,is[fo++]=s,sx|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function ix(t,e,n,s){return Sf(t,e,n,s),fh(t)}function La(t,e){return Sf(t,null,null,e),fh(t)}function XN(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,r=t.return;r!==null;)r.childLanes|=n,s=r.alternate,s!==null&&(s.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&e!==null&&(i=31-Yn(n),t=r.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),r):null}function fh(t){if(50<wc)throw wc=0,Cg=null,Error(X(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var mo={};function OI(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,s){return new OI(t,e,n,s)}function rx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hi(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function WN(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Vd(t,e,n,s,i,r){var o=0;if(s=t,typeof t=="function")rx(t)&&(o=1);else if(typeof t=="string")o=U3(t,n,zs.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case qp:return t=Fn(31,n,e,i),t.elementType=qp,t.lanes=r,t;case ro:return xa(n.children,i,r,e);case gN:o=8,i|=24;break;case Kp:return t=Fn(12,n,e,i|2),t.elementType=Kp,t.lanes=r,t;case Qp:return t=Fn(13,n,e,i),t.elementType=Qp,t.lanes=r,t;case Yp:return t=Fn(19,n,e,i),t.elementType=Yp,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oi:o=10;break e;case xN:o=9;break e;case G0:o=11;break e;case K0:o=14;break e;case Ji:o=16,s=null;break e}o=29,n=Error(X(130,t===null?"null":typeof t,"")),s=null}return e=Fn(o,n,e,i),e.elementType=t,e.type=s,e.lanes=r,e}function xa(t,e,n,s){return t=Fn(7,t,s,e),t.lanes=n,t}function $m(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function JN(t){var e=Fn(18,null,null,0);return e.stateNode=t,e}function Hm(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Ob=new WeakMap;function cs(t,e){if(typeof t=="object"&&t!==null){var n=Ob.get(t);return n!==void 0?n:(e={value:t,source:e,stack:pb(e)},Ob.set(t,e),e)}return{value:t,source:e,stack:pb(e)}}var po=[],go=0,mh=null,Uc=0,as=[],os=0,Rr=null,Vs=1,Ps="";function ii(t,e){po[go++]=Uc,po[go++]=mh,mh=t,Uc=e}function ZN(t,e,n){as[os++]=Vs,as[os++]=Ps,as[os++]=Rr,Rr=t;var s=Vs;t=Ps;var i=32-Yn(s)-1;s&=~(1<<i),n+=1;var r=32-Yn(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Vs=1<<32-Yn(e)+i|n<<i|s,Ps=r+t}else Vs=1<<r|n<<i|s,Ps=t}function ax(t){t.return!==null&&(ii(t,1),ZN(t,1,0))}function ox(t){for(;t===mh;)mh=po[--go],po[go]=null,Uc=po[--go],po[go]=null;for(;t===Rr;)Rr=as[--os],as[os]=null,Ps=as[--os],as[os]=null,Vs=as[--os],as[os]=null}function eS(t,e){as[os++]=Vs,as[os++]=Ps,as[os++]=Rr,Vs=e.id,Ps=e.overflow,Rr=t}var on=null,ot=null,ze=!1,gr=null,us=!1,cg=Error(X(519));function Ir(t){var e=Error(X(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bc(cs(e,t)),cg}function Vb(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[an]=t,e[On]=s,n){case"dialog":De("cancel",e),De("close",e);break;case"iframe":case"object":case"embed":De("load",e);break;case"video":case"audio":for(n=0;n<Gc.length;n++)De(Gc[n],e);break;case"source":De("error",e);break;case"img":case"image":case"link":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"input":De("invalid",e),RN(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":De("invalid",e);break;case"textarea":De("invalid",e),kN(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||VT(e.textContent,n)?(s.popover!=null&&(De("beforetoggle",e),De("toggle",e)),s.onScroll!=null&&De("scroll",e),s.onScrollEnd!=null&&De("scrollend",e),s.onClick!=null&&(e.onclick=li),e=!0):e=!1,e||Ir(t,!0)}function Pb(t){for(on=t.return;on;)switch(on.tag){case 5:case 31:case 13:us=!1;return;case 27:case 3:us=!0;return;default:on=on.return}}function Xa(t){if(t!==on)return!1;if(!ze)return Pb(t),ze=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Mg(t.type,t.memoizedProps)),n=!n),n&&ot&&Ir(t),Pb(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));ot=N1(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));ot=N1(t)}else e===27?(e=ot,$r(t.type)?(t=Lg,Lg=null,ot=t):ot=e):ot=on?fs(t.stateNode.nextSibling):null;return!0}function Sa(){ot=on=null,ze=!1}function Gm(){var t=gr;return t!==null&&(Rn===null?Rn=t:Rn.push.apply(Rn,t),gr=null),t}function Bc(t){gr===null?gr=[t]:gr.push(t)}var ug=Ys(null),za=null,ci=null;function er(t,e,n){it(ug,e._currentValue),e._currentValue=n}function fi(t){t._currentValue=ug.current,en(ug)}function dg(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function hg(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var o=i.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=i;for(var c=0;c<e.length;c++)if(l.context===e[c]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),dg(r.return,n,t),s||(o=null);break e}r=l.next}}else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=n,r=o.alternate,r!==null&&(r.lanes|=n),dg(o,n,t),o=null}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}}function dl(t,e,n,s){t=null;for(var i=e,r=!1;i!==null;){if(!r){if(i.flags&524288)r=!0;else if(i.flags&262144)break}if(i.tag===10){var o=i.alternate;if(o===null)throw Error(X(387));if(o=o.memoizedProps,o!==null){var l=i.type;Wn(i.pendingProps.value,o.value)||(t!==null?t.push(l):t=[l])}}else if(i===oh.current){if(o=i.alternate,o===null)throw Error(X(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Qc):t=[Qc])}i=i.return}t!==null&&hg(e,t,n,s),e.flags|=262144}function ph(t){for(t=t.firstContext;t!==null;){if(!Wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ta(t){za=t,ci=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function cn(t){return tS(za,t)}function fd(t,e){return za===null&&Ta(t),tS(t,e)}function tS(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ci===null){if(t===null)throw Error(X(308));ci=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ci=ci.next=e;return n}var VI=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},PI=Kt.unstable_scheduleCallback,LI=Kt.unstable_NormalPriority,Ot={$$typeof:oi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lx(){return{controller:new VI,data:new Map,refCount:0}}function vu(t){t.refCount--,t.refCount===0&&PI(LI,function(){t.controller.abort()})}var fc=null,fg=0,zo=0,jo=null;function zI(t,e){if(fc===null){var n=fc=[];fg=0,zo=Dx(),jo={status:"pending",value:void 0,then:function(s){n.push(s)}}}return fg++,e.then(Lb,Lb),e}function Lb(){if(--fg===0&&fc!==null){jo!==null&&(jo.status="fulfilled");var t=fc;fc=null,zo=0,jo=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function UI(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var zb=Ne.S;Ne.S=function(t,e){pT=Kn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&zI(t,e),zb!==null&&zb(t,e)};var ya=Ys(null);function cx(){var t=ya.current;return t!==null?t:nt.pooledCache}function Pd(t,e){e===null?it(ya,ya.current):it(ya,e.pool)}function nS(){var t=cx();return t===null?null:{parent:Ot._currentValue,pool:t}}var hl=Error(X(460)),ux=Error(X(474)),Tf=Error(X(542)),gh={then:function(){}};function Ub(t){return t=t.status,t==="fulfilled"||t==="rejected"}function sS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(li,li),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Fb(t),t;default:if(typeof e.status=="string")e.then(li,li);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(X(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Fb(t),t}throw va=e,hl}}function ra(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(va=n,hl):n}}var va=null;function Bb(){if(va===null)throw Error(X(459));var t=va;return va=null,t}function Fb(t){if(t===hl||t===Tf)throw Error(X(483))}var Ao=null,Fc=0;function md(t){var e=Fc;return Fc+=1,Ao===null&&(Ao=[]),sS(Ao,t,e)}function $l(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function pd(t,e){throw e.$$typeof===ER?Error(X(525)):(t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function iS(t){function e(w,y){if(t){var S=w.deletions;S===null?(w.deletions=[y],w.flags|=16):S.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function s(w){for(var y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(w,y){return w=hi(w,y),w.index=0,w.sibling=null,w}function r(w,y,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<y?(w.flags|=67108866,y):S):(w.flags|=67108866,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=67108866),w}function l(w,y,S,I){return y===null||y.tag!==6?(y=$m(S,w.mode,I),y.return=w,y):(y=i(y,S),y.return=w,y)}function c(w,y,S,I){var k=S.type;return k===ro?h(w,y,S.props.children,I,S.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ji&&ra(k)===y.type)?(y=i(y,S.props),$l(y,S),y.return=w,y):(y=Vd(S.type,S.key,S.props,null,w.mode,I),$l(y,S),y.return=w,y)}function d(w,y,S,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=Hm(S,w.mode,I),y.return=w,y):(y=i(y,S.children||[]),y.return=w,y)}function h(w,y,S,I,k){return y===null||y.tag!==7?(y=xa(S,w.mode,I,k),y.return=w,y):(y=i(y,S),y.return=w,y)}function f(w,y,S){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=$m(""+y,w.mode,S),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case od:return S=Vd(y.type,y.key,y.props,null,w.mode,S),$l(S,y),S.return=w,S;case ql:return y=Hm(y,w.mode,S),y.return=w,y;case Ji:return y=ra(y),f(w,y,S)}if(Xl(y)||Ul(y))return y=xa(y,w.mode,S,null),y.return=w,y;if(typeof y.then=="function")return f(w,md(y),S);if(y.$$typeof===oi)return f(w,fd(w,y),S);pd(w,y)}return null}function m(w,y,S,I){var k=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return k!==null?null:l(w,y,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case od:return S.key===k?c(w,y,S,I):null;case ql:return S.key===k?d(w,y,S,I):null;case Ji:return S=ra(S),m(w,y,S,I)}if(Xl(S)||Ul(S))return k!==null?null:h(w,y,S,I,null);if(typeof S.then=="function")return m(w,y,md(S),I);if(S.$$typeof===oi)return m(w,y,fd(w,S),I);pd(w,S)}return null}function g(w,y,S,I,k){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return w=w.get(S)||null,l(y,w,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case od:return w=w.get(I.key===null?S:I.key)||null,c(y,w,I,k);case ql:return w=w.get(I.key===null?S:I.key)||null,d(y,w,I,k);case Ji:return I=ra(I),g(w,y,S,I,k)}if(Xl(I)||Ul(I))return w=w.get(S)||null,h(y,w,I,k,null);if(typeof I.then=="function")return g(w,y,S,md(I),k);if(I.$$typeof===oi)return g(w,y,S,fd(y,I),k);pd(y,I)}return null}function b(w,y,S,I){for(var k=null,L=null,T=y,p=y=0,E=null;T!==null&&p<S.length;p++){T.index>p?(E=T,T=null):E=T.sibling;var j=m(w,T,S[p],I);if(j===null){T===null&&(T=E);break}t&&T&&j.alternate===null&&e(w,T),y=r(j,y,p),L===null?k=j:L.sibling=j,L=j,T=E}if(p===S.length)return n(w,T),ze&&ii(w,p),k;if(T===null){for(;p<S.length;p++)T=f(w,S[p],I),T!==null&&(y=r(T,y,p),L===null?k=T:L.sibling=T,L=T);return ze&&ii(w,p),k}for(T=s(T);p<S.length;p++)E=g(T,w,p,S[p],I),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?p:E.key),y=r(E,y,p),L===null?k=E:L.sibling=E,L=E);return t&&T.forEach(function(D){return e(w,D)}),ze&&ii(w,p),k}function N(w,y,S,I){if(S==null)throw Error(X(151));for(var k=null,L=null,T=y,p=y=0,E=null,j=S.next();T!==null&&!j.done;p++,j=S.next()){T.index>p?(E=T,T=null):E=T.sibling;var D=m(w,T,j.value,I);if(D===null){T===null&&(T=E);break}t&&T&&D.alternate===null&&e(w,T),y=r(D,y,p),L===null?k=D:L.sibling=D,L=D,T=E}if(j.done)return n(w,T),ze&&ii(w,p),k;if(T===null){for(;!j.done;p++,j=S.next())j=f(w,j.value,I),j!==null&&(y=r(j,y,p),L===null?k=j:L.sibling=j,L=j);return ze&&ii(w,p),k}for(T=s(T);!j.done;p++,j=S.next())j=g(T,w,p,j.value,I),j!==null&&(t&&j.alternate!==null&&T.delete(j.key===null?p:j.key),y=r(j,y,p),L===null?k=j:L.sibling=j,L=j);return t&&T.forEach(function(A){return e(w,A)}),ze&&ii(w,p),k}function C(w,y,S,I){if(typeof S=="object"&&S!==null&&S.type===ro&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case od:e:{for(var k=S.key;y!==null;){if(y.key===k){if(k=S.type,k===ro){if(y.tag===7){n(w,y.sibling),I=i(y,S.props.children),I.return=w,w=I;break e}}else if(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ji&&ra(k)===y.type){n(w,y.sibling),I=i(y,S.props),$l(I,S),I.return=w,w=I;break e}n(w,y);break}else e(w,y);y=y.sibling}S.type===ro?(I=xa(S.props.children,w.mode,I,S.key),I.return=w,w=I):(I=Vd(S.type,S.key,S.props,null,w.mode,I),$l(I,S),I.return=w,w=I)}return o(w);case ql:e:{for(k=S.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(w,y.sibling),I=i(y,S.children||[]),I.return=w,w=I;break e}else{n(w,y);break}else e(w,y);y=y.sibling}I=Hm(S,w.mode,I),I.return=w,w=I}return o(w);case Ji:return S=ra(S),C(w,y,S,I)}if(Xl(S))return b(w,y,S,I);if(Ul(S)){if(k=Ul(S),typeof k!="function")throw Error(X(150));return S=k.call(S),N(w,y,S,I)}if(typeof S.then=="function")return C(w,y,md(S),I);if(S.$$typeof===oi)return C(w,y,fd(w,S),I);pd(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,y!==null&&y.tag===6?(n(w,y.sibling),I=i(y,S),I.return=w,w=I):(n(w,y),I=$m(S,w.mode,I),I.return=w,w=I),o(w)):n(w,y)}return function(w,y,S,I){try{Fc=0;var k=C(w,y,S,I);return Ao=null,k}catch(T){if(T===hl||T===Tf)throw T;var L=Fn(29,T,null,w.mode);return L.lanes=I,L.return=w,L}finally{}}}var Ea=iS(!0),rS=iS(!1),Zi=!1;function dx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Fe&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=fh(t),XN(t,null,n),e}return Sf(t,s,e,n),fh(t)}function mc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,NN(t,n)}}function Km(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?i=r=e:r=r.next=e}else i=r=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var pg=!1;function pc(){if(pg){var t=jo;if(t!==null)throw t}}function gc(t,e,n,s){pg=!1;var i=t.updateQueue;Zi=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?r=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(r!==null){var f=i.baseState;o=0,h=d=c=null,l=r;do{var m=l.lane&-536870913,g=m!==l.lane;if(g?(Le&m)===m:(s&m)===m){m!==0&&m===zo&&(pg=!0),h!==null&&(h=h.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var b=t,N=l;m=e;var C=n;switch(N.tag){case 1:if(b=N.payload,typeof b=="function"){f=b.call(C,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,m=typeof b=="function"?b.call(C,f,m):b,m==null)break e;f=dt({},f,m);break e;case 2:Zi=!0}}m=l.callback,m!==null&&(t.flags|=64,g&&(t.flags|=8192),g=i.callbacks,g===null?i.callbacks=[m]:g.push(m))}else g={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=g,c=f):h=h.next=g,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);h===null&&(c=f),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,r===null&&(i.shared.lanes=0),Dr|=o,t.lanes=o,t.memoizedState=f}}function aS(t,e){if(typeof t!="function")throw Error(X(191,t));t.call(e)}function oS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)aS(n[t],e)}var Uo=Ys(null),xh=Ys(0);function $b(t,e){t=Si,it(xh,t),it(Uo,e),Si=t|e.baseLanes}function gg(){it(xh,Si),it(Uo,Uo.current)}function hx(){Si=xh.current,en(Uo),en(xh)}var Jn=Ys(null),hs=null;function tr(t){var e=t.alternate;it(jt,jt.current&1),it(Jn,t),hs===null&&(e===null||Uo.current!==null||e.memoizedState!==null)&&(hs=t)}function xg(t){it(jt,jt.current),it(Jn,t),hs===null&&(hs=t)}function lS(t){t.tag===22?(it(jt,jt.current),it(Jn,t),hs===null&&(hs=t)):nr()}function nr(){it(jt,jt.current),it(Jn,Jn.current)}function Bn(t){en(Jn),hs===t&&(hs=null),en(jt)}var jt=Ys(0);function yh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Vg(n)||Pg(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wi=0,Ie=null,Je=null,Dt=null,vh=!1,Co=!1,ja=!1,bh=0,$c=0,Ro=null,BI=0;function bt(){throw Error(X(321))}function fx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function mx(t,e,n,s,i,r){return wi=r,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ne.H=t===null||t.memoizedState===null?zS:Tx,ja=!1,r=n(s,i),ja=!1,Co&&(r=uS(e,n,s,i)),cS(t),r}function cS(t){Ne.H=Hc;var e=Je!==null&&Je.next!==null;if(wi=0,Dt=Je=Ie=null,vh=!1,$c=0,Ro=null,e)throw Error(X(300));t===null||Pt||(t=t.dependencies,t!==null&&ph(t)&&(Pt=!0))}function uS(t,e,n,s){Ie=t;var i=0;do{if(Co&&(Ro=null),$c=0,Co=!1,25<=i)throw Error(X(301));if(i+=1,Dt=Je=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Ne.H=US,r=e(n,s)}while(Co);return r}function FI(){var t=Ne.H,e=t.useState()[0];return e=typeof e.then=="function"?bu(e):e,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Ie.flags|=1024),e}function px(){var t=bh!==0;return bh=0,t}function gx(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function xx(t){if(vh){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}vh=!1}wi=0,Dt=Je=Ie=null,Co=!1,$c=bh=0,Ro=null}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Ie.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function At(){if(Je===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=Dt===null?Ie.memoizedState:Dt.next;if(e!==null)Dt=e,Je=t;else{if(t===null)throw Ie.alternate===null?Error(X(467)):Error(X(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Dt===null?Ie.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bu(t){var e=$c;return $c+=1,Ro===null&&(Ro=[]),t=sS(Ro,t,e),e=Ie,(Dt===null?e.memoizedState:Dt.next)===null&&(e=e.alternate,Ne.H=e===null||e.memoizedState===null?zS:Tx),t}function jf(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bu(t);if(t.$$typeof===oi)return cn(t)}throw Error(X(438,String(t)))}function yx(t){var e=null,n=Ie.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=Ie.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Ef(),Ie.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=jR;return e.index++,n}function _i(t,e){return typeof e=="function"?e(t):e}function Ld(t){var e=At();return vx(e,Je,t)}function vx(t,e,n){var s=t.queue;if(s===null)throw Error(X(311));s.lastRenderedReducer=n;var i=t.baseQueue,r=s.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}e.baseQueue=i=r,s.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{e=i.next;var l=o=null,c=null,d=e,h=!1;do{var f=d.lane&-536870913;if(f!==d.lane?(Le&f)===f:(wi&f)===f){var m=d.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),f===zo&&(h=!0);else if((wi&m)===m){d=d.next,m===zo&&(h=!0);continue}else f={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=f,o=r):c=c.next=f,Ie.lanes|=m,Dr|=m;f=d.action,ja&&n(r,f),r=d.hasEagerState?d.eagerState:n(r,f)}else m={lane:f,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=m,o=r):c=c.next=m,Ie.lanes|=f,Dr|=f;d=d.next}while(d!==null&&d!==e);if(c===null?o=r:c.next=l,!Wn(r,t.memoizedState)&&(Pt=!0,h&&(n=jo,n!==null)))throw n;t.memoizedState=r,t.baseState=o,t.baseQueue=c,s.lastRenderedState=r}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Qm(t){var e=At(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do r=t(r,o.action),o=o.next;while(o!==i);Wn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function dS(t,e,n){var s=Ie,i=At(),r=ze;if(r){if(n===void 0)throw Error(X(407));n=n()}else n=e();var o=!Wn((Je||i).memoizedState,n);if(o&&(i.memoizedState=n,Pt=!0),i=i.queue,bx(mS.bind(null,s,i,t),[t]),i.getSnapshot!==e||o||Dt!==null&&Dt.memoizedState.tag&1){if(s.flags|=2048,Bo(9,{destroy:void 0},fS.bind(null,s,i,n,e),null),nt===null)throw Error(X(349));r||wi&127||hS(s,e,n)}return n}function hS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e=Ef(),Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fS(t,e,n,s){e.value=n,e.getSnapshot=s,pS(e)&&gS(t)}function mS(t,e,n){return n(function(){pS(e)&&gS(t)})}function pS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function gS(t){var e=La(t,2);e!==null&&Dn(e,t,2)}function yg(t){var e=bn();if(typeof t=="function"){var n=t;if(t=n(),ja){lr(!0);try{n()}finally{lr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:t},e}function xS(t,e,n,s){return t.baseState=n,vx(t,Je,typeof s=="function"?s:_i)}function $I(t,e,n,s,i){if(Cf(t))throw Error(X(485));if(t=e.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};Ne.T!==null?n(!0):r.isTransition=!1,s(r),n=e.pending,n===null?(r.next=e.pending=r,yS(e,r)):(r.next=n.next,e.pending=n.next=r)}}function yS(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var r=Ne.T,o={};Ne.T=o;try{var l=n(i,s),c=Ne.S;c!==null&&c(o,l),Hb(t,e,l)}catch(d){vg(t,e,d)}finally{r!==null&&o.types!==null&&(r.types=o.types),Ne.T=r}}else try{r=n(i,s),Hb(t,e,r)}catch(d){vg(t,e,d)}}function Hb(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Gb(t,e,s)},function(s){return vg(t,e,s)}):Gb(t,e,n)}function Gb(t,e,n){e.status="fulfilled",e.value=n,vS(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,yS(t,n)))}function vg(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,vS(e),e=e.next;while(e!==s)}t.action=null}function vS(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function bS(t,e){return e}function Kb(t,e){if(ze){var n=nt.formState;if(n!==null){e:{var s=Ie;if(ze){if(ot){t:{for(var i=ot,r=us;i.nodeType!==8;){if(!r){i=null;break t}if(i=fs(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){ot=fs(i.nextSibling),s=i.data==="F!";break e}}Ir(s)}s=!1}s&&(e=n[0])}}return n=bn(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bS,lastRenderedState:e},n.queue=s,n=VS.bind(null,Ie,s),s.dispatch=n,s=yg(!1),r=Sx.bind(null,Ie,!1,s.queue),s=bn(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=$I.bind(null,Ie,i,r,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function Qb(t){var e=At();return wS(e,Je,t)}function wS(t,e,n){if(e=vx(t,e,bS)[0],t=Ld(_i)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=bu(e)}catch(o){throw o===hl?Tf:o}else s=e;e=At();var i=e.queue,r=i.dispatch;return n!==e.memoizedState&&(Ie.flags|=2048,Bo(9,{destroy:void 0},HI.bind(null,i,n),null)),[s,r,t]}function HI(t,e){t.action=e}function Yb(t){var e=At(),n=Je;if(n!==null)return wS(e,n,t);At(),e=e.memoizedState,n=At();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Bo(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=Ie.updateQueue,e===null&&(e=Ef(),Ie.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function _S(){return At().memoizedState}function zd(t,e,n,s){var i=bn();Ie.flags|=t,i.memoizedState=Bo(1|e,{destroy:void 0},n,s===void 0?null:s)}function Af(t,e,n,s){var i=At();s=s===void 0?null:s;var r=i.memoizedState.inst;Je!==null&&s!==null&&fx(s,Je.memoizedState.deps)?i.memoizedState=Bo(e,r,n,s):(Ie.flags|=t,i.memoizedState=Bo(1|e,r,n,s))}function qb(t,e){zd(8390656,8,t,e)}function bx(t,e){Af(2048,8,t,e)}function GI(t){Ie.flags|=4;var e=Ie.updateQueue;if(e===null)e=Ef(),Ie.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function NS(t){var e=At().memoizedState;return GI({ref:e,nextImpl:t}),function(){if(Fe&2)throw Error(X(440));return e.impl.apply(void 0,arguments)}}function SS(t,e){return Af(4,2,t,e)}function TS(t,e){return Af(4,4,t,e)}function ES(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jS(t,e,n){n=n!=null?n.concat([t]):null,Af(4,4,ES.bind(null,e,t),n)}function wx(){}function AS(t,e){var n=At();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&fx(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function CS(t,e){var n=At();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&fx(e,s[1]))return s[0];if(s=t(),ja){lr(!0);try{t()}finally{lr(!1)}}return n.memoizedState=[s,e],s}function _x(t,e,n){return n===void 0||wi&1073741824&&!(Le&261930)?t.memoizedState=e:(t.memoizedState=n,t=xT(),Ie.lanes|=t,Dr|=t,n)}function RS(t,e,n,s){return Wn(n,e)?n:Uo.current!==null?(t=_x(t,n,s),Wn(t,e)||(Pt=!0),t):!(wi&42)||wi&1073741824&&!(Le&261930)?(Pt=!0,t.memoizedState=n):(t=xT(),Ie.lanes|=t,Dr|=t,e)}function IS(t,e,n,s,i){var r=$e.p;$e.p=r!==0&&8>r?r:8;var o=Ne.T,l={};Ne.T=l,Sx(t,!1,e,n);try{var c=i(),d=Ne.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=UI(c,s);xc(t,e,h,qn(t))}else xc(t,e,s,qn(t))}catch(f){xc(t,e,{then:function(){},status:"rejected",reason:f},qn())}finally{$e.p=r,o!==null&&l.types!==null&&(o.types=l.types),Ne.T=o}}function KI(){}function bg(t,e,n,s){if(t.tag!==5)throw Error(X(476));var i=kS(t).queue;IS(t,i,e,ga,n===null?KI:function(){return DS(t),n(s)})}function kS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ga,baseState:ga,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:ga},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function DS(t){var e=kS(t);e.next===null&&(e=t.alternate.memoizedState),xc(t,e.next.queue,{},qn())}function Nx(){return cn(Qc)}function MS(){return At().memoizedState}function OS(){return At().memoizedState}function QI(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=qn();t=xr(n);var s=yr(e,t,n);s!==null&&(Dn(s,e,n),mc(s,e,n)),e={cache:lx()},t.payload=e;return}e=e.return}}function YI(t,e,n){var s=qn();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Cf(t)?PS(e,n):(n=ix(t,e,n,s),n!==null&&(Dn(n,t,s),LS(n,e,s)))}function VS(t,e,n){var s=qn();xc(t,e,n,s)}function xc(t,e,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cf(t))PS(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,l=r(o,n);if(i.hasEagerState=!0,i.eagerState=l,Wn(l,o))return Sf(t,e,i,0),nt===null&&Nf(),!1}catch{}finally{}if(n=ix(t,e,i,s),n!==null)return Dn(n,t,s),LS(n,e,s),!0}return!1}function Sx(t,e,n,s){if(s={lane:2,revertLane:Dx(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Cf(t)){if(e)throw Error(X(479))}else e=ix(t,n,s,2),e!==null&&Dn(e,t,2)}function Cf(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function PS(t,e){Co=vh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LS(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,NN(t,n)}}var Hc={readContext:cn,use:jf,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};Hc.useEffectEvent=bt;var zS={readContext:cn,use:jf,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:qb,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,zd(4194308,4,ES.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zd(4194308,4,t,e)},useInsertionEffect:function(t,e){zd(4,2,t,e)},useMemo:function(t,e){var n=bn();e=e===void 0?null:e;var s=t();if(ja){lr(!0);try{t()}finally{lr(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=bn();if(n!==void 0){var i=n(e);if(ja){lr(!0);try{n(e)}finally{lr(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=YI.bind(null,Ie,t),[s.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:function(t){t=yg(t);var e=t.queue,n=VS.bind(null,Ie,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:wx,useDeferredValue:function(t,e){var n=bn();return _x(n,t,e)},useTransition:function(){var t=yg(!1);return t=IS.bind(null,Ie,t.queue,!0,!1),bn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=Ie,i=bn();if(ze){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),nt===null)throw Error(X(349));Le&127||hS(s,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,qb(mS.bind(null,s,r,t),[t]),s.flags|=2048,Bo(9,{destroy:void 0},fS.bind(null,s,r,n,e),null),n},useId:function(){var t=bn(),e=nt.identifierPrefix;if(ze){var n=Ps,s=Vs;n=(s&~(1<<32-Yn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=bh++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=BI++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Nx,useFormState:Kb,useActionState:Kb,useOptimistic:function(t){var e=bn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Sx.bind(null,Ie,!0,n),n.dispatch=e,[t,e]},useMemoCache:yx,useCacheRefresh:function(){return bn().memoizedState=QI.bind(null,Ie)},useEffectEvent:function(t){var e=bn(),n={impl:t};return e.memoizedState=n,function(){if(Fe&2)throw Error(X(440));return n.impl.apply(void 0,arguments)}}},Tx={readContext:cn,use:jf,useCallback:AS,useContext:cn,useEffect:bx,useImperativeHandle:jS,useInsertionEffect:SS,useLayoutEffect:TS,useMemo:CS,useReducer:Ld,useRef:_S,useState:function(){return Ld(_i)},useDebugValue:wx,useDeferredValue:function(t,e){var n=At();return RS(n,Je.memoizedState,t,e)},useTransition:function(){var t=Ld(_i)[0],e=At().memoizedState;return[typeof t=="boolean"?t:bu(t),e]},useSyncExternalStore:dS,useId:MS,useHostTransitionStatus:Nx,useFormState:Qb,useActionState:Qb,useOptimistic:function(t,e){var n=At();return xS(n,Je,t,e)},useMemoCache:yx,useCacheRefresh:OS};Tx.useEffectEvent=NS;var US={readContext:cn,use:jf,useCallback:AS,useContext:cn,useEffect:bx,useImperativeHandle:jS,useInsertionEffect:SS,useLayoutEffect:TS,useMemo:CS,useReducer:Qm,useRef:_S,useState:function(){return Qm(_i)},useDebugValue:wx,useDeferredValue:function(t,e){var n=At();return Je===null?_x(n,t,e):RS(n,Je.memoizedState,t,e)},useTransition:function(){var t=Qm(_i)[0],e=At().memoizedState;return[typeof t=="boolean"?t:bu(t),e]},useSyncExternalStore:dS,useId:MS,useHostTransitionStatus:Nx,useFormState:Yb,useActionState:Yb,useOptimistic:function(t,e){var n=At();return Je!==null?xS(n,Je,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:yx,useCacheRefresh:OS};US.useEffectEvent=NS;function Ym(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wg={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=qn(),i=xr(s);i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(Dn(e,t,s),mc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=qn(),i=xr(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(Dn(e,t,s),mc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qn(),s=xr(n);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,n),e!==null&&(Dn(e,t,n),mc(e,t,n))}};function Xb(t,e,n,s,i,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!zc(n,s)||!zc(i,r):!0}function Wb(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&wg.enqueueReplaceState(e,e.state,null)}function Aa(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=dt({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function BS(t){hh(t)}function FS(t){console.error(t)}function $S(t){hh(t)}function wh(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function Jb(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function _g(t,e,n){return n=xr(n),n.tag=3,n.payload={element:null},n.callback=function(){wh(t,e)},n}function HS(t){return t=xr(t),t.tag=3,t}function GS(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=s.value;t.payload=function(){return i(r)},t.callback=function(){Jb(e,n,s)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){Jb(e,n,s),typeof i!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function qI(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&dl(e,n,i,!0),n=Jn.current,n!==null){switch(n.tag){case 31:case 13:return hs===null?Eh():n.alternate===null&&_t===0&&(_t=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===gh?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),rp(t,s,i)),!1;case 22:return n.flags|=65536,s===gh?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),rp(t,s,i)),!1}throw Error(X(435,n.tag))}return rp(t,s,i),Eh(),!1}if(ze)return e=Jn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==cg&&(t=Error(X(422),{cause:s}),Bc(cs(t,n)))):(s!==cg&&(e=Error(X(423),{cause:s}),Bc(cs(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=cs(s,n),i=_g(t.stateNode,s,i),Km(t,i),_t!==4&&(_t=2)),!1;var r=Error(X(520),{cause:s});if(r=cs(r,n),bc===null?bc=[r]:bc.push(r),_t!==4&&(_t=2),e===null)return!0;s=cs(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=_g(n.stateNode,s,t),Km(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=HS(i),GS(i,t,n,s),Km(n,i),!1}n=n.return}while(n!==null);return!1}var Ex=Error(X(461)),Pt=!1;function sn(t,e,n,s){e.child=t===null?rS(e,null,n,s):Ea(e,t.child,n,s)}function Zb(t,e,n,s,i){n=n.render;var r=e.ref;if("ref"in s){var o={};for(var l in s)l!=="ref"&&(o[l]=s[l])}else o=s;return Ta(e),s=mx(t,e,n,o,r,i),l=px(),t!==null&&!Pt?(gx(t,e,i),Ni(t,e,i)):(ze&&l&&ax(e),e.flags|=1,sn(t,e,s,i),e.child)}function e1(t,e,n,s,i){if(t===null){var r=n.type;return typeof r=="function"&&!rx(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,KS(t,e,r,s,i)):(t=Vd(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!jx(t,i)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:zc,n(o,s)&&t.ref===e.ref)return Ni(t,e,i)}return e.flags|=1,t=hi(r,s),t.ref=e.ref,t.return=e,e.child=t}function KS(t,e,n,s,i){if(t!==null){var r=t.memoizedProps;if(zc(r,s)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=s=r,jx(t,i))t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Ni(t,e,i)}return Ng(t,e,n,s,i)}function QS(t,e,n,s){var i=s.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~r}else s=0,e.child=null;return t1(t,e,r,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Pd(e,r!==null?r.cachePool:null),r!==null?$b(e,r):gg(),lS(e);else return s=e.lanes=536870912,t1(t,e,r!==null?r.baseLanes|n:n,n,s)}else r!==null?(Pd(e,r.cachePool),$b(e,r),nr(),e.memoizedState=null):(t!==null&&Pd(e,null),gg(),nr());return sn(t,e,i,n),e.child}function Jl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function t1(t,e,n,s,i){var r=cx();return r=r===null?null:{parent:Ot._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&Pd(e,null),gg(),lS(e),t!==null&&dl(t,e,s,!0),e.childLanes=i,null}function Ud(t,e){return e=_h({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function n1(t,e,n){return Ea(e,t.child,null,n),t=Ud(e,e.pendingProps),t.flags|=2,Bn(e),e.memoizedState=null,t}function XI(t,e,n){var s=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(ze){if(s.mode==="hidden")return t=Ud(e,s),e.lanes=536870912,Jl(null,t);if(xg(e),(t=ot)?(t=zT(t,us),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Rr!==null?{id:Vs,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},n=JN(t),n.return=e,e.child=n,on=e,ot=null)):t=null,t===null)throw Ir(e);return e.lanes=536870912,null}return Ud(e,s)}var r=t.memoizedState;if(r!==null){var o=r.dehydrated;if(xg(e),i)if(e.flags&256)e.flags&=-257,e=n1(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(X(558));else if(Pt||dl(t,e,n,!1),i=(n&t.childLanes)!==0,Pt||i){if(s=nt,s!==null&&(o=SN(s,n),o!==0&&o!==r.retryLane))throw r.retryLane=o,La(t,o),Dn(s,t,o),Ex;Eh(),e=n1(t,e,n)}else t=r.treeContext,ot=fs(o.nextSibling),on=e,ze=!0,gr=null,us=!1,t!==null&&eS(e,t),e=Ud(e,s),e.flags|=4096;return e}return t=hi(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Bd(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(X(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Ng(t,e,n,s,i){return Ta(e),n=mx(t,e,n,s,void 0,i),s=px(),t!==null&&!Pt?(gx(t,e,i),Ni(t,e,i)):(ze&&s&&ax(e),e.flags|=1,sn(t,e,n,i),e.child)}function s1(t,e,n,s,i,r){return Ta(e),e.updateQueue=null,n=uS(e,s,n,i),cS(t),s=px(),t!==null&&!Pt?(gx(t,e,r),Ni(t,e,r)):(ze&&s&&ax(e),e.flags|=1,sn(t,e,n,r),e.child)}function i1(t,e,n,s,i){if(Ta(e),e.stateNode===null){var r=mo,o=n.contextType;typeof o=="object"&&o!==null&&(r=cn(o)),r=new n(s,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=wg,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=s,r.state=e.memoizedState,r.refs={},dx(e),o=n.contextType,r.context=typeof o=="object"&&o!==null?cn(o):mo,r.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Ym(e,n,o,s),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&wg.enqueueReplaceState(r,r.state,null),gc(e,s,r,i),pc(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,c=Aa(n,l);r.props=c;var d=r.context,h=n.contextType;o=mo,typeof h=="object"&&h!==null&&(o=cn(h));var f=n.getDerivedStateFromProps;h=typeof f=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,h||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||d!==o)&&Wb(e,r,s,o),Zi=!1;var m=e.memoizedState;r.state=m,gc(e,s,r,i),pc(),d=e.memoizedState,l||m!==d||Zi?(typeof f=="function"&&(Ym(e,n,f,s),d=e.memoizedState),(c=Zi||Xb(e,n,c,s,m,d,o))?(h||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),r.props=s,r.state=d,r.context=o,s=c):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{r=e.stateNode,mg(t,e),o=e.memoizedProps,h=Aa(n,o),r.props=h,f=e.pendingProps,m=r.context,d=n.contextType,c=mo,typeof d=="object"&&d!==null&&(c=cn(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==f||m!==c)&&Wb(e,r,s,c),Zi=!1,m=e.memoizedState,r.state=m,gc(e,s,r,i),pc();var g=e.memoizedState;o!==f||m!==g||Zi||t!==null&&t.dependencies!==null&&ph(t.dependencies)?(typeof l=="function"&&(Ym(e,n,l,s),g=e.memoizedState),(h=Zi||Xb(e,n,h,s,m,g,c)||t!==null&&t.dependencies!==null&&ph(t.dependencies))?(d||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,g,c),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,g,c)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=g),r.props=s,r.state=g,r.context=c,s=h):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),s=!1)}return r=s,Bd(t,e),s=(e.flags&128)!==0,r||s?(r=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&s?(e.child=Ea(e,t.child,null,i),e.child=Ea(e,null,n,i)):sn(t,e,n,i),e.memoizedState=r.state,t=e.child):t=Ni(t,e,i),t}function r1(t,e,n,s){return Sa(),e.flags|=256,sn(t,e,n,s),e.child}var qm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xm(t){return{baseLanes:t,cachePool:nS()}}function Wm(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Hn),t}function YS(t,e,n){var s=e.pendingProps,i=!1,r=(e.flags&128)!==0,o;if((o=r)||(o=t!==null&&t.memoizedState===null?!1:(jt.current&2)!==0),o&&(i=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(ze){if(i?tr(e):nr(),(t=ot)?(t=zT(t,us),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Rr!==null?{id:Vs,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},n=JN(t),n.return=e,e.child=n,on=e,ot=null)):t=null,t===null)throw Ir(e);return Pg(t)?e.lanes=32:e.lanes=536870912,null}var l=s.children;return s=s.fallback,i?(nr(),i=e.mode,l=_h({mode:"hidden",children:l},i),s=xa(s,i,n,null),l.return=e,s.return=e,l.sibling=s,e.child=l,s=e.child,s.memoizedState=Xm(n),s.childLanes=Wm(t,o,n),e.memoizedState=qm,Jl(null,s)):(tr(e),Sg(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(r)e.flags&256?(tr(e),e.flags&=-257,e=Jm(t,e,n)):e.memoizedState!==null?(nr(),e.child=t.child,e.flags|=128,e=null):(nr(),l=s.fallback,i=e.mode,s=_h({mode:"visible",children:s.children},i),l=xa(l,i,n,null),l.flags|=2,s.return=e,l.return=e,s.sibling=l,e.child=s,Ea(e,t.child,null,n),s=e.child,s.memoizedState=Xm(n),s.childLanes=Wm(t,o,n),e.memoizedState=qm,e=Jl(null,s));else if(tr(e),Pg(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var d=o.dgst;o=d,s=Error(X(419)),s.stack="",s.digest=o,Bc({value:s,source:null,stack:null}),e=Jm(t,e,n)}else if(Pt||dl(t,e,n,!1),o=(n&t.childLanes)!==0,Pt||o){if(o=nt,o!==null&&(s=SN(o,n),s!==0&&s!==c.retryLane))throw c.retryLane=s,La(t,s),Dn(o,t,s),Ex;Vg(l)||Eh(),e=Jm(t,e,n)}else Vg(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,ot=fs(l.nextSibling),on=e,ze=!0,gr=null,us=!1,t!==null&&eS(e,t),e=Sg(e,s.children),e.flags|=4096);return e}return i?(nr(),l=s.fallback,i=e.mode,c=t.child,d=c.sibling,s=hi(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?l=hi(d,l):(l=xa(l,i,n,null),l.flags|=2),l.return=e,s.return=e,s.sibling=l,e.child=s,Jl(null,s),s=e.child,l=t.child.memoizedState,l===null?l=Xm(n):(i=l.cachePool,i!==null?(c=Ot._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=nS(),l={baseLanes:l.baseLanes|n,cachePool:i}),s.memoizedState=l,s.childLanes=Wm(t,o,n),e.memoizedState=qm,Jl(t.child,s)):(tr(e),n=t.child,t=n.sibling,n=hi(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function Sg(t,e){return e=_h({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function _h(t,e){return t=Fn(22,t,null,e),t.lanes=0,t}function Jm(t,e,n){return Ea(e,t.child,null,n),t=Sg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function a1(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),dg(t.return,e,n)}function Zm(t,e,n,s,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=i,o.treeForkCount=r)}function qS(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;s=s.children;var o=jt.current,l=(o&2)!==0;if(l?(o=o&1|2,e.flags|=128):o&=1,it(jt,o),sn(t,e,s,n),s=ze?Uc:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&a1(t,n,e);else if(t.tag===19)a1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&yh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zm(e,!1,i,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&yh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zm(e,!0,n,null,r,s);break;case"together":Zm(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function Ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dr|=e.lanes,!(n&e.childLanes))if(t!==null){if(dl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jx(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&ph(t)))}function WI(t,e,n){switch(e.tag){case 3:lh(e,e.stateNode.containerInfo),er(e,Ot,t.memoizedState.cache),Sa();break;case 27:case 5:Jp(e);break;case 4:lh(e,e.stateNode.containerInfo);break;case 10:er(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,xg(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(tr(e),e.flags|=128,null):n&e.child.childLanes?YS(t,e,n):(tr(e),t=Ni(t,e,n),t!==null?t.sibling:null);tr(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(dl(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return qS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),it(jt,jt.current),s)break;return null;case 22:return e.lanes=0,QS(t,e,n,e.pendingProps);case 24:er(e,Ot,t.memoizedState.cache)}return Ni(t,e,n)}function XS(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Pt=!0;else{if(!jx(t,n)&&!(e.flags&128))return Pt=!1,WI(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,ze&&e.flags&1048576&&ZN(e,Uc,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=ra(e.elementType),e.type=t,typeof t=="function")rx(t)?(s=Aa(t,s),e.tag=1,e=i1(null,e,t,s,n)):(e.tag=0,e=Ng(null,e,t,s,n));else{if(t!=null){var i=t.$$typeof;if(i===G0){e.tag=11,e=Zb(null,e,t,s,n);break e}else if(i===K0){e.tag=14,e=e1(null,e,t,s,n);break e}}throw e=Xp(t)||t,Error(X(306,e,""))}}return e;case 0:return Ng(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=Aa(s,e.pendingProps),i1(t,e,s,i,n);case 3:e:{if(lh(e,e.stateNode.containerInfo),t===null)throw Error(X(387));s=e.pendingProps;var r=e.memoizedState;i=r.element,mg(t,e),gc(e,s,null,n);var o=e.memoizedState;if(s=o.cache,er(e,Ot,s),s!==r.cache&&hg(e,[Ot],n,!0),pc(),s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=r1(t,e,s,n);break e}else if(s!==i){i=cs(Error(X(424)),e),Bc(i),e=r1(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ot=fs(t.firstChild),on=e,ze=!0,gr=null,us=!0,n=rS(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Sa(),s===i){e=Ni(t,e,n);break e}sn(t,e,s,n)}e=e.child}return e;case 26:return Bd(t,e),t===null?(n=E1(e.type,null,e.pendingProps,null))?e.memoizedState=n:ze||(n=e.type,t=e.pendingProps,s=Rh(pr.current).createElement(n),s[an]=e,s[On]=t,un(s,n,t),Jt(s),e.stateNode=s):e.memoizedState=E1(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Jp(e),t===null&&ze&&(s=e.stateNode=UT(e.type,e.pendingProps,pr.current),on=e,us=!0,i=ot,$r(e.type)?(Lg=i,ot=fs(s.firstChild)):ot=i),sn(t,e,e.pendingProps.children,n),Bd(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ze&&((i=s=ot)&&(s=j3(s,e.type,e.pendingProps,us),s!==null?(e.stateNode=s,on=e,ot=fs(s.firstChild),us=!1,i=!0):i=!1),i||Ir(e)),Jp(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,Mg(i,r)?s=null:o!==null&&Mg(i,o)&&(e.flags|=32),e.memoizedState!==null&&(i=mx(t,e,FI,null,null,n),Qc._currentValue=i),Bd(t,e),sn(t,e,s,n),e.child;case 6:return t===null&&ze&&((t=n=ot)&&(n=A3(n,e.pendingProps,us),n!==null?(e.stateNode=n,on=e,ot=null,t=!0):t=!1),t||Ir(e)),null;case 13:return YS(t,e,n);case 4:return lh(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ea(e,null,s,n):sn(t,e,s,n),e.child;case 11:return Zb(t,e,e.type,e.pendingProps,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,er(e,e.type,s.value),sn(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,Ta(e),i=cn(i),s=s(i),e.flags|=1,sn(t,e,s,n),e.child;case 14:return e1(t,e,e.type,e.pendingProps,n);case 15:return KS(t,e,e.type,e.pendingProps,n);case 19:return qS(t,e,n);case 31:return XI(t,e,n);case 22:return QS(t,e,n,e.pendingProps);case 24:return Ta(e),s=cn(Ot),t===null?(i=cx(),i===null&&(i=nt,r=lx(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),e.memoizedState={parent:s,cache:i},dx(e),er(e,Ot,i)):(t.lanes&n&&(mg(t,e),gc(e,null,null,n),pc()),i=t.memoizedState,r=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),er(e,Ot,s)):(s=r.cache,er(e,Ot,s),s!==i.cache&&hg(e,[Ot],n,!0))),sn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(X(156,e.tag))}function Zs(t){t.flags|=4}function ep(t,e,n,s,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(bT())t.flags|=8192;else throw va=gh,ux}else t.flags&=-16777217}function o1(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!$T(e))if(bT())t.flags|=8192;else throw va=gh,ux}function gd(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?wN():536870912,t.lanes|=e,Fo|=e)}function Hl(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function JI(t,e,n){var s=e.pendingProps;switch(ox(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return at(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),fi(Ot),Vo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Xa(e)?Zs(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gm())),at(e),null;case 26:var i=e.type,r=e.memoizedState;return t===null?(Zs(e),r!==null?(at(e),o1(e,r)):(at(e),ep(e,i,null,s,n))):r?r!==t.memoizedState?(Zs(e),at(e),o1(e,r)):(at(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&Zs(e),at(e),ep(e,i,t,s,n)),null;case 27:if(ch(e),n=pr.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Zs(e);else{if(!s){if(e.stateNode===null)throw Error(X(166));return at(e),null}t=zs.current,Xa(e)?Vb(e):(t=UT(i,s,n),e.stateNode=t,Zs(e))}return at(e),null;case 5:if(ch(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Zs(e);else{if(!s){if(e.stateNode===null)throw Error(X(166));return at(e),null}if(r=zs.current,Xa(e))Vb(e);else{var o=Rh(pr.current);switch(r){case 1:r=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?o.createElement(i,{is:s.is}):o.createElement(i)}}r[an]=e,r[On]=s;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=r;e:switch(un(r,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Zs(e)}}return at(e),ep(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Zs(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(X(166));if(t=pr.current,Xa(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=on,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[an]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||VT(t.nodeValue,n)),t||Ir(e,!0)}else t=Rh(t).createTextNode(s),t[an]=e,e.stateNode=t}return at(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Xa(e),n!==null){if(t===null){if(!s)throw Error(X(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(557));t[an]=e}else Sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),t=!1}else n=Gm(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Bn(e),e):(Bn(e),null);if(e.flags&128)throw Error(X(558))}return at(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Xa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[an]=e}else Sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else i=Gm(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(Bn(e),e):(Bn(e),null)}return Bn(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==i&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),gd(e,e.updateQueue),at(e),null);case 4:return Vo(),t===null&&Mx(e.stateNode.containerInfo),at(e),null;case 10:return fi(e.type),at(e),null;case 19:if(en(jt),s=e.memoizedState,s===null)return at(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)Hl(s,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=yh(t),r!==null){for(e.flags|=128,Hl(s,!1),t=r.updateQueue,e.updateQueue=t,gd(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)WN(n,t),n=n.sibling;return it(jt,jt.current&1|2),ze&&ii(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&Kn()>Sh&&(e.flags|=128,i=!0,Hl(s,!1),e.lanes=4194304)}else{if(!i)if(t=yh(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,gd(e,t),Hl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!ze)return at(e),null}else 2*Kn()-s.renderingStartTime>Sh&&n!==536870912&&(e.flags|=128,i=!0,Hl(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Kn(),t.sibling=null,n=jt.current,it(jt,i?n&1|2:n&1),ze&&ii(e,s.treeForkCount),t):(at(e),null);case 22:case 23:return Bn(e),hx(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),n=e.updateQueue,n!==null&&gd(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&en(ya),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),fi(Ot),at(e),null;case 25:return null;case 30:return null}throw Error(X(156,e.tag))}function ZI(t,e){switch(ox(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fi(Ot),Vo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ch(e),null;case 31:if(e.memoizedState!==null){if(Bn(e),e.alternate===null)throw Error(X(340));Sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Bn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return en(jt),null;case 4:return Vo(),null;case 10:return fi(e.type),null;case 22:case 23:return Bn(e),hx(),t!==null&&en(ya),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return fi(Ot),null;case 25:return null;default:return null}}function WS(t,e){switch(ox(e),e.tag){case 3:fi(Ot),Vo();break;case 26:case 27:case 5:ch(e);break;case 4:Vo();break;case 31:e.memoizedState!==null&&Bn(e);break;case 13:Bn(e);break;case 19:en(jt);break;case 10:fi(e.type);break;case 22:case 23:Bn(e),hx(),t!==null&&en(ya);break;case 24:fi(Ot)}}function wu(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var r=n.create,o=n.inst;s=r(),o.destroy=s}n=n.next}while(n!==i)}}catch(l){qe(e,e.return,l)}}function kr(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var r=i.next;s=r;do{if((s.tag&t)===t){var o=s.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,i=e;var c=n,d=l;try{d()}catch(h){qe(i,c,h)}}}s=s.next}while(s!==r)}}catch(h){qe(e,e.return,h)}}function JS(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{oS(e,n)}catch(s){qe(t,t.return,s)}}}function ZS(t,e,n){n.props=Aa(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){qe(t,e,s)}}function yc(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){qe(t,e,i)}}function Ls(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){qe(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){qe(t,e,i)}else n.current=null}function eT(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){qe(t,t.return,i)}}function tp(t,e,n){try{var s=t.stateNode;w3(s,t.type,n,e),s[On]=e}catch(i){qe(t,t.return,i)}}function tT(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&$r(t.type)||t.tag===4}function np(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&$r(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tg(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=li));else if(s!==4&&(s===27&&$r(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Tg(t,e,n),t=t.sibling;t!==null;)Tg(t,e,n),t=t.sibling}function Nh(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&$r(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Nh(t,e,n),t=t.sibling;t!==null;)Nh(t,e,n),t=t.sibling}function nT(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);un(e,s,n),e[an]=t,e[On]=n}catch(r){qe(t,t.return,r)}}var ri=!1,Mt=!1,sp=!1,l1=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function e3(t,e){if(t=t.containerInfo,kg=Mh,t=$N(t),nx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==r||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++d===i&&(l=o),m===r&&++h===s&&(c=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dg={focusedElem:t,selectionRange:n},Mh=!1,Wt=e;Wt!==null;)if(e=Wt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Wt=t;else for(;Wt!==null;){switch(e=Wt,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,i=r.memoizedProps,r=r.memoizedState,s=n.stateNode;try{var b=Aa(n.type,i);t=s.getSnapshotBeforeUpdate(b,r),s.__reactInternalSnapshotBeforeUpdate=t}catch(N){qe(n,n.return,N)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Og(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Og(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(X(163))}if(t=e.sibling,t!==null){t.return=e.return,Wt=t;break}Wt=e.return}}function sT(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:ti(t,n),s&4&&wu(5,n);break;case 1:if(ti(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){qe(n,n.return,o)}else{var i=Aa(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){qe(n,n.return,o)}}s&64&&JS(n),s&512&&yc(n,n.return);break;case 3:if(ti(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{oS(t,e)}catch(o){qe(n,n.return,o)}}break;case 27:e===null&&s&4&&nT(n);case 26:case 5:ti(t,n),e===null&&s&4&&eT(n),s&512&&yc(n,n.return);break;case 12:ti(t,n);break;case 31:ti(t,n),s&4&&aT(t,n);break;case 13:ti(t,n),s&4&&oT(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=c3.bind(null,n),C3(t,n))));break;case 22:if(s=n.memoizedState!==null||ri,!s){e=e!==null&&e.memoizedState!==null||Mt,i=ri;var r=Mt;ri=s,(Mt=e)&&!r?ni(t,n,(n.subtreeFlags&8772)!==0):ti(t,n),ri=i,Mt=r}break;case 30:break;default:ti(t,n)}}function iT(t){var e=t.alternate;e!==null&&(t.alternate=null,iT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&X0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,Cn=!1;function ei(t,e,n){for(n=n.child;n!==null;)rT(t,e,n),n=n.sibling}function rT(t,e,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(mu,n)}catch{}switch(n.tag){case 26:Mt||Ls(n,e),ei(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Mt||Ls(n,e);var s=ht,i=Cn;$r(n.type)&&(ht=n.stateNode,Cn=!1),ei(t,e,n),_c(n.stateNode),ht=s,Cn=i;break;case 5:Mt||Ls(n,e);case 6:if(s=ht,i=Cn,ht=null,ei(t,e,n),ht=s,Cn=i,ht!==null)if(Cn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(n.stateNode)}catch(r){qe(n,e,r)}else try{ht.removeChild(n.stateNode)}catch(r){qe(n,e,r)}break;case 18:ht!==null&&(Cn?(t=ht,w1(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ko(t)):w1(ht,n.stateNode));break;case 4:s=ht,i=Cn,ht=n.stateNode.containerInfo,Cn=!0,ei(t,e,n),ht=s,Cn=i;break;case 0:case 11:case 14:case 15:kr(2,n,e),Mt||kr(4,n,e),ei(t,e,n);break;case 1:Mt||(Ls(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&ZS(n,e,s)),ei(t,e,n);break;case 21:ei(t,e,n);break;case 22:Mt=(s=Mt)||n.memoizedState!==null,ei(t,e,n),Mt=s;break;default:ei(t,e,n)}}function aT(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ko(t)}catch(n){qe(e,e.return,n)}}}function oT(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ko(t)}catch(n){qe(e,e.return,n)}}function t3(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new l1),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new l1),e;default:throw Error(X(435,t.tag))}}function xd(t,e){var n=t3(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var i=u3.bind(null,t,s);s.then(i,i)}})}function jn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],r=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 27:if($r(l.type)){ht=l.stateNode,Cn=!1;break e}break;case 5:ht=l.stateNode,Cn=!1;break e;case 3:case 4:ht=l.stateNode.containerInfo,Cn=!0;break e}l=l.return}if(ht===null)throw Error(X(160));rT(r,o,i),ht=null,Cn=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)lT(e,t),e=e.sibling}var ws=null;function lT(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jn(e,t),An(t),s&4&&(kr(3,t,t.return),wu(3,t),kr(5,t,t.return));break;case 1:jn(e,t),An(t),s&512&&(Mt||n===null||Ls(n,n.return)),s&64&&ri&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=ws;if(jn(e,t),An(t),s&512&&(Mt||n===null||Ls(n,n.return)),s&4){var r=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":r=i.getElementsByTagName("title")[0],(!r||r[xu]||r[an]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(s),i.head.insertBefore(r,i.querySelector("head > title"))),un(r,s,n),r[an]=t,Jt(r),s=r;break e;case"link":var o=A1("link","href",i).get(s+(n.href||""));if(o){for(var l=0;l<o.length;l++)if(r=o[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(l,1);break t}}r=i.createElement(s),un(r,s,n),i.head.appendChild(r);break;case"meta":if(o=A1("meta","content",i).get(s+(n.content||""))){for(l=0;l<o.length;l++)if(r=o[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(l,1);break t}}r=i.createElement(s),un(r,s,n),i.head.appendChild(r);break;default:throw Error(X(468,s))}r[an]=t,Jt(r),s=r}t.stateNode=s}else C1(i,t.type,t.stateNode);else t.stateNode=j1(i,s,t.memoizedProps);else r!==s?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,s===null?C1(i,t.type,t.stateNode):j1(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&tp(t,t.memoizedProps,n.memoizedProps)}break;case 27:jn(e,t),An(t),s&512&&(Mt||n===null||Ls(n,n.return)),n!==null&&s&4&&tp(t,t.memoizedProps,n.memoizedProps);break;case 5:if(jn(e,t),An(t),s&512&&(Mt||n===null||Ls(n,n.return)),t.flags&32){i=t.stateNode;try{Lo(i,"")}catch(b){qe(t,t.return,b)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,tp(t,i,n!==null?n.memoizedProps:i)),s&1024&&(sp=!0);break;case 6:if(jn(e,t),An(t),s&4){if(t.stateNode===null)throw Error(X(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(b){qe(t,t.return,b)}}break;case 3:if(Hd=null,i=ws,ws=Ih(e.containerInfo),jn(e,t),ws=i,An(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ko(e.containerInfo)}catch(b){qe(t,t.return,b)}sp&&(sp=!1,cT(t));break;case 4:s=ws,ws=Ih(t.stateNode.containerInfo),jn(e,t),An(t),ws=s;break;case 12:jn(e,t),An(t);break;case 31:jn(e,t),An(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,xd(t,s)));break;case 13:jn(e,t),An(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Rf=Kn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,xd(t,s)));break;case 22:i=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=ri,h=Mt;if(ri=d||i,Mt=h||c,jn(e,t),Mt=h,ri=d,An(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||c||ri||Mt||aa(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(r=c.stateNode,i)o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(b){qe(c,c.return,b)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(b){qe(c,c.return,b)}}}else if(e.tag===18){if(n===null){c=e;try{var g=c.stateNode;i?_1(g,!0):_1(c.stateNode,!1)}catch(b){qe(c,c.return,b)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,xd(t,n))));break;case 19:jn(e,t),An(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,xd(t,s)));break;case 30:break;case 21:break;default:jn(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(tT(s)){n=s;break}s=s.return}if(n==null)throw Error(X(160));switch(n.tag){case 27:var i=n.stateNode,r=np(t);Nh(t,r,i);break;case 5:var o=n.stateNode;n.flags&32&&(Lo(o,""),n.flags&=-33);var l=np(t);Nh(t,l,o);break;case 3:case 4:var c=n.stateNode.containerInfo,d=np(t);Tg(t,d,c);break;default:throw Error(X(161))}}catch(h){qe(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cT(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;cT(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ti(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)sT(t,e.alternate,e),e=e.sibling}function aa(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:kr(4,e,e.return),aa(e);break;case 1:Ls(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&ZS(e,e.return,n),aa(e);break;case 27:_c(e.stateNode);case 26:case 5:Ls(e,e.return),aa(e);break;case 22:e.memoizedState===null&&aa(e);break;case 30:aa(e);break;default:aa(e)}t=t.sibling}}function ni(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,r=e,o=r.flags;switch(r.tag){case 0:case 11:case 15:ni(i,r,n),wu(4,r);break;case 1:if(ni(i,r,n),s=r,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(d){qe(s,s.return,d)}if(s=r,i=s.updateQueue,i!==null){var l=s.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)aS(c[i],l)}catch(d){qe(s,s.return,d)}}n&&o&64&&JS(r),yc(r,r.return);break;case 27:nT(r);case 26:case 5:ni(i,r,n),n&&s===null&&o&4&&eT(r),yc(r,r.return);break;case 12:ni(i,r,n);break;case 31:ni(i,r,n),n&&o&4&&aT(i,r);break;case 13:ni(i,r,n),n&&o&4&&oT(i,r);break;case 22:r.memoizedState===null&&ni(i,r,n),yc(r,r.return);break;case 30:break;default:ni(i,r,n)}e=e.sibling}}function Ax(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&vu(n))}function Cx(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&vu(t))}function ys(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)uT(t,e,n,s),e=e.sibling}function uT(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:ys(t,e,n,s),i&2048&&wu(9,e);break;case 1:ys(t,e,n,s);break;case 3:ys(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&vu(t)));break;case 12:if(i&2048){ys(t,e,n,s),t=e.stateNode;try{var r=e.memoizedProps,o=r.id,l=r.onPostCommit;typeof l=="function"&&l(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){qe(e,e.return,c)}}else ys(t,e,n,s);break;case 31:ys(t,e,n,s);break;case 13:ys(t,e,n,s);break;case 23:break;case 22:r=e.stateNode,o=e.alternate,e.memoizedState!==null?r._visibility&2?ys(t,e,n,s):vc(t,e):r._visibility&2?ys(t,e,n,s):(r._visibility|=2,Za(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),i&2048&&Ax(o,e);break;case 24:ys(t,e,n,s),i&2048&&Cx(e.alternate,e);break;default:ys(t,e,n,s)}}function Za(t,e,n,s,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,o=e,l=n,c=s,d=o.flags;switch(o.tag){case 0:case 11:case 15:Za(r,o,l,c,i),wu(8,o);break;case 23:break;case 22:var h=o.stateNode;o.memoizedState!==null?h._visibility&2?Za(r,o,l,c,i):vc(r,o):(h._visibility|=2,Za(r,o,l,c,i)),i&&d&2048&&Ax(o.alternate,o);break;case 24:Za(r,o,l,c,i),i&&d&2048&&Cx(o.alternate,o);break;default:Za(r,o,l,c,i)}e=e.sibling}}function vc(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:vc(n,s),i&2048&&Ax(s.alternate,s);break;case 24:vc(n,s),i&2048&&Cx(s.alternate,s);break;default:vc(n,s)}e=e.sibling}}var Zl=8192;function Wa(t,e,n){if(t.subtreeFlags&Zl)for(t=t.child;t!==null;)dT(t,e,n),t=t.sibling}function dT(t,e,n){switch(t.tag){case 26:Wa(t,e,n),t.flags&Zl&&t.memoizedState!==null&&B3(n,ws,t.memoizedState,t.memoizedProps);break;case 5:Wa(t,e,n);break;case 3:case 4:var s=ws;ws=Ih(t.stateNode.containerInfo),Wa(t,e,n),ws=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Zl,Zl=16777216,Wa(t,e,n),Zl=s):Wa(t,e,n));break;default:Wa(t,e,n)}}function hT(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Gl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Wt=s,mT(s,t)}hT(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fT(t),t=t.sibling}function fT(t){switch(t.tag){case 0:case 11:case 15:Gl(t),t.flags&2048&&kr(9,t,t.return);break;case 3:Gl(t);break;case 12:Gl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Fd(t)):Gl(t);break;default:Gl(t)}}function Fd(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Wt=s,mT(s,t)}hT(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:kr(8,e,e.return),Fd(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Fd(e));break;default:Fd(e)}t=t.sibling}}function mT(t,e){for(;Wt!==null;){var n=Wt;switch(n.tag){case 0:case 11:case 15:kr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:vu(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Wt=s;else e:for(n=t;Wt!==null;){s=Wt;var i=s.sibling,r=s.return;if(iT(s),s===n){Wt=null;break e}if(i!==null){i.return=r,Wt=i;break e}Wt=r}}}var n3={getCacheForType:function(t){var e=cn(Ot),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return cn(Ot).controller.signal}},s3=typeof WeakMap=="function"?WeakMap:Map,Fe=0,nt=null,Me=null,Le=0,Ye=0,Un=null,ur=!1,fl=!1,Rx=!1,Si=0,_t=0,Dr=0,ba=0,Ix=0,Hn=0,Fo=0,bc=null,Rn=null,Eg=!1,Rf=0,pT=0,Sh=1/0,Th=null,vr=null,$t=0,br=null,$o=null,mi=0,jg=0,Ag=null,gT=null,wc=0,Cg=null;function qn(){return Fe&2&&Le!==0?Le&-Le:Ne.T!==null?Dx():TN()}function xT(){if(Hn===0)if(!(Le&536870912)||ze){var t=cd;cd<<=1,!(cd&3932160)&&(cd=262144),Hn=t}else Hn=536870912;return t=Jn.current,t!==null&&(t.flags|=32),Hn}function Dn(t,e,n){(t===nt&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(Ho(t,0),dr(t,Le,Hn,!1)),gu(t,n),(!(Fe&2)||t!==nt)&&(t===nt&&(!(Fe&2)&&(ba|=n),_t===4&&dr(t,Le,Hn,!1)),qs(t))}function yT(t,e,n){if(Fe&6)throw Error(X(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||pu(t,e),i=s?a3(t,e):ip(t,e,!0),r=s;do{if(i===0){fl&&!s&&dr(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!i3(n)){i=ip(t,e,!1),r=!1;continue}if(i===2){if(r=e,t.errorRecoveryDisabledLanes&r)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var l=t;i=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Ho(l,o).flags|=256),o=ip(l,o,!1),o!==2){if(Rx&&!c){l.errorRecoveryDisabledLanes|=r,ba|=r,i=4;break e}r=Rn,Rn=i,r!==null&&(Rn===null?Rn=r:Rn.push.apply(Rn,r))}i=o}if(r=!1,i!==2)continue}}if(i===1){Ho(t,0),dr(t,e,0,!0);break}e:{switch(s=t,r=i,r){case 0:case 1:throw Error(X(345));case 4:if((e&4194048)!==e)break;case 6:dr(s,e,Hn,!ur);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(X(329))}if((e&62914560)===e&&(i=Rf+300-Kn(),10<i)){if(dr(s,e,Hn,!ur),vf(s,0,!0)!==0)break e;mi=e,s.timeoutHandle=LT(c1.bind(null,s,n,Rn,Th,Eg,e,Hn,ba,Fo,ur,r,"Throttled",-0,0),i);break e}c1(s,n,Rn,Th,Eg,e,Hn,ba,Fo,ur,r,null,-0,0)}}break}while(!0);qs(t)}function c1(t,e,n,s,i,r,o,l,c,d,h,f,m,g){if(t.timeoutHandle=-1,f=e.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},dT(e,r,f);var b=(r&62914560)===r?Rf-Kn():(r&4194048)===r?pT-Kn():0;if(b=F3(f,b),b!==null){mi=r,t.cancelPendingCommit=b(d1.bind(null,t,e,r,n,s,i,o,l,c,h,f,null,m,g)),dr(t,r,o,!d);return}}d1(t,e,r,n,s,i,o,l,c)}function i3(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!Wn(r(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e,n,s){e&=~Ix,e&=~ba,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var r=31-Yn(i),o=1<<r;s[r]=-1,i&=~o}n!==0&&_N(t,n,e)}function If(){return Fe&6?!0:(_u(0),!1)}function kx(){if(Me!==null){if(Ye===0)var t=Me.return;else t=Me,ci=za=null,xx(t),Ao=null,Fc=0,t=Me;for(;t!==null;)WS(t.alternate,t),t=t.return;Me=null}}function Ho(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,S3(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),mi=0,kx(),nt=t,Me=n=hi(t.current,null),Le=e,Ye=0,Un=null,ur=!1,fl=pu(t,e),Rx=!1,Fo=Hn=Ix=ba=Dr=_t=0,Rn=bc=null,Eg=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-Yn(s),r=1<<i;e|=t[i],s&=~r}return Si=e,Nf(),n}function vT(t,e){Ie=null,Ne.H=Hc,e===hl||e===Tf?(e=Bb(),Ye=3):e===ux?(e=Bb(),Ye=4):Ye=e===Ex?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Un=e,Me===null&&(_t=1,wh(t,cs(e,t.current)))}function bT(){var t=Jn.current;return t===null?!0:(Le&4194048)===Le?hs===null:(Le&62914560)===Le||Le&536870912?t===hs:!1}function wT(){var t=Ne.H;return Ne.H=Hc,t===null?Hc:t}function _T(){var t=Ne.A;return Ne.A=n3,t}function Eh(){_t=4,ur||(Le&4194048)!==Le&&Jn.current!==null||(fl=!0),!(Dr&134217727)&&!(ba&134217727)||nt===null||dr(nt,Le,Hn,!1)}function ip(t,e,n){var s=Fe;Fe|=2;var i=wT(),r=_T();(nt!==t||Le!==e)&&(Th=null,Ho(t,e)),e=!1;var o=_t;e:do try{if(Ye!==0&&Me!==null){var l=Me,c=Un;switch(Ye){case 8:kx(),o=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(e=!0);var d=Ye;if(Ye=0,Un=null,xo(t,l,c,d),n&&fl){o=0;break e}break;default:d=Ye,Ye=0,Un=null,xo(t,l,c,d)}}r3(),o=_t;break}catch(h){vT(t,h)}while(!0);return e&&t.shellSuspendCounter++,ci=za=null,Fe=s,Ne.H=i,Ne.A=r,Me===null&&(nt=null,Le=0,Nf()),o}function r3(){for(;Me!==null;)NT(Me)}function a3(t,e){var n=Fe;Fe|=2;var s=wT(),i=_T();nt!==t||Le!==e?(Th=null,Sh=Kn()+500,Ho(t,e)):fl=pu(t,e);e:do try{if(Ye!==0&&Me!==null){e=Me;var r=Un;t:switch(Ye){case 1:Ye=0,Un=null,xo(t,e,r,1);break;case 2:case 9:if(Ub(r)){Ye=0,Un=null,u1(e);break}e=function(){Ye!==2&&Ye!==9||nt!==t||(Ye=7),qs(t)},r.then(e,e);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Ub(r)?(Ye=0,Un=null,u1(e)):(Ye=0,Un=null,xo(t,e,r,7));break;case 5:var o=null;switch(Me.tag){case 26:o=Me.memoizedState;case 5:case 27:var l=Me;if(o?$T(o):l.stateNode.complete){Ye=0,Un=null;var c=l.sibling;if(c!==null)Me=c;else{var d=l.return;d!==null?(Me=d,kf(d)):Me=null}break t}}Ye=0,Un=null,xo(t,e,r,5);break;case 6:Ye=0,Un=null,xo(t,e,r,6);break;case 8:kx(),_t=6;break e;default:throw Error(X(462))}}o3();break}catch(h){vT(t,h)}while(!0);return ci=za=null,Ne.H=s,Ne.A=i,Fe=n,Me!==null?0:(nt=null,Le=0,Nf(),_t)}function o3(){for(;Me!==null&&!RR();)NT(Me)}function NT(t){var e=XS(t.alternate,t,Si);t.memoizedProps=t.pendingProps,e===null?kf(t):Me=e}function u1(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=s1(n,e,e.pendingProps,e.type,void 0,Le);break;case 11:e=s1(n,e,e.pendingProps,e.type.render,e.ref,Le);break;case 5:xx(e);default:WS(n,e),e=Me=WN(e,Si),e=XS(n,e,Si)}t.memoizedProps=t.pendingProps,e===null?kf(t):Me=e}function xo(t,e,n,s){ci=za=null,xx(e),Ao=null,Fc=0;var i=e.return;try{if(qI(t,i,e,n,Le)){_t=1,wh(t,cs(n,t.current)),Me=null;return}}catch(r){if(i!==null)throw Me=i,r;_t=1,wh(t,cs(n,t.current)),Me=null;return}e.flags&32768?(ze||s===1?t=!0:fl||Le&536870912?t=!1:(ur=t=!0,(s===2||s===9||s===3||s===6)&&(s=Jn.current,s!==null&&s.tag===13&&(s.flags|=16384))),ST(e,t)):kf(e)}function kf(t){var e=t;do{if(e.flags&32768){ST(e,ur);return}t=e.return;var n=JI(e.alternate,e,Si);if(n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);_t===0&&(_t=5)}function ST(t,e){do{var n=ZI(t.alternate,t);if(n!==null){n.flags&=32767,Me=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Me=t;return}Me=t=n}while(t!==null);_t=6,Me=null}function d1(t,e,n,s,i,r,o,l,c){t.cancelPendingCommit=null;do Df();while($t!==0);if(Fe&6)throw Error(X(327));if(e!==null){if(e===t.current)throw Error(X(177));if(r=e.lanes|e.childLanes,r|=sx,UR(t,n,r,o,l,c),t===nt&&(Me=nt=null,Le=0),$o=e,br=t,mi=n,jg=r,Ag=i,gT=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,d3(uh,function(){return CT(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=Ne.T,Ne.T=null,i=$e.p,$e.p=2,o=Fe,Fe|=4;try{e3(t,e,n)}finally{Fe=o,$e.p=i,Ne.T=s}}$t=1,TT(),ET(),jT()}}function TT(){if($t===1){$t=0;var t=br,e=$o,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Ne.T,Ne.T=null;var s=$e.p;$e.p=2;var i=Fe;Fe|=4;try{lT(e,t);var r=Dg,o=$N(t.containerInfo),l=r.focusedElem,c=r.selectionRange;if(o!==l&&l&&l.ownerDocument&&FN(l.ownerDocument.documentElement,l)){if(c!==null&&nx(l)){var d=c.start,h=c.end;if(h===void 0&&(h=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(h,l.value.length);else{var f=l.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var g=m.getSelection(),b=l.textContent.length,N=Math.min(c.start,b),C=c.end===void 0?N:Math.min(c.end,b);!g.extend&&N>C&&(o=C,C=N,N=o);var w=Db(l,N),y=Db(l,C);if(w&&y&&(g.rangeCount!==1||g.anchorNode!==w.node||g.anchorOffset!==w.offset||g.focusNode!==y.node||g.focusOffset!==y.offset)){var S=f.createRange();S.setStart(w.node,w.offset),g.removeAllRanges(),N>C?(g.addRange(S),g.extend(y.node,y.offset)):(S.setEnd(y.node,y.offset),g.addRange(S))}}}}for(f=[],g=l;g=g.parentNode;)g.nodeType===1&&f.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var I=f[l];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Mh=!!kg,Dg=kg=null}finally{Fe=i,$e.p=s,Ne.T=n}}t.current=e,$t=2}}function ET(){if($t===2){$t=0;var t=br,e=$o,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Ne.T,Ne.T=null;var s=$e.p;$e.p=2;var i=Fe;Fe|=4;try{sT(t,e.alternate,e)}finally{Fe=i,$e.p=s,Ne.T=n}}$t=3}}function jT(){if($t===4||$t===3){$t=0,IR();var t=br,e=$o,n=mi,s=gT;e.subtreeFlags&10256||e.flags&10256?$t=5:($t=0,$o=br=null,AT(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(vr=null),q0(n),e=e.stateNode,Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(mu,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=Ne.T,i=$e.p,$e.p=2,Ne.T=null;try{for(var r=t.onRecoverableError,o=0;o<s.length;o++){var l=s[o];r(l.value,{componentStack:l.stack})}}finally{Ne.T=e,$e.p=i}}mi&3&&Df(),qs(t),i=t.pendingLanes,n&261930&&i&42?t===Cg?wc++:(wc=0,Cg=t):wc=0,_u(0)}}function AT(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,vu(e)))}function Df(){return TT(),ET(),jT(),CT()}function CT(){if($t!==5)return!1;var t=br,e=jg;jg=0;var n=q0(mi),s=Ne.T,i=$e.p;try{$e.p=32>n?32:n,Ne.T=null,n=Ag,Ag=null;var r=br,o=mi;if($t=0,$o=br=null,mi=0,Fe&6)throw Error(X(331));var l=Fe;if(Fe|=4,fT(r.current),uT(r,r.current,o,n),Fe=l,_u(0,!1),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(mu,r)}catch{}return!0}finally{$e.p=i,Ne.T=s,AT(t,e)}}function h1(t,e,n){e=cs(n,e),e=_g(t.stateNode,e,2),t=yr(t,e,2),t!==null&&(gu(t,2),qs(t))}function qe(t,e,n){if(t.tag===3)h1(t,t,n);else for(;e!==null;){if(e.tag===3){h1(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vr===null||!vr.has(s))){t=cs(n,t),n=HS(2),s=yr(e,n,2),s!==null&&(GS(n,s,e,t),gu(s,2),qs(s));break}}e=e.return}}function rp(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new s3;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(Rx=!0,i.add(n),t=l3.bind(null,t,e,n),e.then(t,t))}function l3(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,nt===t&&(Le&n)===n&&(_t===4||_t===3&&(Le&62914560)===Le&&300>Kn()-Rf?!(Fe&2)&&Ho(t,0):Ix|=n,Fo===Le&&(Fo=0)),qs(t)}function RT(t,e){e===0&&(e=wN()),t=La(t,e),t!==null&&(gu(t,e),qs(t))}function c3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),RT(t,n)}function u3(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(X(314))}s!==null&&s.delete(e),RT(t,n)}function d3(t,e){return Q0(t,e)}var jh=null,eo=null,Rg=!1,Ah=!1,ap=!1,hr=0;function qs(t){t!==eo&&t.next===null&&(eo===null?jh=eo=t:eo=eo.next=t),Ah=!0,Rg||(Rg=!0,f3())}function _u(t,e){if(!ap&&Ah){ap=!0;do for(var n=!1,s=jh;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var r=0;else{var o=s.suspendedLanes,l=s.pingedLanes;r=(1<<31-Yn(42|t)+1)-1,r&=i&~(o&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,f1(s,r))}else r=Le,r=vf(s,s===nt?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(r&3)||pu(s,r)||(n=!0,f1(s,r));s=s.next}while(n);ap=!1}}function h3(){IT()}function IT(){Ah=Rg=!1;var t=0;hr!==0&&N3()&&(t=hr);for(var e=Kn(),n=null,s=jh;s!==null;){var i=s.next,r=kT(s,e);r===0?(s.next=null,n===null?jh=i:n.next=i,i===null&&(eo=n)):(n=s,(t!==0||r&3)&&(Ah=!0)),s=i}$t!==0&&$t!==5||_u(t),hr!==0&&(hr=0)}function kT(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var o=31-Yn(r),l=1<<o,c=i[o];c===-1?(!(l&n)||l&s)&&(i[o]=zR(l,e)):c<=e&&(t.expiredLanes|=l),r&=~l}if(e=nt,n=Le,n=vf(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Mm(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||pu(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Mm(s),q0(n)){case 2:case 8:n=vN;break;case 32:n=uh;break;case 268435456:n=bN;break;default:n=uh}return s=DT.bind(null,t),n=Q0(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Mm(s),t.callbackPriority=2,t.callbackNode=null,2}function DT(t,e){if($t!==0&&$t!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Df()&&t.callbackNode!==n)return null;var s=Le;return s=vf(t,t===nt?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(yT(t,s,e),kT(t,Kn()),t.callbackNode!=null&&t.callbackNode===n?DT.bind(null,t):null)}function f1(t,e){if(Df())return null;yT(t,e,!0)}function f3(){T3(function(){Fe&6?Q0(yN,h3):IT()})}function Dx(){if(hr===0){var t=zo;t===0&&(t=ld,ld<<=1,!(ld&261888)&&(ld=256)),hr=t}return hr}function m1(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Dd(""+t)}function p1(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function m3(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var r=m1((i[On]||null).action),o=s.submitter;o&&(e=(e=o[On]||null)?m1(e.formAction):o.getAttribute("formAction"),e!==null&&(r=e,o=null));var l=new bf("action","action",null,s,i);t.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(hr!==0){var c=o?p1(i,o):new FormData(i);bg(n,{pending:!0,data:c,method:i.method,action:r},null,c)}}else typeof r=="function"&&(l.preventDefault(),c=o?p1(i,o):new FormData(i),bg(n,{pending:!0,data:c,method:i.method,action:r},r,c))},currentTarget:i}]})}}for(var op=0;op<lg.length;op++){var lp=lg[op],p3=lp.toLowerCase(),g3=lp[0].toUpperCase()+lp.slice(1);As(p3,"on"+g3)}As(GN,"onAnimationEnd");As(KN,"onAnimationIteration");As(QN,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(kI,"onTransitionRun");As(DI,"onTransitionStart");As(MI,"onTransitionCancel");As(YN,"onTransitionEnd");Po("onMouseEnter",["mouseout","mouseover"]);Po("onMouseLeave",["mouseout","mouseover"]);Po("onPointerEnter",["pointerout","pointerover"]);Po("onPointerLeave",["pointerout","pointerover"]);Oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gc));function MT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=d;try{r(i)}catch(h){hh(h)}i.currentTarget=null,r=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=d;try{r(i)}catch(h){hh(h)}i.currentTarget=null,r=c}}}}function De(t,e){var n=e[eg];n===void 0&&(n=e[eg]=new Set);var s=t+"__bubble";n.has(s)||(OT(e,t,2,!1),n.add(s))}function cp(t,e,n){var s=0;e&&(s|=4),OT(n,t,s,e)}var yd="_reactListening"+Math.random().toString(36).slice(2);function Mx(t){if(!t[yd]){t[yd]=!0,EN.forEach(function(n){n!=="selectionchange"&&(x3.has(n)||cp(n,!1,t),cp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yd]||(e[yd]=!0,cp("selectionchange",!1,e))}}function OT(t,e,n,s){switch(YT(e)){case 2:var i=G3;break;case 8:i=K3;break;default:i=Lx}n=i.bind(null,e,n,t),i=void 0,!rg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function up(t,e,n,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===i)return;o=o.return}for(;l!==null;){if(o=oo(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){s=r=o;continue e}l=l.parentNode}}s=s.return}MN(function(){var d=r,h=J0(n),f=[];e:{var m=qN.get(t);if(m!==void 0){var g=bf,b=t;switch(t){case"keypress":if(Od(n)===0)break e;case"keydown":case"keyup":g=uI;break;case"focusin":b="focus",g=zm;break;case"focusout":b="blur",g=zm;break;case"beforeblur":case"afterblur":g=zm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Nb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=JR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=fI;break;case GN:case KN:case QN:g=tI;break;case YN:g=pI;break;case"scroll":case"scrollend":g=XR;break;case"wheel":g=xI;break;case"copy":case"cut":case"paste":g=sI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Tb;break;case"toggle":case"beforetoggle":g=vI}var N=(e&4)!==0,C=!N&&(t==="scroll"||t==="scrollend"),w=N?m!==null?m+"Capture":null:m;N=[];for(var y=d,S;y!==null;){var I=y;if(S=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||S===null||w===null||(I=Pc(y,w),I!=null&&N.push(Kc(y,I,S))),C)break;y=y.return}0<N.length&&(m=new g(m,b,null,n,h),f.push({event:m,listeners:N}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==ig&&(b=n.relatedTarget||n.fromElement)&&(oo(b)||b[cl]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=d,b=b?oo(b):null,b!==null&&(C=fu(b),N=b.tag,b!==C||N!==5&&N!==27&&N!==6)&&(b=null)):(g=null,b=d),g!==b)){if(N=Nb,I="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(N=Tb,I="onPointerLeave",w="onPointerEnter",y="pointer"),C=g==null?m:Wl(g),S=b==null?m:Wl(b),m=new N(I,y+"leave",g,n,h),m.target=C,m.relatedTarget=S,I=null,oo(h)===d&&(N=new N(w,y+"enter",b,n,h),N.target=S,N.relatedTarget=C,I=N),C=I,g&&b)t:{for(N=y3,w=g,y=b,S=0,I=w;I;I=N(I))S++;I=0;for(var k=y;k;k=N(k))I++;for(;0<S-I;)w=N(w),S--;for(;0<I-S;)y=N(y),I--;for(;S--;){if(w===y||y!==null&&w===y.alternate){N=w;break t}w=N(w),y=N(y)}N=null}else N=null;g!==null&&g1(f,m,g,N,!1),b!==null&&C!==null&&g1(f,C,b,N,!0)}}e:{if(m=d?Wl(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var L=Cb;else if(Ab(m))if(UN)L=CI;else{L=jI;var T=EI}else g=m.nodeName,!g||g.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?d&&W0(d.elementType)&&(L=Cb):L=AI;if(L&&(L=L(t,d))){zN(f,L,n,h);break e}T&&T(t,m,d),t==="focusout"&&d&&m.type==="number"&&d.memoizedProps.value!=null&&sg(m,"number",m.value)}switch(T=d?Wl(d):window,t){case"focusin":(Ab(T)||T.contentEditable==="true")&&(uo=T,ag=d,hc=null);break;case"focusout":hc=ag=uo=null;break;case"mousedown":og=!0;break;case"contextmenu":case"mouseup":case"dragend":og=!1,Mb(f,n,h);break;case"selectionchange":if(II)break;case"keydown":case"keyup":Mb(f,n,h)}var p;if(tx)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else co?PN(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(VN&&n.locale!=="ko"&&(co||E!=="onCompositionStart"?E==="onCompositionEnd"&&co&&(p=ON()):(cr=h,Z0="value"in cr?cr.value:cr.textContent,co=!0)),T=Ch(d,E),0<T.length&&(E=new Sb(E,t,null,n,h),f.push({event:E,listeners:T}),p?E.data=p:(p=LN(n),p!==null&&(E.data=p)))),(p=wI?_I(t,n):NI(t,n))&&(E=Ch(d,"onBeforeInput"),0<E.length&&(T=new Sb("onBeforeInput","beforeinput",null,n,h),f.push({event:T,listeners:E}),T.data=p)),m3(f,t,d,n,h)}MT(f,e)})}function Kc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ch(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=Pc(t,n),i!=null&&s.unshift(Kc(t,i,r)),i=Pc(t,e),i!=null&&s.push(Kc(t,i,r))),t.tag===3)return s;t=t.return}return[]}function y3(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function g1(t,e,n,s,i){for(var r=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,i?(d=Pc(n,r),d!=null&&o.unshift(Kc(n,d,c))):i||(d=Pc(n,r),d!=null&&o.push(Kc(n,d,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var v3=/\r\n?/g,b3=/\u0000|\uFFFD/g;function x1(t){return(typeof t=="string"?t:""+t).replace(v3,`
`).replace(b3,"")}function VT(t,e){return e=x1(e),x1(t)===e}function We(t,e,n,s,i,r){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||Lo(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&Lo(t,""+s);break;case"className":dd(t,"class",s);break;case"tabIndex":dd(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":dd(t,n,s);break;case"style":DN(t,s,r);break;case"data":if(e!=="object"){dd(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Dd(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&We(t,e,"name",i.name,i,null),We(t,e,"formEncType",i.formEncType,i,null),We(t,e,"formMethod",i.formMethod,i,null),We(t,e,"formTarget",i.formTarget,i,null)):(We(t,e,"encType",i.encType,i,null),We(t,e,"method",i.method,i,null),We(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Dd(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=li);break;case"onScroll":s!=null&&De("scroll",t);break;case"onScrollEnd":s!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(X(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(X(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=Dd(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":De("beforetoggle",t),De("toggle",t),kd(t,"popover",s);break;case"xlinkActuate":Js(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Js(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Js(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Js(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Js(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Js(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Js(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Js(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Js(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":kd(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=YR.get(n)||n,kd(t,n,s))}}function Ig(t,e,n,s,i,r){switch(n){case"style":DN(t,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(X(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(X(60));t.innerHTML=n}}break;case"children":typeof s=="string"?Lo(t,s):(typeof s=="number"||typeof s=="bigint")&&Lo(t,""+s);break;case"onScroll":s!=null&&De("scroll",t);break;case"onScrollEnd":s!=null&&De("scrollend",t);break;case"onClick":s!=null&&(t.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jN.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),r=t[On]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,i),typeof s=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):kd(t,n,s)}}}function un(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var s=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(o!=null)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(X(137,e));default:We(t,e,r,o,n,null)}}i&&We(t,e,"srcSet",n.srcSet,n,null),s&&We(t,e,"src",n.src,n,null);return;case"input":De("invalid",t);var l=r=o=i=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"name":i=h;break;case"type":o=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(X(137,e));break;default:We(t,e,s,h,n,null)}}RN(t,r,l,c,d,o,i,!1);return;case"select":De("invalid",t),s=o=r=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:We(t,e,i,l,n,null)}e=r,n=o,t.multiple=!!s,e!=null?To(t,!!s,e,!1):n!=null&&To(t,!!s,n,!0);return;case"textarea":De("invalid",t),r=i=s=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(X(91));break;default:We(t,e,o,l,n,null)}kN(t,s,i,r);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:We(t,e,c,s,n,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(s=0;s<Gc.length;s++)De(Gc[s],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(X(137,e));default:We(t,e,d,s,n,null)}return;default:if(W0(e)){for(h in n)n.hasOwnProperty(h)&&(s=n[h],s!==void 0&&Ig(t,e,h,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&We(t,e,l,s,n,null))}function w3(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,o=null,l=null,c=null,d=null,h=null;for(g in n){var f=n[g];if(n.hasOwnProperty(g)&&f!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=f;default:s.hasOwnProperty(g)||We(t,e,g,null,s,f)}}for(var m in s){var g=s[m];if(f=n[m],s.hasOwnProperty(m)&&(g!=null||f!=null))switch(m){case"type":r=g;break;case"name":i=g;break;case"checked":d=g;break;case"defaultChecked":h=g;break;case"value":o=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(X(137,e));break;default:g!==f&&We(t,e,m,g,s,f)}}ng(t,o,l,c,d,h,r,i);return;case"select":g=o=l=m=null;for(r in n)if(c=n[r],n.hasOwnProperty(r)&&c!=null)switch(r){case"value":break;case"multiple":g=c;default:s.hasOwnProperty(r)||We(t,e,r,null,s,c)}for(i in s)if(r=s[i],c=n[i],s.hasOwnProperty(i)&&(r!=null||c!=null))switch(i){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":o=r;default:r!==c&&We(t,e,i,r,s,c)}e=l,n=o,s=g,m!=null?To(t,!!n,m,!1):!!s!=!!n&&(e!=null?To(t,!!n,e,!0):To(t,!!n,n?[]:"",!1));return;case"textarea":g=m=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:We(t,e,l,null,s,i)}for(o in s)if(i=s[o],r=n[o],s.hasOwnProperty(o)&&(i!=null||r!=null))switch(o){case"value":m=i;break;case"defaultValue":g=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(X(91));break;default:i!==r&&We(t,e,o,i,s,r)}IN(t,m,g);return;case"option":for(var b in n)if(m=n[b],n.hasOwnProperty(b)&&m!=null&&!s.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:We(t,e,b,null,s,m)}for(c in s)if(m=s[c],g=n[c],s.hasOwnProperty(c)&&m!==g&&(m!=null||g!=null))switch(c){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:We(t,e,c,m,s,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var N in n)m=n[N],n.hasOwnProperty(N)&&m!=null&&!s.hasOwnProperty(N)&&We(t,e,N,null,s,m);for(d in s)if(m=s[d],g=n[d],s.hasOwnProperty(d)&&m!==g&&(m!=null||g!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(X(137,e));break;default:We(t,e,d,m,s,g)}return;default:if(W0(e)){for(var C in n)m=n[C],n.hasOwnProperty(C)&&m!==void 0&&!s.hasOwnProperty(C)&&Ig(t,e,C,void 0,s,m);for(h in s)m=s[h],g=n[h],!s.hasOwnProperty(h)||m===g||m===void 0&&g===void 0||Ig(t,e,h,m,s,g);return}}for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!=null&&!s.hasOwnProperty(w)&&We(t,e,w,null,s,m);for(f in s)m=s[f],g=n[f],!s.hasOwnProperty(f)||m===g||m==null&&g==null||We(t,e,f,m,s,g)}function y1(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _3(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],r=i.transferSize,o=i.initiatorType,l=i.duration;if(r&&l&&y1(o)){for(o=0,l=i.responseEnd,s+=1;s<n.length;s++){var c=n[s],d=c.startTime;if(d>l)break;var h=c.transferSize,f=c.initiatorType;h&&y1(f)&&(c=c.responseEnd,o+=h*(c<l?1:(l-d)/(c-d)))}if(--s,e+=8*(r+o)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var kg=null,Dg=null;function Rh(t){return t.nodeType===9?t:t.ownerDocument}function v1(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function PT(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Mg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dp=null;function N3(){var t=window.event;return t&&t.type==="popstate"?t===dp?!1:(dp=t,!0):(dp=null,!1)}var LT=typeof setTimeout=="function"?setTimeout:void 0,S3=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,T3=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(t){return b1.resolve(null).then(t).catch(E3)}:LT;function E3(t){setTimeout(function(){throw t})}function $r(t){return t==="head"}function w1(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(i),Ko(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")_c(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,_c(n);for(var r=n.firstChild;r;){var o=r.nextSibling,l=r.nodeName;r[xu]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=o}}else n==="body"&&_c(t.ownerDocument.body);n=i}while(n);Ko(e)}function _1(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function Og(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Og(n),X0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function j3(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[xu])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=fs(t.nextSibling),t===null)break}return null}function A3(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=fs(t.nextSibling),t===null))return null;return t}function zT(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=fs(t.nextSibling),t===null))return null;return t}function Vg(t){return t.data==="$?"||t.data==="$~"}function Pg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function C3(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Lg=null;function N1(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return fs(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function S1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function UT(t,e,n){switch(e=Rh(n),t){case"html":if(t=e.documentElement,!t)throw Error(X(452));return t;case"head":if(t=e.head,!t)throw Error(X(453));return t;case"body":if(t=e.body,!t)throw Error(X(454));return t;default:throw Error(X(451))}}function _c(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);X0(t)}var ps=new Map,T1=new Set;function Ih(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Oi=$e.d;$e.d={f:R3,r:I3,D:k3,C:D3,L:M3,m:O3,X:P3,S:V3,M:L3};function R3(){var t=Oi.f(),e=If();return t||e}function I3(t){var e=ul(t);e!==null&&e.tag===5&&e.type==="form"?DS(e):Oi.r(t)}var ml=typeof document>"u"?null:document;function BT(t,e,n){var s=ml;if(s&&typeof e=="string"&&e){var i=ls(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),T1.has(i)||(T1.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),un(e,"link",t),Jt(e),s.head.appendChild(e)))}}function k3(t){Oi.D(t),BT("dns-prefetch",t,null)}function D3(t,e){Oi.C(t,e),BT("preconnect",t,e)}function M3(t,e,n){Oi.L(t,e,n);var s=ml;if(s&&t&&e){var i='link[rel="preload"][as="'+ls(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+ls(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+ls(n.imageSizes)+'"]')):i+='[href="'+ls(t)+'"]';var r=i;switch(e){case"style":r=Go(t);break;case"script":r=pl(t)}ps.has(r)||(t=dt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ps.set(r,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(Nu(r))||e==="script"&&s.querySelector(Su(r))||(e=s.createElement("link"),un(e,"link",t),Jt(e),s.head.appendChild(e)))}}function O3(t,e){Oi.m(t,e);var n=ml;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+ls(s)+'"][href="'+ls(t)+'"]',r=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=pl(t)}if(!ps.has(r)&&(t=dt({rel:"modulepreload",href:t},e),ps.set(r,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Su(r)))return}s=n.createElement("link"),un(s,"link",t),Jt(s),n.head.appendChild(s)}}}function V3(t,e,n){Oi.S(t,e,n);var s=ml;if(s&&t){var i=So(s).hoistableStyles,r=Go(t);e=e||"default";var o=i.get(r);if(!o){var l={loading:0,preload:null};if(o=s.querySelector(Nu(r)))l.loading=5;else{t=dt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ps.get(r))&&Ox(t,n);var c=o=s.createElement("link");Jt(c),un(c,"link",t),c._p=new Promise(function(d,h){c.onload=d,c.onerror=h}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,$d(o,e,s)}o={type:"stylesheet",instance:o,count:1,state:l},i.set(r,o)}}}function P3(t,e){Oi.X(t,e);var n=ml;if(n&&t){var s=So(n).hoistableScripts,i=pl(t),r=s.get(i);r||(r=n.querySelector(Su(i)),r||(t=dt({src:t,async:!0},e),(e=ps.get(i))&&Vx(t,e),r=n.createElement("script"),Jt(r),un(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function L3(t,e){Oi.M(t,e);var n=ml;if(n&&t){var s=So(n).hoistableScripts,i=pl(t),r=s.get(i);r||(r=n.querySelector(Su(i)),r||(t=dt({src:t,async:!0,type:"module"},e),(e=ps.get(i))&&Vx(t,e),r=n.createElement("script"),Jt(r),un(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function E1(t,e,n,s){var i=(i=pr.current)?Ih(i):null;if(!i)throw Error(X(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Go(n.href),n=So(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Go(n.href);var r=So(i).hoistableStyles,o=r.get(t);if(o||(i=i.ownerDocument||i,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,o),(r=i.querySelector(Nu(t)))&&!r._p&&(o.instance=r,o.state.loading=5),ps.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ps.set(t,n),r||z3(i,t,n,o.state))),e&&s===null)throw Error(X(528,""));return o}if(e&&s!==null)throw Error(X(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=pl(n),n=So(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(X(444,t))}}function Go(t){return'href="'+ls(t)+'"'}function Nu(t){return'link[rel="stylesheet"]['+t+"]"}function FT(t){return dt({},t,{"data-precedence":t.precedence,precedence:null})}function z3(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),un(e,"link",n),Jt(e),t.head.appendChild(e))}function pl(t){return'[src="'+ls(t)+'"]'}function Su(t){return"script[async]"+t}function j1(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+ls(n.href)+'"]');if(s)return e.instance=s,Jt(s),s;var i=dt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Jt(s),un(s,"style",i),$d(s,n.precedence,t),e.instance=s;case"stylesheet":i=Go(n.href);var r=t.querySelector(Nu(i));if(r)return e.state.loading|=4,e.instance=r,Jt(r),r;s=FT(n),(i=ps.get(i))&&Ox(s,i),r=(t.ownerDocument||t).createElement("link"),Jt(r);var o=r;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),un(r,"link",s),e.state.loading|=4,$d(r,n.precedence,t),e.instance=r;case"script":return r=pl(n.src),(i=t.querySelector(Su(r)))?(e.instance=i,Jt(i),i):(s=n,(i=ps.get(r))&&(s=dt({},n),Vx(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),Jt(i),un(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(X(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,$d(s,n.precedence,t));return e.instance}function $d(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,r=i,o=0;o<s.length;o++){var l=s[o];if(l.dataset.precedence===e)r=l;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Ox(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Vx(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Hd=null;function A1(t,e,n){if(Hd===null){var s=new Map,i=Hd=new Map;i.set(n,s)}else i=Hd,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var r=n[i];if(!(r[xu]||r[an]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(e)||"";o=t+o;var l=s.get(o);l?l.push(r):s.set(o,[r])}}return s}function C1(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function U3(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function $T(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function B3(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=Go(s.href),r=e.querySelector(Nu(i));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=kh.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,Jt(r);return}r=e.ownerDocument||e,s=FT(s),(i=ps.get(i))&&Ox(s,i),r=r.createElement("link"),Jt(r);var o=r;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),un(r,"link",s),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=kh.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var hp=0;function F3(t,e){return t.stylesheets&&t.count===0&&Gd(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Gd(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&hp===0&&(hp=62500*_3());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Gd(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>hp?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function kh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Dh=null;function Gd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Dh=new Map,e.forEach($3,t),Dh=null,kh.call(t))}function $3(t,e){if(!(e.state.loading&4)){var n=Dh.get(t);if(n)var s=n.get(null);else{n=new Map,Dh.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var o=i[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),s=o)}s&&n.set(null,s)}i=e.instance,o=i.getAttribute("data-precedence"),r=n.get(o)||s,r===s&&n.set(null,i),n.set(o,i),this.count++,s=kh.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Qc={$$typeof:oi,Provider:null,Consumer:null,_currentValue:ga,_currentValue2:ga,_threadCount:0};function H3(t,e,n,s,i,r,o,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Om(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Om(0),this.hiddenUpdates=Om(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function HT(t,e,n,s,i,r,o,l,c,d,h,f){return t=new H3(t,e,n,o,c,d,h,f,l),e=1,r===!0&&(e|=24),r=Fn(3,null,null,e),t.current=r,r.stateNode=t,e=lx(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:e},dx(r),t}function GT(t){return t?(t=mo,t):mo}function KT(t,e,n,s,i,r){i=GT(i),s.context===null?s.context=i:s.pendingContext=i,s=xr(e),s.payload={element:n},r=r===void 0?null:r,r!==null&&(s.callback=r),n=yr(t,s,e),n!==null&&(Dn(n,t,e),mc(n,t,e))}function R1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Px(t,e){R1(t,e),(t=t.alternate)&&R1(t,e)}function QT(t){if(t.tag===13||t.tag===31){var e=La(t,67108864);e!==null&&Dn(e,t,67108864),Px(t,67108864)}}function I1(t){if(t.tag===13||t.tag===31){var e=qn();e=Y0(e);var n=La(t,e);n!==null&&Dn(n,t,e),Px(t,e)}}var Mh=!0;function G3(t,e,n,s){var i=Ne.T;Ne.T=null;var r=$e.p;try{$e.p=2,Lx(t,e,n,s)}finally{$e.p=r,Ne.T=i}}function K3(t,e,n,s){var i=Ne.T;Ne.T=null;var r=$e.p;try{$e.p=8,Lx(t,e,n,s)}finally{$e.p=r,Ne.T=i}}function Lx(t,e,n,s){if(Mh){var i=zg(s);if(i===null)up(t,e,s,Oh,n),k1(t,s);else if(Y3(i,t,e,n,s))s.stopPropagation();else if(k1(t,s),e&4&&-1<Q3.indexOf(t)){for(;i!==null;){var r=ul(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=ia(r.pendingLanes);if(o!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-Yn(o);l.entanglements[1]|=c,o&=~c}qs(r),!(Fe&6)&&(Sh=Kn()+500,_u(0))}}break;case 31:case 13:l=La(r,2),l!==null&&Dn(l,r,2),If(),Px(r,2)}if(r=zg(s),r===null&&up(t,e,s,Oh,n),r===i)break;i=r}i!==null&&s.stopPropagation()}else up(t,e,s,null,n)}}function zg(t){return t=J0(t),zx(t)}var Oh=null;function zx(t){if(Oh=null,t=oo(t),t!==null){var e=fu(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=fN(e),t!==null)return t;t=null}else if(n===31){if(t=mN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Oh=t,null}function YT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kR()){case yN:return 2;case vN:return 8;case uh:case DR:return 32;case bN:return 268435456;default:return 32}default:return 32}}var Ug=!1,wr=null,_r=null,Nr=null,Yc=new Map,qc=new Map,sr=[],Q3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k1(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":Yc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(e.pointerId)}}function Kl(t,e,n,s,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=ul(e),e!==null&&QT(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Y3(t,e,n,s,i){switch(e){case"focusin":return wr=Kl(wr,t,e,n,s,i),!0;case"dragenter":return _r=Kl(_r,t,e,n,s,i),!0;case"mouseover":return Nr=Kl(Nr,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return Yc.set(r,Kl(Yc.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,qc.set(r,Kl(qc.get(r)||null,t,e,n,s,i)),!0}return!1}function qT(t){var e=oo(t.target);if(e!==null){var n=fu(e);if(n!==null){if(e=n.tag,e===13){if(e=fN(n),e!==null){t.blockedOn=e,gb(t.priority,function(){I1(n)});return}}else if(e===31){if(e=mN(n),e!==null){t.blockedOn=e,gb(t.priority,function(){I1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zg(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);ig=s,n.target.dispatchEvent(s),ig=null}else return e=ul(n),e!==null&&QT(e),t.blockedOn=n,!1;e.shift()}return!0}function D1(t,e,n){Kd(t)&&n.delete(e)}function q3(){Ug=!1,wr!==null&&Kd(wr)&&(wr=null),_r!==null&&Kd(_r)&&(_r=null),Nr!==null&&Kd(Nr)&&(Nr=null),Yc.forEach(D1),qc.forEach(D1)}function vd(t,e){t.blockedOn===e&&(t.blockedOn=null,Ug||(Ug=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,q3)))}var bd=null;function M1(t){bd!==t&&(bd=t,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,function(){bd===t&&(bd=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(zx(s||n)===null)continue;break}var r=ul(n);r!==null&&(t.splice(e,3),e-=3,bg(r,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function Ko(t){function e(c){return vd(c,t)}wr!==null&&vd(wr,t),_r!==null&&vd(_r,t),Nr!==null&&vd(Nr,t),Yc.forEach(e),qc.forEach(e);for(var n=0;n<sr.length;n++){var s=sr[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)qT(n),n.blockedOn===null&&sr.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],r=n[s+1],o=i[On]||null;if(typeof r=="function")o||M1(n);else if(o){var l=null;if(r&&r.hasAttribute("formAction")){if(i=r,o=r[On]||null)l=o.formAction;else if(zx(i)!==null)continue}else l=o.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),M1(n)}}}function XT(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(o){return i=o})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function Ux(t){this._internalRoot=t}Mf.prototype.render=Ux.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));var n=e.current,s=qn();KT(n,s,t,e,null,null)};Mf.prototype.unmount=Ux.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;KT(t.current,2,null,t,null,null),If(),e[cl]=null}};function Mf(t){this._internalRoot=t}Mf.prototype.unstable_scheduleHydration=function(t){if(t){var e=TN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&qT(t)}};var O1=dN.version;if(O1!=="19.2.3")throw Error(X(527,O1,"19.2.3"));$e.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=TR(e),t=t!==null?pN(t):null,t=t===null?null:t.stateNode,t};var X3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Ne,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{mu=wd.inject(X3),Qn=wd}catch{}}xf.createRoot=function(t,e){if(!hN(t))throw Error(X(299));var n=!1,s="",i=BS,r=FS,o=$S;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=HT(t,1,!1,null,null,n,s,null,i,r,o,XT),t[cl]=e.current,Mx(t),new Ux(e)};xf.hydrateRoot=function(t,e,n){if(!hN(t))throw Error(X(299));var s=!1,i="",r=BS,o=FS,l=$S,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=HT(t,1,!0,e,n??null,s,i,c,r,o,l,XT),e.context=GT(null),n=e.current,s=qn(),s=Y0(s),i=xr(s),i.callback=null,yr(n,i,s),n=s,e.current.lanes=n,gu(e,n),qs(e),t[cl]=e.current,Mx(t),new Mf(e)};xf.version="19.2.3";function WT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WT)}catch(t){console.error(t)}}WT(),rN.exports=xf;var W3=rN.exports;const J3=Y2(W3);/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xc(){return Xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Xc.apply(this,arguments)}var fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fr||(fr={}));const V1="popstate";function Z3(t){t===void 0&&(t={});function e(s,i){let{pathname:r,search:o,hash:l}=s.location;return Bg("",{pathname:r,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:Vh(i)}return tk(e,n,null,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ek(){return Math.random().toString(36).substr(2,8)}function P1(t,e){return{usr:t.state,key:t.key,idx:e}}function Bg(t,e,n,s){return n===void 0&&(n=null),Xc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gl(e):e,{state:n,key:e&&e.key||s||ek()})}function Vh(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function gl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function tk(t,e,n,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:r=!1}=s,o=i.history,l=fr.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Xc({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=fr.Pop;let C=h(),w=C==null?null:C-d;d=C,c&&c({action:l,location:N.location,delta:w})}function m(C,w){l=fr.Push;let y=Bg(N.location,C,w);d=h()+1;let S=P1(y,d),I=N.createHref(y);try{o.pushState(S,"",I)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(I)}r&&c&&c({action:l,location:N.location,delta:1})}function g(C,w){l=fr.Replace;let y=Bg(N.location,C,w);d=h();let S=P1(y,d),I=N.createHref(y);o.replaceState(S,"",I),r&&c&&c({action:l,location:N.location,delta:0})}function b(C){let w=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof C=="string"?C:Vh(C);return y=y.replace(/ $/,"%20"),pt(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let N={get action(){return l},get location(){return t(i,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(V1,f),c=C,()=>{i.removeEventListener(V1,f),c=null}},createHref(C){return e(i,C)},createURL:b,encodeLocation(C){let w=b(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(C){return o.go(C)}};return N}var L1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(L1||(L1={}));function nk(t,e,n){return n===void 0&&(n="/"),sk(t,e,n)}function sk(t,e,n,s){let i=typeof e=="string"?gl(e):e,r=Qo(i.pathname||"/",n);if(r==null)return null;let o=JT(t);ik(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=pk(r);l=fk(o[c],d)}return l}function JT(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let i=(r,o,l)=>{let c={relativePath:l===void 0?r.path||"":l,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};c.relativePath.startsWith("/")&&(pt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Sr([s,c.relativePath]),h=n.concat(c);r.children&&r.children.length>0&&(pt(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),JT(r.children,e,h,d)),!(r.path==null&&!r.index)&&e.push({path:d,score:dk(d,r.index),routesMeta:h})};return t.forEach((r,o)=>{var l;if(r.path===""||!((l=r.path)!=null&&l.includes("?")))i(r,o);else for(let c of ZT(r.path))i(r,o,c)}),e}function ZT(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),r=n.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let o=ZT(s.join("/")),l=[];return l.push(...o.map(c=>c===""?r:[r,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function ik(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hk(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const rk=/^:[\w-]+$/,ak=3,ok=2,lk=1,ck=10,uk=-2,z1=t=>t==="*";function dk(t,e){let n=t.split("/"),s=n.length;return n.some(z1)&&(s+=uk),e&&(s+=ok),n.filter(i=>!z1(i)).reduce((i,r)=>i+(rk.test(r)?ak:r===""?lk:ck),s)}function hk(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function fk(t,e,n){let{routesMeta:s}=t,i={},r="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,h=r==="/"?e:e.slice(r.length)||"/",f=Fg({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Sr([r,f.pathname]),pathnameBase:bk(Sr([r,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(r=Sr([r,f.pathnameBase]))}return o}function Fg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=mk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((d,h,f)=>{let{paramName:m,isOptional:g}=h;if(m==="*"){let N=l[f]||"";o=r.slice(0,r.length-N.length).replace(/(.)\/+$/,"$1")}const b=l[f];return g&&!b?d[m]=void 0:d[m]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:o,pattern:t}}function mk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Bx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function pk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Qo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const gk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xk=t=>gk.test(t);function yk(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?gl(t):t,r;if(n)if(xk(n))r=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Bx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?r=U1(n.substring(1),"/"):r=U1(n,e)}else r=e;return{pathname:r,search:wk(s),hash:_k(i)}}function U1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fp(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fx(t,e){let n=vk(t);return e?n.map((s,i)=>i===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function $x(t,e,n,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=gl(t):(i=Xc({},t),pt(!i.pathname||!i.pathname.includes("?"),fp("?","pathname","search",i)),pt(!i.pathname||!i.pathname.includes("#"),fp("#","pathname","hash",i)),pt(!i.search||!i.search.includes("#"),fp("#","search","hash",i)));let r=t===""||i.pathname==="",o=r?"/":i.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=yk(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Sr=t=>t.join("/").replace(/\/\/+/g,"/"),bk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_k=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Nk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eE=["post","put","patch","delete"];new Set(eE);const Sk=["get",...eE];new Set(Sk);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wc(){return Wc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Wc.apply(this,arguments)}const Of=R.createContext(null),tE=R.createContext(null),Vi=R.createContext(null),Vf=R.createContext(null),Xs=R.createContext({outlet:null,matches:[],isDataRoute:!1}),nE=R.createContext(null);function Tk(t,e){let{relative:n}=e===void 0?{}:e;xl()||pt(!1);let{basename:s,navigator:i}=R.useContext(Vi),{hash:r,pathname:o,search:l}=Pf(t,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:Sr([s,o])),i.createHref({pathname:c,search:l,hash:r})}function xl(){return R.useContext(Vf)!=null}function Hr(){return xl()||pt(!1),R.useContext(Vf).location}function sE(t){R.useContext(Vi).static||R.useLayoutEffect(t)}function yn(){let{isDataRoute:t}=R.useContext(Xs);return t?Uk():Ek()}function Ek(){xl()||pt(!1);let t=R.useContext(Of),{basename:e,future:n,navigator:s}=R.useContext(Vi),{matches:i}=R.useContext(Xs),{pathname:r}=Hr(),o=JSON.stringify(Fx(i,n.v7_relativeSplatPath)),l=R.useRef(!1);return sE(()=>{l.current=!0}),R.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let f=$x(d,JSON.parse(o),r,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Sr([e,f.pathname])),(h.replace?s.replace:s.push)(f,h.state,h)},[e,s,o,r,t])}const jk=R.createContext(null);function Ak(t){let e=R.useContext(Xs).outlet;return e&&R.createElement(jk.Provider,{value:t},e)}function iE(){let{matches:t}=R.useContext(Xs),e=t[t.length-1];return e?e.params:{}}function Pf(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=R.useContext(Vi),{matches:i}=R.useContext(Xs),{pathname:r}=Hr(),o=JSON.stringify(Fx(i,s.v7_relativeSplatPath));return R.useMemo(()=>$x(t,JSON.parse(o),r,n==="path"),[t,o,r,n])}function Ck(t,e){return Rk(t,e)}function Rk(t,e,n,s){xl()||pt(!1);let{navigator:i}=R.useContext(Vi),{matches:r}=R.useContext(Xs),o=r[r.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Hr(),h;if(e){var f;let C=typeof e=="string"?gl(e):e;c==="/"||(f=C.pathname)!=null&&f.startsWith(c)||pt(!1),h=C}else h=d;let m=h.pathname||"/",g=m;if(c!=="/"){let C=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=nk(t,{pathname:g}),N=Ok(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Sr([c,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Sr([c,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),r,n,s);return e&&N?R.createElement(Vf.Provider,{value:{location:Wc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:fr.Pop}},N):N}function Ik(){let t=zk(),e=Nk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,null)}const kk=R.createElement(Ik,null);class Dk extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Xs.Provider,{value:this.props.routeContext},R.createElement(nE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mk(t){let{routeContext:e,match:n,children:s}=t,i=R.useContext(Of);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Xs.Provider,{value:e},s)}function Ok(t,e,n,s){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var r;if(!n)return null;if(n.errors)t=n.matches;else if((r=s)!=null&&r.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||pt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:g}=n,b=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||b){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let g,b=!1,N=null,C=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,N=f.route.errorElement||kk,c&&(d<0&&m===0?(Bk("route-fallback"),b=!0,C=null):d===m&&(b=!0,C=f.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),y=()=>{let S;return g?S=N:b?S=C:f.route.Component?S=R.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,R.createElement(Mk,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?R.createElement(Dk,{location:n.location,revalidation:n.revalidation,component:N,error:g,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var rE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(rE||{}),aE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(aE||{});function Vk(t){let e=R.useContext(Of);return e||pt(!1),e}function Pk(t){let e=R.useContext(tE);return e||pt(!1),e}function Lk(t){let e=R.useContext(Xs);return e||pt(!1),e}function oE(t){let e=Lk(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function zk(){var t;let e=R.useContext(nE),n=Pk(),s=oE();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function Uk(){let{router:t}=Vk(rE.UseNavigateStable),e=oE(aE.UseNavigateStable),n=R.useRef(!1);return sE(()=>{n.current=!0}),R.useCallback(function(i,r){r===void 0&&(r={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Wc({fromRouteId:e},r)))},[t,e])}const B1={};function Bk(t,e,n){B1[t]||(B1[t]=!0)}function Fk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lE(t){let{to:e,replace:n,state:s,relative:i}=t;xl()||pt(!1);let{future:r,static:o}=R.useContext(Vi),{matches:l}=R.useContext(Xs),{pathname:c}=Hr(),d=yn(),h=$x(e,Fx(l,r.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(h);return R.useEffect(()=>d(JSON.parse(f),{replace:n,state:s,relative:i}),[d,f,i,n,s]),null}function $k(t){return Ak(t.context)}function Yt(t){pt(!1)}function Hk(t){let{basename:e="/",children:n=null,location:s,navigationType:i=fr.Pop,navigator:r,static:o=!1,future:l}=t;xl()&&pt(!1);let c=e.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:c,navigator:r,static:o,future:Wc({v7_relativeSplatPath:!1},l)}),[c,l,r,o]);typeof s=="string"&&(s=gl(s));let{pathname:h="/",search:f="",hash:m="",state:g=null,key:b="default"}=s,N=R.useMemo(()=>{let C=Qo(h,c);return C==null?null:{location:{pathname:C,search:f,hash:m,state:g,key:b},navigationType:i}},[c,h,f,m,g,b,i]);return N==null?null:R.createElement(Vi.Provider,{value:d},R.createElement(Vf.Provider,{children:n,value:N}))}function Gk(t){let{children:e,location:n}=t;return Ck($g(e),n)}new Promise(()=>{});function $g(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(s,i)=>{if(!R.isValidElement(s))return;let r=[...e,i];if(s.type===R.Fragment){n.push.apply(n,$g(s.props.children,r));return}s.type!==Yt&&pt(!1),!s.props.index||!s.props.children||pt(!1);let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=$g(s.props.children,r)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ph.apply(this,arguments)}function cE(t,e){if(t==null)return{};var n={},s=Object.keys(t),i,r;for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Kk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Qk(t,e){return t.button===0&&(!e||e==="_self")&&!Kk(t)}function Hg(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(i=>[n,i]):[[n,s]])},[]))}function Yk(t,e){let n=Hg(t);return e&&e.forEach((s,i)=>{n.has(i)||e.getAll(i).forEach(r=>{n.append(i,r)})}),n}const qk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xk=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Wk="6";try{window.__reactRouterVersion=Wk}catch{}const Jk=R.createContext({isTransitioning:!1}),Zk="startTransition",F1=yR[Zk];function e5(t){let{basename:e,children:n,future:s,window:i}=t,r=R.useRef();r.current==null&&(r.current=Z3({window:i,v5Compat:!0}));let o=r.current,[l,c]=R.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},h=R.useCallback(f=>{d&&F1?F1(()=>c(f)):c(f)},[c,d]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>Fk(s),[s]),R.createElement(Hk,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:s})}const t5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,s5=R.forwardRef(function(e,n){let{onClick:s,relative:i,reloadDocument:r,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=cE(e,qk),{basename:g}=R.useContext(Vi),b,N=!1;if(typeof d=="string"&&n5.test(d)&&(b=d,t5))try{let S=new URL(window.location.href),I=d.startsWith("//")?new URL(S.protocol+d):new URL(d),k=Qo(I.pathname,g);I.origin===S.origin&&k!=null?d=k+I.search+I.hash:N=!0}catch{}let C=Tk(d,{relative:i}),w=a5(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:f});function y(S){s&&s(S),S.defaultPrevented||w(S)}return R.createElement("a",Ph({},m,{href:b||C,onClick:N||r?s:y,ref:n,target:c}))}),i5=R.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:i=!1,className:r="",end:o=!1,style:l,to:c,viewTransition:d,children:h}=e,f=cE(e,Xk),m=Pf(c,{relative:f.relative}),g=Hr(),b=R.useContext(tE),{navigator:N,basename:C}=R.useContext(Vi),w=b!=null&&l5(m)&&d===!0,y=N.encodeLocation?N.encodeLocation(m).pathname:m.pathname,S=g.pathname,I=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;i||(S=S.toLowerCase(),I=I?I.toLowerCase():null,y=y.toLowerCase()),I&&C&&(I=Qo(I,C)||I);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let L=S===y||!o&&S.startsWith(y)&&S.charAt(k)==="/",T=I!=null&&(I===y||!o&&I.startsWith(y)&&I.charAt(y.length)==="/"),p={isActive:L,isPending:T,isTransitioning:w},E=L?s:void 0,j;typeof r=="function"?j=r(p):j=[r,L?"active":null,T?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(p):l;return R.createElement(s5,Ph({},f,{"aria-current":E,className:j,ref:n,style:D,to:c,viewTransition:d}),typeof h=="function"?h(p):h)});var Gg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gg||(Gg={}));var $1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($1||($1={}));function r5(t){let e=R.useContext(Of);return e||pt(!1),e}function a5(t,e){let{target:n,replace:s,state:i,preventScrollReset:r,relative:o,viewTransition:l}=e===void 0?{}:e,c=yn(),d=Hr(),h=Pf(t,{relative:o});return R.useCallback(f=>{if(Qk(f,n)){f.preventDefault();let m=s!==void 0?s:Vh(d)===Vh(h);c(t,{replace:m,state:i,preventScrollReset:r,relative:o,viewTransition:l})}},[d,c,h,s,i,n,t,r,o,l])}function o5(t){let e=R.useRef(Hg(t)),n=R.useRef(!1),s=Hr(),i=R.useMemo(()=>Yk(s.search,n.current?null:e.current),[s.search]),r=yn(),o=R.useCallback((l,c)=>{const d=Hg(typeof l=="function"?l(i):l);n.current=!0,r("?"+d,c)},[r,i]);return[i,o]}function l5(t,e){e===void 0&&(e={});let n=R.useContext(Jk);n==null&&pt(!1);let{basename:s}=r5(Gg.useViewTransitionState),i=Pf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let r=Qo(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Qo(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Fg(i.pathname,o)!=null||Fg(i.pathname,r)!=null}const c5=()=>{};var H1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},u5=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=r>>2,f=(r&3)<<4|l>>4;let m=(l&15)<<2|d>>6,g=d&63;c||(g=64,o||(m=64)),s.push(n[h],n[f],n[m],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||l==null||d==null||f==null)throw new d5;const m=r<<2|l>>4;if(s.push(m),d!==64){const g=l<<4&240|d>>2;if(s.push(g),f!==64){const b=d<<6&192|f;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h5=function(t){const e=uE(t);return dE.encodeByteArray(e,!0)},Lh=function(t){return h5(t).replace(/\./g,"")},hE=function(t){try{return dE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=()=>f5().__FIREBASE_DEFAULTS__,p5=()=>{if(typeof process>"u"||typeof H1>"u")return;const t=H1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},g5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hE(t[1]);return e&&JSON.parse(e)},Lf=()=>{try{return c5()||m5()||p5()||g5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fE=t=>{var e,n;return(n=(e=Lf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},x5=t=>{const e=fE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},mE=()=>{var t;return(t=Lf())==null?void 0:t.config},pE=t=>{var e;return(e=Lf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Lh(JSON.stringify(n)),Lh(JSON.stringify(o)),""].join(".")}const Nc={};function b5(){const t={prod:[],emulator:[]};for(const e of Object.keys(Nc))Nc[e]?t.emulator.push(e):t.prod.push(e);return t}function w5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let G1=!1;function xE(t,e){if(typeof window>"u"||typeof document>"u"||!yl(window.location.host)||Nc[t]===e||Nc[t]||G1)return;Nc[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",r=b5().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{G1=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=w5(s),g=n("text"),b=document.getElementById(g)||document.createElement("span"),N=n("learnmore"),C=document.getElementById(N)||document.createElement("a"),w=n("preprendIcon"),y=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;l(S),h(C,N);const I=d();c(y,w),S.append(y,b,C,I),document.body.appendChild(S)}r?(b.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function N5(){var e;const t=(e=Lf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function S5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function E5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j5(){const t=xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A5(){return!N5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C5(){try{return typeof indexedDB=="object"}catch{return!1}}function R5(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="FirebaseError";class Pi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=I5,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tu.prototype.create)}}class Tu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?k5(r,s):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Pi(i,l,s)}}function k5(t,e){return t.replace(D5,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const D5=/\{\$([^}]+)}/g;function M5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ti(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(K1(r)&&K1(o)){if(!Ti(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function K1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ec(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function tc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function O5(t,e){const n=new V5(t,e);return n.subscribe.bind(n)}class V5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");P5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=mp),i.error===void 0&&(i.error=mp),i.complete===void 0&&(i.complete=mp);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Ca{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new y5;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U5(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);s===l&&o.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:z5(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z5(t){return t===oa?void 0:t}function U5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const F5={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},$5=Oe.INFO,H5={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},G5=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=H5[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hx{constructor(e){this.name=e,this._logLevel=$5,this._logHandler=G5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const K5=(t,e)=>e.some(n=>t instanceof n);let Q1,Y1;function Q5(){return Q1||(Q1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y5(){return Y1||(Y1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yE=new WeakMap,Kg=new WeakMap,vE=new WeakMap,pp=new WeakMap,Gx=new WeakMap;function q5(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Tr(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&yE.set(n,t)}).catch(()=>{}),Gx.set(e,t),e}function X5(t){if(Kg.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Kg.set(t,e)}let Qg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W5(t){Qg=t(Qg)}function J5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(gp(this),e,...n);return vE.set(s,e.sort?e.sort():[e]),Tr(s)}:Y5().includes(t)?function(...e){return t.apply(gp(this),e),Tr(yE.get(this))}:function(...e){return Tr(t.apply(gp(this),e))}}function Z5(t){return typeof t=="function"?J5(t):(t instanceof IDBTransaction&&X5(t),K5(t,Q5())?new Proxy(t,Qg):t)}function Tr(t){if(t instanceof IDBRequest)return q5(t);if(pp.has(t))return pp.get(t);const e=Z5(t);return e!==t&&(pp.set(t,e),Gx.set(e,t)),e}const gp=t=>Gx.get(t);function eD(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),l=Tr(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Tr(o.result),c.oldVersion,c.newVersion,Tr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{r&&c.addEventListener("close",()=>r()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const tD=["get","getKey","getAll","getAllKeys","count"],nD=["put","add","delete","clear"],xp=new Map;function q1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=nD.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||tD.includes(n)))return;const r=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return xp.set(e,r),r}W5(t=>({...t,get:(e,n,s)=>q1(e,n)||t.get(e,n,s),has:(e,n)=>!!q1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iD(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function iD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yg="@firebase/app",X1="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Hx("@firebase/app"),rD="@firebase/app-compat",aD="@firebase/analytics-compat",oD="@firebase/analytics",lD="@firebase/app-check-compat",cD="@firebase/app-check",uD="@firebase/auth",dD="@firebase/auth-compat",hD="@firebase/database",fD="@firebase/data-connect",mD="@firebase/database-compat",pD="@firebase/functions",gD="@firebase/functions-compat",xD="@firebase/installations",yD="@firebase/installations-compat",vD="@firebase/messaging",bD="@firebase/messaging-compat",wD="@firebase/performance",_D="@firebase/performance-compat",ND="@firebase/remote-config",SD="@firebase/remote-config-compat",TD="@firebase/storage",ED="@firebase/storage-compat",jD="@firebase/firestore",AD="@firebase/ai",CD="@firebase/firestore-compat",RD="firebase",ID="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="[DEFAULT]",kD={[Yg]:"fire-core",[rD]:"fire-core-compat",[oD]:"fire-analytics",[aD]:"fire-analytics-compat",[cD]:"fire-app-check",[lD]:"fire-app-check-compat",[uD]:"fire-auth",[dD]:"fire-auth-compat",[hD]:"fire-rtdb",[fD]:"fire-data-connect",[mD]:"fire-rtdb-compat",[pD]:"fire-fn",[gD]:"fire-fn-compat",[xD]:"fire-iid",[yD]:"fire-iid-compat",[vD]:"fire-fcm",[bD]:"fire-fcm-compat",[wD]:"fire-perf",[_D]:"fire-perf-compat",[ND]:"fire-rc",[SD]:"fire-rc-compat",[TD]:"fire-gcs",[ED]:"fire-gcs-compat",[jD]:"fire-fst",[CD]:"fire-fst-compat",[AD]:"fire-vertex","fire-js":"fire-js",[RD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,DD=new Map,Xg=new Map;function W1(t,e){try{t.container.addComponent(e)}catch(n){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yo(t){const e=t.name;if(Xg.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;Xg.set(e,t);for(const n of zh.values())W1(n,t);for(const n of DD.values())W1(n,t);return!0}function Kx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $n(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new Tu("app","Firebase",MD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=ID;function bE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:qg,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Er.create("bad-app-name",{appName:String(i)});if(n||(n=mE()),!n)throw Er.create("no-options");const r=zh.get(i);if(r){if(Ti(n,r.options)&&Ti(s,r.config))return r;throw Er.create("duplicate-app",{appName:i})}const o=new B5(i);for(const c of Xg.values())o.addComponent(c);const l=new OD(n,s,o);return zh.set(i,l),l}function wE(t=qg){const e=zh.get(t);if(!e&&t===qg&&mE())return bE();if(!e)throw Er.create("no-app",{appName:t});return e}function jr(t,e,n){let s=kD[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(o.join(" "));return}Yo(new Ca(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="firebase-heartbeat-database",PD=1,Jc="firebase-heartbeat-store";let yp=null;function _E(){return yp||(yp=eD(VD,PD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),yp}async function LD(t){try{const n=(await _E()).transaction(Jc),s=await n.objectStore(Jc).get(NE(t));return await n.done,s}catch(e){if(e instanceof Pi)Ei.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ei.warn(n.message)}}}async function J1(t,e){try{const s=(await _E()).transaction(Jc,"readwrite");await s.objectStore(Jc).put(e,NE(t)),await s.done}catch(n){if(n instanceof Pi)Ei.warn(n.message);else{const s=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ei.warn(s.message)}}}function NE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=1024,UD=30;class BD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $D(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Z1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>UD){const o=HD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ei.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Z1(),{heartbeatsToSend:s,unsentEntries:i}=FD(this._heartbeatsCache.heartbeats),r=Lh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Ei.warn(n),""}}}function Z1(){return new Date().toISOString().substring(0,10)}function FD(t,e=zD){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),ew(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ew(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class $D{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C5()?R5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return J1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return J1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ew(t){return Lh(JSON.stringify({version:2,heartbeats:t})).length}function HD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){Yo(new Ca("platform-logger",e=>new sD(e),"PRIVATE")),Yo(new Ca("heartbeat",e=>new BD(e),"PRIVATE")),jr(Yg,X1,t),jr(Yg,X1,"esm2020"),jr("fire-js","")}GD("");var KD="firebase",QD="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(KD,QD,"app");function SE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YD=SE,TE=new Tu("auth","Firebase",SE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Hx("@firebase/auth");function qD(t,...e){Uh.logLevel<=Oe.WARN&&Uh.warn(`Auth (${vl}): ${t}`,...e)}function Qd(t,...e){Uh.logLevel<=Oe.ERROR&&Uh.error(`Auth (${vl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t,...e){throw Yx(t,...e)}function Ns(t,...e){return Yx(t,...e)}function Qx(t,e,n){const s={...YD(),[e]:n};return new Tu("auth","Firebase",s).create(e,{appName:t.name})}function pi(t){return Qx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XD(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&gs(t,"argument-error"),Qx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yx(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return TE.create(t,...e)}function we(t,e,...n){if(!t)throw Yx(e,...n)}function ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qd(e),new Error(e)}function ji(t,e){t||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function WD(){return tw()==="http:"||tw()==="https:"}function tw(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WD()||T5()||"connection"in navigator)?navigator.onLine:!0}function ZD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.shortDelay=e,this.longDelay=n,ji(n>e,"Short delay should be less than long delay!"),this.isMobile=_5()||E5()}get(){return JD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t,e){ji(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nM=new ju(3e4,6e4);function Li(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ws(t,e,n,s,i={}){return jE(t,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const l=Eu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...r};return S5()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&yl(t.emulatorConfig.host)&&(d.credentials="include"),EE.fetch()(await AE(t,t.config.apiHost,n,l),d)})}async function jE(t,e,n){t._canInitEmulator=!1;const s={...eM,...e};try{const i=new iM(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw _d(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const l=r.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw _d(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw _d(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw _d(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Qx(t,h,d);gs(t,h)}}catch(i){if(i instanceof Pi)throw i;gs(t,"network-request-failed",{message:String(i)})}}async function Au(t,e,n,s,i={}){const r=await Ws(t,e,n,s,i);return"mfaPendingCredential"in r&&gs(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function AE(t,e,n,s){const i=`${e}${n}?${s}`,r=t,o=r.config.emulator?qx(t.config,i):`${t.config.apiScheme}://${i}`;return tM.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function sM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ns(this.auth,"network-request-failed")),nM.get())})}}function _d(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Ns(t,e,s);return i.customData._tokenResponse=n,i}function nw(t){return t!==void 0&&t.enterprise!==void 0}class rM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aM(t,e){return Ws(t,"GET","/v2/recaptchaConfig",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e){return Ws(t,"POST","/v1/accounts:delete",e)}async function Bh(t,e){return Ws(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lM(t,e=!1){const n=St(t),s=await n.getIdToken(e),i=Xx(s);we(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Sc(vp(i.auth_time)),issuedAtTime:Sc(vp(i.iat)),expirationTime:Sc(vp(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function vp(t){return Number(t)*1e3}function Xx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const i=hE(n);return i?JSON.parse(i):(Qd("Failed to decode base64 JWT payload"),null)}catch(i){return Qd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function sw(t){const e=Xx(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Pi&&cM(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function cM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sc(this.lastLoginAt),this.creationTime=Sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(t){var f;const e=t.auth,n=await t.getIdToken(),s=await qo(t,Bh(e,{idToken:n}));we(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const r=(f=i.providerUserInfo)!=null&&f.length?CE(i.providerUserInfo):[],o=hM(t.providerData,r),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Jg(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function dM(t){const e=St(t);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hM(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function CE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(t,e){const n=await jE(t,{},async()=>{const s=Eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=await AE(t,i,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&yl(t.emulatorConfig.host)&&(c.credentials="include"),EE.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mM(t,e){return Ws(t,"POST","/v2/accounts:revokeToken",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=sw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await fM(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Io;return s&&(we(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(we(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(we(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _s{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new uM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Jg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await qo(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lM(this,e)}reload(){return dM(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _s({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Fh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await qo(this,oM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,i=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:g,providerData:b,stsTokenManager:N}=n;we(f&&N,e,"internal-error");const C=Io.fromJSON(this.name,N);we(typeof f=="string",e,"internal-error"),qi(s,e.name),qi(i,e.name),we(typeof m=="boolean",e,"internal-error"),we(typeof g=="boolean",e,"internal-error"),qi(r,e.name),qi(o,e.name),qi(l,e.name),qi(c,e.name),qi(d,e.name),qi(h,e.name);const w=new _s({uid:f,auth:e,email:i,emailVerified:m,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:r,tenantId:l,stsTokenManager:C,createdAt:d,lastLoginAt:h});return b&&Array.isArray(b)&&(w.providerData=b.map(y=>({...y}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,n,s=!1){const i=new Io;i.updateFromServerResponse(n);const r=new _s({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Fh(r),r}static async _fromGetAccountInfoResponse(e,n,s){const i=n.users[0];we(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?CE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),l=new Io;l.updateFromIdToken(s);const c=new _s({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Jg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=new Map;function di(t){ji(t instanceof Function,"Expected a class definition");let e=iw.get(t);return e?(ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RE.type="NONE";const rw=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t,e,n){return`firebase:${t}:${e}:${n}`}class ko{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=Yd(this.userKey,i.apiKey,r),this.fullPersistenceKey=Yd("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bh(this.auth,{idToken:e}).catch(()=>{});return n?_s._fromGetAccountInfoResponse(this.auth,n,e):null}return _s._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ko(di(rw),e,s);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let r=i[0]||di(rw);const o=Yd(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const m=await Bh(e,{idToken:h}).catch(()=>{});if(!m)break;f=await _s._fromGetAccountInfoResponse(e,m,h)}else f=_s._fromJSON(e,h);d!==r&&(l=f),r=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new ko(r,e,s):(r=c[0],l&&await r._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==r)try{await d._remove(o)}catch{}})),new ko(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ME(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VE(e))return"Blackberry";if(PE(e))return"Webos";if(kE(e))return"Safari";if((e.includes("chrome/")||DE(e))&&!e.includes("edge/"))return"Chrome";if(OE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function IE(t=xn()){return/firefox\//i.test(t)}function kE(t=xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DE(t=xn()){return/crios\//i.test(t)}function ME(t=xn()){return/iemobile/i.test(t)}function OE(t=xn()){return/android/i.test(t)}function VE(t=xn()){return/blackberry/i.test(t)}function PE(t=xn()){return/webos/i.test(t)}function Wx(t=xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pM(t=xn()){var e;return Wx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function gM(){return j5()&&document.documentMode===10}function LE(t=xn()){return Wx(t)||OE(t)||PE(t)||VE(t)||/windows phone/i.test(t)||ME(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t,e=[]){let n;switch(t){case"Browser":n=aw(xn());break;case"Worker":n=`${aw(xn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((o,l)=>{try{const c=e(r);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(t,e={}){return Ws(t,"GET","/v2/passwordPolicy",Li(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=6;class bM{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vM,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ow(this),this.idTokenSubscription=new ow(this),this.beforeStateQueue=new xM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=di(n)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bh(this,{idToken:e}),s=await _s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if($n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(pi(this));const n=e?St(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yM(this),n=new bM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await mM(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&di(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(l,this,"internal-error"),l.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&qD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function zi(t){return St(t)}class ow{constructor(e){this.auth=e,this.observer=null,this.addObserver=O5(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _M(t){zf=t}function UE(t){return zf.loadJS(t)}function NM(){return zf.recaptchaEnterpriseScript}function SM(){return zf.gapiScript}function TM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class EM{constructor(){this.enterprise=new jM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AM="recaptcha-enterprise",BE="NO_RECAPTCHA";class CM{constructor(e){this.type=AM,this.auth=zi(e)}async verify(e="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,l)=>{aM(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new rM(c);return r.tenantId==null?r._agentRecaptchaConfig=d:r._tenantRecaptchaConfigs[r.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function i(r,o,l){const c=window.grecaptcha;nw(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(d=>{o(d)}).catch(()=>{o(BE)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EM().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(l=>{if(!n&&nw(window.grecaptcha))i(l,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=NM();c.length!==0&&(c+=l),UE(c).then(()=>{i(l,r,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function lw(t,e,n,s=!1,i=!1){const r=new CM(t);let o;if(i)o=BE;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function $h(t,e,n,s,i){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await lw(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await lw(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t,e){const n=Kx(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(Ti(r,e??{}))return i;gs(i,"already-initialized")}return n.initialize({options:e})}function IM(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function kM(t,e,n){const s=zi(t);we(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,r=FE(e),{host:o,port:l}=DM(e),c=l===null?"":`:${l}`,d={url:`${r}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){we(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),we(Ti(d,s.config.emulator)&&Ti(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,yl(o)?(gE(`${r}//${o}${c}`),xE("Auth",!0)):MM()}function FE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DM(t){const e=FE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:cw(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:cw(o)}}}function cw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function OM(t,e){return Ws(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(t,e){return Au(t,"POST","/v1/accounts:signInWithPassword",Li(t,e))}async function PM(t,e){return Ws(t,"POST","/v1/accounts:sendOobCode",Li(t,e))}async function LM(t,e){return PM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e){return Au(t,"POST","/v1/accounts:signInWithEmailLink",Li(t,e))}async function UM(t,e){return Au(t,"POST","/v1/accounts:signInWithEmailLink",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Jx{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Zc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Zc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $h(e,n,"signInWithPassword",VM);case"emailLink":return zM(e,{email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $h(e,s,"signUpPassword",OM);case"emailLink":return UM(e,{idToken:n,email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t,e){return Au(t,"POST","/v1/accounts:signInWithIdp",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="http://localhost";class Ra extends Jx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...r}=n;if(!s||!i)return null;const o=new Ra(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Do(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Do(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Do(e,n)}buildRequest(){const e={requestUri:BM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Eu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $M(t){const e=ec(tc(t)).link,n=e?ec(tc(e)).deep_link_id:null,s=ec(tc(t)).deep_link_id;return(s?ec(tc(s)).link:null)||s||n||e||t}class Zx{constructor(e){const n=ec(tc(e)),s=n.apiKey??null,i=n.oobCode??null,r=FM(n.mode??null);we(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$M(e);try{return new Zx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.providerId=bl.PROVIDER_ID}static credential(e,n){return Zc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Zx.parseLink(n);return we(s,"argument-error"),Zc._fromEmailAndCode(e,s.code,s.tenantId)}}bl.PROVIDER_ID="password";bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends ey{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Cu{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ra._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ai.credential(n,s)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Cu{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Cu{constructor(){super("twitter.com")}static credential(e,n){return Ra._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ar.credential(n,s)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e){return Au(t,"POST","/v1/accounts:signUp",Li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await _s._fromIdTokenResponse(e,s,i),o=uw(s);return new Ia({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=uw(s);return new Ia({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function uw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends Pi{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Hh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Hh(e,n,s,i)}}function $E(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Hh._fromErrorAndOperation(t,r,e,s):r})}async function GM(t,e,n=!1){const s=await qo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ia._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e,n=!1){const{auth:s}=t;if($n(s.app))return Promise.reject(pi(s));const i="reauthenticate";try{const r=await qo(t,$E(s,i,e,t),n);we(r.idToken,s,"internal-error");const o=Xx(r.idToken);we(o,s,"internal-error");const{sub:l}=o;return we(t.uid===l,s,"user-mismatch"),Ia._forOperation(t,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&gs(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(t,e,n=!1){if($n(t.app))return Promise.reject(pi(t));const s="signIn",i=await $E(t,s,e),r=await Ia._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}async function QM(t,e){return HE(zi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(t){const e=zi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YM(t,e,n){const s=zi(t);await $h(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",LM)}async function dw(t,e,n){if($n(t.app))return Promise.reject(pi(t));const s=zi(t),o=await $h(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HM).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&GE(t),c}),l=await Ia._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function hw(t,e,n){return $n(t.app)?Promise.reject(pi(t)):QM(St(t),bl.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&GE(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,e){return Ws(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=St(t),r={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await qo(s,qM(s.auth,r));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const l=s.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function XM(t,e,n,s){return St(t).onIdTokenChanged(e,n,s)}function WM(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function JM(t,e,n,s){return St(t).onAuthStateChanged(e,n,s)}function ZM(t){return St(t).signOut()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=1e3,t6=10;class QE extends KE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);gM()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,t6):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},e6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}QE.type="LOCAL";const n6=QE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE extends KE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YE.type="SESSION";const qE=YE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new Uf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const l=Array.from(o).map(async d=>d(n.origin,r)),c=await s6(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((l,c)=>{const d=ty("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(m.data.response);break;default:clearTimeout(h),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function r6(t){Us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function a6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function l6(){return XE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="firebaseLocalStorageDb",c6=1,Kh="firebaseLocalStorage",JE="fbase_key";class Ru{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bf(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function u6(){const t=indexedDB.deleteDatabase(WE);return new Ru(t).toPromise()}function Zg(){const t=indexedDB.open(WE,c6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Kh,{keyPath:JE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Kh)?e(s):(s.close(),await u6(),e(await Zg()))})})}async function fw(t,e,n){const s=Bf(t,!0).put({[JE]:e,value:n});return new Ru(s).toPromise()}async function d6(t,e){const n=Bf(t,!1).get(e),s=await new Ru(n).toPromise();return s===void 0?null:s.value}function mw(t,e){const n=Bf(t,!0).delete(e);return new Ru(n).toPromise()}const h6=800,f6=3;class ZE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>f6)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uf._getInstance(l6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await a6(),!this.activeServiceWorker)return;this.sender=new i6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await fw(e,Gh,"1"),await mw(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>fw(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>d6(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=Bf(i,!1).getAll();return new Ru(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZE.type="LOCAL";const m6=ZE;new ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t,e){return e?di(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny extends Jx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Do(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p6(t){return HE(t.auth,new ny(t),t.bypassAuthState)}function g6(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),KM(n,new ny(t),t.bypassAuthState)}async function x6(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),GM(n,new ny(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p6;case"linkViaPopup":case"linkViaRedirect":return x6;case"reauthViaPopup":case"reauthViaRedirect":return g6;default:gs(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=new ju(2e3,1e4);async function v6(t,e,n){if($n(t.app))return Promise.reject(Ns(t,"operation-not-supported-in-this-environment"));const s=zi(t);XD(t,e,ey);const i=ej(s,n);return new ha(s,"signInViaPopup",e,i).executeNotNull()}class ha extends tj{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y6.get())};e()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="pendingRedirect",qd=new Map;class w6 extends tj{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=qd.get(this.auth._key());if(!e){try{const s=await _6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}qd.set(this.auth._key(),e)}return this.bypassAuthState||qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _6(t,e){const n=T6(e),s=S6(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function N6(t,e){qd.set(t._key(),e)}function S6(t){return di(t._redirectPersistence)}function T6(t){return Yd(b6,t.config.apiKey,t.name)}async function E6(t,e,n=!1){if($n(t.app))return Promise.reject(pi(t));const s=zi(t),i=ej(s,e),o=await new w6(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=10*60*1e3;class A6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!nj(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ns(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=j6&&this.cachedEventUids.clear(),this.cachedEventUids.has(pw(e))}saveEventToCache(e){this.cachedEventUids.add(pw(e)),this.lastProcessedEventTime=Date.now()}}function pw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R6(t,e={}){return Ws(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k6=/^https?/;async function D6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await R6(t);for(const n of e)try{if(M6(n))return}catch{}gs(t,"unauthorized-domain")}function M6(t){const e=Wg(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!k6.test(n))return!1;if(I6.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=new ju(3e4,6e4);function gw(){const t=Us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function V6(t){return new Promise((e,n)=>{var i,r,o;function s(){gw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gw(),n(Ns(t,"network-request-failed"))},timeout:O6.get()})}if((r=(i=Us().gapi)==null?void 0:i.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((o=Us().gapi)!=null&&o.load)s();else{const l=TM("iframefcb");return Us()[l]=()=>{gapi.load?s():n(Ns(t,"network-request-failed"))},UE(`${SM()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Xd=null,e})}let Xd=null;function P6(t){return Xd=Xd||V6(t),Xd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=new ju(5e3,15e3),z6="__/auth/iframe",U6="emulator/auth/iframe",B6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $6(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qx(e,U6):`https://${t.config.authDomain}/${z6}`,s={apiKey:e.apiKey,appName:t.name,v:vl},i=F6.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${Eu(s).slice(1)}`}async function H6(t){const e=await P6(t),n=Us().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:$6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B6,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Ns(t,"network-request-failed"),l=Us().setTimeout(()=>{r(o)},L6.get());function c(){Us().clearTimeout(l),i(s)}s.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K6=500,Q6=600,Y6="_blank",q6="http://localhost";class xw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X6(t,e,n,s=K6,i=Q6){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...G6,width:s.toString(),height:i.toString(),top:r,left:o},d=xn().toLowerCase();n&&(l=DE(d)?Y6:n),IE(d)&&(e=e||q6,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,b])=>`${m}${g}=${b},`,"");if(pM(d)&&l!=="_self")return W6(e||"",l),new xw(null);const f=window.open(e||"",l,h);we(f,t,"popup-blocked");try{f.focus()}catch{}return new xw(f)}function W6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="__/auth/handler",Z6="emulator/auth/handler",eO=encodeURIComponent("fac");async function yw(t,e,n,s,i,r){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:vl,eventId:i};if(e instanceof ey){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",M5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Cu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${eO}=${encodeURIComponent(c)}`:"";return`${tO(t)}?${Eu(l).slice(1)}${d}`}function tO({config:t}){return t.emulator?qx(t,Z6):`https://${t.authDomain}/${J6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="webStorageSupport";class nO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qE,this._completeRedirectFn=E6,this._overrideRedirectResult=N6}async _openPopup(e,n,s,i){var o;ji((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await yw(e,n,s,Wg(),i);return X6(e,r,ty())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await yw(e,n,s,Wg(),i);return r6(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(ji(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await H6(e),s=new A6(e);return n.register("authEvent",i=>(we(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wp,{type:wp},i=>{var o;const r=(o=i==null?void 0:i[0])==null?void 0:o[wp];r!==void 0&&n(!!r),gs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return LE()||kE()||Wx()}}const sO=nO;var vw="@firebase/auth",bw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aO(t){Yo(new Ca("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;we(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zE(t)},d=new wM(s,i,r,c);return IM(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Yo(new Ca("auth-internal",e=>{const n=zi(e.getProvider("auth").getImmediate());return(s=>new iO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(vw,bw,rO(t)),jr(vw,bw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=5*60,lO=pE("authIdTokenMaxAge")||oO;let ww=null;const cO=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>lO)return;const i=n==null?void 0:n.token;ww!==i&&(ww=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uO(t=wE()){const e=Kx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RM(t,{popupRedirectResolver:sO,persistence:[m6,n6,qE]}),s=pE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(s,location.origin);if(location.origin===r.origin){const o=cO(r.toString());WM(n,o,()=>o(n.currentUser)),XM(n,l=>o(l))}}const i=fE("auth");return i&&kM(n,`http://${i}`),n}function dO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}_M({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=Ns("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",dO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aO("Browser");var _w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,sj;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,p){function E(){}E.prototype=p.prototype,T.F=p.prototype,T.prototype=new E,T.prototype.constructor=T,T.D=function(j,D,A){for(var v=Array(arguments.length-2),V=2;V<arguments.length;V++)v[V-2]=arguments[V];return p.prototype[D].apply(j,v)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,p,E){E||(E=0);const j=Array(16);if(typeof p=="string")for(var D=0;D<16;++D)j[D]=p.charCodeAt(E++)|p.charCodeAt(E++)<<8|p.charCodeAt(E++)<<16|p.charCodeAt(E++)<<24;else for(D=0;D<16;++D)j[D]=p[E++]|p[E++]<<8|p[E++]<<16|p[E++]<<24;p=T.g[0],E=T.g[1],D=T.g[2];let A=T.g[3],v;v=p+(A^E&(D^A))+j[0]+3614090360&4294967295,p=E+(v<<7&4294967295|v>>>25),v=A+(D^p&(E^D))+j[1]+3905402710&4294967295,A=p+(v<<12&4294967295|v>>>20),v=D+(E^A&(p^E))+j[2]+606105819&4294967295,D=A+(v<<17&4294967295|v>>>15),v=E+(p^D&(A^p))+j[3]+3250441966&4294967295,E=D+(v<<22&4294967295|v>>>10),v=p+(A^E&(D^A))+j[4]+4118548399&4294967295,p=E+(v<<7&4294967295|v>>>25),v=A+(D^p&(E^D))+j[5]+1200080426&4294967295,A=p+(v<<12&4294967295|v>>>20),v=D+(E^A&(p^E))+j[6]+2821735955&4294967295,D=A+(v<<17&4294967295|v>>>15),v=E+(p^D&(A^p))+j[7]+4249261313&4294967295,E=D+(v<<22&4294967295|v>>>10),v=p+(A^E&(D^A))+j[8]+1770035416&4294967295,p=E+(v<<7&4294967295|v>>>25),v=A+(D^p&(E^D))+j[9]+2336552879&4294967295,A=p+(v<<12&4294967295|v>>>20),v=D+(E^A&(p^E))+j[10]+4294925233&4294967295,D=A+(v<<17&4294967295|v>>>15),v=E+(p^D&(A^p))+j[11]+2304563134&4294967295,E=D+(v<<22&4294967295|v>>>10),v=p+(A^E&(D^A))+j[12]+1804603682&4294967295,p=E+(v<<7&4294967295|v>>>25),v=A+(D^p&(E^D))+j[13]+4254626195&4294967295,A=p+(v<<12&4294967295|v>>>20),v=D+(E^A&(p^E))+j[14]+2792965006&4294967295,D=A+(v<<17&4294967295|v>>>15),v=E+(p^D&(A^p))+j[15]+1236535329&4294967295,E=D+(v<<22&4294967295|v>>>10),v=p+(D^A&(E^D))+j[1]+4129170786&4294967295,p=E+(v<<5&4294967295|v>>>27),v=A+(E^D&(p^E))+j[6]+3225465664&4294967295,A=p+(v<<9&4294967295|v>>>23),v=D+(p^E&(A^p))+j[11]+643717713&4294967295,D=A+(v<<14&4294967295|v>>>18),v=E+(A^p&(D^A))+j[0]+3921069994&4294967295,E=D+(v<<20&4294967295|v>>>12),v=p+(D^A&(E^D))+j[5]+3593408605&4294967295,p=E+(v<<5&4294967295|v>>>27),v=A+(E^D&(p^E))+j[10]+38016083&4294967295,A=p+(v<<9&4294967295|v>>>23),v=D+(p^E&(A^p))+j[15]+3634488961&4294967295,D=A+(v<<14&4294967295|v>>>18),v=E+(A^p&(D^A))+j[4]+3889429448&4294967295,E=D+(v<<20&4294967295|v>>>12),v=p+(D^A&(E^D))+j[9]+568446438&4294967295,p=E+(v<<5&4294967295|v>>>27),v=A+(E^D&(p^E))+j[14]+3275163606&4294967295,A=p+(v<<9&4294967295|v>>>23),v=D+(p^E&(A^p))+j[3]+4107603335&4294967295,D=A+(v<<14&4294967295|v>>>18),v=E+(A^p&(D^A))+j[8]+1163531501&4294967295,E=D+(v<<20&4294967295|v>>>12),v=p+(D^A&(E^D))+j[13]+2850285829&4294967295,p=E+(v<<5&4294967295|v>>>27),v=A+(E^D&(p^E))+j[2]+4243563512&4294967295,A=p+(v<<9&4294967295|v>>>23),v=D+(p^E&(A^p))+j[7]+1735328473&4294967295,D=A+(v<<14&4294967295|v>>>18),v=E+(A^p&(D^A))+j[12]+2368359562&4294967295,E=D+(v<<20&4294967295|v>>>12),v=p+(E^D^A)+j[5]+4294588738&4294967295,p=E+(v<<4&4294967295|v>>>28),v=A+(p^E^D)+j[8]+2272392833&4294967295,A=p+(v<<11&4294967295|v>>>21),v=D+(A^p^E)+j[11]+1839030562&4294967295,D=A+(v<<16&4294967295|v>>>16),v=E+(D^A^p)+j[14]+4259657740&4294967295,E=D+(v<<23&4294967295|v>>>9),v=p+(E^D^A)+j[1]+2763975236&4294967295,p=E+(v<<4&4294967295|v>>>28),v=A+(p^E^D)+j[4]+1272893353&4294967295,A=p+(v<<11&4294967295|v>>>21),v=D+(A^p^E)+j[7]+4139469664&4294967295,D=A+(v<<16&4294967295|v>>>16),v=E+(D^A^p)+j[10]+3200236656&4294967295,E=D+(v<<23&4294967295|v>>>9),v=p+(E^D^A)+j[13]+681279174&4294967295,p=E+(v<<4&4294967295|v>>>28),v=A+(p^E^D)+j[0]+3936430074&4294967295,A=p+(v<<11&4294967295|v>>>21),v=D+(A^p^E)+j[3]+3572445317&4294967295,D=A+(v<<16&4294967295|v>>>16),v=E+(D^A^p)+j[6]+76029189&4294967295,E=D+(v<<23&4294967295|v>>>9),v=p+(E^D^A)+j[9]+3654602809&4294967295,p=E+(v<<4&4294967295|v>>>28),v=A+(p^E^D)+j[12]+3873151461&4294967295,A=p+(v<<11&4294967295|v>>>21),v=D+(A^p^E)+j[15]+530742520&4294967295,D=A+(v<<16&4294967295|v>>>16),v=E+(D^A^p)+j[2]+3299628645&4294967295,E=D+(v<<23&4294967295|v>>>9),v=p+(D^(E|~A))+j[0]+4096336452&4294967295,p=E+(v<<6&4294967295|v>>>26),v=A+(E^(p|~D))+j[7]+1126891415&4294967295,A=p+(v<<10&4294967295|v>>>22),v=D+(p^(A|~E))+j[14]+2878612391&4294967295,D=A+(v<<15&4294967295|v>>>17),v=E+(A^(D|~p))+j[5]+4237533241&4294967295,E=D+(v<<21&4294967295|v>>>11),v=p+(D^(E|~A))+j[12]+1700485571&4294967295,p=E+(v<<6&4294967295|v>>>26),v=A+(E^(p|~D))+j[3]+2399980690&4294967295,A=p+(v<<10&4294967295|v>>>22),v=D+(p^(A|~E))+j[10]+4293915773&4294967295,D=A+(v<<15&4294967295|v>>>17),v=E+(A^(D|~p))+j[1]+2240044497&4294967295,E=D+(v<<21&4294967295|v>>>11),v=p+(D^(E|~A))+j[8]+1873313359&4294967295,p=E+(v<<6&4294967295|v>>>26),v=A+(E^(p|~D))+j[15]+4264355552&4294967295,A=p+(v<<10&4294967295|v>>>22),v=D+(p^(A|~E))+j[6]+2734768916&4294967295,D=A+(v<<15&4294967295|v>>>17),v=E+(A^(D|~p))+j[13]+1309151649&4294967295,E=D+(v<<21&4294967295|v>>>11),v=p+(D^(E|~A))+j[4]+4149444226&4294967295,p=E+(v<<6&4294967295|v>>>26),v=A+(E^(p|~D))+j[11]+3174756917&4294967295,A=p+(v<<10&4294967295|v>>>22),v=D+(p^(A|~E))+j[2]+718787259&4294967295,D=A+(v<<15&4294967295|v>>>17),v=E+(A^(D|~p))+j[9]+3951481745&4294967295,T.g[0]=T.g[0]+p&4294967295,T.g[1]=T.g[1]+(D+(v<<21&4294967295|v>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+A&4294967295}s.prototype.v=function(T,p){p===void 0&&(p=T.length);const E=p-this.blockSize,j=this.C;let D=this.h,A=0;for(;A<p;){if(D==0)for(;A<=E;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<p;)if(j[D++]=T.charCodeAt(A++),D==this.blockSize){i(this,j),D=0;break}}else for(;A<p;)if(j[D++]=T[A++],D==this.blockSize){i(this,j),D=0;break}}this.h=D,this.o+=p},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var p=1;p<T.length-8;++p)T[p]=0;p=this.o*8;for(var E=T.length-8;E<T.length;++E)T[E]=p&255,p/=256;for(this.v(T),T=Array(16),p=0,E=0;E<4;++E)for(let j=0;j<32;j+=8)T[p++]=this.g[E]>>>j&255;return T};function r(T,p){var E=l;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=p(T)}function o(T,p){this.h=p;const E=[];let j=!0;for(let D=T.length-1;D>=0;D--){const A=T[D]|0;j&&A==p||(E[D]=A,j=!1)}this.g=E}var l={};function c(T){return-128<=T&&T<128?r(T,function(p){return new o([p|0],p<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return C(d(-T));const p=[];let E=1;for(let j=0;T>=E;j++)p[j]=T/E|0,E*=4294967296;return new o(p,0)}function h(T,p){if(T.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(T.charAt(0)=="-")return C(h(T.substring(1),p));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=d(Math.pow(p,8));let j=f;for(let A=0;A<T.length;A+=8){var D=Math.min(8,T.length-A);const v=parseInt(T.substring(A,A+D),p);D<8?(D=d(Math.pow(p,D)),j=j.j(D).add(d(v))):(j=j.j(E),j=j.add(d(v)))}return j}var f=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(N(this))return-C(this).m();let T=0,p=1;for(let E=0;E<this.g.length;E++){const j=this.i(E);T+=(j>=0?j:4294967296+j)*p,p*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(N(this))return"-"+C(this).toString(T);const p=d(Math.pow(T,6));var E=this;let j="";for(;;){const D=I(E,p).g;E=w(E,D.j(p));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(T);if(E=D,b(E))return A+j;for(;A.length<6;)A="0"+A;j=A+j}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(let p=0;p<T.g.length;p++)if(T.g[p]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=w(this,T),N(T)?-1:b(T)?0:1};function C(T){const p=T.g.length,E=[];for(let j=0;j<p;j++)E[j]=~T.g[j];return new o(E,~T.h).add(m)}t.abs=function(){return N(this)?C(this):this},t.add=function(T){const p=Math.max(this.g.length,T.g.length),E=[];let j=0;for(let D=0;D<=p;D++){let A=j+(this.i(D)&65535)+(T.i(D)&65535),v=(A>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);j=v>>>16,A&=65535,v&=65535,E[D]=v<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(T,p){return T.add(C(p))}t.j=function(T){if(b(this)||b(T))return f;if(N(this))return N(T)?C(this).j(C(T)):C(C(this).j(T));if(N(T))return C(this.j(C(T)));if(this.l(g)<0&&T.l(g)<0)return d(this.m()*T.m());const p=this.g.length+T.g.length,E=[];for(var j=0;j<2*p;j++)E[j]=0;for(j=0;j<this.g.length;j++)for(let D=0;D<T.g.length;D++){const A=this.i(j)>>>16,v=this.i(j)&65535,V=T.i(D)>>>16,P=T.i(D)&65535;E[2*j+2*D]+=v*P,y(E,2*j+2*D),E[2*j+2*D+1]+=A*P,y(E,2*j+2*D+1),E[2*j+2*D+1]+=v*V,y(E,2*j+2*D+1),E[2*j+2*D+2]+=A*V,y(E,2*j+2*D+2)}for(T=0;T<p;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=p;T<2*p;T++)E[T]=0;return new o(E,0)};function y(T,p){for(;(T[p]&65535)!=T[p];)T[p+1]+=T[p]>>>16,T[p]&=65535,p++}function S(T,p){this.g=T,this.h=p}function I(T,p){if(b(p))throw Error("division by zero");if(b(T))return new S(f,f);if(N(T))return p=I(C(T),p),new S(C(p.g),C(p.h));if(N(p))return p=I(T,C(p)),new S(C(p.g),p.h);if(T.g.length>30){if(N(T)||N(p))throw Error("slowDivide_ only works with positive integers.");for(var E=m,j=p;j.l(T)<=0;)E=k(E),j=k(j);var D=L(E,1),A=L(j,1);for(j=L(j,2),E=L(E,2);!b(j);){var v=A.add(j);v.l(T)<=0&&(D=D.add(E),A=v),j=L(j,1),E=L(E,1)}return p=w(T,D.j(p)),new S(D,p)}for(D=f;T.l(p)>=0;){for(E=Math.max(1,Math.floor(T.m()/p.m())),j=Math.ceil(Math.log(E)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),A=d(E),v=A.j(p);N(v)||v.l(T)>0;)E-=j,A=d(E),v=A.j(p);b(A)&&(A=m),D=D.add(A),T=w(T,v)}return new S(D,T)}t.B=function(T){return I(this,T).h},t.and=function(T){const p=Math.max(this.g.length,T.g.length),E=[];for(let j=0;j<p;j++)E[j]=this.i(j)&T.i(j);return new o(E,this.h&T.h)},t.or=function(T){const p=Math.max(this.g.length,T.g.length),E=[];for(let j=0;j<p;j++)E[j]=this.i(j)|T.i(j);return new o(E,this.h|T.h)},t.xor=function(T){const p=Math.max(this.g.length,T.g.length),E=[];for(let j=0;j<p;j++)E[j]=this.i(j)^T.i(j);return new o(E,this.h^T.h)};function k(T){const p=T.g.length+1,E=[];for(let j=0;j<p;j++)E[j]=T.i(j)<<1|T.i(j-1)>>>31;return new o(E,T.h)}function L(T,p){const E=p>>5;p%=32;const j=T.g.length-E,D=[];for(let A=0;A<j;A++)D[A]=p>0?T.i(A+E)>>>p|T.i(A+E+1)<<32-p:T.i(A+E);return new o(D,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,sj=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ar=o}).apply(typeof _w<"u"?_w:typeof self<"u"?self:typeof window<"u"?window:{});var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ij,nc,rj,Wd,e0,aj,oj,lj;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nd=="object"&&Nd];for(var x=0;x<u.length;++x){var _=u[x];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function i(u,x){if(x)e:{var _=s;u=u.split(".");for(var M=0;M<u.length-1;M++){var F=u[M];if(!(F in _))break e;_=_[F]}u=u[u.length-1],M=_[u],x=x(M),x!=M&&x!=null&&e(_,u,{configurable:!0,writable:!0,value:x})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(x){var _=[],M;for(M in x)Object.prototype.hasOwnProperty.call(x,M)&&_.push([M,x[M]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function l(u){var x=typeof u;return x=="object"&&u!=null||x=="function"}function c(u,x,_){return u.call.apply(u.bind,arguments)}function d(u,x,_){return d=c,d.apply(null,arguments)}function h(u,x){var _=Array.prototype.slice.call(arguments,1);return function(){var M=_.slice();return M.push.apply(M,arguments),u.apply(this,M)}}function f(u,x){function _(){}_.prototype=x.prototype,u.Z=x.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(M,F,G){for(var ae=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ae[ke-2]=arguments[ke];return x.prototype[F].apply(M,ae)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function g(u){const x=u.length;if(x>0){const _=Array(x);for(let M=0;M<x;M++)_[M]=u[M];return _}return[]}function b(u,x){for(let M=1;M<arguments.length;M++){const F=arguments[M];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=u.length||0;const G=F.length||0;u.length=_+G;for(let ae=0;ae<G;ae++)u[_+ae]=F[ae]}else u.push(F)}}class N{constructor(x,_){this.i=x,this.j=_,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function C(u){o.setTimeout(()=>{throw u},0)}function w(){var u=T;let x=null;return u.g&&(x=u.g,u.g=u.g.next,u.g||(u.h=null),x.next=null),x}class y{constructor(){this.h=this.g=null}add(x,_){const M=S.get();M.set(x,_),this.h?this.h.next=M:this.g=M,this.h=M}}var S=new N(()=>new I,u=>u.reset());class I{constructor(){this.next=this.g=this.h=null}set(x,_){this.h=x,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let k,L=!1,T=new y,p=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(E)}};function E(){for(var u;u=w();){try{u.h.call(u.g)}catch(_){C(_)}var x=S;x.j(u),x.h<100&&(x.h++,u.next=x.g,x.g=u)}L=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,x){this.type=u,this.g=this.target=x,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,x=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};o.addEventListener("test",_,x),o.removeEventListener("test",_,x)}catch{}return u}();function v(u){return/^[\s\xa0]*$/.test(u)}function V(u,x){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,x)}f(V,D),V.prototype.init=function(u,x){const _=this.type=u.type,M=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=x,x=u.relatedTarget,x||(_=="mouseover"?x=u.fromElement:_=="mouseout"&&(x=u.toElement)),this.relatedTarget=x,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&V.Z.h.call(this)},V.prototype.h=function(){V.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var P="closure_listenable_"+(Math.random()*1e6|0),O=0;function B(u,x,_,M,F){this.listener=u,this.proxy=null,this.src=x,this.type=_,this.capture=!!M,this.ha=F,this.key=++O,this.da=this.fa=!1}function z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function $(u,x,_){for(const M in u)x.call(_,u[M],M,u)}function U(u,x){for(const _ in u)x.call(void 0,u[_],_,u)}function Y(u){const x={};for(const _ in u)x[_]=u[_];return x}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,x){let _,M;for(let F=1;F<arguments.length;F++){M=arguments[F];for(_ in M)u[_]=M[_];for(let G=0;G<Z.length;G++)_=Z[G],Object.prototype.hasOwnProperty.call(M,_)&&(u[_]=M[_])}}function pe(u){this.src=u,this.g={},this.h=0}pe.prototype.add=function(u,x,_,M,F){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const ae=Be(u,x,M,F);return ae>-1?(x=u[ae],_||(x.fa=!1)):(x=new B(x,this.src,G,!!M,F),x.fa=_,u.push(x)),x};function xe(u,x){const _=x.type;if(_ in u.g){var M=u.g[_],F=Array.prototype.indexOf.call(M,x,void 0),G;(G=F>=0)&&Array.prototype.splice.call(M,F,1),G&&(z(x),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Be(u,x,_,M){for(let F=0;F<u.length;++F){const G=u[F];if(!G.da&&G.listener==x&&G.capture==!!_&&G.ha==M)return F}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),ee={};function ye(u,x,_,M,F){if(Array.isArray(x)){for(let G=0;G<x.length;G++)ye(u,x[G],_,M,F);return null}return _=Qe(_),u&&u[P]?u.J(x,_,l(M)?!!M.capture:!1,F):Se(u,x,_,!1,M,F)}function Se(u,x,_,M,F,G){if(!x)throw Error("Invalid event type");const ae=l(F)?!!F.capture:!!F;let ke=yt(u);if(ke||(u[oe]=ke=new pe(u)),_=ke.add(x,_,M,ae,G),_.proxy)return _;if(M=ve(),_.proxy=M,M.src=u,M.listener=_,u.addEventListener)A||(F=ae),F===void 0&&(F=!1),u.addEventListener(x.toString(),M,F);else if(u.attachEvent)u.attachEvent(Tn(x.toString()),M);else if(u.addListener&&u.removeListener)u.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ve(){function u(_){return x.call(u.src,u.listener,_)}const x=Ln;return u}function xt(u,x,_,M,F){if(Array.isArray(x))for(var G=0;G<x.length;G++)xt(u,x[G],_,M,F);else M=l(M)?!!M.capture:!!M,_=Qe(_),u&&u[P]?(u=u.i,G=String(x).toString(),G in u.g&&(x=u.g[G],_=Be(x,_,M,F),_>-1&&(z(x[_]),Array.prototype.splice.call(x,_,1),x.length==0&&(delete u.g[G],u.h--)))):u&&(u=yt(u))&&(x=u.g[x.toString()],u=-1,x&&(u=Be(x,_,M,F)),(_=u>-1?x[u]:null)&&tn(_))}function tn(u){if(typeof u!="number"&&u&&!u.da){var x=u.src;if(x&&x[P])xe(x.i,u);else{var _=u.type,M=u.proxy;x.removeEventListener?x.removeEventListener(_,M,u.capture):x.detachEvent?x.detachEvent(Tn(_),M):x.addListener&&x.removeListener&&x.removeListener(M),(_=yt(x))?(xe(_,u),_.h==0&&(_.src=null,x[oe]=null)):z(u)}}}function Tn(u){return u in ee?ee[u]:ee[u]="on"+u}function Ln(u,x){if(u.da)u=!0;else{x=new V(x,this);const _=u.listener,M=u.ha||u.src;u.fa&&tn(u),u=_.call(M,x)}return u}function yt(u){return u=u[oe],u instanceof pe?u:null}var He="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qe(u){return typeof u=="function"?u:(u[He]||(u[He]=function(x){return u.handleEvent(x)}),u[He])}function Ze(){j.call(this),this.i=new pe(this),this.M=this,this.G=null}f(Ze,j),Ze.prototype[P]=!0,Ze.prototype.removeEventListener=function(u,x,_,M){xt(this,u,x,_,M)};function Xe(u,x){var _,M=u.G;if(M)for(_=[];M;M=M.G)_.push(M);if(u=u.M,M=x.type||x,typeof x=="string")x=new D(x,u);else if(x instanceof D)x.target=x.target||u;else{var F=x;x=new D(M,u),se(x,F)}F=!0;let G,ae;if(_)for(ae=_.length-1;ae>=0;ae--)G=x.g=_[ae],F=ts(G,M,!0,x)&&F;if(G=x.g=u,F=ts(G,M,!0,x)&&F,F=ts(G,M,!1,x)&&F,_)for(ae=0;ae<_.length;ae++)G=x.g=_[ae],F=ts(G,M,!1,x)&&F}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var u=this.i;for(const x in u.g){const _=u.g[x];for(let M=0;M<_.length;M++)z(_[M]);delete u.g[x],u.h--}}this.G=null},Ze.prototype.J=function(u,x,_,M){return this.i.add(String(u),x,!1,_,M)},Ze.prototype.K=function(u,x,_,M){return this.i.add(String(u),x,!0,_,M)};function ts(u,x,_,M){if(x=u.i.g[String(x)],!x)return!0;x=x.concat();let F=!0;for(let G=0;G<x.length;++G){const ae=x[G];if(ae&&!ae.da&&ae.capture==_){const ke=ae.listener,Ut=ae.ha||ae.src;ae.fa&&xe(u.i,ae),F=ke.call(Ut,M)!==!1&&F}}return F&&!M.defaultPrevented}function jl(u,x){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:o.setTimeout(u,x||0)}function Ga(u){u.g=jl(()=>{u.g=null,u.i&&(u.i=!1,Ga(u))},u.l);const x=u.h;u.h=null,u.m.apply(null,x)}class Al extends j{constructor(x,_){super(),this.m=x,this.l=_,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Ga(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(u){j.call(this),this.h=u,this.g={}}f(Cs,j);var le=[];function Ge(u){$(u.g,function(x,_){this.g.hasOwnProperty(_)&&tn(x)},u),u.g={}}Cs.prototype.N=function(){Cs.Z.N.call(this),Ge(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=o.JSON.stringify,Rs=o.JSON.parse,Ka=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function mm(){}function pm(){}var Qa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yu(){D.call(this,"d")}f(Yu,D);function qu(){D.call(this,"c")}f(qu,D);var Ui={},Xu=null;function H(){return Xu=Xu||new Ze}Ui.Ia="serverreachability";function K(u){D.call(this,Ui.Ia,u)}f(K,D);function re(u){const x=H();Xe(x,new K(x))}Ui.STAT_EVENT="statevent";function J(u,x){D.call(this,Ui.STAT_EVENT,u),this.stat=x}f(J,D);function te(u){const x=H();Xe(x,new J(x,u))}Ui.Ja="timingevent";function ce(u,x){D.call(this,Ui.Ja,u),this.size=x}f(ce,D);function ne(u,x){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},x)}function de(){this.g=!0}de.prototype.ua=function(){this.g=!1};function Te(u,x,_,M,F,G){u.info(function(){if(u.g)if(G){var ae="",ke=G.split("&");for(let et=0;et<ke.length;et++){var Ut=ke[et].split("=");if(Ut.length>1){const Qt=Ut[0];Ut=Ut[1];const ks=Qt.split("_");ae=ks.length>=2&&ks[1]=="type"?ae+(Qt+"="+Ut+"&"):ae+(Qt+"=redacted&")}}}else ae=null;else ae=G;return"XMLHTTP REQ ("+M+") [attempt "+F+"]: "+x+`
`+_+`
`+ae})}function je(u,x,_,M,F,G,ae){u.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+F+"]: "+x+`
`+_+`
`+G+" "+ae})}function he(u,x,_,M){u.info(function(){return"XMLHTTP TEXT ("+x+"): "+qr(u,_)+(M?" "+M:"")})}function Rt(u,x){u.info(function(){return"TIMEOUT: "+x})}de.prototype.info=function(){};function qr(u,x){if(!u.g)return x;if(!x)return null;try{const G=JSON.parse(x);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var _=G[u];if(!(_.length<2)){var M=_[1];if(Array.isArray(M)&&!(M.length<1)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ae=1;ae<M.length;ae++)M[ae]=""}}}}return En(G)}catch{return x}}var Bi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sv;function gm(){}f(gm,mm),gm.prototype.g=function(){return new XMLHttpRequest},Sv=new gm;function Cl(u){return encodeURIComponent(String(u))}function O4(u){var x=1;u=u.split(":");const _=[];for(;x>0&&u.length;)_.push(u.shift()),x--;return u.length&&_.push(u.join(":")),_}function Fi(u,x,_,M){this.j=u,this.i=x,this.l=_,this.S=M||1,this.V=new Cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Tv}function Tv(){this.i=null,this.g="",this.h=!1}var Ev={},xm={};function ym(u,x,_){u.M=1,u.A=Ju(Is(x)),u.u=_,u.R=!0,jv(u,null)}function jv(u,x){u.F=Date.now(),Wu(u),u.B=Is(u.A);var _=u.B,M=u.S;Array.isArray(M)||(M=[String(M)]),Uv(_.i,"t",M),u.C=0,_=u.j.L,u.h=new Tv,u.g=ib(u.j,_?x:null,!u.u),u.P>0&&(u.O=new Al(d(u.Y,u,u.g),u.P)),x=u.V,_=u.g,M=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(le[0]=F.toString()),F=le);for(let G=0;G<F.length;G++){const ae=ye(_,F[G],M||x.handleEvent,!1,x.h||x);if(!ae)break;x.g[ae.key]=ae}x=u.J?Y(u.J):{},u.u?(u.v||(u.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,x)):(u.v="GET",u.g.ea(u.B,u.v,null,x)),re(),Te(u.i,u.v,u.B,u.l,u.S,u.u)}Fi.prototype.ba=function(u){u=u.target;const x=this.O;x&&Gi(u)==3?x.j():this.Y(u)},Fi.prototype.Y=function(u){try{if(u==this.g)e:{const ke=Gi(this.g),Ut=this.g.ya(),et=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Qv(this.g)))){this.K||ke!=4||Ut==7||(Ut==8||et<=0?re(3):re(2)),vm(this);var x=this.g.ca();this.X=x;var _=V4(this);if(this.o=x==200,je(this.i,this.v,this.B,this.l,this.S,ke,x),this.o){if(this.U&&!this.L){t:{if(this.g){var M,F=this.g;if((M=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(M)){var G=M;break t}}G=null}if(u=G)he(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bm(this,u);else{this.o=!1,this.m=3,te(12),Xr(this),Rl(this);break e}}if(this.R){u=!0;let Qt;for(;!this.K&&this.C<_.length;)if(Qt=P4(this,_),Qt==xm){ke==4&&(this.m=4,te(14),u=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Ev){this.m=4,te(15),he(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else he(this.i,this.l,Qt,null),bm(this,Qt);if(Av(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||_.length!=0||this.h.h||(this.m=1,te(16),u=!1),this.o=this.o&&u,!u)he(this.i,this.l,_,"[Invalid Chunked Response]"),Xr(this),Rl(this);else if(_.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Am(ae),ae.P=!0,te(11))}}else he(this.i,this.l,_,null),bm(this,_);ke==4&&Xr(this),this.o&&!this.K&&(ke==4?eb(this.j,this):(this.o=!1,Wu(this)))}else W4(this.g),x==400&&_.indexOf("Unknown SID")>0?(this.m=3,te(12)):(this.m=0,te(13)),Xr(this),Rl(this)}}}catch{}finally{}};function V4(u){if(!Av(u))return u.g.la();const x=Qv(u.g);if(x==="")return"";let _="";const M=x.length,F=Gi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Xr(u),Rl(u),"";u.h.i=new o.TextDecoder}for(let G=0;G<M;G++)u.h.h=!0,_+=u.h.i.decode(x[G],{stream:!(F&&G==M-1)});return x.length=0,u.h.g+=_,u.C=0,u.h.g}function Av(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function P4(u,x){var _=u.C,M=x.indexOf(`
`,_);return M==-1?xm:(_=Number(x.substring(_,M)),isNaN(_)?Ev:(M+=1,M+_>x.length?xm:(x=x.slice(M,M+_),u.C=M+_,x)))}Fi.prototype.cancel=function(){this.K=!0,Xr(this)};function Wu(u){u.T=Date.now()+u.H,Cv(u,u.H)}function Cv(u,x){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ne(d(u.aa,u),x)}function vm(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Fi.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Rt(this.i,this.B),this.M!=2&&(re(),te(17)),Xr(this),this.m=2,Rl(this)):Cv(this,this.T-u)};function Rl(u){u.j.I==0||u.K||eb(u.j,u)}function Xr(u){vm(u);var x=u.O;x&&typeof x.dispose=="function"&&x.dispose(),u.O=null,Ge(u.V),u.g&&(x=u.g,u.g=null,x.abort(),x.dispose())}function bm(u,x){try{var _=u.j;if(_.I!=0&&(_.g==u||wm(_.h,u))){if(!u.L&&wm(_.h,u)&&_.I==3){try{var M=_.Ba.g.parse(x)}catch{M=null}if(Array.isArray(M)&&M.length==3){var F=M;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)sd(_),td(_);else break e;jm(_),te(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ne(d(_.Va,_),6e3));kv(_.h)<=1&&_.ta&&(_.ta=void 0)}else Jr(_,11)}else if((u.L||_.g==u)&&sd(_),!v(x))for(F=_.Ba.g.parse(x),x=0;x<F.length;x++){let et=F[x];const Qt=et[0];if(!(Qt<=_.K))if(_.K=Qt,et=et[1],_.I==2)if(et[0]=="c"){_.M=et[1],_.ba=et[2];const ks=et[3];ks!=null&&(_.ka=ks,_.j.info("VER="+_.ka));const Zr=et[4];Zr!=null&&(_.za=Zr,_.j.info("SVER="+_.za));const Ki=et[5];Ki!=null&&typeof Ki=="number"&&Ki>0&&(M=1.5*Ki,_.O=M,_.j.info("backChannelRequestTimeoutMs_="+M)),M=_;const Qi=u.g;if(Qi){const rd=Qi.g?Qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rd){var G=M.h;G.g||rd.indexOf("spdy")==-1&&rd.indexOf("quic")==-1&&rd.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(_m(G,G.h),G.h=null))}if(M.G){const Cm=Qi.g?Qi.g.getResponseHeader("X-HTTP-Session-Id"):null;Cm&&(M.wa=Cm,rt(M.J,M.G,Cm))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),M=_;var ae=u;if(M.na=sb(M,M.L?M.ba:null,M.W),ae.L){Dv(M.h,ae);var ke=ae,Ut=M.O;Ut&&(ke.H=Ut),ke.D&&(vm(ke),Wu(ke)),M.g=ae}else Jv(M);_.i.length>0&&nd(_)}else et[0]!="stop"&&et[0]!="close"||Jr(_,7);else _.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Jr(_,7):Em(_):et[0]!="noop"&&_.l&&_.l.qa(et),_.A=0)}}re(4)}catch{}}var L4=class{constructor(u,x){this.g=u,this.map=x}};function Rv(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Iv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function kv(u){return u.h?1:u.g?u.g.size:0}function wm(u,x){return u.h?u.h==x:u.g?u.g.has(x):!1}function _m(u,x){u.g?u.g.add(x):u.h=x}function Dv(u,x){u.h&&u.h==x?u.h=null:u.g&&u.g.has(x)&&u.g.delete(x)}Rv.prototype.cancel=function(){if(this.i=Mv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Mv(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let x=u.i;for(const _ of u.g.values())x=x.concat(_.G);return x}return g(u.i)}var Ov=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function z4(u,x){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const M=u[_].indexOf("=");let F,G=null;M>=0?(F=u[_].substring(0,M),G=u[_].substring(M+1)):F=u[_],x(F,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function $i(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;u instanceof $i?(this.l=u.l,Il(this,u.j),this.o=u.o,this.g=u.g,kl(this,u.u),this.h=u.h,Nm(this,Bv(u.i)),this.m=u.m):u&&(x=String(u).match(Ov))?(this.l=!1,Il(this,x[1]||"",!0),this.o=Dl(x[2]||""),this.g=Dl(x[3]||"",!0),kl(this,x[4]),this.h=Dl(x[5]||"",!0),Nm(this,x[6]||"",!0),this.m=Dl(x[7]||"")):(this.l=!1,this.i=new Ol(null,this.l))}$i.prototype.toString=function(){const u=[];var x=this.j;x&&u.push(Ml(x,Vv,!0),":");var _=this.g;return(_||x=="file")&&(u.push("//"),(x=this.o)&&u.push(Ml(x,Vv,!0),"@"),u.push(Cl(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ml(_,_.charAt(0)=="/"?F4:B4,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ml(_,H4)),u.join("")},$i.prototype.resolve=function(u){const x=Is(this);let _=!!u.j;_?Il(x,u.j):_=!!u.o,_?x.o=u.o:_=!!u.g,_?x.g=u.g:_=u.u!=null;var M=u.h;if(_)kl(x,u.u);else if(_=!!u.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var F=x.h.lastIndexOf("/");F!=-1&&(M=x.h.slice(0,F+1)+M)}if(F=M,F==".."||F==".")M="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){M=F.lastIndexOf("/",0)==0,F=F.split("/");const G=[];for(let ae=0;ae<F.length;){const ke=F[ae++];ke=="."?M&&ae==F.length&&G.push(""):ke==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),M&&ae==F.length&&G.push("")):(G.push(ke),M=!0)}M=G.join("/")}else M=F}return _?x.h=M:_=u.i.toString()!=="",_?Nm(x,Bv(u.i)):_=!!u.m,_&&(x.m=u.m),x};function Is(u){return new $i(u)}function Il(u,x,_){u.j=_?Dl(x,!0):x,u.j&&(u.j=u.j.replace(/:$/,""))}function kl(u,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);u.u=x}else u.u=null}function Nm(u,x,_){x instanceof Ol?(u.i=x,G4(u.i,u.l)):(_||(x=Ml(x,$4)),u.i=new Ol(x,u.l))}function rt(u,x,_){u.i.set(x,_)}function Ju(u){return rt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Dl(u,x){return u?x?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ml(u,x,_){return typeof u=="string"?(u=encodeURI(u).replace(x,U4),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function U4(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Vv=/[#\/\?@]/g,B4=/[#\?:]/g,F4=/[#\?]/g,$4=/[#\?@]/g,H4=/#/g;function Ol(u,x){this.h=this.g=null,this.i=u||null,this.j=!!x}function Wr(u){u.g||(u.g=new Map,u.h=0,u.i&&z4(u.i,function(x,_){u.add(decodeURIComponent(x.replace(/\+/g," ")),_)}))}t=Ol.prototype,t.add=function(u,x){Wr(this),this.i=null,u=Ya(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(x),this.h+=1,this};function Pv(u,x){Wr(u),x=Ya(u,x),u.g.has(x)&&(u.i=null,u.h-=u.g.get(x).length,u.g.delete(x))}function Lv(u,x){return Wr(u),x=Ya(u,x),u.g.has(x)}t.forEach=function(u,x){Wr(this),this.g.forEach(function(_,M){_.forEach(function(F){u.call(x,F,M,this)},this)},this)};function zv(u,x){Wr(u);let _=[];if(typeof x=="string")Lv(u,x)&&(_=_.concat(u.g.get(Ya(u,x))));else for(u=Array.from(u.g.values()),x=0;x<u.length;x++)_=_.concat(u[x]);return _}t.set=function(u,x){return Wr(this),this.i=null,u=Ya(this,u),Lv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[x]),this.h+=1,this},t.get=function(u,x){return u?(u=zv(this,u),u.length>0?String(u[0]):x):x};function Uv(u,x,_){Pv(u,x),_.length>0&&(u.i=null,u.g.set(Ya(u,x),g(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],x=Array.from(this.g.keys());for(let M=0;M<x.length;M++){var _=x[M];const F=Cl(_);_=zv(this,_);for(let G=0;G<_.length;G++){let ae=F;_[G]!==""&&(ae+="="+Cl(_[G])),u.push(ae)}}return this.i=u.join("&")};function Bv(u){const x=new Ol;return x.i=u.i,u.g&&(x.g=new Map(u.g),x.h=u.h),x}function Ya(u,x){return x=String(x),u.j&&(x=x.toLowerCase()),x}function G4(u,x){x&&!u.j&&(Wr(u),u.i=null,u.g.forEach(function(_,M){const F=M.toLowerCase();M!=F&&(Pv(this,M),Uv(this,F,_))},u)),u.j=x}function K4(u,x){const _=new de;if(o.Image){const M=new Image;M.onload=h(Hi,_,"TestLoadImage: loaded",!0,x,M),M.onerror=h(Hi,_,"TestLoadImage: error",!1,x,M),M.onabort=h(Hi,_,"TestLoadImage: abort",!1,x,M),M.ontimeout=h(Hi,_,"TestLoadImage: timeout",!1,x,M),o.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=u}else x(!1)}function Q4(u,x){const _=new de,M=new AbortController,F=setTimeout(()=>{M.abort(),Hi(_,"TestPingServer: timeout",!1,x)},1e4);fetch(u,{signal:M.signal}).then(G=>{clearTimeout(F),G.ok?Hi(_,"TestPingServer: ok",!0,x):Hi(_,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(F),Hi(_,"TestPingServer: error",!1,x)})}function Hi(u,x,_,M,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),M(_)}catch{}}function Y4(){this.g=new Ka}function Sm(u){this.i=u.Sb||null,this.h=u.ab||!1}f(Sm,mm),Sm.prototype.g=function(){return new Zu(this.i,this.h)};function Zu(u,x){Ze.call(this),this.H=u,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Zu,Ze),t=Zu.prototype,t.open=function(u,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=x,this.readyState=1,Pl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(x.body=u),(this.H||o).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vl(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pl(this)),this.g&&(this.readyState=3,Pl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fv(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fv(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var x=u.value?u.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!u.done}))&&(this.response=this.responseText+=x)}u.done?Vl(this):Pl(this),this.readyState==3&&Fv(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Vl(this))},t.Na=function(u){this.g&&(this.response=u,Vl(this))},t.ga=function(){this.g&&Vl(this)};function Vl(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Pl(u)}t.setRequestHeader=function(u,x){this.A.append(u,x)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],x=this.h.entries();for(var _=x.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=x.next();return u.join(`\r
`)};function Pl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $v(u){let x="";return $(u,function(_,M){x+=M,x+=":",x+=_,x+=`\r
`}),x}function Tm(u,x,_){e:{for(M in _){var M=!1;break e}M=!0}M||(_=$v(_),typeof u=="string"?_!=null&&Cl(_):rt(u,x,_))}function vt(u){Ze.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(vt,Ze);var q4=/^https?$/i,X4=["POST","PUT"];t=vt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,x,_,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);x=x?x.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sv.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(x,String(u),!0),this.B=!1}catch(G){Hv(this,G);return}if(u=_||"",_=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var F in M)_.set(F,M[F]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const G of M.keys())_.set(G,M.get(G));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),F=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(X4,x,void 0)>=0)||M||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ae]of _)this.g.setRequestHeader(G,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){Hv(this,G)}};function Hv(u,x){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=x,u.o=5,Gv(u),ed(u)}function Gv(u){u.A||(u.A=!0,Xe(u,"complete"),Xe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Xe(this,"complete"),Xe(this,"abort"),ed(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ed(this,!0)),vt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Kv(this):this.Xa())},t.Xa=function(){Kv(this)};function Kv(u){if(u.h&&typeof r<"u"){if(u.v&&Gi(u)==4)setTimeout(u.Ca.bind(u),0);else if(Xe(u,"readystatechange"),Gi(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var _;if(!(_=x)){var M;if(M=G===0){let ae=String(u.D).match(Ov)[1]||null;!ae&&o.self&&o.self.location&&(ae=o.self.location.protocol.slice(0,-1)),M=!q4.test(ae?ae.toLowerCase():"")}_=M}if(_)Xe(u,"complete"),Xe(u,"success");else{u.o=6;try{var F=Gi(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",Gv(u)}}finally{ed(u)}}}}function ed(u,x){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,x||Xe(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Gi(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Gi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var x=this.g.responseText;return u&&x.indexOf(u)==0&&(x=x.substring(u.length)),Rs(x)}};function Qv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function W4(u){const x={};u=(u.g&&Gi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<u.length;M++){if(v(u[M]))continue;var _=O4(u[M]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=x[F]||[];x[F]=G,G.push(_)}U(x,function(M){return M.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ll(u,x,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||x}function Yv(u){this.za=0,this.i=[],this.j=new de,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ll("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ll("baseRetryDelayMs",5e3,u),this.Za=Ll("retryDelaySeedMs",1e4,u),this.Ta=Ll("forwardChannelMaxRetries",2,u),this.va=Ll("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Rv(u&&u.concurrentRequestLimit),this.Ba=new Y4,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Yv.prototype,t.ka=8,t.I=1,t.connect=function(u,x,_,M){te(0),this.W=u,this.H=x||{},_&&M!==void 0&&(this.H.OSID=_,this.H.OAID=M),this.F=this.X,this.J=sb(this,null,this.W),nd(this)};function Em(u){if(qv(u),u.I==3){var x=u.V++,_=Is(u.J);if(rt(_,"SID",u.M),rt(_,"RID",x),rt(_,"TYPE","terminate"),zl(u,_),x=new Fi(u,u.j,x),x.M=2,x.A=Ju(Is(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(x.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=x.A,_=!0),_||(x.g=ib(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Wu(x)}nb(u)}function td(u){u.g&&(Am(u),u.g.cancel(),u.g=null)}function qv(u){td(u),u.v&&(o.clearTimeout(u.v),u.v=null),sd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function nd(u){if(!Iv(u.h)&&!u.m){u.m=!0;var x=u.Ea;k||p(),L||(k(),L=!0),T.add(x,u),u.D=0}}function J4(u,x){return kv(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=x.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ne(d(u.Ea,u,x),tb(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new Fi(this,this.j,u);let G=this.o;if(this.U&&(G?(G=Y(G),se(G,this.U)):G=this.U),this.u!==null||this.R||(F.J=G,G=null),this.S)e:{for(var x=0,_=0;_<this.i.length;_++){t:{var M=this.i[_];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(x+=M,x>4096){x=_;break e}if(x===4096||_===this.i.length-1){x=_+1;break e}}x=1e3}else x=1e3;x=Wv(this,F,x),_=Is(this.J),rt(_,"RID",u),rt(_,"CVER",22),this.G&&rt(_,"X-HTTP-Session-Id",this.G),zl(this,_),G&&(this.R?x="headers="+Cl($v(G))+"&"+x:this.u&&Tm(_,this.u,G)),_m(this.h,F),this.Ra&&rt(_,"TYPE","init"),this.S?(rt(_,"$req",x),rt(_,"SID","null"),F.U=!0,ym(F,_,null)):ym(F,_,x),this.I=2}}else this.I==3&&(u?Xv(this,u):this.i.length==0||Iv(this.h)||Xv(this))};function Xv(u,x){var _;x?_=x.l:_=u.V++;const M=Is(u.J);rt(M,"SID",u.M),rt(M,"RID",_),rt(M,"AID",u.K),zl(u,M),u.u&&u.o&&Tm(M,u.u,u.o),_=new Fi(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),x&&(u.i=x.G.concat(u.i)),x=Wv(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),_m(u.h,_),ym(_,M,x)}function zl(u,x){u.H&&$(u.H,function(_,M){rt(x,M,_)}),u.l&&$({},function(_,M){rt(x,M,_)})}function Wv(u,x,_){_=Math.min(u.i.length,_);const M=u.l?d(u.l.Ka,u.l,u):null;e:{var F=u.i;let ke=-1;for(;;){const Ut=["count="+_];ke==-1?_>0?(ke=F[0].g,Ut.push("ofs="+ke)):ke=0:Ut.push("ofs="+ke);let et=!0;for(let Qt=0;Qt<_;Qt++){var G=F[Qt].g;const ks=F[Qt].map;if(G-=ke,G<0)ke=Math.max(0,F[Qt].g-100),et=!1;else try{G="req"+G+"_"||"";try{var ae=ks instanceof Map?ks:Object.entries(ks);for(const[Zr,Ki]of ae){let Qi=Ki;l(Ki)&&(Qi=En(Ki)),Ut.push(G+Zr+"="+encodeURIComponent(Qi))}}catch(Zr){throw Ut.push(G+"type="+encodeURIComponent("_badmap")),Zr}}catch{M&&M(ks)}}if(et){ae=Ut.join("&");break e}}ae=void 0}return u=u.i.splice(0,_),x.G=u,ae}function Jv(u){if(!u.g&&!u.v){u.Y=1;var x=u.Da;k||p(),L||(k(),L=!0),T.add(x,u),u.A=0}}function jm(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ne(d(u.Da,u),tb(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Zv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ne(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,te(10),td(this),Zv(this))};function Am(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Zv(u){u.g=new Fi(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var x=Is(u.na);rt(x,"RID","rpc"),rt(x,"SID",u.M),rt(x,"AID",u.K),rt(x,"CI",u.F?"0":"1"),!u.F&&u.ia&&rt(x,"TO",u.ia),rt(x,"TYPE","xmlhttp"),zl(u,x),u.u&&u.o&&Tm(x,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Ju(Is(x)),_.u=null,_.R=!0,jv(_,u)}t.Va=function(){this.C!=null&&(this.C=null,td(this),jm(this),te(19))};function sd(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function eb(u,x){var _=null;if(u.g==x){sd(u),Am(u),u.g=null;var M=2}else if(wm(u.h,x))_=x.G,Dv(u.h,x),M=1;else return;if(u.I!=0){if(x.o)if(M==1){_=x.u?x.u.length:0,x=Date.now()-x.F;var F=u.D;M=H(),Xe(M,new ce(M,_)),nd(u)}else Jv(u);else if(F=x.m,F==3||F==0&&x.X>0||!(M==1&&J4(u,x)||M==2&&jm(u)))switch(_&&_.length>0&&(x=u.h,x.i=x.i.concat(_)),F){case 1:Jr(u,5);break;case 4:Jr(u,10);break;case 3:Jr(u,6);break;default:Jr(u,2)}}}function tb(u,x){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*x}function Jr(u,x){if(u.j.info("Error code "+x),x==2){var _=d(u.bb,u),M=u.Ua;const F=!M;M=new $i(M||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Il(M,"https"),Ju(M),F?K4(M.toString(),_):Q4(M.toString(),_)}else te(2);u.I=0,u.l&&u.l.pa(x),nb(u),qv(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),te(2)):(this.j.info("Failed to ping google.com"),te(1))};function nb(u){if(u.I=0,u.ja=[],u.l){const x=Mv(u.h);(x.length!=0||u.i.length!=0)&&(b(u.ja,x),b(u.ja,u.i),u.h.i.length=0,g(u.i),u.i.length=0),u.l.oa()}}function sb(u,x,_){var M=_ instanceof $i?Is(_):new $i(_);if(M.g!="")x&&(M.g=x+"."+M.g),kl(M,M.u);else{var F=o.location;M=F.protocol,x=x?x+"."+F.hostname:F.hostname,F=+F.port;const G=new $i(null);M&&Il(G,M),x&&(G.g=x),F&&kl(G,F),_&&(G.h=_),M=G}return _=u.G,x=u.wa,_&&x&&rt(M,_,x),rt(M,"VER",u.ka),zl(u,M),M}function ib(u,x,_){if(x&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=u.Aa&&!u.ma?new vt(new Sm({ab:_})):new vt(u.ma),x.Fa(u.L),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rb(){}t=rb.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function id(){}id.prototype.g=function(u,x){return new zn(u,x)};function zn(u,x){Ze.call(this),this.g=new Yv(x),this.l=u,this.h=x&&x.messageUrlParams||null,u=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(u?u["X-WebChannel-Content-Type"]=x.messageContentType:u={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(u?u["X-WebChannel-Client-Profile"]=x.sa:u={"X-WebChannel-Client-Profile":x.sa}),this.g.U=u,(u=x&&x.Qb)&&!v(u)&&(this.g.u=u),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!v(x)&&(this.g.G=x,u=this.h,u!==null&&x in u&&(u=this.h,x in u&&delete u[x])),this.j=new qa(this)}f(zn,Ze),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){Em(this.g)},zn.prototype.o=function(u){var x=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=En(u),u=_);x.i.push(new L4(x.Ya++,u)),x.I==3&&nd(x)},zn.prototype.N=function(){this.g.l=null,delete this.j,Em(this.g),delete this.g,zn.Z.N.call(this)};function ab(u){Yu.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var x=u.__sm__;if(x){e:{for(const _ in x){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,x=x!==null&&u in x?x[u]:void 0),this.data=x}else this.data=u}f(ab,Yu);function ob(){qu.call(this),this.status=1}f(ob,qu);function qa(u){this.g=u}f(qa,rb),qa.prototype.ra=function(){Xe(this.g,"a")},qa.prototype.qa=function(u){Xe(this.g,new ab(u))},qa.prototype.pa=function(u){Xe(this.g,new ob)},qa.prototype.oa=function(){Xe(this.g,"b")},id.prototype.createWebChannel=id.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,lj=function(){return new id},oj=function(){return H()},aj=Ui,e0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,Wd=Bi,Nv.COMPLETE="complete",rj=Nv,pm.EventType=Qa,Qa.OPEN="a",Qa.CLOSE="b",Qa.ERROR="c",Qa.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,nc=pm,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,ij=vt}).apply(typeof Nd<"u"?Nd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl="12.9.0";function hO(t){wl=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new Hx("@firebase/firestore");function to(){return ka.logLevel}function me(t,...e){if(ka.logLevel<=Oe.DEBUG){const n=e.map(sy);ka.debug(`Firestore (${wl}): ${t}`,...n)}}function Ai(t,...e){if(ka.logLevel<=Oe.ERROR){const n=e.map(sy);ka.error(`Firestore (${wl}): ${t}`,...n)}}function Da(t,...e){if(ka.logLevel<=Oe.WARN){const n=e.map(sy);ka.warn(`Firestore (${wl}): ${t}`,...n)}}function sy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,cj(t,s,n)}function cj(t,e,n){let s=`FIRESTORE (${wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ai(s),new Error(s)}function Ke(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||cj(e,i,s)}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mn.UNAUTHENTICATED))}shutdown(){}}class mO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pO{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let s=this.i;const i=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let r=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new gi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=r;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new gi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new uj(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class gO{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class xO{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new gO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const s=r=>{r.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Nw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Nw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=vO(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%62))}return s}}function Ve(t,e){return t<e?-1:t>e?1:0}function t0(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const i=t.charAt(s),r=e.charAt(s);if(i!==r)return _p(i)===_p(r)?Ve(i,r):_p(i)?1:-1}return Ve(t.length,e.length)}const bO=55296,wO=57343;function _p(t){const e=t.charCodeAt(0);return e>=bO&&e<=wO}function Xo(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="__name__";class Os{constructor(e,n,s){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&_e(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Os.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Os?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=Os.compareSegments(e.get(i),n.get(i));if(r!==0)return r}return Ve(e.length,n.length)}static compareSegments(e,n){const s=Os.isNumericId(e),i=Os.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?Os.extractNumericId(e).compare(Os.extractNumericId(n)):t0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class st extends Os{construct(e,n,s){return new st(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ue(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new st(n)}static emptyPath(){return new st([])}}const _O=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Os{construct(e,n,s){return new ln(e,n,s)}static isValidIdentifier(e){return _O.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sw}static keyField(){return new ln([Sw])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new ue(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ue(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(s+=l,i++):(r(),i++)}if(r(),o)throw new ue(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(n)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(st.fromString(e))}static fromName(e){return new ge(st.fromString(e).popFirst(5))}static empty(){return new ge(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t,e,n){if(!n)throw new ue(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NO(t,e,n,s){if(e===!0&&s===!0)throw new ue(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Tw(t){if(!ge.isDocumentKey(t))throw new ue(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ew(t){if(ge.isDocumentKey(t))throw new ue(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ff(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function _n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ff(t);throw new ue(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Iu(t,e){if(!hj(t))throw new ue(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const i=e[s].typeString,r="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(i&&typeof o!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${s}' field to equal '${r.value}'`;break}}if(n)throw new ue(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=-62135596800,Aw=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Aw);return new lt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jw)throw new ue(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Aw}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Iu(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Lt("string",lt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new lt(0,0))}static max(){return new Ee(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=-1;function SO(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(s===1e9?new lt(n+1,0):new lt(n,s));return new Mr(i,ge.empty(),e)}function TO(t){return new Mr(t.readTime,t.key,eu)}class Mr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Mr(Ee.min(),ge.empty(),eu)}static max(){return new Mr(Ee.max(),ge.empty(),eu)}}function EO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==jO)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,s)=>{n(e)})}static reject(e){return new W((n,s)=>{s(e)})}static waitFor(e){return new W((n,s)=>{let i=0,r=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++r,o&&r===i&&n()},c=>s(c))}),o=!0,r===i&&n()})}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next(i=>i?W.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(e,n){return new W((s,i)=>{const r=e.length,o=new Array(r);let l=0;for(let c=0;c<r;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===r&&s(o)},h=>i(h))}})}static doWhile(e,n){return new W((s,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):s()};r()})}}function CO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$f.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=-1;function Hf(t){return t==null}function Qh(t){return t===0&&1/t==-1/0}function RO(t){return typeof t=="number"&&Number.isInteger(t)&&!Qh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="";function IO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Cw(e)),e=kO(t.get(n),e);return Cw(e)}function kO(t,e){let n=e;const s=t.length;for(let i=0;i<s;i++){const r=t.charAt(i);switch(r){case"\0":n+="";break;case fj:n+="";break;default:n+=r}}return n}function Cw(t){return t+fj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sd(this.root,e,this.comparator,!0)}}class Sd{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??rn.RED,this.left=i??rn.EMPTY,this.right=r??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new rn(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return rn.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,s,i,r){return this}insert(e,n,s){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iw(this.data.getIterator())}getIteratorFrom(e){return new Iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Gt(this.comparator);return n.data=e,n}}class Iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new Gt(ln.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new pj("Invalid base64 string: "+r):r}}(e);return new dn(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const DO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=DO.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj="server_timestamp",xj="__type__",yj="__previous_value__",vj="__local_write_time__";function ay(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[xj])==null?void 0:s.stringValue)===gj}function Gf(t){const e=t.mapValue.fields[yj];return ay(e)?Gf(e):e}function tu(t){const e=Or(t.mapValue.fields[vj].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,n,s,i,r,o,l,c,d,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=f}}const Yh="(default)";class nu{constructor(e,n){this.projectId=e,this.database=n||Yh}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database===Yh}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}function OO(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ue(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="__type__",VO="__max__",Td={mapValue:{}},wj="__vector__",qh="value";function Pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ay(t)?4:LO(t)?9007199254740991:PO(t)?10:11:_e(28295,{value:t})}function Ks(t,e){if(t===e)return!0;const n=Pr(t);if(n!==Pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tu(t).isEqual(tu(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Or(i.timestampValue),l=Or(r.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Vr(i.bytesValue).isEqual(Vr(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Et(i.geoPointValue.latitude)===Et(r.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Et(i.integerValue)===Et(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Et(i.doubleValue),l=Et(r.doubleValue);return o===l?Qh(o)===Qh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:case 11:return function(i,r){const o=i.mapValue.fields||{},l=r.mapValue.fields||{};if(Rw(o)!==Rw(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Ks(o[c],l[c])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function su(t,e){return(t.values||[]).find(n=>Ks(n,e))!==void 0}function Wo(t,e){if(t===e)return 0;const n=Pr(t),s=Pr(e);if(n!==s)return Ve(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(r,o){const l=Et(r.integerValue||r.doubleValue),c=Et(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return kw(t.timestampValue,e.timestampValue);case 4:return kw(tu(t),tu(e));case 5:return t0(t.stringValue,e.stringValue);case 6:return function(r,o){const l=Vr(r),c=Vr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const l=r.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ve(l[d],c[d]);if(h!==0)return h}return Ve(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const l=Ve(Et(r.latitude),Et(o.latitude));return l!==0?l:Ve(Et(r.longitude),Et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dw(t.arrayValue,e.arrayValue);case 10:return function(r,o){var m,g,b,N;const l=r.fields||{},c=o.fields||{},d=(m=l[qh])==null?void 0:m.arrayValue,h=(g=c[qh])==null?void 0:g.arrayValue,f=Ve(((b=d==null?void 0:d.values)==null?void 0:b.length)||0,((N=h==null?void 0:h.values)==null?void 0:N.length)||0);return f!==0?f:Dw(d,h)}(t.mapValue,e.mapValue);case 11:return function(r,o){if(r===Td.mapValue&&o===Td.mapValue)return 0;if(r===Td.mapValue)return 1;if(o===Td.mapValue)return-1;const l=r.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=t0(c[f],h[f]);if(m!==0)return m;const g=Wo(l[c[f]],d[h[f]]);if(g!==0)return g}return Ve(c.length,h.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function kw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=Or(t),s=Or(e),i=Ve(n.seconds,s.seconds);return i!==0?i:Ve(n.nanos,s.nanos)}function Dw(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const r=Wo(n[i],s[i]);if(r)return r}return Ve(n.length,s.length)}function Jo(t){return n0(t)}function n0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Or(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=n0(r);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${n0(n.fields[o])}`;return i+"}"}(t.mapValue):_e(61005,{value:t})}function Jd(t){switch(Pr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gf(t);return e?16+Jd(e):16;case 5:return 2*t.stringValue.length;case 6:return Vr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,r)=>i+Jd(r),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return Gr(s.fields,(r,o)=>{i+=r.length+Jd(o)}),i}(t.mapValue);default:throw _e(13486,{value:t})}}function Mw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function s0(t){return!!t&&"integerValue"in t}function oy(t){return!!t&&"arrayValue"in t}function Ow(t){return!!t&&"nullValue"in t}function Vw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zd(t){return!!t&&"mapValue"in t}function PO(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bj])==null?void 0:s.stringValue)===wj}function Tc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Gr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Tc(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tc(t.arrayValue.values[n]);return e}return{...t}}function LO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===VO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Zd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(n)}setAll(e){let n=ln.emptyPath(),s={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,i),s={},i=[],n=l.popLast()}o?s[l.lastSegment()]=Tc(o):i.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());Zd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Zd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){Gr(n,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new kn(Tc(this.value))}}function _j(t){const e=[];return Gr(t.fields,(n,s)=>{const i=new ln([n]);if(Zd(s)){const r=_j(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)}),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n,s,i,r,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new pn(e,0,Ee.min(),Ee.min(),Ee.min(),kn.empty(),0)}static newFoundDocument(e,n,s,i){return new pn(e,1,n,Ee.min(),s,i,0)}static newNoDocument(e,n){return new pn(e,2,n,Ee.min(),Ee.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,Ee.min(),Ee.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.position=e,this.inclusive=n}}function Pw(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(r.field.isKeyField()?s=ge.comparator(ge.fromName(o.referenceValue),n.key):s=Wo(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function Lw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ks(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n="asc"){this.field=e,this.dir=n}}function zO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{}class Vt extends Nj{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new BO(e,n,s):n==="array-contains"?new HO(e,s):n==="in"?new GO(e,s):n==="not-in"?new KO(e,s):n==="array-contains-any"?new QO(e,s):new Vt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new FO(e,s):new $O(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wo(n,this.value)):n!==null&&Pr(this.value)===Pr(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ts extends Nj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ts(e,n)}matches(e){return Sj(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sj(t){return t.op==="and"}function Tj(t){return UO(t)&&Sj(t)}function UO(t){for(const e of t.filters)if(e instanceof Ts)return!1;return!0}function i0(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(Tj(t))return t.filters.map(e=>i0(e)).join(",");{const e=t.filters.map(n=>i0(n)).join(",");return`${t.op}(${e})`}}function Ej(t,e){return t instanceof Vt?function(s,i){return i instanceof Vt&&s.op===i.op&&s.field.isEqual(i.field)&&Ks(s.value,i.value)}(t,e):t instanceof Ts?function(s,i){return i instanceof Ts&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,l)=>r&&Ej(o,i.filters[l]),!0):!1}(t,e):void _e(19439)}function jj(t){return t instanceof Vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof Ts?function(n){return n.op.toString()+" {"+n.getFilters().map(jj).join(" ,")+"}"}(t):"Filter"}class BO extends Vt{constructor(e,n,s){super(e,n,s),this.key=ge.fromName(s.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class FO extends Vt{constructor(e,n){super(e,"in",n),this.keys=Aj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $O extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=Aj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Aj(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>ge.fromName(s.referenceValue))}class HO extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oy(n)&&su(n.arrayValue,this.value)}}class GO extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&su(this.value.arrayValue,n)}}class KO extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!su(this.value.arrayValue,n)}}class QO extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>su(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n=null,s=[],i=[],r=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=l,this.Te=null}}function zw(t,e=null,n=[],s=[],i=null,r=null,o=null){return new YO(t,e,n,s,i,r,o)}function ly(t){const e=Ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>i0(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Hf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Jo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Jo(s)).join(",")),e.Te=n}return e.Te}function cy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ej(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lw(t.startAt,e.startAt)&&Lw(t.endAt,e.endAt)}function r0(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n=null,s=[],i=[],r=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function qO(t,e,n,s,i,r,o,l){return new ku(t,e,n,s,i,r,o,l)}function Kf(t){return new ku(t)}function Uw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XO(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Cj(t){return t.collectionGroup!==null}function Ec(t){const e=Ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Gt(ln.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Wh(r,s))}),n.has(ln.keyField().canonicalString())||e.Ie.push(new Wh(ln.keyField(),s))}return e.Ie}function Bs(t){const e=Ae(t);return e.Ee||(e.Ee=WO(e,Ec(t))),e.Ee}function WO(t,e){if(t.limitType==="F")return zw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Wh(i.field,r)});const n=t.endAt?new Xh(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Xh(t.startAt.position,t.startAt.inclusive):null;return zw(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function a0(t,e){const n=t.filters.concat([e]);return new ku(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function o0(t,e,n){return new ku(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qf(t,e){return cy(Bs(t),Bs(e))&&t.limitType===e.limitType}function Rj(t){return`${ly(Bs(t))}|lt:${t.limitType}`}function no(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>jj(i)).join(", ")}]`),Hf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Jo(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Jo(i)).join(",")),`Target(${s})`}(Bs(t))}; limitType=${t.limitType})`}function Yf(t,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):ge.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(t,e)&&function(s,i){for(const r of Ec(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,l,c){const d=Pw(o,l,c);return o.inclusive?d<=0:d<0}(s.startAt,Ec(s),i)||s.endAt&&!function(o,l,c){const d=Pw(o,l,c);return o.inclusive?d>=0:d>0}(s.endAt,Ec(s),i))}(t,e)}function JO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ij(t){return(e,n)=>{let s=!1;for(const i of Ec(t)){const r=ZO(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function ZO(t,e,n){const s=t.field.isKeyField()?ge.comparator(e.key,n.key):function(r,o,l){const c=o.data.field(r),d=l.data.field(r);return c!==null&&d!==null?Wo(c,d):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,(n,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return mj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=new gt(ge.comparator);function Ci(){return eV}const kj=new gt(ge.comparator);function sc(...t){let e=kj;for(const n of t)e=e.insert(n.key,n);return e}function Dj(t){let e=kj;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function fa(){return jc()}function Mj(){return jc()}function jc(){return new Ua(t=>t.toString(),(t,e)=>t.isEqual(e))}const tV=new gt(ge.comparator),nV=new Gt(ge.comparator);function Pe(...t){let e=nV;for(const n of t)e=e.add(n);return e}const sV=new Gt(Ve);function iV(){return sV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function Oj(t){return{integerValue:""+t}}function rV(t,e){return RO(e)?Oj(e):uy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(){this._=void 0}}function aV(t,e,n){return t instanceof Jh?function(i,r){const o={fields:{[xj]:{stringValue:gj},[vj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&ay(r)&&(r=Gf(r)),r&&(o.fields[yj]=r),{mapValue:o}}(n,e):t instanceof Zo?Pj(t,e):t instanceof el?Lj(t,e):function(i,r){const o=Vj(i,r),l=Bw(o)+Bw(i.Ae);return s0(o)&&s0(i.Ae)?Oj(l):uy(i.serializer,l)}(t,e)}function oV(t,e,n){return t instanceof Zo?Pj(t,e):t instanceof el?Lj(t,e):n}function Vj(t,e){return t instanceof Zh?function(s){return s0(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class Jh extends qf{}class Zo extends qf{constructor(e){super(),this.elements=e}}function Pj(t,e){const n=zj(e);for(const s of t.elements)n.some(i=>Ks(i,s))||n.push(s);return{arrayValue:{values:n}}}class el extends qf{constructor(e){super(),this.elements=e}}function Lj(t,e){let n=zj(e);for(const s of t.elements)n=n.filter(i=>!Ks(i,s));return{arrayValue:{values:n}}}class Zh extends qf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Bw(t){return Et(t.integerValue||t.doubleValue)}function zj(t){return oy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.field=e,this.transform=n}}function lV(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof Zo&&i instanceof Zo||s instanceof el&&i instanceof el?Xo(s.elements,i.elements,Ks):s instanceof Zh&&i instanceof Zh?Ks(s.Ae,i.Ae):s instanceof Jh&&i instanceof Jh}(t.transform,e.transform)}class cV{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xf{}function Bj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wf(t.key,Nn.none()):new Du(t.key,t.data,Nn.none());{const n=t.data,s=kn.empty();let i=new Gt(ln.comparator);for(let r of e.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Kr(t.key,s,new Gn(i.toArray()),Nn.none())}}function uV(t,e,n){t instanceof Du?function(i,r,o){const l=i.value.clone(),c=$w(i.fieldTransforms,r,o.transformResults);l.setAll(c),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Kr?function(i,r,o){if(!eh(i.precondition,r))return void r.convertToUnknownDocument(o.version);const l=$w(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(Fj(i)),c.setAll(l),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ac(t,e,n,s){return t instanceof Du?function(r,o,l,c){if(!eh(r.precondition,o))return l;const d=r.value.clone(),h=Hw(r.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Kr?function(r,o,l,c){if(!eh(r.precondition,o))return l;const d=Hw(r.fieldTransforms,c,o),h=o.data;return h.setAll(Fj(r)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(r,o,l){return eh(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function dV(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=Vj(s.transform,i||null);r!=null&&(n===null&&(n=kn.empty()),n.set(s.field,r))}return n||null}function Fw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Xo(s,i,(r,o)=>lV(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Du extends Xf{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Kr extends Xf{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Fj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function $w(t,e,n){const s=new Map;Ke(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,l=e.data.field(r.field);s.set(r.field,oV(o,l,n[i]))}return s}function Hw(t,e,n){const s=new Map;for(const i of t){const r=i.transform,o=n.data.field(i.field);s.set(i.field,aV(r,o,e))}return s}class Wf extends Xf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hV extends Xf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&uV(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ac(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ac(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Mj();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let l=this.applyToLocalView(o,r.mutatedFields);l=n.has(i.key)?null:l;const c=Bj(o,l);c!==null&&s.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(n,s)=>Fw(n,s))&&Xo(this.baseMutations,e.baseMutations,(n,s)=>Fw(n,s))}}class dy{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return tV}();const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new dy(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ue;function gV(t){switch(t){case q.OK:return _e(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function $j(t){if(t===void 0)return Ai("GRPC error has no .code"),q.UNKNOWN;switch(t){case kt.OK:return q.OK;case kt.CANCELLED:return q.CANCELLED;case kt.UNKNOWN:return q.UNKNOWN;case kt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case kt.INTERNAL:return q.INTERNAL;case kt.UNAVAILABLE:return q.UNAVAILABLE;case kt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case kt.NOT_FOUND:return q.NOT_FOUND;case kt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case kt.ABORTED:return q.ABORTED;case kt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case kt.DATA_LOSS:return q.DATA_LOSS;default:return _e(39323,{code:t})}}(Ue=kt||(kt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=new Ar([4294967295,4294967295],0);function Gw(t){const e=xV().encode(t),n=new sj;return n.update(e),new Uint8Array(n.digest())}function Kw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Ar([n,s],0),new Ar([i,r],0)]}class hy{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ic(`Invalid padding: ${n}`);if(s<0)throw new ic(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ic(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ic(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ar.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(Ar.fromNumber(s)));return i.compare(yV)===1&&(i=new Ar([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Gw(e),[s,i]=Kw(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new hy(r,i,n);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Gw(e),[s,i]=Kw(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.be(o)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Jf(Ee.min(),i,new gt(Ve),Ci(),Pe())}}class Mu{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Mu(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,s,i){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=i}}class Hj{constructor(e,n){this.targetId=e,this.Ce=n}}class Gj{constructor(e,n,s=dn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class Qw{constructor(){this.ve=0,this.Fe=Yw(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:_e(38017,{changeType:r})}}),new Mu(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=Yw()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class vV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ci(),this.He=Ed(),this.Je=Ed(),this.Ze=new gt(Ve)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){const r=i.target;if(r0(r))if(s===0){const o=new ge(r.path);this.et(n,o,pn.newNoDocument(o,Ee.min()))}else Ke(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,l;try{o=Vr(s).toUint8Array()}catch(c){if(c instanceof pj)return Da("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new hy(o,i,r)}catch(c){return Da(c instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.et(n,r,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((r,o)=>{const l=this.ot(o);if(l){if(r.current&&r0(l.target)){const c=new ge(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,pn.newNoDocument(c,e))}r.Be&&(n.set(o,r.ke()),r.Ke())}});let s=Pe();this.Je.forEach((r,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(r))}),this.je.forEach((r,o)=>o.setReadTime(e));const i=new Jf(e,n,this.Ze,this.je,s);return this.je=Ci(),this.He=Ed(),this.Je=Ed(),this.Ze=new gt(Ve),i}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Qw,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Gt(Ve),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Gt(Ve),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Qw),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ed(){return new gt(ge.comparator)}function Yw(){return new gt(ge.comparator)}const bV={asc:"ASCENDING",desc:"DESCENDING"},wV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_V={and:"AND",or:"OR"};class NV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function l0(t,e){return t.useProto3Json||Hf(e)?e:{value:e}}function ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SV(t,e){return ef(t,e.toTimestamp())}function Fs(t){return Ke(!!t,49232),Ee.fromTimestamp(function(n){const s=Or(n);return new lt(s.seconds,s.nanos)}(t))}function fy(t,e){return c0(t,e).canonicalString()}function c0(t,e){const n=function(i){return new st(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Qj(t){const e=st.fromString(t);return Ke(Jj(e),10190,{key:e.toString()}),e}function u0(t,e){return fy(t.databaseId,e.path)}function Np(t,e){const n=Qj(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(qj(n))}function Yj(t,e){return fy(t.databaseId,e)}function TV(t){const e=Qj(t);return e.length===4?st.emptyPath():qj(e)}function d0(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qj(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qw(t,e,n){return{name:u0(t,e),fields:n.value.mapValue.fields}}function EV(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(d,h){return d.useProto3Json?(Ke(h===void 0||typeof h=="string",58123),dn.fromBase64String(h||"")):(Ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?q.UNKNOWN:$j(d.code);return new ue(h,d.message||"")}(o);n=new Gj(s,i,r,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Np(t,s.document.name),r=Fs(s.document.updateTime),o=s.document.createTime?Fs(s.document.createTime):Ee.min(),l=new kn({mapValue:{fields:s.document.fields}}),c=pn.newFoundDocument(i,r,o,l),d=s.targetIds||[],h=s.removedTargetIds||[];n=new th(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Np(t,s.document),r=s.readTime?Fs(s.readTime):Ee.min(),o=pn.newNoDocument(i,r),l=s.removedTargetIds||[];n=new th([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Np(t,s.document),r=s.removedTargetIds||[];n=new th([],r,i,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new pV(i,r),l=s.targetId;n=new Hj(l,o)}}return n}function jV(t,e){let n;if(e instanceof Du)n={update:qw(t,e.key,e.value)};else if(e instanceof Wf)n={delete:u0(t,e.key)};else if(e instanceof Kr)n={update:qw(t,e.key,e.data),updateMask:VV(e.fieldMask)};else{if(!(e instanceof hV))return _e(16599,{dt:e.type});n={verify:u0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,o){const l=o.transform;if(l instanceof Jh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof el)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Zh)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw _e(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:SV(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:_e(27497)}(t,e.precondition)),n}function AV(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map(n=>function(i,r){let o=i.updateTime?Fs(i.updateTime):Fs(r);return o.isEqual(Ee.min())&&(o=Fs(r)),new cV(o,i.transformResults||[])}(n,e))):[]}function CV(t,e){return{documents:[Yj(t,e.path)]}}function RV(t,e){const n={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Yj(t,i);const r=function(d){if(d.length!==0)return Wj(Ts.create(d,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:so(m.field),direction:DV(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=l0(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function IV(t){let e=TV(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Ke(s===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let r=[];n.where&&(r=function(f){const m=Xj(f);return m instanceof Ts&&Tj(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new Wh(io(b.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Hf(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new Xh(g,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,g=f.values||[];return new Xh(g,m)}(n.endAt)),qO(e,i,o,r,l,"F",c,d)}function kV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Xj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=io(n.unaryFilter.field);return Vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=io(n.unaryFilter.field);return Vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=io(n.unaryFilter.field);return Vt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=io(n.unaryFilter.field);return Vt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return Vt.create(io(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ts.create(n.compositeFilter.filters.map(s=>Xj(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function DV(t){return bV[t]}function MV(t){return wV[t]}function OV(t){return _V[t]}function so(t){return{fieldPath:t.canonicalString()}}function io(t){return ln.fromServerFormat(t.fieldPath)}function Wj(t){return t instanceof Vt?function(n){if(n.op==="=="){if(Vw(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NAN"}};if(Ow(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vw(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NAN"}};if(Ow(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(n.field),op:MV(n.op),value:n.value}}}(t):t instanceof Ts?function(n){const s=n.getFilters().map(i=>Wj(i));return s.length===1?s[0]:{compositeFilter:{op:OV(n.op),filters:s}}}(t):_e(54877,{filter:t})}function VV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Jj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Zj(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,s,i,r=Ee.min(),o=Ee.min(),l=dn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.yt=e}}function LV(t){const e=IV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?o0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(){this.Sn=new UV}addToCollectionParentIndex(e,n){return this.Sn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Mr.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class UV{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new Gt(st.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Gt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eA=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(eA,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new tl(0)}static ar(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="LruGarbageCollector",BV=1048576;function Jw([t,e],[n,s]){const i=Ve(t,n);return i===0?Ve(e,s):i}class FV{constructor(e){this.Pr=e,this.buffer=new Gt(Jw),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Jw(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $V{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(Ww,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nl(n)?me(Ww,"Ignoring IndexedDB error during garbage collection: ",n):await _l(n)}await this.Ar(3e5)})}}class HV{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return W.resolve($f.ce);const s=new FV(n);return this.Vr.forEachTarget(e,i=>s.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>s.Er(i))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Xw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xw):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,i,r,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(s=f,l=Date.now(),this.removeTargets(e,s,n))).next(f=>(r=f,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(d=Date.now(),to()<=Oe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${r} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:f})))}}function GV(t,e){return new HV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.changes=new Ua(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&Ac(s.mutation,i,Gn.empty(),lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Pe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Pe()){const i=fa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(r=>{let o=sc();return r.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=fa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Pe()))}populateOverlays(e,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,s,i){let r=Ci();const o=jc(),l=function(){return jc()}();return n.forEach((c,d)=>{const h=s.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Kr)?r=r.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Ac(h.mutation,d,h.mutation.getFieldMask(),lt.now())):o.set(d.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,r).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new QV(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const s=jc();let i=new gt((o,l)=>o-l),r=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=s.get(c)||Gn.empty();h=l.applyToLocalView(d,h),s.set(c,h);const f=(i.get(l.batchId)||Pe()).add(c);i=i.insert(l.batchId,f)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=Mj();h.forEach(m=>{if(!r.has(m)){const g=Bj(n.get(m),s.get(m));g!==null&&f.set(m,g),r=r.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return W.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return XO(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):W.resolve(fa());let l=eu,c=r;return o.next(d=>W.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),r.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,r)).next(()=>this.computeViews(e,c,d,Pe())).next(h=>({batchId:l,changes:Dj(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(s=>{let i=sc();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let o=sc();return this.indexManager.getCollectionParents(e,r).next(l=>W.forEach(l,c=>{const d=function(f,m){return new ku(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i))).next(o=>{r.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,pn.newInvalidDocument(h)))});let l=sc();return o.forEach((c,d)=>{const h=r.get(c);h!==void 0&&Ac(h.mutation,d,Gn.empty(),lt.now()),Yf(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return W.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Fs(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:LV(i.bundledQuery),readTime:Fs(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.overlays=new gt(ge.comparator),this.Lr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=fa();return W.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,r)=>{this.bt(e,n,r)}),W.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.Lr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Lr.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const i=fa(),r=n.length+1,o=new ge(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===r&&c.largestBatchId>s&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new gt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=r.get(d.largestBatchId);h===null&&(h=fa(),r=r.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=fa(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return W.resolve(l)}bt(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(s.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new mV(n,s));let r=this.Lr.get(n);r===void 0&&(r=Pe(),this.Lr.set(n,r)),this.Lr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.kr=new Gt(Xt.Kr),this.qr=new Gt(Xt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new Xt(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Wr(new Xt(e,n))}Qr(e,n){e.forEach(s=>this.removeReference(s,n))}Gr(e){const n=new ge(new st([])),s=new Xt(n,e),i=new Xt(n,e+1),r=[];return this.qr.forEachInRange([s,i],o=>{this.Wr(o),r.push(o.key)}),r}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ge(new st([])),s=new Xt(n,e),i=new Xt(n,e+1);let r=Pe();return this.qr.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new Xt(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Xt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ge.comparator(e.key,n.key)||Ve(e.Hr,n.Hr)}static Ur(e,n){return Ve(e.Hr,n.Hr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Gt(Xt.Kr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fV(r,n,s,i);this.mutationQueue.push(o);for(const l of i)this.Jr=this.Jr.add(new Xt(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.Xr(s),r=i<0?0:i;return W.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?ry:this.Yn-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Xt(n,0),i=new Xt(n,Number.POSITIVE_INFINITY),r=[];return this.Jr.forEachInRange([s,i],o=>{const l=this.Zr(o.Hr);r.push(l)}),W.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Gt(Ve);return n.forEach(i=>{const r=new Xt(i,0),o=new Xt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([r,o],l=>{s=s.add(l.Hr)})}),W.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;ge.isDocumentKey(r)||(r=r.child(""));const o=new Xt(new ge(r),0);let l=new Gt(Ve);return this.Jr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Hr)),!0)},o),W.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(s=>{const i=this.Zr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ke(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return W.forEach(n.mutations,i=>{const r=new Xt(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=s})}nr(e){}containsKey(e,n){const s=new Xt(n,0),i=this.Jr.firstAfterOrEqual(s);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.ti=e,this.docs=function(){return new gt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let s=Ci();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():pn.newInvalidDocument(i))}),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=Ci();const o=n.path,l=new ge(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||EO(TO(h),s)<=0||(i.has(h.key)||Yf(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return W.resolve(r)}getAllFromCollectionGroup(e,n,s,i){_e(9500)}ni(e,n){return W.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new eP(this)}getSize(e){return W.resolve(this.size)}}class eP extends KV{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(s)}),W.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.persistence=e,this.ri=new Ua(n=>ly(n),cy),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.ii=0,this.si=new my,this.targetCount=0,this.oi=tl._r()}forEachTarget(e,n){return this.ri.forEach((s,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),W.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.lr(n),W.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.ri.delete(o),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),W.waitFor(r).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),W.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this._i={},this.overlays={},this.ai=new $f(0),this.ui=!1,this.ui=!0,this.ci=new WV,this.referenceDelegate=e(this),this.li=new tP(this),this.indexManager=new zV,this.remoteDocumentCache=function(i){return new ZV(i)}(s=>this.referenceDelegate.hi(s)),this.serializer=new PV(n),this.Pi=new qV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new JV(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const i=new nP(this.ai.next());return this.referenceDelegate.Ti(),s(i).next(r=>this.referenceDelegate.Ii(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ei(e,n){return W.or(Object.values(this._i).map(s=>()=>s.containsKey(e,n)))}}class nP extends AO{constructor(e){super(),this.currentSequenceNumber=e}}class py{constructor(e){this.persistence=e,this.Ri=new my,this.Ai=null}static Vi(e){return new py(e)}get di(){if(this.Ai)return this.Ai;throw _e(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.di.add(r.toString()))}).next(()=>s.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.di,s=>{const i=ge.fromPath(s);return this.mi(e,i).next(r=>{r||n.removeEntry(i,Ee.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class tf{constructor(e,n){this.persistence=e,this.fi=new Ua(s=>IO(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=GV(this,n)}static Vi(e,n){return new tf(e,n)}Ti(){}Ii(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(i=>s+i))}pr(e){let n=0;return this.mr(e,s=>{n++}).next(()=>n)}mr(e,n){return W.forEach(this.fi,(s,i)=>this.wr(e,s,i).next(r=>r?W.resolve():n(i)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,n).next(l=>{l||(s++,r.removeEntry(o,Ee.min()))})).next(()=>r.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jd(e.data.value)),n}wr(e,n,s){return W.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return W.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=i}static Es(e,n){let s=Pe(),i=Pe();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new gy(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return A5()?8:CO(xn())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.gs(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ps(e,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new sP;return this.ys(e,n,o).next(l=>{if(r.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>r.result)}ws(e,n,s,i){return s.documentReadCount<this.Vs?(to()<=Oe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",no(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(to()<=Oe.DEBUG&&me("QueryEngine","Query:",no(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ds*i?(to()<=Oe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",no(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bs(n))):W.resolve())}gs(e,n){if(Uw(n))return W.resolve(null);let s=Bs(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=o0(n,null,"F"),s=Bs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const o=Pe(...r);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.bs(n,l);return this.Ss(n,d,o,c.readTime)?this.gs(e,o0(n,null,"F")):this.Ds(e,d,n,c)}))})))}ps(e,n,s,i){return Uw(n)||i.isEqual(Ee.min())?W.resolve(null):this.fs.getDocuments(e,s).next(r=>{const o=this.bs(n,r);return this.Ss(n,o,s,i)?W.resolve(null):(to()<=Oe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),no(n)),this.Ds(e,o,n,SO(i,eu)).next(l=>l))})}bs(e,n){let s=new Gt(Ij(e));return n.forEach((i,r)=>{Yf(e,r)&&(s=s.add(r))}),s}Ss(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ys(e,n,s){return to()<=Oe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",no(n)),this.fs.getDocumentsMatchingQuery(e,n,Mr.min(),s)}Ds(e,n,s,i){return this.fs.getDocumentsMatchingQuery(e,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="LocalStore",rP=3e8;class aP{constructor(e,n,s,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new gt(Ve),this.Fs=new Ua(r=>ly(r),cy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YV(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function oP(t,e,n,s){return new aP(t,e,n,s)}async function nA(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.Os(e),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],l=[];let c=Pe();for(const d of i){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of r){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:l}))})})}function lP(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let g=W.resolve();return m.forEach(b=>{g=g.next(()=>h.getEntry(c,b)).next(N=>{const C=d.docVersions.get(b);Ke(C!==null,48541),N.version.compareTo(C)<0&&(f.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),h.addEntry(N)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,s,e,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=Pe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function sA(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function cP(t,e){const n=Ae(t),s=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;l.push(n.li.removeMatchingKeys(r,h.removedDocuments,f).next(()=>n.li.addMatchingKeys(r,h.addedDocuments,f)));let g=m.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(dn.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),i=i.insert(f,g),function(N,C,w){return N.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=rP?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,g,h)&&l.push(n.li.updateTargetData(r,g))});let c=Ci(),d=Pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))}),l.push(uP(r,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!s.isEqual(Ee.min())){const h=n.li.getLastRemoteSnapshotVersion(r).next(f=>n.li.setTargetsMetadata(r,r.currentSequenceNumber,s));l.push(h)}return W.waitFor(l).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,c,d)).next(()=>c)}).then(r=>(n.vs=i,r))}function uP(t,e,n){let s=Pe(),i=Pe();return n.forEach(r=>s=s.add(r)),e.getEntries(t,s).next(r=>{let o=Ci();return n.forEach((l,c)=>{const d=r.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):me(xy,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:i}})}function dP(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=ry),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function hP(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.li.getTargetData(s,e).next(r=>r?(i=r,W.resolve(i)):n.li.allocateTargetId(s).next(o=>(i=new mr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.vs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s})}async function h0(t,e,n){const s=Ae(t),i=s.vs.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Nl(o))throw o;me(xy,`Failed to update sequence numbers for target ${e}: ${o}`)}s.vs=s.vs.remove(e),s.Fs.delete(i.target)}function Zw(t,e,n){const s=Ae(t);let i=Ee.min(),r=Pe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const f=Ae(c),m=f.Fs.get(h);return m!==void 0?W.resolve(f.vs.get(m)):f.li.getTargetData(d,h)}(s,o,Bs(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{r=c})}).next(()=>s.Cs.getDocumentsMatchingQuery(o,e,n?i:Ee.min(),n?r:Pe())).next(l=>(fP(s,JO(e),l),{documents:l,ks:r})))}function fP(t,e,n){let s=t.Ms.get(e)||Ee.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),t.Ms.set(e,s)}class e_{constructor(){this.activeTargetIds=iV()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mP{constructor(){this.vo=new e_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new e_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="ConnectivityMonitor";class n_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(t_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(t_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd=null;function f0(){return jd===null?jd=function(){return 268435456+Math.round(2147483648*Math.random())}():jd++,"0x"+jd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="RestConnection",gP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class xP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${i}`,this.$o=this.databaseId.database===Yh?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(e,n,s,i,r){const o=f0(),l=this.Qo(e,n.toUriEncodedString());me(Sp,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,r);const{host:d}=new URL(l),h=yl(d);return this.zo(e,l,c,s,h).then(f=>(me(Sp,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Da(Sp,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",s),f})}jo(e,n,s,i,r,o){return this.Wo(e,n,s,i,r)}Go(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>e[r]=i),s&&s.headers.forEach((i,r)=>e[r]=i)}Qo(e,n){const s=gP[e];let i=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection",Ql=(t,e,n)=>{t.listen(e,s=>{try{n(s)}catch(i){setTimeout(()=>{throw i},0)}})};class Mo extends xP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Mo.c_){const e=oj();Ql(e,aj.STAT_EVENT,n=>{n.stat===e0.PROXY?me(hn,"STAT_EVENT: detected buffering proxy"):n.stat===e0.NOPROXY&&me(hn,"STAT_EVENT: detected no buffering proxy")}),Mo.c_=!0}}zo(e,n,s,i,r){const o=f0();return new Promise((l,c)=>{const d=new ij;d.setWithCredentials(!0),d.listenOnce(rj.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Wd.NO_ERROR:const f=d.getResponseJson();me(hn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Wd.TIMEOUT:me(hn,`RPC '${e}' ${o} timed out`),c(new ue(q.DEADLINE_EXCEEDED,"Request time out"));break;case Wd.HTTP_ERROR:const m=d.getStatus();if(me(hn,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let g=d.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const N=function(w){const y=w.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(y)>=0?y:q.UNKNOWN}(b.status);c(new ue(N,b.message))}else c(new ue(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ue(q.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{me(hn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);me(hn,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,s,15)})}T_(e,n,s){const i=f0(),r=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const d=r.join("");me(hn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const g=new yP({Ho:b=>{m?me(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(me(hn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),me(hn,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Jo:()=>h.close()});return Ql(h,nc.EventType.OPEN,()=>{m||(me(hn,`RPC '${e}' stream ${i} transport opened.`),g.i_())}),Ql(h,nc.EventType.CLOSE,()=>{m||(m=!0,me(hn,`RPC '${e}' stream ${i} transport closed`),g.o_(),this.E_(h))}),Ql(h,nc.EventType.ERROR,b=>{m||(m=!0,Da(hn,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),g.o_(new ue(q.UNAVAILABLE,"The operation could not be completed")))}),Ql(h,nc.EventType.MESSAGE,b=>{var N;if(!m){const C=b.data[0];Ke(!!C,16349);const w=C,y=(w==null?void 0:w.error)||((N=w[0])==null?void 0:N.error);if(y){me(hn,`RPC '${e}' stream ${i} received error:`,y);const S=y.status;let I=function(T){const p=kt[T];if(p!==void 0)return $j(p)}(S),k=y.message;S==="NOT_FOUND"&&k.includes("database")&&k.includes("does not exist")&&k.includes(this.databaseId.database)&&Da(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),I===void 0&&(I=q.INTERNAL,k="Unknown error status: "+S+" with message "+y.message),m=!0,g.o_(new ue(I,k)),h.close()}else me(hn,`RPC '${e}' stream ${i} received:`,C),g.__(C)}}),Mo.u_(),setTimeout(()=>{g.s_()},0),g}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return lj()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t){return new Mo(t)}function Tp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){return new NV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mo.c_=!1;class iA{constructor(e,n,s=1e3,i=1.5,r=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=i,this.V_=r,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="PersistentStream";class rA{constructor(e,n,s,i,r,o,l,c){this.Ci=e,this.b_=s,this.S_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===n&&this.G_(s,i)},s=>{e(()=>{const i=new ue(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{s(()=>this.listener.Zo())}),this.stream.Yo(()=>{s(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return me(s_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(me(s_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bP extends rA{constructor(e,n,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=EV(this.serializer,e),s=function(r){if(!("targetChange"in r))return Ee.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?Fs(o.readTime):Ee.min()}(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=d0(this.serializer),n.addTarget=function(r,o){let l;const c=o.target;if(l=r0(c)?{documents:CV(r,c)}:{query:RV(r,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Kj(r,o.resumeToken);const d=l0(r,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ee.min())>0){l.readTime=ef(r,o.snapshotVersion.toTimestamp());const d=l0(r,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=kV(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=d0(this.serializer),n.removeTarget=e,this.K_(n)}}class wP extends rA{constructor(e,n,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=AV(e.writeResults,e.commitTime),s=Fs(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=d0(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>jV(this.serializer,s))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{}class NP extends _P{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ue(q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Wo(e,c0(n,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ue(q.UNKNOWN,r.toString())})}jo(e,n,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,c0(n,s),i,o,l,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function SP(t,e,n,s){return new NP(t,e,n,s)}class TP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class EP{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=r,this.Aa.Mo(o=>{s.enqueueAndForget(async()=>{Ba(this)&&(me(Ma,"Restarting streams for network reachability change."),await async function(c){const d=Ae(c);d.Ea.add(4),await Ou(d),d.Va.set("Unknown"),d.Ea.delete(4),await em(d)}(this))})}),this.Va=new TP(s,i)}}async function em(t){if(Ba(t))for(const e of t.Ra)await e(!0)}async function Ou(t){for(const e of t.Ra)await e(!1)}function aA(t,e){const n=Ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),wy(n)?by(n):Sl(n).O_()&&vy(n,e))}function yy(t,e){const n=Ae(t),s=Sl(n);n.Ia.delete(e),s.O_()&&oA(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ba(n)&&n.Va.set("Unknown"))}function vy(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sl(t).Z_(e)}function oA(t,e){t.da.$e(e),Sl(t).X_(e)}function by(t){t.da=new vV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sl(t).start(),t.Va.ua()}function wy(t){return Ba(t)&&!Sl(t).x_()&&t.Ia.size>0}function Ba(t){return Ae(t).Ea.size===0}function lA(t){t.da=void 0}async function jP(t){t.Va.set("Online")}async function AP(t){t.Ia.forEach((e,n)=>{vy(t,e)})}async function CP(t,e){lA(t),wy(t)?(t.Va.ha(e),by(t)):t.Va.set("Unknown")}async function RP(t,e,n){if(t.Va.set("Online"),e instanceof Gj&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const l of r.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(s){me(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await nf(t,s)}else if(e instanceof th?t.da.Xe(e):e instanceof Hj?t.da.st(e):t.da.tt(e),!n.isEqual(Ee.min()))try{const s=await sA(t.localStore);n.compareTo(s)>=0&&await function(r,o){const l=r.da.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=r.Ia.get(d);h&&r.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=r.Ia.get(c);if(!h)return;r.Ia.set(c,h.withResumeToken(dn.EMPTY_BYTE_STRING,h.snapshotVersion)),oA(r,c);const f=new mr(h.target,c,d,h.sequenceNumber);vy(r,f)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){me(Ma,"Failed to raise snapshot:",s),await nf(t,s)}}async function nf(t,e,n){if(!Nl(e))throw e;t.Ea.add(1),await Ou(t),t.Va.set("Offline"),n||(n=()=>sA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{me(Ma,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await em(t)})}function cA(t,e){return e().catch(n=>nf(t,n,e))}async function tm(t){const e=Ae(t),n=Lr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ry;for(;IP(e);)try{const i=await dP(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,kP(e,i)}catch(i){await nf(e,i)}uA(e)&&dA(e)}function IP(t){return Ba(t)&&t.Ta.length<10}function kP(t,e){t.Ta.push(e);const n=Lr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function uA(t){return Ba(t)&&!Lr(t).x_()&&t.Ta.length>0}function dA(t){Lr(t).start()}async function DP(t){Lr(t).ra()}async function MP(t){const e=Lr(t);for(const n of t.Ta)e.ea(n.mutations)}async function OP(t,e,n){const s=t.Ta.shift(),i=dy.from(s,e,n);await cA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await tm(t)}async function VP(t,e){e&&Lr(t).Y_&&await async function(s,i){if(function(o){return gV(o)&&o!==q.ABORTED}(i.code)){const r=s.Ta.shift();Lr(s).B_(),await cA(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await tm(s)}}(t,e),uA(t)&&dA(t)}async function i_(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),me(Ma,"RemoteStore received new credentials");const s=Ba(n);n.Ea.add(3),await Ou(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await em(n)}async function PP(t,e){const n=Ae(t);e?(n.Ea.delete(2),await em(n)):e||(n.Ea.add(2),await Ou(n),n.Va.set("Unknown"))}function Sl(t){return t.ma||(t.ma=function(n,s,i){const r=Ae(n);return r.sa(),new bP(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:jP.bind(null,t),Yo:AP.bind(null,t),t_:CP.bind(null,t),J_:RP.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),wy(t)?by(t):t.Va.set("Unknown")):(await t.ma.stop(),lA(t))})),t.ma}function Lr(t){return t.fa||(t.fa=function(n,s,i){const r=Ae(n);return r.sa(),new wP(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:DP.bind(null,t),t_:VP.bind(null,t),ta:MP.bind(null,t),na:OP.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await tm(t)):(await t.fa.stop(),t.Ta.length>0&&(me(Ma,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const o=Date.now()+s,l=new _y(e,n,o,i,r);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ny(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),Nl(t))return new ue(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ge.comparator(n.key,s.key):(n,s)=>ge.comparator(n.key,s.key),this.keyedMap=sc(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Oo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.ga=new gt(ge.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class nl{constructor(e,n,s,i,r,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,i,r){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new nl(e,n,Oo.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class zP{constructor(){this.queries=a_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const i=Ae(n),r=i.queries;i.queries=a_(),r.forEach((o,l)=>{for(const c of l.ba)c.onError(s)})})(this,new ue(q.ABORTED,"Firestore shutting down"))}}function a_(){return new Ua(t=>Rj(t),Qf)}async function Sy(t,e){const n=Ae(t);let s=3;const i=e.query;let r=n.queries.get(i);r?!r.Sa()&&e.Da()&&(s=2):(r=new LP,s=e.Da()?0:1);try{switch(s){case 0:r.wa=await n.onListen(i,!0);break;case 1:r.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Ny(o,`Initialization of query '${no(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,r),r.ba.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&Ey(n)}async function Ty(t,e){const n=Ae(t),s=e.query;let i=3;const r=n.queries.get(s);if(r){const o=r.ba.indexOf(e);o>=0&&(r.ba.splice(o,1),r.ba.length===0?i=e.Da()?0:1:!r.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function UP(t,e){const n=Ae(t);let s=!1;for(const i of e){const r=i.query,o=n.queries.get(r);if(o){for(const l of o.ba)l.Fa(i)&&(s=!0);o.wa=i}}s&&Ey(n)}function BP(t,e,n){const s=Ae(t),i=s.queries.get(e);if(i)for(const r of i.ba)r.onError(n);s.queries.delete(e)}function Ey(t){t.Ca.forEach(e=>{e.next()})}var m0,o_;(o_=m0||(m0={})).Ma="default",o_.Cache="cache";class jy{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==m0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.key=e}}class fA{constructor(e){this.key=e}}class FP{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Pe(),this.mutatedKeys=Pe(),this.eu=Ij(e),this.tu=new Oo(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new r_,i=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),g=Yf(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;m&&g?m.data.isEqual(g.data)?b!==N&&(s.track({type:3,doc:g}),C=!0):this.su(m,g)||(s.track({type:2,doc:g}),C=!0,(c&&this.eu(g,c)>0||d&&this.eu(g,d)<0)&&(l=!0)):!m&&g?(s.track({type:0,doc:g}),C=!0):m&&!g&&(s.track({type:1,doc:m}),C=!0,(c||d)&&(l=!0)),C&&(g?(o=o.add(g),r=N?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Ss:l,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,b){const N=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:C})}};return N(g)-N(b)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(s),i=i??!1;const l=n&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new nl(this.query,e.tu,r,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Pe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new fA(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new hA(s))}),n}cu(e){this.Za=e.ks,this.Ya=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ay="SyncEngine";class $P{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class HP{constructor(e){this.key=e,this.hu=!1}}class GP{constructor(e,n,s,i,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ua(l=>Rj(l),Qf),this.Iu=new Map,this.Eu=new Set,this.Ru=new gt(ge.comparator),this.Au=new Map,this.Vu=new my,this.du={},this.mu=new Map,this.fu=tl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KP(t,e,n=!0){const s=vA(t);let i;const r=s.Tu.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await mA(s,e,n,!0),i}async function QP(t,e){const n=vA(t);await mA(n,e,!0,!1)}async function mA(t,e,n,s){const i=await hP(t.localStore,Bs(e)),r=i.targetId,o=t.sharedClientState.addLocalQueryTarget(r,n);let l;return s&&(l=await YP(t,e,r,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&aA(t.remoteStore,i),l}async function YP(t,e,n,s,i){t.pu=(f,m,g)=>async function(N,C,w,y){let S=C.view.ru(w);S.Ss&&(S=await Zw(N.localStore,C.query,!1).then(({documents:T})=>C.view.ru(T,S)));const I=y&&y.targetChanges.get(C.targetId),k=y&&y.targetMismatches.get(C.targetId)!=null,L=C.view.applyChanges(S,N.isPrimaryClient,I,k);return c_(N,C.targetId,L.au),L.snapshot}(t,f,m,g);const r=await Zw(t.localStore,e,!0),o=new FP(e,r.ks),l=o.ru(r.documents),c=Mu.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,c);c_(t,n,d.au);const h=new $P(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function qP(t,e,n){const s=Ae(t),i=s.Tu.get(e),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter(o=>!Qf(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await h0(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&yy(s.remoteStore,i.targetId),p0(s,i.targetId)}).catch(_l)):(p0(s,i.targetId),await h0(s.localStore,i.targetId,!0))}async function XP(t,e){const n=Ae(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),yy(n.remoteStore,s.targetId))}async function WP(t,e,n){const s=iL(t);try{const i=await function(o,l){const c=Ae(o),d=lt.now(),h=l.reduce((g,b)=>g.add(b.key),Pe());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Ci(),N=Pe();return c.xs.getEntries(g,h).next(C=>{b=C,b.forEach((w,y)=>{y.isValidDocument()||(N=N.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,b)).next(C=>{f=C;const w=[];for(const y of l){const S=dV(y,f.get(y.key).overlayedDocument);S!=null&&w.push(new Kr(y.key,S,_j(S.value.mapValue),Nn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,d,w,l)}).next(C=>{m=C;const w=C.applyToLocalDocumentSet(f,N);return c.documentOverlayCache.saveOverlays(g,C.batchId,w)})}).then(()=>({batchId:m.batchId,changes:Dj(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let d=o.du[o.currentUser.toKey()];d||(d=new gt(Ve)),d=d.insert(l,c),o.du[o.currentUser.toKey()]=d}(s,i.batchId,n),await Vu(s,i.changes),await tm(s.remoteStore)}catch(i){const r=Ny(i,"Failed to persist write");n.reject(r)}}async function pA(t,e){const n=Ae(t);try{const s=await cP(n.localStore,e);e.targetChanges.forEach((i,r)=>{const o=n.Au.get(r);o&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ke(o.hu,14607):i.removedDocuments.size>0&&(Ke(o.hu,42227),o.hu=!1))}),await Vu(n,s,e)}catch(s){await _l(s)}}function l_(t,e,n){const s=Ae(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.Tu.forEach((r,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=Ae(o);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.ba)m.va(l)&&(d=!0)}),d&&Ey(c)}(s.eventManager,e),i.length&&s.Pu.J_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function JP(t,e,n){const s=Ae(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Au.get(e),r=i&&i.key;if(r){let o=new gt(ge.comparator);o=o.insert(r,pn.newNoDocument(r,Ee.min()));const l=Pe().add(r),c=new Jf(Ee.min(),new Map,new gt(Ve),o,l);await pA(s,c),s.Ru=s.Ru.remove(r),s.Au.delete(e),Cy(s)}else await h0(s.localStore,e,!1).then(()=>p0(s,e,n)).catch(_l)}async function ZP(t,e){const n=Ae(t),s=e.batch.batchId;try{const i=await lP(n.localStore,e);xA(n,s,null),gA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Vu(n,i)}catch(i){await _l(i)}}async function eL(t,e,n){const s=Ae(t);try{const i=await function(o,l){const c=Ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Ke(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(s.localStore,e);xA(s,e,n),gA(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Vu(s,i)}catch(i){await _l(i)}}function gA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function xA(t,e,n){const s=Ae(t);let i=s.du[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.du[s.currentUser.toKey()]=i}}function p0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(s=>{t.Vu.containsKey(s)||yA(t,s)})}function yA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(yy(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Cy(t))}function c_(t,e,n){for(const s of n)s instanceof hA?(t.Vu.addReference(s.key,e),tL(t,s)):s instanceof fA?(me(Ay,"Document no longer in limbo: "+s.key),t.Vu.removeReference(s.key,e),t.Vu.containsKey(s.key)||yA(t,s.key)):_e(19791,{wu:s})}function tL(t,e){const n=e.key,s=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(s)||(me(Ay,"New document in limbo: "+n),t.Eu.add(s),Cy(t))}function Cy(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ge(st.fromString(e)),s=t.fu.next();t.Au.set(s,new HP(n)),t.Ru=t.Ru.insert(n,s),aA(t.remoteStore,new mr(Bs(Kf(n.path)),s,"TargetPurposeLimboResolution",$f.ce))}}async function Vu(t,e,n){const s=Ae(t),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){i.push(d);const f=gy.Es(c.targetId,d);r.push(f)}}))}),await Promise.all(o),s.Pu.J_(i),await async function(c,d){const h=Ae(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>W.forEach(d,m=>W.forEach(m.Ts,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>W.forEach(m.Is,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Nl(f))throw f;me(xy,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const g=h.vs.get(m),b=g.snapshotVersion,N=g.withLastLimboFreeSnapshotVersion(b);h.vs=h.vs.insert(m,N)}}}(s.localStore,r))}async function nL(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){me(Ay,"User change. New user:",e.toKey());const s=await nA(n.localStore,e);n.currentUser=e,function(r,o){r.mu.forEach(l=>{l.forEach(c=>{c.reject(new ue(q.CANCELLED,o))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Vu(n,s.Ns)}}function sL(t,e){const n=Ae(t),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let i=Pe();const r=n.Iu.get(e);if(!r)return i;for(const o of r){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function vA(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JP.bind(null,e),e.Pu.J_=UP.bind(null,e.eventManager),e.Pu.yu=BP.bind(null,e.eventManager),e}function iL(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eL.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return oP(this.persistence,new iP,e.initialUser,this.serializer)}Cu(e){return new tA(py.Vi,this.serializer)}Du(e){return new mP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class rL extends sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof tf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new $V(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new tA(s=>tf.Vi(s,n),this.serializer)}}class g0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>l_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nL.bind(null,this.syncEngine),await PP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zP}()}createDatastore(e){const n=Zf(e.databaseInfo.databaseId),s=vP(e.databaseInfo);return SP(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,r,o,l){return new EP(s,i,r,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>l_(this.syncEngine,n,0),function(){return n_.v()?new n_:new pP}())}createSyncEngine(e,n){return function(i,r,o,l,c,d,h){const f=new GP(i,r,o,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const r=Ae(i);me(Ma,"RemoteStore shutting down."),r.Ea.add(5),await Ou(r),r.Aa.shutdown(),r.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}g0.provider={build:()=>new g0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="FirestoreClient";class aL{constructor(e,n,s,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=i,this.user=mn.UNAUTHENTICATED,this.clientId=iy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async o=>{me(zr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(me(zr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ny(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Ep(t,e){t.asyncQueue.verifyOperationInProgress(),me(zr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await nA(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function u_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oL(t);me(zr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>i_(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>i_(e.remoteStore,i)),t._onlineComponents=e}async function oL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(zr,"Using user provided OfflineComponentProvider");try{await Ep(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Da("Error using user provided cache. Falling back to memory cache: "+n),await Ep(t,new sf)}}else me(zr,"Using default OfflineComponentProvider"),await Ep(t,new rL(void 0));return t._offlineComponents}async function bA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(zr,"Using user provided OnlineComponentProvider"),await u_(t,t._uninitializedComponentsProvider._online)):(me(zr,"Using default OnlineComponentProvider"),await u_(t,new g0))),t._onlineComponents}function lL(t){return bA(t).then(e=>e.syncEngine)}async function rf(t){const e=await bA(t),n=e.eventManager;return n.onListen=KP.bind(null,e.syncEngine),n.onUnlisten=qP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XP.bind(null,e.syncEngine),n}function cL(t,e,n,s){const i=new Ry(s),r=new jy(e,i,n);return t.asyncQueue.enqueueAndForget(async()=>Sy(await rf(t),r)),()=>{i.Nu(),t.asyncQueue.enqueueAndForget(async()=>Ty(await rf(t),r))}}function uL(t,e,n={}){const s=new gi;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,l,c,d){const h=new Ry({next:m=>{h.Nu(),o.enqueueAndForget(()=>Ty(r,f));const g=m.docs.has(l);!g&&m.fromCache?d.reject(new ue(q.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?d.reject(new ue(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new jy(Kf(l.path),h,{includeMetadataChanges:!0,Ka:!0});return Sy(r,f)}(await rf(t),t.asyncQueue,e,n,s)),s.promise}function dL(t,e,n={}){const s=new gi;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,l,c,d){const h=new Ry({next:m=>{h.Nu(),o.enqueueAndForget(()=>Ty(r,f)),m.fromCache&&c.source==="server"?d.reject(new ue(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new jy(l,h,{includeMetadataChanges:!0,Ka:!0});return Sy(r,f)}(await rf(t),t.asyncQueue,e,n,s)),s.promise}function hL(t,e){const n=new gi;return t.asyncQueue.enqueueAndForget(async()=>WP(await lL(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="ComponentProvider",d_=new Map;function mL(t,e,n,s,i){return new MO(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,wA(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firestore.googleapis.com",h_=!0;class f_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_A,this.ssl=h_}else this.host=e.host,this.ssl=e.ssl??h_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BV)throw new ue(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wA(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nm{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new fO;switch(s.type){case"firstParty":return new xO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ue(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=d_.get(n);s&&(me(fL,"Removing Datastore"),d_.delete(n),s.terminate())}(this),Promise.resolve()}}function pL(t,e,n,s={}){var d;t=_n(t,nm);const i=yl(e),r=t._getSettings(),o={...r,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(gE(`https://${l}`),xE("Firestore",!0)),r.host!==_A&&r.host!==l&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...r,host:l,ssl:i,emulatorOptions:s};if(!Ti(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=mn.MOCK_USER;else{h=v5(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new ue(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new mn(m)}t._authCredentials=new mO(new uj(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Fa(this.firestore,e,this._query)}}class Nt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Iu(n,Nt._jsonSchema))return new Nt(e,s||null,new ge(st.fromString(n.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Lt("string",Nt._jsonSchemaVersion),referencePath:Lt("string")};class Cr extends Fa{constructor(e,n,s){super(e,n,Kf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new ge(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function tt(t,e,...n){if(t=St(t),dj("collection","path",e),t instanceof nm){const s=st.fromString(e,...n);return Ew(s),new Cr(t,null,s)}{if(!(t instanceof Nt||t instanceof Cr))throw new ue(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(st.fromString(e,...n));return Ew(s),new Cr(t.firestore,null,s)}}function Ce(t,e,...n){if(t=St(t),arguments.length===1&&(e=iy.newId()),dj("doc","path",e),t instanceof nm){const s=st.fromString(e,...n);return Tw(s),new Nt(t,null,new ge(s))}{if(!(t instanceof Nt||t instanceof Cr))throw new ue(q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(st.fromString(e,...n));return Tw(s),new Nt(t.firestore,t instanceof Cr?t.converter:null,new ge(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="AsyncQueue";class p_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iA(this,"async_queue_retry"),this._c=()=>{const s=Tp();s&&me(m_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Tp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new gi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Nl(e))throw e;me(m_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",g_(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=_y.createAndSchedule(this,e,n,s,r=>this.hc(r));return this.tc.push(i),i}uc(){this.nc&&_e(47125,{Pc:g_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function g_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Qs extends nm{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new p_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p_(e),this._firestoreClient=void 0,await e}}}function gL(t,e){const n=typeof t=="object"?t:wE(),s=typeof t=="string"?t:Yh,i=Kx(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=x5("firestore");r&&pL(i,...r)}return i}function Pu(t){if(t._terminated)throw new ue(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xL(t),t._firestoreClient}function xL(t){var s,i,r,o;const e=t._freezeSettings(),n=mL(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new aL(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ds(dn.fromBase64String(e))}catch(n){throw new ue(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ds(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ds._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Iu(e,ds._jsonSchema))return ds.fromBase64String(e.bytes)}}ds._jsonSchemaVersion="firestore/bytes/1.0",ds._jsonSchema={type:Lt("string",ds._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$s._jsonSchemaVersion}}static fromJSON(e){if(Iu(e,$s._jsonSchema))return new $s(e.latitude,e.longitude)}}$s._jsonSchemaVersion="firestore/geoPoint/1.0",$s._jsonSchema={type:Lt("string",$s._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Iu(e,Ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ss(e.vectorValues);throw new ue(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ss._jsonSchemaVersion="firestore/vectorValue/1.0",Ss._jsonSchema={type:Lt("string",Ss._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=/^__.*__$/;class vL{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Du(e,this.data,n,this.fieldTransforms)}}class NA{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function SA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{dataSource:t})}}class im{constructor(e,n,s,i,r,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.validatePath(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new im({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return af(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(SA(this.dataSource)&&yL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class bL{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Zf(e)}createContext(e,n,s,i=!1){return new im({dataSource:e,methodName:n,targetDoc:s,path:ln.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zu(t){const e=t._freezeSettings(),n=Zf(t._databaseId);return new bL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Iy(t,e,n,s,i,r={}){const o=t.createContext(r.merge||r.mergeFields?2:0,e,n,i);My("Data must be an object, but it was:",o,s);const l=AA(s,o);let c,d;if(r.merge)c=new Gn(o.fieldMask),d=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const f of r.mergeFields){const m=sl(e,f,n);if(!o.contains(m))throw new ue(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);IA(h,m)||h.push(m)}c=new Gn(h),d=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=o.fieldTransforms;return new vL(new kn(l),c,d)}class rm extends Lu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rm}}function TA(t,e,n){return new im({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ky extends Lu{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=TA(this,e,!0),s=this.Ac.map(r=>$a(r,n)),i=new Zo(s);return new Uj(e.path,i)}isEqual(e){return e instanceof ky&&Ti(this.Ac,e.Ac)}}class Dy extends Lu{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=TA(this,e,!0),s=this.Ac.map(r=>$a(r,n)),i=new el(s);return new Uj(e.path,i)}isEqual(e){return e instanceof Dy&&Ti(this.Ac,e.Ac)}}function EA(t,e,n,s){const i=t.createContext(1,e,n);My("Data must be an object, but it was:",i,s);const r=[],o=kn.empty();Gr(s,(c,d)=>{const h=RA(e,c,n);d=St(d);const f=i.childContextForFieldPath(h);if(d instanceof rm)r.push(h);else{const m=$a(d,f);m!=null&&(r.push(h),o.set(h,m))}});const l=new Gn(r);return new NA(o,l,i.fieldTransforms)}function jA(t,e,n,s,i,r){const o=t.createContext(1,e,n),l=[sl(e,s,n)],c=[i];if(r.length%2!=0)throw new ue(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)l.push(sl(e,r[m])),c.push(r[m+1]);const d=[],h=kn.empty();for(let m=l.length-1;m>=0;--m)if(!IA(d,l[m])){const g=l[m];let b=c[m];b=St(b);const N=o.childContextForFieldPath(g);if(b instanceof rm)d.push(g);else{const C=$a(b,N);C!=null&&(d.push(g),h.set(g,C))}}const f=new Gn(d);return new NA(h,f,o.fieldTransforms)}function wL(t,e,n,s=!1){return $a(n,t.createContext(s?4:3,e))}function $a(t,e){if(CA(t=St(t)))return My("Unsupported field value:",e,t),AA(t,e);if(t instanceof Lu)return function(s,i){if(!SA(i.dataSource))throw i.createError(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const l of s){let c=$a(l,i.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(s,i){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return rV(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=lt.fromDate(s);return{timestampValue:ef(i.serializer,r)}}if(s instanceof lt){const r=new lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ef(i.serializer,r)}}if(s instanceof $s)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ds)return{bytesValue:Kj(i.serializer,s._byteString)};if(s instanceof Nt){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:fy(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Ss)return function(o,l){const c=o instanceof Ss?o.toArray():o;return{mapValue:{fields:{[bj]:{stringValue:wj},[qh]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw l.createError("VectorValues must only contain numeric values.");return uy(l.serializer,h)})}}}}}}(s,i);if(Zj(s))return s._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Ff(s)}`)}(t,e)}function AA(t,e){const n={};return mj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gr(t,(s,i)=>{const r=$a(i,e.childContextForField(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function CA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof $s||t instanceof ds||t instanceof Nt||t instanceof Lu||t instanceof Ss||Zj(t))}function My(t,e,n){if(!CA(n)||!hj(n)){const s=Ff(n);throw s==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+s)}}function sl(t,e,n){if((e=St(e))instanceof sm)return e._internalPath;if(typeof e=="string")return RA(t,e);throw af("Field path arguments must be of type string or ",t,!1,void 0,n)}const _L=new RegExp("[~\\*/\\[\\]]");function RA(t,e,n){if(e.search(_L)>=0)throw af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sm(...e.split("."))._internalPath}catch{throw af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function af(t,e,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new ue(q.INVALID_ARGUMENT,l+t+c)}function IA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{convertValue(e,n="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Gr(e,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertVectorValue(e){var s,i,r;const n=(r=(i=(s=e.fields)==null?void 0:s[qh].arrayValue)==null?void 0:i.values)==null?void 0:r.map(o=>Et(o.doubleValue));return new Ss(n)}convertGeoPoint(e){return new $s(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Gf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const n=Or(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=st.fromString(e);Ke(Jj(s),9688,{name:e});const i=new nu(s.get(1),s.get(3)),r=new ge(s.popFirst(5));return i.isEqual(n)||Ai(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends NL{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function x_(...t){return new ky("arrayUnion",t)}function jp(...t){return new Dy("arrayRemove",t)}const y_="@firebase/firestore",v_="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(sl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SL extends kA{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class TL extends Vy{}function qt(t,e,...n){let s=[];e instanceof Vy&&s.push(e),s=s.concat(n),function(r){const o=r.filter(c=>c instanceof Py).length,l=r.filter(c=>c instanceof am).length;if(o>1||o>0&&l>0)throw new ue(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class am extends TL{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new am(e,n,s)}_apply(e){const n=this._parse(e);return MA(e._query,n),new Fa(e.firestore,e.converter,a0(e._query,n))}_parse(e){const n=zu(e.firestore);return function(r,o,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ue(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){__(f,h);const b=[];for(const N of f)b.push(w_(c,r,N));m={arrayValue:{values:b}}}else m=w_(c,r,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||__(f,h),m=wL(l,o,f,h==="in"||h==="not-in");return Vt.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bt(t,e,n){const s=e,i=sl("where",t);return am._create(i,s,n)}class Py extends Vy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Py(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ts.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let o=i;const l=r.getFlattenedFilters();for(const c of l)MA(o,c),o=a0(o,c)}(e._query,n),new Fa(e.firestore,e.converter,a0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function w_(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new ue(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cj(e)&&n.indexOf("/")!==-1)throw new ue(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(st.fromString(n));if(!ge.isDocumentKey(s))throw new ue(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Mw(t,new ge(s))}if(n instanceof Nt)return Mw(t,n._key);throw new ue(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ff(n)}.`)}function __(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MA(t,e){const n=function(i,r){for(const o of i)for(const l of o.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Ly(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class rc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends kA{constructor(e,n,s,i,r,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(sl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:Lt("string",wa._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class nh extends wa{data(e={}){return super.data(e)}}class _a{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new rc(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new nh(this._firestore,this._userDataWriter,s.key,s,new rc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new nh(i._firestore,i._userDataWriter,l.doc.key,l.doc,new rc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const c=new nh(i._firestore,i._userDataWriter,l.doc.key,l.doc,new rc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:EL(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_a._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=iy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],i=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_a._jsonSchemaVersion="firestore/querySnapshot/1.0",_a._jsonSchema={type:Lt("string",_a._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zu(e)}set(e,n,s){this._verifyNotCommitted();const i=Ap(e,this._firestore),r=Ly(i.converter,n,s),o=Iy(this._dataReader,"WriteBatch.set",i._key,r,i.converter!==null,s);return this._mutations.push(o.toMutation(i._key,Nn.none())),this}update(e,n,s,...i){this._verifyNotCommitted();const r=Ap(e,this._firestore);let o;return o=typeof(n=St(n))=="string"||n instanceof sm?jA(this._dataReader,"WriteBatch.update",r._key,n,s,i):EA(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(o.toMutation(r._key,Nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ap(e,this._firestore);return this._mutations=this._mutations.concat(new Wf(n._key,Nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ap(t,e){if((t=St(t)).firestore!==e)throw new ue(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){t=_n(t,Nt);const e=_n(t.firestore,Qs),n=Pu(e);return uL(n,t._key).then(s=>OA(e,t,s))}function la(t){t=_n(t,Fa);const e=_n(t.firestore,Qs),n=Pu(e),s=new Oy(e);return DA(t._query),dL(n,t._query).then(i=>new _a(e,s,t,i))}function si(t,e,n){t=_n(t,Nt);const s=_n(t.firestore,Qs),i=Ly(t.converter,e,n),r=zu(s);return Uu(s,[Iy(r,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nn.none())])}function It(t,e,n,...s){t=_n(t,Nt);const i=_n(t.firestore,Qs),r=zu(i);let o;return o=typeof(e=St(e))=="string"||e instanceof sm?jA(r,"updateDoc",t._key,e,n,s):EA(r,"updateDoc",t._key,e),Uu(i,[o.toMutation(t._key,Nn.exists(!0))])}function Ds(t){return Uu(_n(t.firestore,Qs),[new Wf(t._key,Nn.none())])}function Xi(t,e){const n=_n(t.firestore,Qs),s=Ce(t),i=Ly(t.converter,e),r=zu(t.firestore);return Uu(n,[Iy(r,"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,Nn.exists(!1))]).then(()=>s)}function vs(t,...e){var d,h,f;t=St(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||b_(e[s])||(n=e[s++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(b_(e[s])){const m=e[s];e[s]=(d=m.next)==null?void 0:d.bind(m),e[s+1]=(h=m.error)==null?void 0:h.bind(m),e[s+2]=(f=m.complete)==null?void 0:f.bind(m)}let r,o,l;if(t instanceof Nt)o=_n(t.firestore,Qs),l=Kf(t._key.path),r={next:m=>{e[s]&&e[s](OA(o,t,m))},error:e[s+1],complete:e[s+2]};else{const m=_n(t,Fa);o=_n(m.firestore,Qs),l=m._query;const g=new Oy(o);r={next:b=>{e[s]&&e[s](new _a(o,g,m,b))},error:e[s+1],complete:e[s+2]},DA(t._query)}const c=Pu(o);return cL(c,l,i,r)}function Uu(t,e){const n=Pu(t);return hL(n,e)}function OA(t,e,n){const s=n.docs.get(e._key),i=new Oy(t);return new wa(t,i,e._key,s,new rc(n.hasPendingWrites,n.fromCache),e.converter)}function AL(t){return t=_n(t,Qs),Pu(t),new jL(t,e=>Uu(t,e))}(function(e,n=!0){hO(vl),Yo(new Ca("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),l=new Qs(new pO(s.getProvider("auth-internal")),new yO(o,s.getProvider("app-check-internal")),OO(o,i),o);return r={useFetchStreams:n,...r},l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),jr(y_,v_,e),jr(y_,v_,"esm2020")})();const CL={apiKey:"AIzaSyDhlPxmMc9R471kObm-4ZWceT6O1xvCmVs",authDomain:"englishmaster-pro.web.app",projectId:"englishmaster-pro",storageBucket:"englishmaster-pro.firebasestorage.app",messagingSenderId:"165102982425",appId:"1:165102982425:web:f0185ec54947ccbccf6188"},VA=bE(CL),Ms=uO(VA),fe=gL(VA),PA=R.createContext(null);function ft(){const t=R.useContext(PA);if(!t)throw new Error("useAuth must be inside AuthProvider");return t}const N_="vidacristiana21@gmail.com";function RL({children:t}){var y;const[e,n]=R.useState(null),[s,i]=R.useState(null),[r,o]=R.useState(!0);R.useEffect(()=>{const S=localStorage.getItem("em_active_session");if(S)try{const k=JSON.parse(S);k.user&&k.profile&&(n(k.user),i(k.profile),o(!1))}catch{console.warn("Failed to parse saved session")}return JM(Ms,async k=>{if(k){console.log("Auth state changed: User logged in",k.uid),n(k);try{const L=await or(Ce(fe,"users",k.uid));if(L.exists()){const T=L.data();i(T),localStorage.setItem(`profile_${k.uid}`,JSON.stringify(T)),localStorage.setItem("em_active_session",JSON.stringify({user:k,profile:T}))}else{console.warn("No Firestore profile found for user:",k.uid);const T=localStorage.getItem(`profile_${k.uid}`);T&&i(JSON.parse(T))}}catch(L){console.error("Could not fetch profile in onAuthStateChanged:",L.message);const T=localStorage.getItem(`profile_${k.uid}`);T&&i(JSON.parse(T))}}else n(null),i(null),localStorage.removeItem("em_active_session");o(!1)})},[]);const l=async(S,I)=>{try{console.log("Attempting login for:",S);const k=await hw(Ms,S,I);console.log("Firebase Auth success:",k.user.uid);const L=async()=>{const T=Ce(fe,"users",k.user.uid),p=await or(T);if(p.exists()){let E=p.data();S.toLowerCase()===N_&&E.role!=="teacher"&&(console.warn("Correcting role for admin account..."),E.role="teacher",await si(T,{role:"teacher"},{merge:!0}).catch(j=>console.warn("Failed to update admin role:",j))),i(E),localStorage.setItem(`profile_${k.user.uid}`,JSON.stringify(E)),localStorage.setItem("em_active_session",JSON.stringify({user:k.user,profile:E}))}else console.warn("No profile found for user:",k.user.uid)};return await Promise.race([L(),new Promise(T=>setTimeout(T,3e3))]).catch(T=>console.error("Profile fetch error/timeout:",T)),k.user}catch(k){console.error("Firebase Login Error:",k.code,k.message);let L=k.message;throw k.code==="auth/user-not-found"||k.code==="auth/wrong-password"||k.code==="auth/invalid-credential"?L="Invalid email or password. Please try again.":k.code==="auth/too-many-requests"&&(L="Too many failed attempts. Please try again later."),new Error(L)}},c=async(S,I,k,L)=>{try{console.log("Starting registration for:",S);const T=await dw(Ms,S,I);console.log("User created:",T.user.uid),await bp(T.user,{displayName:k}).catch(E=>console.warn("Update profile failed:",E));const p={uid:T.user.uid,email:S,displayName:k,role:L,createdAt:new Date().toISOString(),avatar:null,preferences:{darkMode:!0,notifications:!0,language:"en"}};return si(Ce(fe,"users",T.user.uid),p).then(()=>console.log("Profile saved to Firestore")).catch(E=>console.error("Firestore profile save failed:",E.message)),localStorage.setItem(`profile_${T.user.uid}`,JSON.stringify(p)),localStorage.setItem("em_active_session",JSON.stringify({user:T.user,profile:p})),n(T.user),i(p),T.user}catch(T){console.error("Firebase Registration Error:",T.code,T.message);let p=T.message;throw T.code==="auth/email-already-in-use"?p="This email is already registered. Please Sign In instead.":T.code==="auth/weak-password"?p="Password should be at least 6 characters.":T.code==="auth/invalid-email"&&(p="Please enter a valid email address."),new Error(p)}},d=async(S,I)=>{const k=Math.random().toString(36).substring(2,8).toUpperCase();if(!e)throw new Error("Please log in as a teacher.");try{const L=Ce(fe,"pre_registered",S.toLowerCase()),T={email:S.toLowerCase(),name:I,code:k,createdAt:new Date().toISOString(),createdBy:e.uid},p=new Promise((E,j)=>setTimeout(()=>j(new Error("Request timed out. Please check your internet connection.")),1e4));return await Promise.race([si(L,T),p]),k}catch(L){throw console.error("Error pre-registering student:",L),new Error("Failed to generate student code: "+L.message)}},h=async(S,I)=>{const k=S.trim().toLowerCase(),L=I.trim().toUpperCase();try{console.log("Student login attempt:",k);const T=await hw(Ms,k,L);return console.log("Student auth success (returning student)"),T.user}catch(T){if(console.log("Auth failed, checking if first-time student:",T.code),T.code==="auth/user-not-found"||T.code==="auth/invalid-credential"){const p=qt(tt(fe,"users"),Bt("email","==",k));if(!(await la(p)).empty)throw console.log("Student already has a profile, invalid code."),new Error("Invalid Access Code. Please check and try again.");try{const j=await or(Ce(fe,"pre_registered",k));if(j.exists()){const D=j.data();if(D.code===L){console.log("First-time student found! Creating account...");const A=await dw(Ms,k,L);await bp(A.user,{displayName:D.name});const v={uid:A.user.uid,email:k,displayName:D.name,role:"student",createdAt:new Date().toISOString(),avatar:null,preferences:{darkMode:!0,notifications:!0,language:"en"}};return await si(Ce(fe,"users",A.user.uid),v),n(A.user),i(v),A.user}else throw new Error("Invalid Access Code. Please check the code your teacher gave you.")}else throw new Error("Student not found. Please verify the email or ask your teacher to register you.")}catch(j){throw console.error("Database check failed:",j),j}}throw T.code==="auth/wrong-password"?new Error("Invalid Access Code. Please check and try again."):new Error(T.message)}},f=async S=>{const I=new ai,k=await v6(Ms,I),L=await or(Ce(fe,"users",k.user.uid)).catch(()=>null);if(L!=null&&L.exists())i(L.data());else{const T={uid:k.user.uid,email:k.user.email,displayName:k.user.displayName,role:S,createdAt:new Date().toISOString(),avatar:k.user.photoURL,preferences:{darkMode:!0,notifications:!0,language:"en"}};try{await si(Ce(fe,"users",k.user.uid),T)}catch(p){console.warn("Could not save profile:",p.message)}localStorage.setItem(`profile_${k.user.uid}`,JSON.stringify(T)),localStorage.setItem("em_active_session",JSON.stringify({user:k.user,profile:T})),i(T)}return k.user},m=async()=>{try{await ZM(Ms)}catch{}n(null),i(null),localStorage.removeItem("em_active_session")},g=S=>{const I={uid:S==="teacher"?"demo-teacher":"demo-student-1",email:`demo-${S}@englishmaster.pro`,displayName:S==="teacher"?"Prof. Anderson":"Alex Student"},k={...I,role:S,createdAt:new Date().toISOString(),avatar:null,preferences:{darkMode:!0,notifications:!0,language:"en"}};n(I),i(k),localStorage.setItem(`profile_${I.uid}`,JSON.stringify(k)),localStorage.setItem("em_active_session",JSON.stringify({user:I,profile:k})),o(!1)},b=async S=>{if(!e)throw new Error("No active user");const I={...s,...S};i(I);try{await si(Ce(fe,"users",e.uid),I,{merge:!0})}catch(k){console.warn("Could not save to Firestore:",k.message)}if(localStorage.setItem(`profile_${e.uid}`,JSON.stringify(I)),localStorage.setItem("em_active_session",JSON.stringify({user:e,profile:I})),S.displayName&&Ms.currentUser)try{await bp(Ms.currentUser,{displayName:S.displayName})}catch{}},N=async S=>{if(!e)throw new Error("Please log in as a teacher.");const I=S.trim().toLowerCase(),k=Math.random().toString(36).substring(2,8).toUpperCase();try{const L=Ce(fe,"pre_registered",I),T=await or(L);await si(L,{...T.exists()?T.data():{email:I,createdBy:e.uid},code:k,resetAt:new Date().toISOString()},{merge:!0});try{await YM(Ms,I)}catch(p){console.log("Password reset email skipped (student may not have auth account):",p.code)}return k}catch(L){throw console.error("Error resetting student code:",L),new Error("Failed to reset student code: "+L.message)}},C=window.location.hostname!=="localhost"&&!window.location.hostname.includes("127.0.0.1"),w={user:e,userProfile:s,loading:r,login:l,register:c,loginWithGoogle:f,logout:m,demoLogin:g,updateUserData:b,isProduction:C,isTeacher:(s==null?void 0:s.role)==="teacher",isStudent:(s==null?void 0:s.role)==="student",isAdmin:((y=s==null?void 0:s.email)==null?void 0:y.toLowerCase())===N_,preRegisterStudent:d,loginWithStudentCode:h,resetStudentCode:N};return a.jsx(PA.Provider,{value:w,children:t})}const LA=R.createContext(null);function vn(){const t=R.useContext(LA);if(!t)throw new Error("useClasses must be inside ClassProvider");return t}function IL(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t[Math.floor(Math.random()*t.length)];return e}function kL({children:t}){const{user:e,userProfile:n,isTeacher:s,isStudent:i}=ft(),[r,o]=R.useState([]),[l,c]=R.useState([]),[d,h]=R.useState([]),[f,m]=R.useState([]),[g,b]=R.useState([]),[N,C]=R.useState([]),[w,y]=R.useState([]),[S,I]=R.useState([]),[k,L]=R.useState(!0);R.useEffect(()=>{if(!e){o([]),c([]),h([]),m([]),L(!1);return}let H;s?H=qt(tt(fe,"classes"),Bt("teacherId","==",e.uid)):H=qt(tt(fe,"classes"),Bt("students","array-contains",e.uid));const K=vs(H,J=>{const te=J.docs.map(ce=>({id:ce.id,...ce.data()}));o(te),L(!1)}),re=vs(qt(tt(fe,"users"),Bt("role","==","student")),J=>{const te=J.docs.map(ce=>({id:ce.id,...ce.data(),status:"active"}));vs(tt(fe,"pre_registered"),ce=>{const ne=ce.docs.map(de=>({id:de.id,...de.data(),displayName:de.data().name,status:"pending",joinedAt:de.data().createdAt}));y([...te,...ne])})});return()=>{K(),re()}},[e,s]),R.useEffect(()=>{if(!e){I([]);return}if(i){const H=qt(tt(fe,"teacher_requests"),Bt("studentId","==",e.uid),Bt("status","==","pending"));return vs(H,re=>{I(re.docs.map(J=>({id:J.id,...J.data()})))})}else if(s){const H=qt(tt(fe,"teacher_requests"),Bt("teacherId","==",e.uid));return vs(H,re=>{I(re.docs.map(J=>({id:J.id,...J.data()})))})}},[e,s,i]),R.useEffect(()=>{if(r.length===0){c([]),m([]),b([]),C([]);return}const H=r.map(J=>J.id),K=[];for(let J=0;J<H.length;J+=10)K.push(H.slice(J,J+10));const re=[];return K.forEach(J=>{const te=qt(tt(fe,"assignments"),Bt("classId","in",J));re.push(vs(te,de=>{c(Te=>[...Te.filter(he=>!J.includes(he.classId)),...de.docs.map(he=>({id:he.id,...he.data()}))])}));const ce=qt(tt(fe,"announcements"),Bt("classId","in",J));re.push(vs(ce,de=>{m(Te=>[...Te.filter(he=>!J.includes(he.classId)),...de.docs.map(he=>({id:he.id,...he.data()}))])}));const ne=qt(tt(fe,"materials"),Bt("classId","in",J));re.push(vs(ne,de=>{C(Te=>[...Te.filter(he=>!J.includes(he.classId)),...de.docs.map(he=>({id:he.id,...he.data()}))])}))}),()=>re.forEach(J=>J())},[r]),R.useEffect(()=>{if(e)if(s){if(l.length===0){h([]);return}const H=l.map(J=>J.id),K=[];for(let J=0;J<H.length;J+=10)K.push(H.slice(J,J+10));if(K.length===0){h([]);return}const re=K.map(J=>{const te=qt(tt(fe,"submissions"),Bt("assignmentId","in",J));return vs(te,ce=>{h(ne=>{const de=new Set(J),Te=ne.filter(he=>!de.has(he.assignmentId)),je=ce.docs.map(he=>({id:he.id,...he.data()}));return[...Te,...je]})})});return()=>re.forEach(J=>J())}else{if(l.length===0)return;const H=l.map(J=>J.id),K=[];for(let J=0;J<H.length;J+=10)K.push(H.slice(J,J+10));if(K.length===0){h([]);return}const re=K.map(J=>{const te=qt(tt(fe,"submissions"),Bt("assignmentId","in",J));return vs(te,ce=>{h(ne=>{const de=new Set(J),Te=ne.filter(he=>!de.has(he.assignmentId)),je=ce.docs.map(he=>({id:he.id,...he.data()}));return[...Te,...je]})})});return()=>re.forEach(J=>J())}},[e,s,l]);const T=async H=>{const K={...H,teacherId:e.uid,teacherName:(n==null?void 0:n.displayName)||"Teacher",code:IL(),createdAt:new Date().toISOString(),students:[],archived:!1};return{id:(await Xi(tt(fe,"classes"),K)).id,...K}},p=async(H,K)=>{await It(Ce(fe,"classes",H),K)},E=async H=>{await Ds(Ce(fe,"classes",H));const K=qt(tt(fe,"assignments"),Bt("classId","==",H)),re=await la(K);for(const ce of re.docs)await Y(ce.id);const J=qt(tt(fe,"announcements"),Bt("classId","==",H)),te=await la(J);for(const ce of te.docs)await Ds(Ce(fe,"announcements",ce.id))},j=async H=>{await It(Ce(fe,"classes",H),{archived:!0,archivedAt:new Date().toISOString()})},D=async H=>{await It(Ce(fe,"classes",H),{archived:!1,archivedAt:null})},A=async(H,K)=>{if(!K)throw new Error("You must be logged in to join a class");if(!H)throw new Error("Please enter a class code");const re=qt(tt(fe,"classes"),Bt("code","==",H.trim().toUpperCase())),J=await la(re);if(J.empty)throw new Error("Class not found. Please check the code.");const te=J.docs[0],ce={id:te.id,...te.data()},ne=Array.isArray(ce.students)?ce.students:[];return ne.includes(K)?ce:(await It(Ce(fe,"classes",te.id),{students:[...ne,K]}),{...ce,students:[...ne,K]})},v=async(H,K)=>{await It(Ce(fe,"classes",H),{students:jp(K)})},V=async H=>{const K=qt(tt(fe,"classes"),Bt("students","array-contains",H)),J=(await la(K)).docs.map(te=>It(Ce(fe,"classes",te.id),{students:jp(H)}));await Promise.all(J)},P=async(H,K)=>{const re=Ce(fe,"classes",H),J=await or(re);if(!J.exists())throw new Error("Class not found");const te=J.data().students||[],ce=[...new Set([...te,...K])];await It(re,{students:ce})},O=async(H,K)=>{await It(Ce(fe,"classes",H),{students:jp(K)})},B=async H=>{if(H)try{H.status==="pending"?await Ds(Ce(fe,"pre_registered",H.email.toLowerCase())):(await Ds(Ce(fe,"users",H.id)),await V(H.id))}catch(K){throw console.error("Error deleting student:",K),K}},z=async(H,K,re)=>{try{re?await It(Ce(fe,"pre_registered",H),K):await It(Ce(fe,"users",H),K)}catch(J){throw console.error("Error updating student:",J),J}},$=async H=>{const K={...H,createdAt:new Date().toISOString(),status:"active"};return{id:(await Xi(tt(fe,"assignments"),K)).id,...K}},U=async(H,K)=>{await It(Ce(fe,"assignments",H),{...K,updatedAt:new Date().toISOString()})},Y=async H=>{await Ds(Ce(fe,"assignments",H));const K=qt(tt(fe,"submissions"),Bt("assignmentId","==",H)),J=(await la(K)).docs.map(te=>Ds(Ce(fe,"submissions",te.id)));await Promise.all(J)},Z=async H=>{const K=l.find(Te=>Te.id===H);if(!K)throw new Error("Assignment not found");const{id:re,createdAt:J,updatedAt:te,...ce}=K,ne={...ce,title:`${ce.title} (Copy)`,createdAt:new Date().toISOString(),status:"active"};return{id:(await Xi(tt(fe,"assignments"),ne)).id,...ne}},se=async(H,K)=>{await It(Ce(fe,"assignments",H),{dueDate:new Date(K).toISOString(),updatedAt:new Date().toISOString()})},pe=H=>{var ce;const K=l.find(ne=>ne.id===H);if(!K)return{total:0,submitted:0,rate:0};const re=r.find(ne=>ne.id===K.classId),J=((ce=re==null?void 0:re.students)==null?void 0:ce.length)||0,te=d.filter(ne=>ne.assignmentId===H).length;return{total:J,submitted:te,rate:J>0?Math.round(te/J*100):0}},xe=async H=>{const K={...H,submittedAt:new Date().toISOString()};return{id:(await Xi(tt(fe,"submissions"),K)).id,...K}},Be=async(H,K)=>{await It(Ce(fe,"submissions",H),{...K,gradedAt:K.grade!==void 0?new Date().toISOString():null})},oe=async H=>{await Ds(Ce(fe,"submissions",H))},ee=async H=>{const K=H.map(({id:re,grade:J,feedback:te})=>It(Ce(fe,"submissions",re),{grade:J,feedback:te||"",status:"graded",gradedAt:new Date().toISOString()}));await Promise.all(K)},ye=async H=>{const K={...H,createdAt:new Date().toISOString(),pinned:!1,readBy:[]};return{id:(await Xi(tt(fe,"announcements"),K)).id,...K}},Se=async H=>{await Ds(Ce(fe,"announcements",H))},ve=async(H,K)=>{await It(Ce(fe,"announcements",H),{pinned:K})},xt=async(H,K)=>{await It(Ce(fe,"announcements",H),{readBy:x_(K)})},tn=async(H,K)=>{const re={...K,classId:H,createdAt:new Date().toISOString(),uploadedBy:e.uid};return{id:(await Xi(tt(fe,"materials"),re)).id,...re}},Tn=async H=>{await Ds(Ce(fe,"materials",H))};R.useEffect(()=>{if(r.length===0){b([]);return}const H=r.map(te=>te.id),K=[];for(let te=0;te<H.length;te+=10)K.push(H.slice(te,te+10));const re=K.map(te=>{const ce=qt(tt(fe,"class_messages"),Bt("classId","in",te));return vs(ce,ne=>{b(de=>{const Te=de.filter(he=>!te.includes(he.classId)),je=ne.docs.map(he=>({id:he.id,...he.data()}));return je.sort((he,Rt)=>(he.createdAt||"").localeCompare(Rt.createdAt||"")),[...Te,...je]})},ne=>{console.error("Chat listener error:",ne)})});return(async()=>{const te=new Date(Date.now()-6048e5).toISOString();for(const ce of K)try{const ne=qt(tt(fe,"class_messages"),Bt("classId","in",ce)),de=await la(ne),Te=AL(fe);let je=0;de.docs.forEach(he=>{he.data().createdAt<te&&(Te.delete(he.ref),je++)}),je>0&&await Te.commit()}catch(ne){console.error("Chat cleanup error:",ne)}})(),()=>re.forEach(te=>te())},[r]);const Ln=async(H,K,re,J)=>{const te={classId:H,text:K,authorId:e.uid,authorName:re,authorRole:J,createdAt:new Date().toISOString()};await Xi(tt(fe,"class_messages"),te)},yt=async H=>{await Ds(Ce(fe,"class_messages",H))},He=H=>g.filter(K=>K.classId===H),Qe=async(H,K)=>{var ne;if(S.find(de=>de.classId===H&&de.studentId===K&&de.status==="pending"))throw new Error("Request already sent to this student for this class.");const J=r.find(de=>de.id===H);if((ne=J==null?void 0:J.students)!=null&&ne.includes(K))throw new Error("Student is already in this class.");const te=w.find(de=>de.id===K),ce={teacherId:e.uid,teacherName:(n==null?void 0:n.displayName)||"Teacher",studentId:K,studentName:(te==null?void 0:te.displayName)||"Student",classId:H,className:(J==null?void 0:J.name)||"Class",status:"pending",createdAt:new Date().toISOString()};await Xi(tt(fe,"teacher_requests"),ce)},Ze=async(H,K)=>{const re=S.find(J=>J.id===H);if(!re)throw new Error("Request not found.");if(K){const J=Ce(fe,"classes",re.classId);await It(J,{students:x_(re.studentId)}),await It(Ce(fe,"teacher_requests",H),{status:"accepted",respondedAt:new Date().toISOString()})}else await It(Ce(fe,"teacher_requests",H),{status:"rejected",respondedAt:new Date().toISOString()})},Xe=()=>S.filter(H=>H.status==="pending"&&H.studentId===(e==null?void 0:e.uid)),ts=H=>S.filter(K=>K.classId===H),jl=H=>{const K=r.find(re=>re.id===H);return K?w.filter(re=>{var J;return(J=K.students)==null?void 0:J.includes(re.id)}):[]},Ga=H=>l.filter(K=>K.classId===H),Al=H=>f.filter(K=>K.classId===H),Cs=H=>N.filter(K=>K.classId===H).sort((K,re)=>new Date(re.createdAt)-new Date(K.createdAt)),le=H=>d.filter(K=>K.studentId===H),Ge=H=>d.filter(K=>K.assignmentId===H),En=H=>r.filter(K=>{var re;return(re=K.students)==null?void 0:re.includes(H)}),Rs=H=>{var de;const K=l.filter(Te=>Te.classId===H),re=r.find(Te=>Te.id===H),J=((de=re==null?void 0:re.students)==null?void 0:de.length)||0,te=K.length*J,ce=d.filter(Te=>K.some(je=>je.id===Te.assignmentId)).length,ne=d.filter(Te=>K.some(je=>je.id===Te.assignmentId)&&Te.grade!=null).length;return{totalExpected:te,totalSubmitted:ce,totalGraded:ne,studentCount:J,assignmentCount:K.length}},Xu={classes:r,assignments:l,submissions:d,announcements:f,allStudents:w,loading:k,addClass:T,updateClass:p,deleteClass:E,archiveClass:j,unarchiveClass:D,joinClass:A,leaveClass:O,removeStudentFromClass:v,removeStudentFromAllClasses:V,bulkAddStudentsToClass:P,deleteStudent:B,updateStudent:z,addAssignment:$,updateAssignment:U,deleteAssignment:Y,duplicateAssignment:Z,reassignDueDate:se,getAssignmentCompletionRate:pe,submitAssignment:xe,updateSubmission:Be,deleteSubmission:oe,bulkGradeSubmissions:ee,addAnnouncement:ye,deleteAnnouncement:Se,pinAnnouncement:ve,markAnnouncementRead:xt,classMaterials:N,addClassMaterial:tn,deleteClassMaterial:Tn,getClassMaterials:Cs,getClassStudents:jl,getClassAssignments:Ga,getClassAnnouncements:Al,getStudentSubmissions:le,getAssignmentSubmissions:Ge,getStudentClasses:En,getClassSubmissionStats:Rs,getStudentProgress:H=>{const K=d.filter(je=>je.studentId===H),J=r.filter(je=>{var he;return(he=je.students)==null?void 0:he.includes(H)}).map(je=>je.id),te=l.filter(je=>J.includes(je.classId)),ce=K.length,ne=te.length,de=K.filter(je=>je.grade!=null),Te=de.length>0?Math.round(de.reduce((je,he)=>{const Rt=l.find(Bi=>Bi.id===he.assignmentId),qr=(Rt==null?void 0:Rt.totalPoints)||100;return je+he.grade/qr*100},0)/de.length):0;return{completed:ce,total:ne,completionRate:ne>0?Math.round(ce/ne*100):0,avgGrade:Te}},getOverdueAssignments:H=>{const K=new Date,J=r.filter(ne=>{var de;return(de=ne.students)==null?void 0:de.includes(H)}).map(ne=>ne.id),ce=d.filter(ne=>ne.studentId===H).map(ne=>ne.assignmentId);return l.filter(ne=>J.includes(ne.classId)&&!ce.includes(ne.id)&&new Date(ne.dueDate)<K)},getPendingAssignments:H=>{const K=new Date,J=r.filter(ne=>{var de;return(de=ne.students)==null?void 0:de.includes(H)}).map(ne=>ne.id),ce=d.filter(ne=>ne.studentId===H).map(ne=>ne.assignmentId);return l.filter(ne=>J.includes(ne.classId)&&!ce.includes(ne.id)&&new Date(ne.dueDate)>=K)},exportClassGrades:H=>{const K=r.find(ce=>ce.id===H);if(!K)return"";const re=l.filter(ce=>ce.classId===H),J=w.filter(ce=>{var ne;return(ne=K.students)==null?void 0:ne.includes(ce.id)});let te="Student,"+re.map(ce=>ce.title).join(",")+`,Average
`;return J.forEach(ce=>{const ne=re.map(je=>{const he=d.find(Rt=>Rt.assignmentId===je.id&&Rt.studentId===ce.id);return(he==null?void 0:he.grade)!=null?he.grade:"N/A"}),de=ne.filter(je=>je!=="N/A"),Te=de.length>0?Math.round(de.reduce((je,he)=>je+he,0)/de.length):"N/A";te+=`${ce.displayName},${ne.join(",")},${Te}
`}),te},getLeaderboard:H=>{const K=r.find(te=>te.id===H);if(!K)return[];const re=l.filter(te=>te.classId===H);return w.filter(te=>{var ce;return(ce=K.students)==null?void 0:ce.includes(te.id)}).map(te=>{const ce=d.filter(he=>re.some(Rt=>Rt.id===he.assignmentId)&&he.studentId===te.id),ne=ce.filter(he=>he.grade!=null),de=ne.reduce((he,Rt)=>he+(Rt.grade||0),0),Te=ne.reduce((he,Rt)=>{const qr=re.find(Bi=>Bi.id===Rt.assignmentId);return he+((qr==null?void 0:qr.totalPoints)||100)},0),je=Te>0?Math.round(de/Te*100):0;return{id:te.id,name:te.displayName,avg:je,totalPoints:de,submitted:ce.length,total:re.length}}).sort((te,ce)=>ce.avg-te.avg)},getClassAnalytics:H=>{const K=Rs(H),re=l.filter(de=>de.classId===H),te=d.filter(de=>re.some(Te=>Te.id===de.assignmentId)).filter(de=>de.grade!=null),ce={A:0,B:0,C:0,D:0,F:0};te.forEach(de=>{const Te=re.find(Rt=>Rt.id===de.assignmentId),je=(Te==null?void 0:Te.totalPoints)||100,he=de.grade/je*100;he>=90?ce.A++:he>=80?ce.B++:he>=70?ce.C++:he>=60?ce.D++:ce.F++});const ne=te.length>0?Math.round(te.reduce((de,Te)=>{const je=re.find(Rt=>Rt.id===Te.assignmentId),he=(je==null?void 0:je.totalPoints)||100;return de+Te.grade/he*100},0)/te.length):0;return{...K,gradeDistribution:ce,avgGrade:ne,totalGradedSubmissions:te.length}},getStudentStreak:H=>{const K=d.filter(ne=>ne.studentId===H&&ne.submittedAt).sort((ne,de)=>new Date(de.submittedAt)-new Date(ne.submittedAt));if(K.length===0)return 0;let re=1,J=new Date(K[0].submittedAt);J.setHours(0,0,0,0);const te=new Date;if(te.setHours(0,0,0,0),Math.floor((te-J)/(1e3*60*60*24))>1)return 0;for(let ne=1;ne<K.length;ne++){const de=new Date(K[ne].submittedAt);de.setHours(0,0,0,0);const Te=Math.floor((J-de)/(1e3*60*60*24));if(Te===1)re++,J=de;else if(Te>1)break}return re},classMessages:g,addClassMessage:Ln,deleteClassMessage:yt,getClassMessages:He,teacherRequests:S,sendTeacherRequest:Qe,respondToRequest:Ze,getMyPendingRequests:Xe,getTeacherRequestsForClass:ts};return a.jsx(LA.Provider,{value:Xu,children:t})}const zy=R.createContext({});function Uy(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const om=R.createContext(null),By=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class DL extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ML({children:t,isPresent:e}){const n=R.useId(),s=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=R.useContext(By);return R.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=i.current;if(e||!s.current||!o||!l)return;s.current.dataset.motionPopId=n;const h=document.createElement("style");return r&&(h.nonce=r),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),a.jsx(DL,{isPresent:e,childRef:s,sizeRef:i,children:R.cloneElement(t,{ref:s})})}const OL=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:o})=>{const l=Uy(VL),c=R.useId(),d=R.useCallback(f=>{l.set(f,!0);for(const m of l.values())if(!m)return;s&&s()},[l,s]),h=R.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:d,register:f=>(l.set(f,!1),()=>l.delete(f))}),r?[Math.random(),d]:[n,d]);return R.useMemo(()=>{l.forEach((f,m)=>l.set(m,!1))},[n]),R.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(t=a.jsx(ML,{isPresent:n,children:t})),a.jsx(om.Provider,{value:h,children:t})};function VL(){return new Map}function zA(t=!0){const e=R.useContext(om);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,r=R.useId();R.useEffect(()=>{t&&i(r)},[t]);const o=R.useCallback(()=>t&&s&&s(r),[r,s,t]);return!n&&s?[!1,o]:[!0]}const Ad=t=>t.key||"";function S_(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const Fy=typeof window<"u",UA=Fy?R.useLayoutEffect:R.useEffect,Vn=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:r="sync",propagate:o=!1})=>{const[l,c]=zA(o),d=R.useMemo(()=>S_(t),[t]),h=o&&!l?[]:d.map(Ad),f=R.useRef(!0),m=R.useRef(d),g=Uy(()=>new Map),[b,N]=R.useState(d),[C,w]=R.useState(d);UA(()=>{f.current=!1,m.current=d;for(let I=0;I<C.length;I++){const k=Ad(C[I]);h.includes(k)?g.delete(k):g.get(k)!==!0&&g.set(k,!1)}},[C,h.length,h.join("-")]);const y=[];if(d!==b){let I=[...d];for(let k=0;k<C.length;k++){const L=C[k],T=Ad(L);h.includes(T)||(I.splice(k,0,L),y.push(L))}r==="wait"&&y.length&&(I=y),w(S_(I)),N(d);return}const{forceRender:S}=R.useContext(zy);return a.jsx(a.Fragment,{children:C.map(I=>{const k=Ad(I),L=o&&!l?!1:d===C||h.includes(k),T=()=>{if(g.has(k))g.set(k,!0);else return;let p=!0;g.forEach(E=>{E||(p=!1)}),p&&(S==null||S(),w(m.current),o&&(c==null||c()),s&&s())};return a.jsx(OL,{isPresent:L,initial:!f.current||n?void 0:!1,custom:L?void 0:e,presenceAffectsLayout:i,mode:r,onExitComplete:L?void 0:T,children:I},k)})})},Xn=t=>t;let BA=Xn;function $y(t){let e;return()=>(e===void 0&&(e=t()),e)}const il=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},xi=t=>t*1e3,yi=t=>t/1e3,PL={useManualTiming:!1};function LL(t){let e=new Set,n=new Set,s=!1,i=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){r.has(d)&&(c.schedule(d),t()),d(o)}const c={schedule:(d,h=!1,f=!1)=>{const g=f&&s?e:n;return h&&r.add(d),g.has(d)||g.add(d),d},cancel:d=>{n.delete(d),r.delete(d)},process:d=>{if(o=d,s){i=!0;return}s=!0,[e,n]=[n,e],e.forEach(l),e.clear(),s=!1,i&&(i=!1,c.process(d))}};return c}const Cd=["read","resolveKeyframes","update","preRender","render","postRender"],zL=40;function FA(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=Cd.reduce((w,y)=>(w[y]=LL(r),w),{}),{read:l,resolveKeyframes:c,update:d,preRender:h,render:f,postRender:m}=o,g=()=>{const w=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(w-i.timestamp,zL),1),i.timestamp=w,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),f.process(i),m.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(g))},b=()=>{n=!0,s=!0,i.isProcessing||t(g)};return{schedule:Cd.reduce((w,y)=>{const S=o[y];return w[y]=(I,k=!1,L=!1)=>(n||b(),S.schedule(I,k,L)),w},{}),cancel:w=>{for(let y=0;y<Cd.length;y++)o[Cd[y]].cancel(w)},state:i,steps:o}}const{schedule:ut,cancel:Ur,state:nn,steps:Cp}=FA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xn,!0),$A=R.createContext({strict:!1}),T_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rl={};for(const t in T_)rl[t]={isEnabled:e=>T_[t].some(n=>!!e[n])};function UL(t){for(const e in t)rl[e]={...rl[e],...t[e]}}const BL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function of(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||BL.has(t)}let HA=t=>!of(t);function FL(t){t&&(HA=e=>e.startsWith("on")?!of(e):t(e))}try{FL(require("@emotion/is-prop-valid").default)}catch{}function $L(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(HA(i)||n===!0&&of(i)||!e&&!of(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}function HL(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const lm=R.createContext({});function iu(t){return typeof t=="string"||Array.isArray(t)}function cm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Hy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gy=["initial",...Hy];function um(t){return cm(t.animate)||Gy.some(e=>iu(t[e]))}function GA(t){return!!(um(t)||t.variants)}function GL(t,e){if(um(t)){const{initial:n,animate:s}=t;return{initial:n===!1||iu(n)?n:void 0,animate:iu(s)?s:void 0}}return t.inherit!==!1?e:{}}function KL(t){const{initial:e,animate:n}=GL(t,R.useContext(lm));return R.useMemo(()=>({initial:e,animate:n}),[E_(e),E_(n)])}function E_(t){return Array.isArray(t)?t.join(" "):t}const QL=Symbol.for("motionComponentSymbol");function yo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function YL(t,e,n){return R.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):yo(n)&&(n.current=s))},[e])}const Ky=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qL="framerAppearId",KA="data-"+Ky(qL),{schedule:Qy}=FA(queueMicrotask,!1),QA=R.createContext({});function XL(t,e,n,s,i){var r,o;const{visualElement:l}=R.useContext(lm),c=R.useContext($A),d=R.useContext(om),h=R.useContext(By).reducedMotion,f=R.useRef(null);s=s||c.renderer,!f.current&&s&&(f.current=s(t,{visualState:e,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const m=f.current,g=R.useContext(QA);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&WL(f.current,n,i,g);const b=R.useRef(!1);R.useInsertionEffect(()=>{m&&b.current&&m.update(n,d)});const N=n[KA],C=R.useRef(!!N&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,N))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,N)));return UA(()=>{m&&(b.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Qy.render(m.render),C.current&&m.animationState&&m.animationState.animateChanges())}),R.useEffect(()=>{m&&(!C.current&&m.animationState&&m.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,N)}),C.current=!1))}),m}function WL(t,e,n,s){const{layoutId:i,layout:r,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:YA(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||l&&yo(l),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:d})}function YA(t){if(t)return t.options.allowProjection!==!1?t.projection:YA(t.parent)}function JL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:i}){var r,o;t&&UL(t);function l(d,h){let f;const m={...R.useContext(By),...d,layoutId:ZL(d)},{isStatic:g}=m,b=KL(d),N=s(d,g);if(!g&&Fy){e9();const C=t9(m);f=C.MeasureLayout,b.visualElement=XL(i,N,m,e,C.ProjectionNode)}return a.jsxs(lm.Provider,{value:b,children:[f&&b.visualElement?a.jsx(f,{visualElement:b.visualElement,...m}):null,n(i,d,YL(N,b.visualElement,h),N,g,b.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${(o=(r=i.displayName)!==null&&r!==void 0?r:i.name)!==null&&o!==void 0?o:""})`}`;const c=R.forwardRef(l);return c[QL]=i,c}function ZL({layoutId:t}){const e=R.useContext(zy).id;return e&&t!==void 0?e+"-"+t:t}function e9(t,e){R.useContext($A).strict}function t9(t){const{drag:e,layout:n}=rl;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const n9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yy(t){return typeof t!="string"||t.includes("-")?!1:!!(n9.indexOf(t)>-1||/[A-Z]/u.test(t))}function j_(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function qy(t,e,n,s){if(typeof e=="function"){const[i,r]=j_(s);e=e(n!==void 0?n:t.custom,i,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,r]=j_(s);e=e(n!==void 0?n:t.custom,i,r)}return e}const x0=t=>Array.isArray(t),s9=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),i9=t=>x0(t)?t[t.length-1]||0:t,gn=t=>!!(t&&t.getVelocity);function sh(t){const e=gn(t)?t.get():t;return s9(e)?e.toValue():e}function r9({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},s,i,r){const o={latestValues:a9(s,i,r,t),renderState:e()};return n&&(o.onMount=l=>n({props:s,current:l,...o}),o.onUpdate=l=>n(l)),o}const qA=t=>(e,n)=>{const s=R.useContext(lm),i=R.useContext(om),r=()=>r9(t,e,s,i);return n?r():Uy(r)};function a9(t,e,n,s){const i={},r=s(t,{});for(const m in r)i[m]=sh(r[m]);let{initial:o,animate:l}=t;const c=um(t),d=GA(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?l:o;if(f&&typeof f!="boolean"&&!cm(f)){const m=Array.isArray(f)?f:[f];for(let g=0;g<m.length;g++){const b=qy(t,m[g]);if(b){const{transitionEnd:N,transition:C,...w}=b;for(const y in w){let S=w[y];if(Array.isArray(S)){const I=h?S.length-1:0;S=S[I]}S!==null&&(i[y]=S)}for(const y in N)i[y]=N[y]}}}return i}const Tl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ha=new Set(Tl),XA=t=>e=>typeof e=="string"&&e.startsWith(t),WA=XA("--"),o9=XA("var(--"),Xy=t=>o9(t)?l9.test(t.split("/*")[0].trim()):!1,l9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,JA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ri=(t,e,n)=>n>e?e:n<t?t:n,El={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ru={...El,transform:t=>Ri(0,1,t)},Rd={...El,default:1},Bu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Wi=Bu("deg"),Hs=Bu("%"),be=Bu("px"),c9=Bu("vh"),u9=Bu("vw"),A_={...Hs,parse:t=>Hs.parse(t)/100,transform:t=>Hs.transform(t*100)},d9={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,radius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,top:be,right:be,bottom:be,left:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,backgroundPositionX:be,backgroundPositionY:be},h9={rotate:Wi,rotateX:Wi,rotateY:Wi,rotateZ:Wi,scale:Rd,scaleX:Rd,scaleY:Rd,scaleZ:Rd,skew:Wi,skewX:Wi,skewY:Wi,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:ru,originX:A_,originY:A_,originZ:be},C_={...El,transform:Math.round},Wy={...d9,...h9,zIndex:C_,size:be,fillOpacity:ru,strokeOpacity:ru,numOctaves:C_},f9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},m9=Tl.length;function p9(t,e,n){let s="",i=!0;for(let r=0;r<m9;r++){const o=Tl[r],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=JA(l,Wy[o]);if(!c){i=!1;const h=f9[o]||o;s+=`${h}(${d}) `}n&&(e[o]=d)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function Jy(t,e,n){const{style:s,vars:i,transformOrigin:r}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(Ha.has(c)){o=!0;continue}else if(WA(c)){i[c]=d;continue}else{const h=JA(d,Wy[c]);c.startsWith("origin")?(l=!0,r[c]=h):s[c]=h}}if(e.transform||(o||n?s.transform=p9(e,t.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=r;s.transformOrigin=`${c} ${d} ${h}`}}const g9={offset:"stroke-dashoffset",array:"stroke-dasharray"},x9={offset:"strokeDashoffset",array:"strokeDasharray"};function y9(t,e,n=1,s=0,i=!0){t.pathLength=1;const r=i?g9:x9;t[r.offset]=be.transform(-s);const o=be.transform(e),l=be.transform(n);t[r.array]=`${o} ${l}`}function R_(t,e,n){return typeof t=="string"?t:be.transform(e+n*t)}function v9(t,e,n){const s=R_(e,t.x,t.width),i=R_(n,t.y,t.height);return`${s} ${i}`}function Zy(t,{attrX:e,attrY:n,attrScale:s,originX:i,originY:r,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},h,f){if(Jy(t,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:b}=t;m.transform&&(b&&(g.transform=m.transform),delete m.transform),b&&(i!==void 0||r!==void 0||g.transform)&&(g.transformOrigin=v9(b,i!==void 0?i:.5,r!==void 0?r:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),s!==void 0&&(m.scale=s),o!==void 0&&y9(m,o,l,c,!1)}const ev=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ZA=()=>({...ev(),attrs:{}}),tv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function eC(t,{style:e,vars:n},s,i){Object.assign(t.style,e,i&&i.getProjectionStyles(s));for(const r in n)t.style.setProperty(r,n[r])}const tC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nC(t,e,n,s){eC(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(tC.has(i)?i:Ky(i),e.attrs[i])}const lf={};function b9(t){Object.assign(lf,t)}function sC(t,{layout:e,layoutId:n}){return Ha.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!lf[t]||t==="opacity")}function nv(t,e,n){var s;const{style:i}=t,r={};for(const o in i)(gn(i[o])||e.style&&gn(e.style[o])||sC(o,t)||((s=n==null?void 0:n.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(r[o]=i[o]);return r}function iC(t,e,n){const s=nv(t,e,n);for(const i in t)if(gn(t[i])||gn(e[i])){const r=Tl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=t[i]}return s}function w9(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const I_=["x","y","width","height","cx","cy","r"],_9={useVisualState:qA({scrapeMotionValuesFromProps:iC,createRenderState:ZA,onUpdate:({props:t,prevProps:e,current:n,renderState:s,latestValues:i})=>{if(!n)return;let r=!!t.drag;if(!r){for(const l in i)if(Ha.has(l)){r=!0;break}}if(!r)return;let o=!e;if(e)for(let l=0;l<I_.length;l++){const c=I_[l];t[c]!==e[c]&&(o=!0)}o&&ut.read(()=>{w9(n,s),ut.render(()=>{Zy(s,i,tv(n.tagName),t.transformTemplate),nC(n,s)})})}})},N9={useVisualState:qA({scrapeMotionValuesFromProps:nv,createRenderState:ev})};function rC(t,e,n){for(const s in e)!gn(e[s])&&!sC(s,n)&&(t[s]=e[s])}function S9({transformTemplate:t},e){return R.useMemo(()=>{const n=ev();return Jy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function T9(t,e){const n=t.style||{},s={};return rC(s,n,t),Object.assign(s,S9(t,e)),s}function E9(t,e){const n={},s=T9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}function j9(t,e,n,s){const i=R.useMemo(()=>{const r=ZA();return Zy(r,e,tv(s),t.transformTemplate),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};rC(r,t.style,t),i.style={...r,...i.style}}return i}function A9(t=!1){return(n,s,i,{latestValues:r},o)=>{const c=(Yy(n)?j9:E9)(s,r,o,n),d=$L(s,typeof n=="string",t),h=n!==R.Fragment?{...d,...c,ref:i}:{},{children:f}=s,m=R.useMemo(()=>gn(f)?f.get():f,[f]);return R.createElement(n,{...h,children:m})}}function C9(t,e){return function(s,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Yy(s)?_9:N9,preloadedFeatures:t,useRender:A9(i),createVisualElement:e,Component:s};return JL(o)}}function aC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function dm(t,e,n){const s=t.getProps();return qy(s,e,n!==void 0?n:s.custom,t)}const R9=$y(()=>window.ScrollTimeline!==void 0);class I9{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(i=>{if(R9()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{s.forEach((i,r)=>{i&&i(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class k9 extends I9{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function sv(t,e){return t?t[e]||t.default||t:void 0}const y0=2e4;function oC(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<y0;)e+=n,s=t.next(e);return e>=y0?1/0:e}function iv(t){return typeof t=="function"}function k_(t,e){t.timeline=e,t.onfinish=null}const rv=t=>Array.isArray(t)&&typeof t[0]=="number",D9={linearEasing:void 0};function M9(t,e){const n=$y(t);return()=>{var s;return(s=D9[e])!==null&&s!==void 0?s:n()}}const cf=M9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lC=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let r=0;r<i;r++)s+=t(il(0,i-1,r))+", ";return`linear(${s.substring(0,s.length-2)})`};function cC(t){return!!(typeof t=="function"&&cf()||!t||typeof t=="string"&&(t in v0||cf())||rv(t)||Array.isArray(t)&&t.every(cC))}const ac=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,v0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ac([0,.65,.55,1]),circOut:ac([.55,0,1,.45]),backIn:ac([.31,.01,.66,-.59]),backOut:ac([.33,1.53,.69,.99])};function uC(t,e){if(t)return typeof t=="function"&&cf()?lC(t,e):rv(t)?ac(t):Array.isArray(t)?t.map(n=>uC(n,e)||v0.easeOut):v0[t]}const bs={x:!1,y:!1};function dC(){return bs.x||bs.y}function O9(t,e,n){var s;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const r=(s=void 0)!==null&&s!==void 0?s:i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}function hC(t,e){const n=O9(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function D_(t){return e=>{e.pointerType==="touch"||dC()||t(e)}}function V9(t,e,n={}){const[s,i,r]=hC(t,n),o=D_(l=>{const{target:c}=l,d=e(l);if(typeof d!="function"||!c)return;const h=D_(f=>{d(f),c.removeEventListener("pointerleave",h)});c.addEventListener("pointerleave",h,i)});return s.forEach(l=>{l.addEventListener("pointerenter",o,i)}),r}const fC=(t,e)=>e?t===e?!0:fC(t,e.parentElement):!1,av=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,P9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function L9(t){return P9.has(t.tagName)||t.tabIndex!==-1}const oc=new WeakSet;function M_(t){return e=>{e.key==="Enter"&&t(e)}}function Rp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const z9=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=M_(()=>{if(oc.has(n))return;Rp(n,"down");const i=M_(()=>{Rp(n,"up")}),r=()=>Rp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function O_(t){return av(t)&&!dC()}function U9(t,e,n={}){const[s,i,r]=hC(t,n),o=l=>{const c=l.currentTarget;if(!O_(l)||oc.has(c))return;oc.add(c);const d=e(l),h=(g,b)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),!(!O_(g)||!oc.has(c))&&(oc.delete(c),typeof d=="function"&&d(g,{success:b}))},f=g=>{h(g,n.useGlobalTarget||fC(c,g.target))},m=g=>{h(g,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",m,i)};return s.forEach(l=>{!L9(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),l.addEventListener("focus",d=>z9(d,i),i)}),r}function B9(t){return t==="x"||t==="y"?bs[t]?null:(bs[t]=!0,()=>{bs[t]=!1}):bs.x||bs.y?null:(bs.x=bs.y=!0,()=>{bs.x=bs.y=!1})}const mC=new Set(["width","height","top","left","right","bottom",...Tl]);let ih;function F9(){ih=void 0}const Gs={now:()=>(ih===void 0&&Gs.set(nn.isProcessing||PL.useManualTiming?nn.timestamp:performance.now()),ih),set:t=>{ih=t,queueMicrotask(F9)}};function ov(t,e){t.indexOf(e)===-1&&t.push(e)}function lv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class cv{constructor(){this.subscriptions=[]}add(e){return ov(this.subscriptions,e),()=>lv(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function pC(t,e){return e?t*(1e3/e):0}const V_=30,$9=t=>!isNaN(parseFloat(t));class H9{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const r=Gs.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new cv);const s=this.events[e].add(n);return e==="change"?()=>{s(),ut.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Gs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>V_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,V_);return pC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function au(t,e){return new H9(t,e)}function G9(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,au(n))}function K9(t,e){const n=dm(t,e);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const o in r){const l=i9(r[o]);G9(t,o,l)}}function Q9(t){return!!(gn(t)&&t.add)}function b0(t,e){const n=t.getValue("willChange");if(Q9(n))return n.add(e)}function gC(t){return t.props[KA]}const xC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Y9=1e-7,q9=12;function X9(t,e,n,s,i){let r,o,l=0;do o=e+(n-e)/2,r=xC(o,s,i)-t,r>0?n=o:e=o;while(Math.abs(r)>Y9&&++l<q9);return o}function Fu(t,e,n,s){if(t===e&&n===s)return Xn;const i=r=>X9(r,0,1,t,n);return r=>r===0||r===1?r:xC(i(r),e,s)}const yC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vC=t=>e=>1-t(1-e),bC=Fu(.33,1.53,.69,.99),uv=vC(bC),wC=yC(uv),_C=t=>(t*=2)<1?.5*uv(t):.5*(2-Math.pow(2,-10*(t-1))),dv=t=>1-Math.sin(Math.acos(t)),NC=vC(dv),SC=yC(dv),TC=t=>/^0[^.\s]+$/u.test(t);function W9(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||TC(t):!0}const Cc=t=>Math.round(t*1e5)/1e5,hv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function J9(t){return t==null}const Z9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fv=(t,e)=>n=>!!(typeof n=="string"&&Z9.test(n)&&n.startsWith(t)||e&&!J9(n)&&Object.prototype.hasOwnProperty.call(n,e)),EC=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,r,o,l]=s.match(hv);return{[t]:parseFloat(i),[e]:parseFloat(r),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},ez=t=>Ri(0,255,t),Ip={...El,transform:t=>Math.round(ez(t))},ma={test:fv("rgb","red"),parse:EC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Ip.transform(t)+", "+Ip.transform(e)+", "+Ip.transform(n)+", "+Cc(ru.transform(s))+")"};function tz(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const w0={test:fv("#"),parse:tz,transform:ma.transform},vo={test:fv("hsl","hue"),parse:EC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Hs.transform(Cc(e))+", "+Hs.transform(Cc(n))+", "+Cc(ru.transform(s))+")"},fn={test:t=>ma.test(t)||w0.test(t)||vo.test(t),parse:t=>ma.test(t)?ma.parse(t):vo.test(t)?vo.parse(t):w0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ma.transform(t):vo.transform(t)},nz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sz(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(hv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(nz))===null||n===void 0?void 0:n.length)||0)>0}const jC="number",AC="color",iz="var",rz="var(",P_="${}",az=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ou(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const l=e.replace(az,c=>(fn.test(c)?(s.color.push(r),i.push(AC),n.push(fn.parse(c))):c.startsWith(rz)?(s.var.push(r),i.push(iz),n.push(c)):(s.number.push(r),i.push(jC),n.push(parseFloat(c))),++r,P_)).split(P_);return{values:n,split:l,indexes:s,types:i}}function CC(t){return ou(t).values}function RC(t){const{split:e,types:n}=ou(t),s=e.length;return i=>{let r="";for(let o=0;o<s;o++)if(r+=e[o],i[o]!==void 0){const l=n[o];l===jC?r+=Cc(i[o]):l===AC?r+=fn.transform(i[o]):r+=i[o]}return r}}const oz=t=>typeof t=="number"?0:t;function lz(t){const e=CC(t);return RC(t)(e.map(oz))}const Br={test:sz,parse:CC,createTransformer:RC,getAnimatableNone:lz},cz=new Set(["brightness","contrast","saturate","opacity"]);function uz(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(hv)||[];if(!s)return t;const i=n.replace(s,"");let r=cz.has(e)?1:0;return s!==n&&(r*=100),e+"("+r+i+")"}const dz=/\b([a-z-]*)\(.*?\)/gu,_0={...Br,getAnimatableNone:t=>{const e=t.match(dz);return e?e.map(uz).join(" "):t}},hz={...Wy,color:fn,backgroundColor:fn,outlineColor:fn,fill:fn,stroke:fn,borderColor:fn,borderTopColor:fn,borderRightColor:fn,borderBottomColor:fn,borderLeftColor:fn,filter:_0,WebkitFilter:_0},mv=t=>hz[t];function IC(t,e){let n=mv(t);return n!==_0&&(n=Br),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fz=new Set(["auto","none","0"]);function mz(t,e,n){let s=0,i;for(;s<t.length&&!i;){const r=t[s];typeof r=="string"&&!fz.has(r)&&ou(r).values.length&&(i=t[s]),s++}if(i&&n)for(const r of e)t[r]=IC(n,i)}const L_=t=>t===El||t===be,z_=(t,e)=>parseFloat(t.split(", ")[e]),U_=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return z_(i[1],e);{const r=s.match(/^matrix\((.+)\)$/u);return r?z_(r[1],t):0}},pz=new Set(["x","y","z"]),gz=Tl.filter(t=>!pz.has(t));function xz(t){const e=[];return gz.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const al={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:U_(4,13),y:U_(5,14)};al.translateX=al.x;al.translateY=al.y;const Na=new Set;let N0=!1,S0=!1;function kC(){if(S0){const t=Array.from(Na).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=xz(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([r,o])=>{var l;(l=s.getValue(r))===null||l===void 0||l.set(o)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}S0=!1,N0=!1,Na.forEach(t=>t.complete()),Na.clear()}function DC(){Na.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(S0=!0)})}function yz(){DC(),kC()}class pv{constructor(e,n,s,i,r,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Na.add(this),N0||(N0=!0,ut.read(DC),ut.resolveKeyframes(kC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;for(let r=0;r<e.length;r++)if(e[r]===null)if(r===0){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(s&&n){const c=s.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Na.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Na.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const MC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),vz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bz(t){const e=vz.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function OC(t,e,n=1){const[s,i]=bz(t);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const o=r.trim();return MC(o)?parseFloat(o):o}return Xy(i)?OC(i,e,n+1):i}const VC=t=>e=>e.test(t),wz={test:t=>t==="auto",parse:t=>t},PC=[El,be,Hs,Wi,u9,c9,wz],B_=t=>PC.find(VC(t));class LC extends pv{constructor(e,n,s,i,r){super(e,n,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Xy(d))){const h=OC(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!mC.has(s)||e.length!==2)return;const[i,r]=e,o=B_(i),l=B_(r);if(o!==l)if(L_(o)&&L_(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)W9(e[i])&&s.push(i);s.length&&mz(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=al[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const r=n.getValue(s);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=al[s](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{n.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const F_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Br.test(t)||t==="0")&&!t.startsWith("url("));function _z(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Nz(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],o=F_(i,e),l=F_(r,e);return!o||!l?!1:_z(t)||(n==="spring"||iv(n))&&s}const Sz=t=>t!==null;function hm(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(Sz),r=e&&n!=="loop"&&e%2===1?0:i.length-1;return!r||s===void 0?i[r]:s}const Tz=40;class zC{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Gs.now(),this.options={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:r,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Tz?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&yz(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Gs.now(),this.hasAttemptedResolve=!0;const{name:s,type:i,velocity:r,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!Nz(e,s,i,r))if(o)this.options.duration=0;else{c&&c(hm(e,this.options,n)),l&&l(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const mt=(t,e,n)=>t+(e-t)*n;function kp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ez({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,r=0,o=0;if(!e)i=r=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=kp(c,l,t+1/3),r=kp(c,l,t),o=kp(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:s}}function uf(t,e){return n=>n>0?e:t}const Dp=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},jz=[w0,ma,vo],Az=t=>jz.find(e=>e.test(t));function $_(t){const e=Az(t);if(!e)return!1;let n=e.parse(t);return e===vo&&(n=Ez(n)),n}const H_=(t,e)=>{const n=$_(t),s=$_(e);if(!n||!s)return uf(t,e);const i={...n};return r=>(i.red=Dp(n.red,s.red,r),i.green=Dp(n.green,s.green,r),i.blue=Dp(n.blue,s.blue,r),i.alpha=mt(n.alpha,s.alpha,r),ma.transform(i))},Cz=(t,e)=>n=>e(t(n)),$u=(...t)=>t.reduce(Cz),T0=new Set(["none","hidden"]);function Rz(t,e){return T0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Iz(t,e){return n=>mt(t,e,n)}function gv(t){return typeof t=="number"?Iz:typeof t=="string"?Xy(t)?uf:fn.test(t)?H_:Mz:Array.isArray(t)?UC:typeof t=="object"?fn.test(t)?H_:kz:uf}function UC(t,e){const n=[...t],s=n.length,i=t.map((r,o)=>gv(r)(r,e[o]));return r=>{for(let o=0;o<s;o++)n[o]=i[o](r);return n}}function kz(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=gv(t[i])(t[i],e[i]));return i=>{for(const r in s)n[r]=s[r](i);return n}}function Dz(t,e){var n;const s=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],l=t.indexes[o][i[o]],c=(n=t.values[l])!==null&&n!==void 0?n:0;s[r]=c,i[o]++}return s}const Mz=(t,e)=>{const n=Br.createTransformer(e),s=ou(t),i=ou(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?T0.has(t)&&!i.values.length||T0.has(e)&&!s.values.length?Rz(t,e):$u(UC(Dz(s,i),i.values),n):uf(t,e)};function BC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mt(t,e,n):gv(t)(t,e)}const Oz=5;function FC(t,e,n){const s=Math.max(e-Oz,0);return pC(n-t(s),e-s)}const wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Mp=.001;function Vz({duration:t=wt.duration,bounce:e=wt.bounce,velocity:n=wt.velocity,mass:s=wt.mass}){let i,r,o=1-e;o=Ri(wt.minDamping,wt.maxDamping,o),t=Ri(wt.minDuration,wt.maxDuration,yi(t)),o<1?(i=d=>{const h=d*o,f=h*t,m=h-n,g=E0(d,o),b=Math.exp(-f);return Mp-m/g*b},r=d=>{const f=d*o*t,m=f*n+n,g=Math.pow(o,2)*Math.pow(d,2)*t,b=Math.exp(-f),N=E0(Math.pow(d,2),o);return(-i(d)+Mp>0?-1:1)*((m-g)*b)/N}):(i=d=>{const h=Math.exp(-d*t),f=(d-n)*t+1;return-Mp+h*f},r=d=>{const h=Math.exp(-d*t),f=(n-d)*(t*t);return h*f});const l=5/t,c=Lz(i,r,l);if(t=xi(t),isNaN(c))return{stiffness:wt.stiffness,damping:wt.damping,duration:t};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:t}}}const Pz=12;function Lz(t,e,n){let s=n;for(let i=1;i<Pz;i++)s=s-t(s)/e(s);return s}function E0(t,e){return t*Math.sqrt(1-e*e)}const zz=["duration","bounce"],Uz=["stiffness","damping","mass"];function G_(t,e){return e.some(n=>t[n]!==void 0)}function Bz(t){let e={velocity:wt.velocity,stiffness:wt.stiffness,damping:wt.damping,mass:wt.mass,isResolvedFromDuration:!1,...t};if(!G_(t,Uz)&&G_(t,zz))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,r=2*Ri(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:wt.mass,stiffness:i,damping:r}}else{const n=Vz(t);e={...e,...n,mass:wt.mass},e.isResolvedFromDuration=!0}return e}function $C(t=wt.visualDuration,e=wt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:r},{stiffness:c,damping:d,mass:h,duration:f,velocity:m,isResolvedFromDuration:g}=Bz({...n,velocity:-yi(n.velocity||0)}),b=m||0,N=d/(2*Math.sqrt(c*h)),C=o-r,w=yi(Math.sqrt(c/h)),y=Math.abs(C)<5;s||(s=y?wt.restSpeed.granular:wt.restSpeed.default),i||(i=y?wt.restDelta.granular:wt.restDelta.default);let S;if(N<1){const k=E0(w,N);S=L=>{const T=Math.exp(-N*w*L);return o-T*((b+N*w*C)/k*Math.sin(k*L)+C*Math.cos(k*L))}}else if(N===1)S=k=>o-Math.exp(-w*k)*(C+(b+w*C)*k);else{const k=w*Math.sqrt(N*N-1);S=L=>{const T=Math.exp(-N*w*L),p=Math.min(k*L,300);return o-T*((b+N*w*C)*Math.sinh(p)+k*C*Math.cosh(p))/k}}const I={calculatedDuration:g&&f||null,next:k=>{const L=S(k);if(g)l.done=k>=f;else{let T=0;N<1&&(T=k===0?xi(b):FC(S,k,L));const p=Math.abs(T)<=s,E=Math.abs(o-L)<=i;l.done=p&&E}return l.value=l.done?o:L,l},toString:()=>{const k=Math.min(oC(I),y0),L=lC(T=>I.next(k*T).value,k,30);return k+"ms "+L}};return I}function K_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},g=p=>l!==void 0&&p<l||c!==void 0&&p>c,b=p=>l===void 0?c:c===void 0||Math.abs(l-p)<Math.abs(c-p)?l:c;let N=n*e;const C=f+N,w=o===void 0?C:o(C);w!==C&&(N=w-f);const y=p=>-N*Math.exp(-p/s),S=p=>w+y(p),I=p=>{const E=y(p),j=S(p);m.done=Math.abs(E)<=d,m.value=m.done?w:j};let k,L;const T=p=>{g(m.value)&&(k=p,L=$C({keyframes:[m.value,b(m.value)],velocity:FC(S,p,m.value),damping:i,stiffness:r,restDelta:d,restSpeed:h}))};return T(0),{calculatedDuration:null,next:p=>{let E=!1;return!L&&k===void 0&&(E=!0,I(p),T(p)),k!==void 0&&p>=k?L.next(p-k):(!E&&I(p),m)}}}const Fz=Fu(.42,0,1,1),$z=Fu(0,0,.58,1),HC=Fu(.42,0,.58,1),Hz=t=>Array.isArray(t)&&typeof t[0]!="number",Gz={linear:Xn,easeIn:Fz,easeInOut:HC,easeOut:$z,circIn:dv,circInOut:SC,circOut:NC,backIn:uv,backInOut:wC,backOut:bC,anticipate:_C},Q_=t=>{if(rv(t)){BA(t.length===4);const[e,n,s,i]=t;return Fu(e,n,s,i)}else if(typeof t=="string")return Gz[t];return t};function Kz(t,e,n){const s=[],i=n||BC,r=t.length-1;for(let o=0;o<r;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Xn:e;l=$u(c,l)}s.push(l)}return s}function Qz(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const r=t.length;if(BA(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Kz(e,s,i),c=l.length,d=h=>{if(o&&h<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const m=il(t[f],t[f+1],h);return l[f](m)};return n?h=>d(Ri(t[0],t[r-1],h)):d}function Yz(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=il(0,e,s);t.push(mt(n,1,i))}}function qz(t){const e=[0];return Yz(e,t.length-1),e}function Xz(t,e){return t.map(n=>n*e)}function Wz(t,e){return t.map(()=>e||HC).splice(0,t.length-1)}function df({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=Hz(s)?s.map(Q_):Q_(s),r={done:!1,value:e[0]},o=Xz(n&&n.length===e.length?n:qz(e),t),l=Qz(o,e,{ease:Array.isArray(i)?i:Wz(e,i)});return{calculatedDuration:t,next:c=>(r.value=l(c),r.done=c>=t,r)}}const Jz=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ut.update(e,!0),stop:()=>Ur(e),now:()=>nn.isProcessing?nn.timestamp:Gs.now()}},Zz={decay:K_,inertia:K_,tween:df,keyframes:df,spring:$C},e8=t=>t/100;class xv extends zC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:s,element:i,keyframes:r}=this.options,o=(i==null?void 0:i.KeyframeResolver)||pv,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(r,l,n,s,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=this.options,l=iv(n)?n:Zz[n]||df;let c,d;l!==df&&typeof e[0]!="number"&&(c=$u(e8,BC(e[0],e[1])),e=[0,100]);const h=l({...this.options,keyframes:e});r==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=oC(h));const{calculatedDuration:f}=h,m=f+i,g=m*(s+1)-i;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:m,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:p}=this.options;return{done:!0,value:p[p.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:h,resolvedDuration:f}=s;if(this.startTime===null)return r.next(0);const{delay:m,repeat:g,repeatType:b,repeatDelay:N,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-m*(this.speed>=0?1:-1),y=this.speed>=0?w<0:w>h;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let S=this.currentTime,I=r;if(g){const p=Math.min(this.currentTime,h)/f;let E=Math.floor(p),j=p%1;!j&&p>=1&&(j=1),j===1&&E--,E=Math.min(E,g+1),!!(E%2)&&(b==="reverse"?(j=1-j,N&&(j-=N/f)):b==="mirror"&&(I=o)),S=Ri(0,1,j)*f}const k=y?{done:!1,value:c[0]}:I.next(S);l&&(k.value=l(k.value));let{done:L}=k;!y&&d!==null&&(L=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return T&&i!==void 0&&(k.value=hm(c,this.options,i)),C&&C(k.value),T&&this.finish(),k}get duration(){const{resolved:e}=this;return e?yi(e.calculatedDuration):0}get time(){return yi(this.currentTime)}set time(e){e=xi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=yi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Jz,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const t8=new Set(["opacity","clipPath","filter","transform"]);function n8(t,e,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[e]:n};c&&(d.offset=c);const h=uC(l,i);return Array.isArray(h)&&(d.easing=h),t.animate(d,{delay:s,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}const s8=$y(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hf=10,i8=2e4;function r8(t){return iv(t.type)||t.type==="spring"||!cC(t.ease)}function a8(t,e){const n=new xv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const i=[];let r=0;for(;!s.done&&r<i8;)s=n.sample(r),i.push(s.value),r+=hf;return{times:void 0,keyframes:i,duration:r-hf,ease:"linear"}}const GC={anticipate:_C,backInOut:wC,circInOut:SC};function o8(t){return t in GC}class Y_ extends zC{constructor(e){super(e);const{name:n,motionValue:s,element:i,keyframes:r}=this.options;this.resolver=new LC(r,(o,l)=>this.onKeyframesResolved(o,l),n,s,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:s=300,times:i,ease:r,type:o,motionValue:l,name:c,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof r=="string"&&cf()&&o8(r)&&(r=GC[r]),r8(this.options)){const{onComplete:f,onUpdate:m,motionValue:g,element:b,...N}=this.options,C=a8(e,N);e=C.keyframes,e.length===1&&(e[1]=e[0]),s=C.duration,i=C.times,r=C.ease,o="keyframes"}const h=n8(l.owner.current,c,e,{...this.options,duration:s,times:i,ease:r});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(k_(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;l.set(hm(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:s,times:i,type:o,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return yi(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return yi(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=xi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Xn;const{animation:s}=n;k_(s,e)}return Xn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:i,type:r,ease:o,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:f,element:m,...g}=this.options,b=new xv({...g,keyframes:s,duration:i,type:r,ease:o,times:l,isGenerator:!0}),N=xi(this.time);d.setWithVelocity(b.sample(N-hf).value,b.sample(N).value,hf)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:i,repeatType:r,damping:o,type:l}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=n.owner.getProps();return s8()&&s&&t8.has(s)&&!c&&!d&&!i&&r!=="mirror"&&o!==0&&l!=="inertia"}}const l8={type:"spring",stiffness:500,damping:25,restSpeed:10},c8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),u8={type:"keyframes",duration:.8},d8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},h8=(t,{keyframes:e})=>e.length>2?u8:Ha.has(t)?t.startsWith("scale")?c8(e[1]):l8:d8;function f8({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const yv=(t,e,n,s={},i,r)=>o=>{const l=sv(s,t)||{},c=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-xi(c);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:r?void 0:i};f8(l)||(h={...h,...h8(t,h)}),h.duration&&(h.duration=xi(h.duration)),h.repeatDelay&&(h.repeatDelay=xi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!r&&e.get()!==void 0){const m=hm(h.keyframes,l);if(m!==void 0)return ut.update(()=>{h.onUpdate(m),h.onComplete()}),new k9([])}return!r&&Y_.supports(h)?new Y_(h):new xv(h)};function m8({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function KC(t,e,{delay:n=0,transitionOverride:s,type:i}={}){var r;let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;s&&(o=s);const d=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in c){const m=t.getValue(f,(r=t.latestValues[f])!==null&&r!==void 0?r:null),g=c[f];if(g===void 0||h&&m8(h,f))continue;const b={delay:n,...sv(o||{},f)};let N=!1;if(window.MotionHandoffAnimation){const w=gC(t);if(w){const y=window.MotionHandoffAnimation(w,f,ut);y!==null&&(b.startTime=y,N=!0)}}b0(t,f),m.start(yv(f,m,g,t.shouldReduceMotion&&mC.has(f)?{type:!1}:b,t,N));const C=m.animation;C&&d.push(C)}return l&&Promise.all(d).then(()=>{ut.update(()=>{l&&K9(t,l)})}),d}function j0(t,e,n={}){var s;const i=dm(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(KC(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=r;return p8(t,e,h+d,f,m,n)}:()=>Promise.resolve(),{when:c}=r;if(c){const[d,h]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function p8(t,e,n=0,s=0,i=1,r){const o=[],l=(t.variantChildren.size-1)*s,c=i===1?(d=0)=>d*s:(d=0)=>l-d*s;return Array.from(t.variantChildren).sort(g8).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(j0(d,e,{...r,delay:n+c(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function g8(t,e){return t.sortNodePosition(e)}function x8(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(r=>j0(t,r,n));s=Promise.all(i)}else if(typeof e=="string")s=j0(t,e,n);else{const i=typeof e=="function"?dm(t,e,n.custom):e;s=Promise.all(KC(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const y8=Gy.length;function QC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?QC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<y8;n++){const s=Gy[n],i=t.props[s];(iu(i)||i===!1)&&(e[s]=i)}return e}const v8=[...Hy].reverse(),b8=Hy.length;function w8(t){return e=>Promise.all(e.map(({animation:n,options:s})=>x8(t,n,s)))}function _8(t){let e=w8(t),n=q_(),s=!0;const i=c=>(d,h)=>{var f;const m=dm(t,h,c==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:g,transitionEnd:b,...N}=m;d={...d,...N,...b}}return d};function r(c){e=c(t)}function o(c){const{props:d}=t,h=QC(t.parent)||{},f=[],m=new Set;let g={},b=1/0;for(let C=0;C<b8;C++){const w=v8[C],y=n[w],S=d[w]!==void 0?d[w]:h[w],I=iu(S),k=w===c?y.isActive:null;k===!1&&(b=C);let L=S===h[w]&&S!==d[w]&&I;if(L&&s&&t.manuallyAnimateOnMount&&(L=!1),y.protectedKeys={...g},!y.isActive&&k===null||!S&&!y.prevProp||cm(S)||typeof S=="boolean")continue;const T=N8(y.prevProp,S);let p=T||w===c&&y.isActive&&!L&&I||C>b&&I,E=!1;const j=Array.isArray(S)?S:[S];let D=j.reduce(i(w),{});k===!1&&(D={});const{prevResolvedValues:A={}}=y,v={...A,...D},V=B=>{p=!0,m.has(B)&&(E=!0,m.delete(B)),y.needsAnimating[B]=!0;const z=t.getValue(B);z&&(z.liveStyle=!1)};for(const B in v){const z=D[B],$=A[B];if(g.hasOwnProperty(B))continue;let U=!1;x0(z)&&x0($)?U=!aC(z,$):U=z!==$,U?z!=null?V(B):m.add(B):z!==void 0&&m.has(B)?V(B):y.protectedKeys[B]=!0}y.prevProp=S,y.prevResolvedValues=D,y.isActive&&(g={...g,...D}),s&&t.blockInitialAnimation&&(p=!1),p&&(!(L&&T)||E)&&f.push(...j.map(B=>({animation:B,options:{type:w}})))}if(m.size){const C={};m.forEach(w=>{const y=t.getBaseTarget(w),S=t.getValue(w);S&&(S.liveStyle=!0),C[w]=y??null}),f.push({animation:C})}let N=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(N=!1),s=!1,N?e(f):Promise.resolve()}function l(c,d){var h;if(n[c].isActive===d)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(c,d)}),n[c].isActive=d;const f=o(c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:r,getState:()=>n,reset:()=>{n=q_(),s=!0}}}function N8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!aC(e,t):!1}function ta(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function q_(){return{animate:ta(!0),whileInView:ta(),whileHover:ta(),whileTap:ta(),whileDrag:ta(),whileFocus:ta(),exit:ta()}}class Qr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class S8 extends Qr{constructor(e){super(e),e.animationState||(e.animationState=_8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let T8=0;class E8 extends Qr{constructor(){super(...arguments),this.id=T8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const j8={animation:{Feature:S8},exit:{Feature:E8}};function lu(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Hu(t){return{point:{x:t.pageX,y:t.pageY}}}const A8=t=>e=>av(e)&&t(e,Hu(e));function Rc(t,e,n,s){return lu(t,e,A8(n),s)}const X_=(t,e)=>Math.abs(t-e);function C8(t,e){const n=X_(t.x,e.x),s=X_(t.y,e.y);return Math.sqrt(n**2+s**2)}class YC{constructor(e,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Vp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=C8(f.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:b}=f,{timestamp:N}=nn;this.history.push({...b,timestamp:N});const{onStart:C,onMove:w}=this.handlers;m||(C&&C(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Op(m,this.transformPagePoint),ut.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:g,onSessionEnd:b,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Vp(f.type==="pointercancel"?this.lastMoveEventInfo:Op(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,C),b&&b(f,C)},!av(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const o=Hu(e),l=Op(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=nn;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,Vp(l,this.history)),this.removeListeners=$u(Rc(this.contextWindow,"pointermove",this.handlePointerMove),Rc(this.contextWindow,"pointerup",this.handlePointerUp),Rc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ur(this.updatePoint)}}function Op(t,e){return e?{point:e(t.point)}:t}function W_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Vp({point:t},e){return{point:t,delta:W_(t,qC(e)),offset:W_(t,R8(e)),velocity:I8(e,.1)}}function R8(t){return t[0]}function qC(t){return t[t.length-1]}function I8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=qC(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>xi(e)));)n--;if(!s)return{x:0,y:0};const r=yi(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const XC=1e-4,k8=1-XC,D8=1+XC,WC=.01,M8=0-WC,O8=0+WC;function Zn(t){return t.max-t.min}function V8(t,e,n){return Math.abs(t-e)<=n}function J_(t,e,n,s=.5){t.origin=s,t.originPoint=mt(e.min,e.max,t.origin),t.scale=Zn(n)/Zn(e),t.translate=mt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=k8&&t.scale<=D8||isNaN(t.scale))&&(t.scale=1),(t.translate>=M8&&t.translate<=O8||isNaN(t.translate))&&(t.translate=0)}function Ic(t,e,n,s){J_(t.x,e.x,n.x,s?s.originX:void 0),J_(t.y,e.y,n.y,s?s.originY:void 0)}function Z_(t,e,n){t.min=n.min+e.min,t.max=t.min+Zn(e)}function P8(t,e,n){Z_(t.x,e.x,n.x),Z_(t.y,e.y,n.y)}function e2(t,e,n){t.min=e.min-n.min,t.max=t.min+Zn(e)}function kc(t,e,n){e2(t.x,e.x,n.x),e2(t.y,e.y,n.y)}function L8(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?mt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?mt(n,t,s.max):Math.min(t,n)),t}function t2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function z8(t,{top:e,left:n,bottom:s,right:i}){return{x:t2(t.x,n,i),y:t2(t.y,e,s)}}function n2(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function U8(t,e){return{x:n2(t.x,e.x),y:n2(t.y,e.y)}}function B8(t,e){let n=.5;const s=Zn(t),i=Zn(e);return i>s?n=il(e.min,e.max-s,t.min):s>i&&(n=il(t.min,t.max-i,e.min)),Ri(0,1,n)}function F8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const A0=.35;function $8(t=A0){return t===!1?t=0:t===!0&&(t=A0),{x:s2(t,"left","right"),y:s2(t,"top","bottom")}}function s2(t,e,n){return{min:i2(t,e),max:i2(t,n)}}function i2(t,e){return typeof t=="number"?t:t[e]||0}const r2=()=>({translate:0,scale:1,origin:0,originPoint:0}),bo=()=>({x:r2(),y:r2()}),a2=()=>({min:0,max:0}),Tt=()=>({x:a2(),y:a2()});function ss(t){return[t("x"),t("y")]}function JC({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function H8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function G8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Pp(t){return t===void 0||t===1}function C0({scale:t,scaleX:e,scaleY:n}){return!Pp(t)||!Pp(e)||!Pp(n)}function ca(t){return C0(t)||ZC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ZC(t){return o2(t.x)||o2(t.y)}function o2(t){return t&&t!=="0%"}function ff(t,e,n){const s=t-n,i=e*s;return n+i}function l2(t,e,n,s,i){return i!==void 0&&(t=ff(t,i,s)),ff(t,n,s)+e}function R0(t,e=0,n=1,s,i){t.min=l2(t.min,e,n,s,i),t.max=l2(t.max,e,n,s,i)}function e4(t,{x:e,y:n}){R0(t.x,e.translate,e.scale,e.originPoint),R0(t.y,n.translate,n.scale,n.originPoint)}const c2=.999999999999,u2=1.0000000000001;function K8(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let r,o;for(let l=0;l<i;l++){r=n[l],o=r.projectionDelta;const{visualElement:c}=r.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&_o(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,e4(t,o)),s&&ca(r.latestValues)&&_o(t,r.latestValues))}e.x<u2&&e.x>c2&&(e.x=1),e.y<u2&&e.y>c2&&(e.y=1)}function wo(t,e){t.min=t.min+e,t.max=t.max+e}function d2(t,e,n,s,i=.5){const r=mt(t.min,t.max,i);R0(t,e,n,r,s)}function _o(t,e){d2(t.x,e.x,e.scaleX,e.scale,e.originX),d2(t.y,e.y,e.scaleY,e.scale,e.originY)}function t4(t,e){return JC(G8(t.getBoundingClientRect(),e))}function Q8(t,e,n){const s=t4(t,n),{scroll:i}=e;return i&&(wo(s.x,i.offset.x),wo(s.y,i.offset.y)),s}const n4=({current:t})=>t?t.ownerDocument.defaultView:null,Y8=new WeakMap;class q8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Hu(h).point)},r=(h,f)=>{const{drag:m,dragPropagation:g,onDragStart:b}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=B9(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ss(C=>{let w=this.getAxisMotionValue(C).get()||0;if(Hs.test(w)){const{projection:y}=this.visualElement;if(y&&y.layout){const S=y.layout.layoutBox[C];S&&(w=Zn(S)*(parseFloat(w)/100))}}this.originPoint[C]=w}),b&&ut.postRender(()=>b(h,f)),b0(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:b,onDrag:N}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:C}=f;if(g&&this.currentDirection===null){this.currentDirection=X8(C),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",f.point,C),this.updateAxis("y",f.point,C),this.visualElement.render(),N&&N(h,f)},l=(h,f)=>this.stop(h,f),c=()=>ss(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new YC(e,{onSessionStart:i,onStart:r,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:n4(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&ut.postRender(()=>r(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!Id(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=L8(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,r=this.constraints;n&&yo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=z8(i.layoutBox,n):this.constraints=!1,this.elastic=$8(s),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ss(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=F8(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!yo(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=Q8(s,i.root,this.visualElement.getTransformPagePoint());let o=U8(i.layout.layoutBox,r);if(n){const l=n(H8(o));this.hasMutatedConstraints=!!l,l&&(o=JC(l))}return o}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ss(h=>{if(!Id(h,n,this.currentDirection))return;let f=c&&c[h]||{};o&&(f={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,b={type:"inertia",velocity:s?e[h]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...r,...f};return this.startAxisValueAnimation(h,b)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return b0(this.visualElement,e),s.start(yv(e,s,0,n,this.visualElement,!1))}stopAnimation(){ss(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ss(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ss(n=>{const{drag:s}=this.getProps();if(!Id(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];r.set(e[n]-mt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!yo(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ss(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=B8({min:c,max:c},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ss(o=>{if(!Id(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(mt(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;Y8.set(this.visualElement,this);const e=this.visualElement.current,n=Rc(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();yo(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ut.read(s);const o=lu(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ss(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),r(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=A0,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:l}}}function Id(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function X8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class W8 extends Qr{constructor(e){super(e),this.removeGroupControls=Xn,this.removeListeners=Xn,this.controls=new q8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xn}unmount(){this.removeGroupControls(),this.removeListeners()}}const h2=t=>(e,n)=>{t&&ut.postRender(()=>t(e,n))};class J8 extends Qr{constructor(){super(...arguments),this.removePointerDownListener=Xn}onPointerDown(e){this.session=new YC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:n4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:h2(e),onStart:h2(n),onMove:s,onEnd:(r,o)=>{delete this.session,i&&ut.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=Rc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const rh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function f2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(be.test(t))t=parseFloat(t);else return t;const n=f2(t,e.target.x),s=f2(t,e.target.y);return`${n}% ${s}%`}},Z8={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=Br.parse(t);if(i.length>5)return s;const r=Br.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const d=mt(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),r(i)}};class eU extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=e;b9(tU),r&&(n.group&&n.group.add(r),s&&s.register&&i&&s.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),rh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:r}=this.props,o=s.projection;return o&&(o.isPresent=r,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||ut.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Qy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function s4(t){const[e,n]=zA(),s=R.useContext(zy);return a.jsx(eU,{...t,layoutGroup:s,switchLayoutGroup:R.useContext(QA),isPresent:e,safeToRemove:n})}const tU={borderRadius:{...Yl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yl,borderTopRightRadius:Yl,borderBottomLeftRadius:Yl,borderBottomRightRadius:Yl,boxShadow:Z8};function nU(t,e,n){const s=gn(t)?t:au(t);return s.start(yv("",s,e,n)),s.animation}function sU(t){return t instanceof SVGElement&&t.tagName!=="svg"}const iU=(t,e)=>t.depth-e.depth;class rU{constructor(){this.children=[],this.isDirty=!1}add(e){ov(this.children,e),this.isDirty=!0}remove(e){lv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(iU),this.isDirty=!1,this.children.forEach(e)}}function aU(t,e){const n=Gs.now(),s=({timestamp:i})=>{const r=i-n;r>=e&&(Ur(s),t(r-e))};return ut.read(s,!0),()=>Ur(s)}const i4=["TopLeft","TopRight","BottomLeft","BottomRight"],oU=i4.length,m2=t=>typeof t=="string"?parseFloat(t):t,p2=t=>typeof t=="number"||be.test(t);function lU(t,e,n,s,i,r){i?(t.opacity=mt(0,n.opacity!==void 0?n.opacity:1,cU(s)),t.opacityExit=mt(e.opacity!==void 0?e.opacity:1,0,uU(s))):r&&(t.opacity=mt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<oU;o++){const l=`border${i4[o]}Radius`;let c=g2(e,l),d=g2(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||p2(c)===p2(d)?(t[l]=Math.max(mt(m2(c),m2(d),s),0),(Hs.test(d)||Hs.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=mt(e.rotate||0,n.rotate||0,s))}function g2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const cU=r4(0,.5,NC),uU=r4(.5,.95,Xn);function r4(t,e,n){return s=>s<t?0:s>e?1:n(il(t,e,s))}function x2(t,e){t.min=e.min,t.max=e.max}function ns(t,e){x2(t.x,e.x),x2(t.y,e.y)}function y2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function v2(t,e,n,s,i){return t-=e,t=ff(t,1/n,s),i!==void 0&&(t=ff(t,1/i,s)),t}function dU(t,e=0,n=1,s=.5,i,r=t,o=t){if(Hs.test(e)&&(e=parseFloat(e),e=mt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=mt(r.min,r.max,s);t===r&&(l-=e),t.min=v2(t.min,e,n,l,i),t.max=v2(t.max,e,n,l,i)}function b2(t,e,[n,s,i],r,o){dU(t,e[n],e[s],e[i],e.scale,r,o)}const hU=["x","scaleX","originX"],fU=["y","scaleY","originY"];function w2(t,e,n,s){b2(t.x,e,hU,n?n.x:void 0,s?s.x:void 0),b2(t.y,e,fU,n?n.y:void 0,s?s.y:void 0)}function _2(t){return t.translate===0&&t.scale===1}function a4(t){return _2(t.x)&&_2(t.y)}function N2(t,e){return t.min===e.min&&t.max===e.max}function mU(t,e){return N2(t.x,e.x)&&N2(t.y,e.y)}function S2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function o4(t,e){return S2(t.x,e.x)&&S2(t.y,e.y)}function T2(t){return Zn(t.x)/Zn(t.y)}function E2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class pU{constructor(){this.members=[]}add(e){ov(this.members,e),e.scheduleRender()}remove(e){if(lv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gU(t,e,n){let s="";const i=t.x.translate/e.x,r=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||r||o)&&(s=`translate3d(${i}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:f,rotateY:m,skewX:g,skewY:b}=n;d&&(s=`perspective(${d}px) ${s}`),h&&(s+=`rotate(${h}deg) `),f&&(s+=`rotateX(${f}deg) `),m&&(s+=`rotateY(${m}deg) `),g&&(s+=`skewX(${g}deg) `),b&&(s+=`skewY(${b}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const ua={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},lc=typeof window<"u"&&window.MotionDebug!==void 0,Lp=["","X","Y","Z"],xU={visibility:"hidden"},j2=1e3;let yU=0;function zp(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function l4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=gC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ut,!(i||r))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&l4(s)}function c4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=yU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,lc&&(ua.totalNodes=ua.resolvedTargetDeltas=ua.recalculatedProjection=0),this.nodes.forEach(wU),this.nodes.forEach(EU),this.nodes.forEach(jU),this.nodes.forEach(_U),lc&&window.MotionDebug.record(ua)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new rU)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new cv),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sU(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=aU(m,250),rh.hasAnimatedSinceResize&&(rh.hasAnimatedSinceResize=!1,this.nodes.forEach(C2))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||h.getDefaultTransition()||kU,{onLayoutAnimationStart:C,onLayoutAnimationComplete:w}=h.getProps(),y=!this.targetLayout||!o4(this.targetLayout,b)||g,S=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,S);const I={...sv(N,"layout"),onPlay:C,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else m||C2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ur(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(AU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&l4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(A2);return}this.isUpdating||this.nodes.forEach(SU),this.isUpdating=!1,this.nodes.forEach(TU),this.nodes.forEach(vU),this.nodes.forEach(bU),this.clearAllSnapshots();const l=Gs.now();nn.delta=Ri(0,1e3/60,l-nn.timestamp),nn.timestamp=l,nn.isProcessing=!0,Cp.update.process(nn),Cp.preRender.process(nn),Cp.render.process(nn),nn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(NU),this.sharedNodes.forEach(CU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ut.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ut.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!a4(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(l||ca(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),DU(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Tt();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(MU))){const{scroll:h}=this.root;h&&(wo(c.x,h.offset.x),wo(c.y,h.offset.y))}return c}removeElementScroll(o){var l;const c=Tt();if(ns(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&ns(c,o),wo(c.x,f.offset.x),wo(c.y,f.offset.y))}return c}applyTransform(o,l=!1){const c=Tt();ns(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&_o(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ca(h.latestValues)&&_o(c,h.latestValues)}return ca(this.latestValues)&&_o(c,this.latestValues),c}removeTransform(o){const l=Tt();ns(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ca(d.latestValues))continue;C0(d.latestValues)&&d.updateSnapshot();const h=Tt(),f=d.measurePageBox();ns(h,f),w2(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return ca(this.latestValues)&&w2(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=nn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),kc(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ns(this.target,this.layout.layoutBox),e4(this.target,this.targetDelta)):ns(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),kc(this.relativeTargetOrigin,this.target,g.target),ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}lc&&ua.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||C0(this.parent.latestValues)||ZC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===nn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;ns(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;K8(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Tt());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(y2(this.prevProjectionDelta.x,this.projectionDelta.x),y2(this.prevProjectionDelta.y,this.projectionDelta.y)),Ic(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!E2(this.projectionDelta.x,this.prevProjectionDelta.x)||!E2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),lc&&ua.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bo(),this.projectionDelta=bo(),this.projectionDeltaWithTransform=bo()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},f=bo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Tt(),g=c?c.source:void 0,b=this.layout?this.layout.source:void 0,N=g!==b,C=this.getStack(),w=!C||C.members.length<=1,y=!!(N&&!w&&this.options.crossfade===!0&&!this.path.some(IU));this.animationProgress=0;let S;this.mixTargetDelta=I=>{const k=I/1e3;R2(f.x,o.x,k),R2(f.y,o.y,k),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RU(this.relativeTarget,this.relativeTargetOrigin,m,k),S&&mU(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Tt()),ns(S,this.relativeTarget)),N&&(this.animationValues=h,lU(h,d,this.latestValues,k,y,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ur(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ut.update(()=>{rh.hasAnimatedSinceResize=!0,this.currentAnimation=nU(0,j2,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(j2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&u4(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Tt();const f=Zn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const m=Zn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}ns(l,c),_o(l,h),Ic(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new pU),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&zp("z",o,d,this.animationValues);for(let h=0;h<Lp.length;h++)zp(`rotate${Lp[h]}`,o,d,this.animationValues),zp(`skew${Lp[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return xU;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=sh(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=sh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ca(this.latestValues)&&(N.transform=h?h({},""):"none",this.hasProjected=!1),N}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),d.transform=gU(this.projectionDeltaWithTransform,this.treeScale,m),h&&(d.transform=h(m,d.transform));const{x:g,y:b}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,f.animationValues?d.opacity=f===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const N in lf){if(m[N]===void 0)continue;const{correct:C,applyTo:w}=lf[N],y=d.transform==="none"?m[N]:C(m[N],f);if(w){const S=w.length;for(let I=0;I<S;I++)d[w[I]]=y}else d[N]=y}return this.options.layoutId&&(d.pointerEvents=f===this?sh(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(A2),this.root.sharedNodes.clear()}}}function vU(t){t.updateLayout()}function bU(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:r}=t.options,o=n.source!==t.layout.source;r==="size"?ss(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],g=Zn(m);m.min=s[f].min,m.max=m.min+g}):u4(r,n.layoutBox,s)&&ss(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],g=Zn(s[f]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const l=bo();Ic(l,s,n.layoutBox);const c=bo();o?Ic(c,t.applyTransform(i,!0),n.measuredBox):Ic(c,s,n.layoutBox);const d=!a4(l);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const b=Tt();kc(b,n.layoutBox,m.layoutBox);const N=Tt();kc(N,s,g.layoutBox),o4(b,N)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=b,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function wU(t){lc&&ua.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _U(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function NU(t){t.clearSnapshot()}function A2(t){t.clearMeasurements()}function SU(t){t.isLayoutDirty=!1}function TU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function C2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function EU(t){t.resolveTargetDelta()}function jU(t){t.calcProjection()}function AU(t){t.resetSkewAndRotation()}function CU(t){t.removeLeadSnapshot()}function R2(t,e,n){t.translate=mt(e.translate,0,n),t.scale=mt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function I2(t,e,n,s){t.min=mt(e.min,n.min,s),t.max=mt(e.max,n.max,s)}function RU(t,e,n,s){I2(t.x,e.x,n.x,s),I2(t.y,e.y,n.y,s)}function IU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kU={duration:.45,ease:[.4,0,.1,1]},k2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),D2=k2("applewebkit/")&&!k2("chrome/")?Math.round:Xn;function M2(t){t.min=D2(t.min),t.max=D2(t.max)}function DU(t){M2(t.x),M2(t.y)}function u4(t,e,n){return t==="position"||t==="preserve-aspect"&&!V8(T2(e),T2(n),.2)}function MU(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const OU=c4({attachResizeListener:(t,e)=>lu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Up={current:void 0},d4=c4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Up.current){const t=new OU({});t.mount(window),t.setOptions({layoutScroll:!0}),Up.current=t}return Up.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),VU={pan:{Feature:J8},drag:{Feature:W8,ProjectionNode:d4,MeasureLayout:s4}};function O2(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,r=s[i];r&&ut.postRender(()=>r(e,Hu(e)))}class PU extends Qr{mount(){const{current:e}=this.node;e&&(this.unmount=V9(e,n=>(O2(this.node,n,"Start"),s=>O2(this.node,s,"End"))))}unmount(){}}class LU extends Qr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$u(lu(this.node.current,"focus",()=>this.onFocus()),lu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function V2(t,e,n){const{props:s}=t;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),r=s[i];r&&ut.postRender(()=>r(e,Hu(e)))}class zU extends Qr{mount(){const{current:e}=this.node;e&&(this.unmount=U9(e,n=>(V2(this.node,n,"Start"),(s,{success:i})=>V2(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const I0=new WeakMap,Bp=new WeakMap,UU=t=>{const e=I0.get(t.target);e&&e(t)},BU=t=>{t.forEach(UU)};function FU({root:t,...e}){const n=t||document;Bp.has(n)||Bp.set(n,{});const s=Bp.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(BU,{root:t,...e})),s[i]}function $U(t,e,n){const s=FU(e);return I0.set(t,n),s.observe(t),()=>{I0.delete(t),s.unobserve(t)}}const HU={some:0,all:1};class GU extends Qr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:r}=e,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:HU[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=d?h:f;m&&m(c)};return $U(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(KU(e,n))&&this.startObserver()}unmount(){}}function KU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const QU={inView:{Feature:GU},tap:{Feature:zU},focus:{Feature:LU},hover:{Feature:PU}},YU={layout:{ProjectionNode:d4,MeasureLayout:s4}},k0={current:null},h4={current:!1};function qU(){if(h4.current=!0,!!Fy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>k0.current=t.matches;t.addListener(e),e()}else k0.current=!1}const XU=[...PC,fn,Br],WU=t=>XU.find(VC(t)),P2=new WeakMap;function JU(t,e,n){for(const s in e){const i=e[s],r=n[s];if(gn(i))t.addValue(s,i);else if(gn(r))t.addValue(s,au(i,{owner:t}));else if(r!==i)if(t.hasValue(s)){const o=t.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(s);t.addValue(s,au(o!==void 0?o:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const L2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZU{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Gs.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ut.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:h}=o;this.onUpdate=h,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=um(n),this.isVariantNode=GA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in m){const b=m[g];c[g]!==void 0&&gn(b)&&b.set(c[g],!1)}}mount(e){this.current=e,P2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),h4.current||qU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:k0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){P2.delete(this.current),this.projection&&this.projection.unmount(),Ur(this.notifyUpdate),Ur(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Ha.has(e),i=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&ut.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),r(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in rl){const n=rl[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<L2.length;s++){const i=L2[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=e[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=JU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=au(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(MC(i)||TC(i))?i=parseFloat(i):!WU(i)&&Br.test(n)&&(i=IC(e,n)),this.setBaseTarget(e,gn(i)?i.get():i)),gn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const o=qy(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(s&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!gn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new cv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class f4 extends ZU{constructor(){super(...arguments),this.KeyframeResolver=LC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function e7(t){return window.getComputedStyle(t)}class t7 extends f4{constructor(){super(...arguments),this.type="html",this.renderInstance=eC}readValueFromInstance(e,n){if(Ha.has(n)){const s=mv(n);return s&&s.default||0}else{const s=e7(e),i=(WA(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return t4(e,n)}build(e,n,s){Jy(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return nv(e,n,s)}}class n7 extends f4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ha.has(n)){const s=mv(n);return s&&s.default||0}return n=tC.has(n)?n:Ky(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return iC(e,n,s)}build(e,n,s){Zy(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,i){nC(e,n,s,i)}mount(e){this.isSVGTag=tv(e.tagName),super.mount(e)}}const s7=(t,e)=>Yy(t)?new n7(e):new t7(e,{allowProjection:t!==R.Fragment}),i7=C9({...j8,...QU,...VU,...YU},s7),Q=HL(i7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=t=>{const e=a7(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:o,...l},c)=>R.createElement("svg",{ref:c,...o7,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:m4("lucide",i),...!r&&!l7(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>R.createElement(d,h)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(t,e)=>{const n=R.forwardRef(({className:s,...i},r)=>R.createElement(c7,{ref:r,iconNode:e,className:m4(`lucide-${r7(z2(t))}`,`lucide-${t}`,s),...i}));return n.displayName=z2(t),n};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],d7=ie("archive-restore",u7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],U2=ie("archive",h7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],m7=ie("arrow-left",f7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],D0=ie("arrow-right",p7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Yr=ie("award",g7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],No=ie("bell",x7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ct=ie("book-open",y7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],B2=ie("brain",v7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],p4=ie("calendar-days",b7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],vv=ie("calendar",w7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ii=ie("chart-column",_7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],g4=ie("chart-pie",N7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],T7=ie("check-check",S7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vi=ie("check",E7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],x4=ie("chevron-down",j7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],da=ie("chevron-left",A7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],cu=ie("chevron-right",C7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],I7=ie("chevron-up",R7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],D7=ie("circle-alert",k7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zt=ie("circle-check",M7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],uu=ie("circle-x",O7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ms=ie("clipboard-list",V7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],es=ie("clock",P7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ol=ie("copy",L7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],M0=ie("crown",z7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],y4=ie("database",U7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],bv=ie("download",B7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],$7=ie("external-link",F7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],G7=ie("eye-off",H7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],v4=ie("eye",K7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],O0=ie("file-check",Q7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Gu=ie("file-text",Y7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Dc=ie("flame",q7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],V0=ie("folder-open",X7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],J7=ie("gamepad-2",W7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],b4=ie("globe",Z7);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],wv=ie("graduation-cap",eB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],mf=ie("grip-vertical",tB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],sB=ie("image",nB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],rB=ie("inbox",iB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oB=ie("info",aB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],w4=ie("key-round",lB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],uB=ie("languages",cB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],_4=ie("layers",dB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],N4=ie("layout-dashboard",hB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],P0=ie("link-2",fB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],S4=ie("list-ordered",mB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],gB=ie("lock",pB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],T4=ie("log-out",xB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],vB=ie("mail",yB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],wB=ie("medal",bB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],NB=ie("megaphone",_B);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],L0=ie("message-circle",SB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],F2=ie("message-square",TB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],jB=ie("moon",EB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],CB=ie("music",AB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],IB=ie("package",RB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],DB=ie("palette",kB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pf=ie("pen-line",MB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],E4=ie("pen-tool",OB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],$2=ie("pin",VB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ft=ie("plus",PB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Es=ie("rotate-ccw",LB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ki=ie("search",zB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_v=ie("send",UB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j4=ie("settings",BB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],$B=ie("shield",FB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],fm=ie("shuffle",HB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],du=ie("sparkles",GB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],A4=ie("star",KB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],pa=ie("target",QB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]],ah=ie("text-cursor-input",YB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Fp=ie("timer",qB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Di=ie("trash-2",XB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ku=ie("trending-up",WB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Mi=ie("triangle-alert",JB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Qu=ie("trophy",ZB);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],C4=ie("type",eF);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],nF=ie("user-minus",tF);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],iF=ie("user-plus",sF);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],R4=ie("user",rF);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Mn=ie("users",aF);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],lF=ie("video",oF);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zt=ie("x",cF);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hu=ie("zap",uF),I4=R.createContext(null);function xs(){const t=R.useContext(I4);if(!t)throw new Error("useToast must be inside ToastProvider");return t}const dF={success:zt,error:uu,warning:Mi,info:oB},hF={success:{bg:"bg-neon-green/10",border:"border-neon-green/30",text:"text-neon-green",shadow:"shadow-[0_0_30px_rgba(0,255,136,0.1)]"},error:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",shadow:"shadow-[0_0_30px_rgba(239,68,68,0.1)]"},warning:{bg:"bg-neon-orange/10",border:"border-neon-orange/30",text:"text-neon-orange",shadow:"shadow-[0_0_30px_rgba(255,165,0,0.1)]"},info:{bg:"bg-neon-blue/10",border:"border-neon-blue/30",text:"text-neon-blue",shadow:"shadow-[0_0_30px_rgba(0,209,255,0.1)]"}};let fF=0;function mF({children:t}){const[e,n]=R.useState([]),s=R.useCallback((d,h="info",f=4e3)=>{const m=++fF;return n(g=>[...g,{id:m,message:d,type:h}]),f>0&&setTimeout(()=>{n(g=>g.filter(b=>b.id!==m))},f),m},[]),i=R.useCallback(d=>{n(h=>h.filter(f=>f.id!==d))},[]),r=R.useCallback((d,h)=>s(d,"success",h),[s]),o=R.useCallback((d,h)=>s(d,"error",h),[s]),l=R.useCallback((d,h)=>s(d,"warning",h),[s]),c=R.useCallback((d,h)=>s(d,"info",h),[s]);return a.jsxs(I4.Provider,{value:{addToast:s,removeToast:i,success:r,error:o,warning:l,info:c},children:[t,a.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 max-w-sm w-full pointer-events-none",style:{maxWidth:"380px"},children:a.jsx(Vn,{mode:"popLayout",children:e.map(d=>{const h=dF[d.type],f=hF[d.type];return a.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:100,scale:.9},transition:{type:"spring",stiffness:400,damping:30},className:`pointer-events-auto flex items-start gap-3 px-4 py-3.5 rounded-xl border backdrop-blur-2xl ${f.bg} ${f.border} ${f.shadow}`,children:[a.jsx(h,{size:18,className:`${f.text} mt-0.5 shrink-0`}),a.jsx("p",{className:"text-sm text-white/90 font-medium flex-1 leading-relaxed",children:d.message}),a.jsx("button",{onClick:()=>i(d.id),className:"text-white/30 hover:text-white/60 transition-colors shrink-0 mt-0.5",children:a.jsx(Zt,{size:14})})]},d.id)})})})]})}const k4=R.createContext(null);function pF(){const t=R.useContext(k4);if(!t)throw new Error("useNotifications must be inside NotificationProvider");return t}function gF({children:t}){const{user:e,isTeacher:n,isStudent:s}=ft(),{classes:i,assignments:r,submissions:o,announcements:l,classMessages:c,classMaterials:d}=vn(),[h,f]=R.useState(new Set),[m,g]=R.useState([]),[b,N]=R.useState(!0);R.useEffect(()=>{if(!e){f(new Set),g([]),N(!1);return}(async()=>{try{const L=Ce(fe,"notification_reads",e.uid),T=await or(L);T.exists()&&f(new Set(T.data().readIds||[]))}catch(L){console.error("Error loading read notifications:",L)}finally{N(!1)}})()},[e]),R.useEffect(()=>{if(!e||b)return;const k=[],L=new Date;if(s){l.forEach(v=>{var P,O,B;if(!((P=v.readBy)==null?void 0:P.includes(e.uid))){const z=i.find($=>$.id===v.classId);k.push({id:`ann-${v.id}`,type:"announcement",title:"New Announcement",message:`${(z==null?void 0:z.name)||"Class"}: ${((O=v.content)==null?void 0:O.substring(0,80))||"New announcement posted"}${((B=v.content)==null?void 0:B.length)>80?"...":""}`,icon:"megaphone",color:"blue",createdAt:v.createdAt,link:`/classes/${v.classId}`,pinned:v.pinned})}});const E=i.map(v=>v.id),j=o.filter(v=>v.studentId===e.uid).map(v=>v.assignmentId);r.forEach(v=>{if(!E.includes(v.classId)||j.includes(v.id))return;const V=new Date(v.dueDate),P=(V-L)/(1e3*60*60);if(P>0&&P<=48){const O=i.find(z=>z.id===v.classId),B=Math.round(P);k.push({id:`due-${v.id}`,type:"due_soon",title:"Assignment Due Soon",message:`"${v.title}" in ${(O==null?void 0:O.name)||"class"} is due in ${B<24?`${B}h`:`${Math.round(B/24)}d`}`,icon:"clock",color:"orange",createdAt:new Date(V.getTime()-48*60*60*1e3).toISOString(),link:`/assignments/${v.id}`})}if(P<0){const O=i.find(B=>B.id===v.classId);k.push({id:`overdue-${v.id}`,type:"overdue",title:"Assignment Overdue",message:`"${v.title}" in ${(O==null?void 0:O.name)||"class"} was due ${xF(V)}`,icon:"alert",color:"red",createdAt:v.dueDate,link:`/assignments/${v.id}`})}}),o.forEach(v=>{if(v.studentId!==e.uid||v.grade==null)return;const V=r.find(z=>z.id===v.assignmentId);if(!V)return;const P=i.find(z=>z.id===V.classId),O=V.totalPoints||100,B=Math.round(v.grade/O*100);k.push({id:`grade-${v.id}`,type:"graded",title:"Assignment Graded",message:`"${V.title}" in ${(P==null?void 0:P.name)||"class"}: ${v.grade}/${O} (${B}%)`,icon:"star",color:B>=80?"green":B>=60?"orange":"red",createdAt:v.gradedAt||v.submittedAt,link:"/grades"})}),r.forEach(v=>{if(!E.includes(v.classId))return;const V=new Date(v.createdAt);if((L-V)/(1e3*60*60*24)<=7&&!j.includes(v.id)){const O=i.find(B=>B.id===v.classId);k.push({id:`new-${v.id}`,type:"new_assignment",title:"New Assignment",message:`"${v.title}" posted in ${(O==null?void 0:O.name)||"class"}`,icon:"book",color:"purple",createdAt:v.createdAt,link:`/assignments/${v.id}`})}});const D=new Date(L.getTime()-24*60*60*1e3).toISOString();(c||[]).forEach(v=>{if(v.authorId===e.uid||v.createdAt<D)return;const V=i.find(P=>P.id===v.classId);k.push({id:`chat-${v.id}`,type:"chat_message",title:"New Chat Message",message:`${v.authorName||"Someone"} in ${(V==null?void 0:V.name)||"class"}: "${(v.text||"").substring(0,60)}${(v.text||"").length>60?"...":""}"`,icon:"megaphone",color:v.authorRole==="teacher"?"blue":"purple",createdAt:v.createdAt,link:`/classes/${v.classId}`})});const A=i.map(v=>v.id);(d||[]).forEach(v=>{if(!A.includes(v.classId))return;const V=new Date(v.createdAt);if((L-V)/(1e3*60*60*24)>7)return;const O=i.find(B=>B.id===v.classId);k.push({id:`material-${v.id}`,type:"new_material",title:" New Material Available",message:`${(O==null?void 0:O.name)||"Your class"}: "${v.title}" was added by your teacher`,icon:"folder",color:"green",createdAt:v.createdAt,link:`/classes/${v.classId}?tab=materials`})})}else if(n){const E=o.filter(A=>A.grade==null),j=i.map(A=>A.id);E.forEach(A=>{const v=r.find(P=>P.id===A.assignmentId);if(!v||!j.includes(v.classId))return;const V=i.find(P=>P.id===v.classId);k.push({id:`sub-${A.id}`,type:"submission",title:"New Submission",message:`New submission for "${v.title}" in ${(V==null?void 0:V.name)||"class"}`,icon:"inbox",color:"blue",createdAt:A.submittedAt,link:"/assignments"})}),r.forEach(A=>{var z;if(!j.includes(A.classId)||new Date(A.dueDate)>L)return;const V=i.find($=>$.id===A.classId),P=((z=V==null?void 0:V.students)==null?void 0:z.length)||0;if(P===0)return;const O=o.filter($=>$.assignmentId===A.id).length;O/P*100<50&&k.push({id:`low-${A.id}`,type:"low_completion",title:"Low Completion Rate",message:`"${A.title}" in ${(V==null?void 0:V.name)||"class"}: only ${O}/${P} students submitted`,icon:"alert",color:"orange",createdAt:A.dueDate,link:"/assignments"})});const D=new Date(L.getTime()-24*60*60*1e3).toISOString();(c||[]).forEach(A=>{if(A.authorId===e.uid||A.createdAt<D)return;const v=i.find(V=>V.id===A.classId);v&&k.push({id:`chat-${A.id}`,type:"chat_message",title:"New Chat Message",message:`${A.authorName||"Someone"} in ${(v==null?void 0:v.name)||"class"}: "${(A.text||"").substring(0,60)}${(A.text||"").length>60?"...":""}"`,icon:"megaphone",color:"blue",createdAt:A.createdAt,link:`/classes/${A.classId}`})})}const T=new Map;k.forEach(E=>{T.has(E.id)||T.set(E.id,E)});const p=Array.from(T.values()).sort((E,j)=>new Date(j.createdAt)-new Date(E.createdAt));g(p)},[e,n,s,i,r,o,l,c,d,b]);const C=R.useCallback(async k=>{if(e){f(L=>{const T=new Set(L);return T.add(k),T});try{const L=Ce(fe,"notification_reads",e.uid),T=await or(L);if(T.exists()){const p=T.data().readIds||[];p.includes(k)||await It(L,{readIds:[...p,k]})}else await si(L,{readIds:[k],updatedAt:new Date().toISOString()})}catch(L){console.error("Error marking notification as read:",L)}}},[e]),w=R.useCallback(async()=>{if(!e)return;const k=m.map(L=>L.id);f(new Set(k));try{const L=Ce(fe,"notification_reads",e.uid);await si(L,{readIds:k,updatedAt:new Date().toISOString()})}catch(L){console.error("Error marking all notifications as read:",L)}},[e,m]),y=R.useCallback(k=>h.has(k),[h]),S=m.filter(k=>!h.has(k.id)).length,I={notifications:m,unreadCount:S,markAsRead:C,markAllAsRead:w,isRead:y,loading:b};return a.jsx(k4.Provider,{value:I,children:t})}function xF(t){const e=new Date,n=new Date(t),s=e-n,i=Math.floor(s/(1e3*60)),r=Math.floor(s/(1e3*60*60)),o=Math.floor(s/(1e3*60*60*24));return i<60?`${i}m ago`:r<24?`${r}h ago`:o<7?`${o}d ago`:n.toLocaleDateString()}const yF=[{to:"/dashboard",icon:N4,label:"Dashboard"},{to:"/classes",icon:Ct,label:"My Classes"},{to:"/students",icon:Mn,label:"Students"},{to:"/assignments",icon:ms,label:"Assignments"},{to:"/grades",icon:Ii,label:"Gradebook"},{to:"/question-bank",icon:y4,label:"Question Bank"},{to:"/reports",icon:g4,label:"Reports"},{to:"/settings",icon:j4,label:"Settings"}],vF=[{to:"/dashboard",icon:N4,label:"Dashboard"},{to:"/my-classes",icon:Ct,label:"My Classes"},{to:"/assignments",icon:ms,label:"Assignments"},{to:"/grades",icon:Ii,label:"My Grades"},{to:"/calendar",icon:p4,label:"Calendar"},{to:"/achievements",icon:Qu,label:"Achievements"},{to:"/practice",icon:J7,label:"Practice"},{to:"/settings",icon:j4,label:"Settings"}];function bF({mobileOpen:t,onClose:e}){var m,g;const{userProfile:n,isTeacher:s,isAdmin:i,logout:r}=ft(),o=yn(),l=Hr(),c=s?yF:vF;R.useEffect(()=>{t&&e&&e()},[l.pathname]);const d=async()=>{await r(),o("/")},f=i&&s?{label:"Maestro  Admin",bgClass:"bg-amber-500/10 text-amber-400 border border-amber-500/20",dotClass:"bg-amber-400"}:s?{label:"Maestro",bgClass:"bg-neon-purple/10 text-neon-purple border border-neon-purple/20",dotClass:"bg-neon-purple"}:{label:"Estudiante",bgClass:"bg-neon-green/10 text-neon-green border border-neon-green/20",dotClass:"bg-neon-green"};return a.jsxs("aside",{className:`fixed left-0 top-0 h-full z-40 transition-all duration-300 flex flex-col w-64
                bg-surface-950/95 backdrop-blur-2xl border-r border-white/[0.06]
                ${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"p-5 flex items-center justify-between border-b border-white/[0.06]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center flex-shrink-0",children:a.jsx(wv,{size:22,className:"text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-display font-bold text-base bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:"EnglishMaster"}),a.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-widest",children:"Pro"})]})]}),a.jsx("button",{onClick:e,className:"lg:hidden w-8 h-8 rounded-lg bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white transition-colors",children:a.jsx(Zt,{size:16})})]}),a.jsx("div",{className:"px-5 pt-4 pb-2",children:a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider ${f.bgClass}`,children:[a.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${f.dotClass}`}),f.label]})}),a.jsx("nav",{className:"flex-1 py-2 px-3 space-y-1 overflow-y-auto",children:c.map(b=>a.jsxs(i5,{to:b.to,className:({isActive:N})=>`flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200
              ${N?"bg-neon-blue/10 text-neon-blue shadow-[inset_0_0_20px_rgba(0,209,255,0.05)]":"text-white/50 hover:text-white/80 hover:bg-white/[0.04]"}`,children:[a.jsx(b.icon,{size:20,className:"flex-shrink-0"}),a.jsx("span",{children:b.label})]},b.to))}),a.jsxs("div",{className:"p-3 border-t border-white/[0.06]",children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.03]",children:[a.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:((g=(m=n==null?void 0:n.displayName)==null?void 0:m[0])==null?void 0:g.toUpperCase())||"?"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:n==null?void 0:n.displayName}),a.jsx("p",{className:"text-xs text-white/40 truncate",children:n==null?void 0:n.email})]})]}),a.jsxs("button",{onClick:d,className:"mt-2 w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm text-white/40 hover:text-red-400 hover:bg-red-500/10 transition-all duration-200",children:[a.jsx(T4,{size:18}),a.jsx("span",{children:"Sign Out"})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsxs("p",{className:"text-[10px] text-white/20 font-medium tracking-widest uppercase",children:["Hecho por ",a.jsx("a",{href:"https://fernelydev.com/",target:"_blank",rel:"noopener noreferrer",className:"text-neon-blue hover:underline",children:"FernelyDev"})]})})]})]})}function wF(){const[t,e]=R.useState(!1);return a.jsxs("div",{className:"min-h-screen bg-surface-950 relative",children:[a.jsx("div",{className:"orb orb-1"}),a.jsx("div",{className:"orb orb-2"}),a.jsx("div",{className:"orb orb-3"}),a.jsx(bF,{mobileOpen:t,onClose:()=>e(!1)}),t&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden",onClick:()=>e(!1)}),a.jsxs("main",{className:"lg:ml-64 relative z-10 min-h-screen transition-all duration-300",children:[a.jsxs("div",{className:"lg:hidden sticky top-0 z-20 px-4 py-3 bg-surface-950/80 backdrop-blur-xl border-b border-white/[0.06] flex items-center gap-3",children:[a.jsx("button",{onClick:()=>e(!0),className:"w-10 h-10 rounded-xl bg-white/[0.04] border border-white/[0.08] flex items-center justify-center text-white/60 hover:text-white hover:border-neon-blue/30 transition-all",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[a.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),a.jsx("line",{x1:"3",y1:"12",x2:"15",y2:"12"}),a.jsx("line",{x1:"3",y1:"18",x2:"18",y2:"18"})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),a.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]})}),a.jsx("span",{className:"font-display font-bold text-sm bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:"EnglishMaster"})]})]}),a.jsx($k,{})]})]})}function _F(){const t=yn(),{demoLogin:e}=ft(),[n,s]=R.useState(!1),[i,r]=R.useState(null),[o,l]=R.useState(!1),c=d=>{e(d),t("/dashboard")};return a.jsxs("div",{className:"min-h-screen bg-surface-950 relative overflow-hidden",children:[a.jsx("div",{className:"orb orb-1"}),a.jsx("div",{className:"orb orb-2"}),a.jsx("div",{className:"orb orb-3"}),a.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"60px 60px"}}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("header",{className:"flex items-center justify-between px-8 py-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center",children:a.jsx(wv,{size:22,className:"text-white"})}),a.jsx("span",{className:"font-display font-bold text-lg bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:"EnglishMaster Pro"})]})}),a.jsxs("main",{className:"max-w-6xl mx-auto px-8 pt-16 pb-24",children:[a.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-neon-blue/10 border border-neon-blue/20 mb-8",children:[a.jsx(du,{size:14,className:"text-neon-blue"}),a.jsx("span",{className:"text-xs font-medium text-neon-blue",children:"Premium Class Management System"})]}),a.jsxs("h1",{className:"font-display text-5xl md:text-7xl font-extrabold mb-6 leading-tight",children:[a.jsx("span",{className:"text-white",children:"Master English"}),a.jsx("br",{}),a.jsx("span",{className:"bg-gradient-to-r from-neon-blue via-neon-purple to-neon-pink bg-clip-text text-transparent",children:"Like Never Before"})]}),a.jsx("p",{className:"text-lg text-white/50 max-w-2xl mx-auto mb-12 leading-relaxed",children:"The ultimate platform for teachers and students. Create classes, manage assignments, track progress, and achieve English fluency with a premium experience."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[a.jsxs("button",{onClick:()=>{r("teacher"),s(!0)},className:"group relative w-72",children:[a.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-neon-blue to-neon-purple rounded-2xl opacity-60 blur group-hover:opacity-100 transition-all duration-300"}),a.jsxs("div",{className:"relative glass-card p-6 flex items-center gap-4 cursor-pointer hover:scale-[1.02] transition-transform",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-neon-blue/20 to-neon-blue/5 border border-neon-blue/20 flex items-center justify-center",children:a.jsx(Ct,{className:"text-neon-blue",size:24})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold text-white",children:"I'm a Teacher"}),a.jsx("p",{className:"text-xs text-white/40",children:"Create & manage classes"})]}),a.jsx(D0,{size:18,className:"text-white/30 ml-auto group-hover:text-neon-blue group-hover:translate-x-1 transition-all"})]})]}),a.jsxs("button",{onClick:()=>{r("student"),s(!0)},className:"group relative w-72",children:[a.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-neon-purple to-neon-pink rounded-2xl opacity-60 blur group-hover:opacity-100 transition-all duration-300"}),a.jsxs("div",{className:"relative glass-card p-6 flex items-center gap-4 cursor-pointer hover:scale-[1.02] transition-transform",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-neon-purple/20 to-neon-purple/5 border border-neon-purple/20 flex items-center justify-center",children:a.jsx(Mn,{className:"text-neon-purple",size:24})}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"font-semibold text-white",children:"I'm a Student"}),a.jsx("p",{className:"text-xs text-white/40",children:"Join & learn"})]}),a.jsx(D0,{size:18,className:"text-white/30 ml-auto group-hover:text-neon-purple group-hover:translate-x-1 transition-all"})]})]})]})]}),a.jsx(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-3xl mx-auto",children:[{value:"50+",label:"Features"},{value:"",label:"Students"},{value:"Real-time",label:"Grading"},{value:"Premium",label:"Experience"}].map((d,h)=>a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsx("p",{className:"text-2xl font-display font-bold bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:d.value}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:d.label})]},h))})]}),a.jsxs("footer",{className:"max-w-6xl mx-auto px-8 py-12 border-t border-white/[0.06] text-center",children:[a.jsxs("p",{className:"text-xs text-white/20 font-medium tracking-widest uppercase mb-2",children:["Hecho por ",a.jsx("a",{href:"https://fernelydev.com/",target:"_blank",rel:"noopener noreferrer",className:"text-neon-blue font-bold hover:underline",children:"FernelyDev"})]}),a.jsxs("p",{className:"text-[10px] text-white/10 uppercase tracking-tighter",children:["EnglishMaster Pro  ",new Date().getFullYear(),"  Premium LMS Experience"]})]})]}),a.jsx(Vn,{children:n&&a.jsx(NF,{role:i,isRegister:o,setIsRegister:l,onClose:()=>{s(!1),l(!1)},onDemoLogin:c})})]})}function NF({role:t,isRegister:e,setIsRegister:n,onClose:s,onDemoLogin:i}){const{login:r,register:o,loginWithStudentCode:l,isProduction:c}=ft(),d=yn(),[h,f]=R.useState(""),[m,g]=R.useState(""),[b,N]=R.useState(""),[C,w]=R.useState(!1),[y,S]=R.useState(""),[I,k]=R.useState(!1);t==="student"&&e&&n(!1);const L=async T=>{T.preventDefault(),S(""),k(!0);try{t==="student"?await l(h,m):e?await o(h,m,b,t):await r(h,m),d("/dashboard")}catch(p){S(p.message||"Authentication failed"),k(!1)}};return a.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:s}),a.jsxs(Q.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"relative w-full max-w-md",children:[a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-neon-blue to-neon-purple rounded-3xl opacity-30 blur-xl"}),a.jsxs("div",{className:"relative glass-card p-8 rounded-2xl",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-14 h-14 mx-auto rounded-2xl bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center mb-4",children:t==="teacher"?a.jsx(Ct,{className:"text-white",size:28}):a.jsx(Mn,{className:"text-white",size:28})}),a.jsx("h2",{className:"text-2xl font-display font-bold text-white",children:e?"Create Account":"Welcome Back"}),a.jsx("p",{className:"text-sm text-white/40 mt-1 capitalize",children:t==="student"?"Enter your credentials":`Sign ${e?"up":"in"} as ${t}`})]}),y&&a.jsx("div",{className:"mb-4 p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-sm text-red-400",children:y}),a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e&&t==="teacher"&&a.jsxs("div",{className:"relative",children:[a.jsx(R4,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{type:"text",placeholder:"Full Name",value:b,onChange:T=>N(T.target.value),className:"input-glass pl-11",required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsx(vB,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{type:"email",placeholder:"Email Address",value:h,onChange:T=>f(T.target.value),className:"input-glass pl-11",required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsx(gB,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{type:C?"text":"password",placeholder:t==="student"?"Access Code (e.g. AB12CD)":"Password",value:m,onChange:T=>g(T.target.value),className:"input-glass pl-11 pr-11",required:!0,maxLength:t==="student"?6:void 0,style:t==="student"?{textTransform:"uppercase",letterSpacing:"2px"}:{}}),a.jsx("button",{type:"button",onClick:()=>w(!C),className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/30 hover:text-white/60",children:C?a.jsx(G7,{size:18}):a.jsx(v4,{size:18})})]}),a.jsx("button",{type:"submit",disabled:I,className:"btn-neon w-full",children:I?"Please wait...":e?"Create Account":t==="student"?"Enter Class":"Sign In"})]}),a.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[a.jsx("div",{className:"flex-1 h-px bg-white/10"}),a.jsx("span",{className:"text-xs text-white/30",children:"or"}),a.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),!c&&a.jsxs("button",{onClick:()=>i(t),className:"mt-4 btn-ghost w-full text-center flex items-center justify-center gap-2",children:[a.jsx(du,{size:16}),"Try Demo Mode"]}),t==="teacher"&&a.jsxs("p",{className:"mt-4 text-center text-sm text-white/40",children:[e?"Already have an account?":"Don't have an account?"," ",a.jsx("button",{onClick:()=>n(!e),className:"text-neon-blue hover:underline",children:e?"Sign In":"Register"})]}),t==="student"&&a.jsx("p",{className:"mt-4 text-center text-xs text-white/30",children:"Don't have a code? Ask your teacher to register you."})]}),a.jsx("p",{className:"text-center text-xs text-white/20 mt-4",children:"Protected by reCAPTCHA and subject to the Google Privacy Policy and Terms of Service. v1.1.0"})]})]})}const SF={megaphone:NB,clock:es,alert:Mi,star:A4,book:Ct,inbox:rB},H2={blue:{bg:"bg-neon-blue/10",border:"border-neon-blue/20",text:"text-neon-blue",dot:"bg-neon-blue",glow:"shadow-[0_0_12px_rgba(0,209,255,0.3)]"},purple:{bg:"bg-neon-purple/10",border:"border-neon-purple/20",text:"text-neon-purple",dot:"bg-neon-purple",glow:"shadow-[0_0_12px_rgba(168,85,247,0.3)]"},green:{bg:"bg-neon-green/10",border:"border-neon-green/20",text:"text-neon-green",dot:"bg-neon-green",glow:"shadow-[0_0_12px_rgba(0,255,136,0.3)]"},orange:{bg:"bg-neon-orange/10",border:"border-neon-orange/20",text:"text-neon-orange",dot:"bg-neon-orange",glow:"shadow-[0_0_12px_rgba(255,165,0,0.3)]"},red:{bg:"bg-red-500/10",border:"border-red-500/20",text:"text-red-400",dot:"bg-red-500",glow:"shadow-[0_0_12px_rgba(239,68,68,0.3)]"}};function TF(t){if(!t)return"";const e=new Date,n=new Date(t),s=e-n,i=Math.floor(s/(1e3*60)),r=Math.floor(s/(1e3*60*60)),o=Math.floor(s/(1e3*60*60*24));return i<1?"Just now":i<60?`${i}m ago`:r<24?`${r}h ago`:o<7?`${o}d ago`:n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function EF(){const[t,e]=R.useState(!1),[n,s]=R.useState("all"),i=R.useRef(null),r=yn(),{notifications:o,unreadCount:l,markAsRead:c,markAllAsRead:d,isRead:h}=pF();R.useEffect(()=>{function g(b){i.current&&!i.current.contains(b.target)&&e(!1)}if(t)return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[t]),R.useEffect(()=>{function g(b){b.key==="Escape"&&e(!1)}if(t)return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[t]);const f=n==="unread"?o.filter(g=>!h(g.id)):o,m=g=>{c(g.id),g.link&&(r(g.link),e(!1))};return a.jsxs("div",{className:"relative",ref:i,children:[a.jsxs("button",{onClick:()=>e(!t),className:`relative w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 ${t?"bg-neon-blue/20 border border-neon-blue/40 text-neon-blue shadow-[0_0_20px_rgba(0,209,255,0.2)]":"bg-white/[0.04] border border-white/[0.06] text-white/40 hover:text-white hover:border-neon-blue/30"}`,children:[a.jsx(No,{size:18,className:t?"animate-wiggle":""}),a.jsx(Vn,{children:l>0&&a.jsx(Q.span,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"absolute -top-1.5 -right-1.5 min-w-[20px] h-5 px-1 rounded-full bg-gradient-to-r from-neon-blue to-neon-purple text-[10px] font-bold flex items-center justify-center text-white shadow-[0_0_12px_rgba(0,209,255,0.4)]",children:l>99?"99+":l})})]}),a.jsx(Vn,{children:t&&a.jsxs(Q.div,{initial:{opacity:0,y:-8,scale:.96},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.96},transition:{type:"spring",stiffness:400,damping:30},className:"absolute right-0 top-[calc(100%+8px)] w-[380px] max-h-[520px] rounded-2xl border border-white/[0.08] bg-surface-950/95 backdrop-blur-2xl shadow-2xl shadow-black/40 overflow-hidden z-50",children:[a.jsxs("div",{className:"px-5 pt-5 pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2.5",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 border border-neon-blue/20 flex items-center justify-center",children:a.jsx(No,{size:14,className:"text-neon-blue"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-white",children:"Notifications"}),a.jsx("p",{className:"text-[11px] text-white/30",children:l>0?`${l} unread`:"All caught up!"})]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[l>0&&a.jsxs("button",{onClick:d,className:"flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-[11px] font-medium text-neon-green/70 hover:text-neon-green hover:bg-neon-green/10 transition-all",title:"Mark all as read",children:[a.jsx(T7,{size:12}),a.jsx("span",{children:"Read all"})]}),a.jsx("button",{onClick:()=>e(!1),className:"w-7 h-7 rounded-lg flex items-center justify-center text-white/20 hover:text-white/50 hover:bg-white/5 transition-all",children:a.jsx(Zt,{size:14})})]})]}),a.jsxs("div",{className:"flex gap-1 p-0.5 rounded-lg bg-white/[0.03] border border-white/[0.04]",children:[a.jsxs("button",{onClick:()=>s("all"),className:`flex-1 py-1.5 rounded-md text-[11px] font-medium transition-all ${n==="all"?"bg-white/[0.08] text-white shadow-sm":"text-white/30 hover:text-white/50"}`,children:["All (",o.length,")"]}),a.jsxs("button",{onClick:()=>s("unread"),className:`flex-1 py-1.5 rounded-md text-[11px] font-medium transition-all ${n==="unread"?"bg-white/[0.08] text-white shadow-sm":"text-white/30 hover:text-white/50"}`,children:["Unread (",l,")"]})]})]}),a.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-white/[0.06] to-transparent"}),a.jsx("div",{className:"overflow-y-auto max-h-[350px] notification-scroll",children:f.length===0?a.jsxs("div",{className:"py-12 text-center",children:[a.jsx("div",{className:"w-14 h-14 mx-auto mb-3 rounded-2xl bg-white/[0.03] border border-white/[0.06] flex items-center justify-center",children:a.jsx(No,{size:22,className:"text-white/10"})}),a.jsx("p",{className:"text-sm text-white/20 font-medium",children:n==="unread"?"No unread notifications":"No notifications yet"}),a.jsx("p",{className:"text-[11px] text-white/10 mt-1",children:n==="unread"?"You're all caught up! ":"Check back later"})]}):a.jsx("div",{className:"py-1",children:f.map((g,b)=>{const N=SF[g.icon]||No,C=H2[g.color]||H2.blue,w=h(g.id);return a.jsxs(Q.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:b*.03},onClick:()=>m(g),className:`w-full text-left px-5 py-3.5 flex items-start gap-3 transition-all duration-200 relative group ${w?"opacity-50 hover:opacity-80":"hover:bg-white/[0.03]"}`,children:[!w&&a.jsx("span",{className:`absolute left-1.5 top-1/2 -translate-y-1/2 w-1.5 h-1.5 rounded-full ${C.dot} ${C.glow}`}),a.jsx("div",{className:`w-9 h-9 rounded-xl ${C.bg} border ${C.border} flex items-center justify-center shrink-0 mt-0.5`,children:a.jsx(N,{size:15,className:C.text})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:`text-xs font-semibold ${w?"text-white/40":"text-white/80"}`,children:g.title}),g.pinned&&a.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-neon-orange/20 text-neon-orange font-bold",children:"PINNED"})]}),a.jsx("p",{className:`text-[11px] leading-relaxed mt-0.5 ${w?"text-white/20":"text-white/40"}`,children:g.message}),a.jsx("p",{className:"text-[10px] text-white/15 mt-1",children:TF(g.createdAt)})]}),!w&&a.jsx("button",{onClick:y=>{y.stopPropagation(),c(g.id)},className:"opacity-0 group-hover:opacity-100 w-7 h-7 rounded-lg flex items-center justify-center text-white/20 hover:text-neon-green hover:bg-neon-green/10 transition-all shrink-0 mt-1",title:"Mark as read",children:a.jsx(vi,{size:12})})]},g.id)})})}),o.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-white/[0.06] to-transparent"}),a.jsx("div",{className:"px-5 py-3 flex items-center justify-center",children:a.jsxs("p",{className:"text-[11px] text-white/15",children:["Showing ",f.length," of ",o.length," notifications"]})})]})]})})]})}function Ht({title:t,subtitle:e,actions:n}){const[s,i]=R.useState(!1);return a.jsxs("header",{className:"sticky top-0 z-30 bg-surface-950/60 backdrop-blur-xl border-b border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-display font-bold text-white",children:t}),e&&a.jsx("p",{className:"text-sm text-white/40 mt-0.5",children:e})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>i(!s),className:"w-10 h-10 rounded-xl bg-white/[0.04] border border-white/[0.06] flex items-center justify-center text-white/40 hover:text-white hover:border-neon-blue/30 transition-all",children:a.jsx(ki,{size:18})}),a.jsx(EF,{}),n]})]}),s&&a.jsx("div",{className:"px-6 pb-4 animate-slide-down",children:a.jsxs("div",{className:"relative",children:[a.jsx(ki,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{autoFocus:!0,placeholder:"Search classes, students, assignments...",className:"input-glass pl-11",onKeyDown:r=>r.key==="Escape"&&i(!1)})]})})]})}function jF(){var w;const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,allStudents:i,announcements:r,getClassSubmissionStats:o}=vn(),l=yn(),c=e.filter(y=>!y.archived),d=new Set(c.flatMap(y=>y.students||[])).size,h=n.length,f=s.filter(y=>y.status==="pending"||y.grade==null&&y.status!=="graded"),m=s.sort((y,S)=>new Date(S.submittedAt)-new Date(y.submittedAt)).slice(0,6),g=s.filter(y=>y.grade!=null),b=g.length>0?Math.round(g.reduce((y,S)=>{const I=n.find(L=>L.id===S.assignmentId),k=(I==null?void 0:I.totalPoints)||100;return y+S.grade/k*100},0)/g.length):0;r.sort((y,S)=>new Date(S.createdAt)-new Date(y.createdAt)).slice(0,3);const N={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},C={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:`Hello, ${((w=t==null?void 0:t.displayName)==null?void 0:w.split(" ")[0])||"Teacher"}`,subtitle:`${new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}`,actions:a.jsxs("button",{onClick:()=>l("/classes"),className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(Ft,{size:16})," New Class"]})}),a.jsxs(Q.div,{variants:N,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsx(Q.div,{variants:C,className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[{icon:Ct,label:"Classes",value:c.length,color:"neon-blue",glow:"rgba(0,209,255,0.08)"},{icon:Mn,label:"Students",value:d,color:"neon-green",glow:"rgba(0,255,136,0.08)"},{icon:ms,label:"Assignments",value:h,color:"neon-purple",glow:"rgba(139,92,246,0.08)"},{icon:Ii,label:"Avg Grade",value:`${b}%`,color:"neon-orange",glow:"rgba(255,165,0,0.08)"}].map((y,S)=>a.jsxs("div",{className:"glass-card p-3 sm:p-5 group hover:scale-[1.02] transition-all cursor-pointer",style:{boxShadow:`0 0 30px ${y.glow}`},onClick:()=>l(S===0?"/classes":S===1?"/students":S===2?"/assignments":"/grades"),children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[a.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-${y.color}/10 border border-${y.color}/20 flex items-center justify-center`,children:a.jsx(y.icon,{size:16,className:`text-${y.color}`})}),a.jsx("p",{className:"text-xs sm:text-sm text-white/40",children:y.label})]}),a.jsx("p",{className:`text-xl sm:text-3xl font-display font-black text-${y.color}`,children:y.value})]},S))}),f.length>0&&a.jsx(Q.div,{variants:C,className:"glass-card p-4 border-l-4 border-l-neon-orange bg-neon-orange/5 cursor-pointer hover:bg-neon-orange/10 transition-colors",onClick:()=>l("/grades"),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Mi,{size:20,className:"text-neon-orange"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-neon-orange font-semibold text-sm",children:[f.length," submissions awaiting grading"]}),a.jsx("p",{className:"text-xs text-white/30 mt-0.5",children:"Click to open gradebook"})]}),a.jsx("span",{className:"px-3 py-1 rounded-lg bg-neon-orange/10 border border-neon-orange/20 text-neon-orange font-bold text-sm",children:f.length})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Q.div,{variants:C,className:"glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-base font-display font-bold text-white flex items-center gap-2",children:[a.jsx(O0,{size:18,className:"text-neon-blue"})," Recent Submissions"]}),a.jsx("button",{onClick:()=>l("/grades"),className:"text-xs text-neon-blue hover:text-neon-blue/80 transition-colors",children:"View All"})]}),m.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"No submissions yet"}):a.jsx("div",{className:"space-y-3",children:m.map(y=>{const S=n.find(L=>L.id===y.assignmentId),I=i.find(L=>L.id===y.studentId),k=y.grade!=null;return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${k?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-neon-orange/10 text-neon-orange border border-neon-orange/20"}`,children:k?a.jsx(zt,{size:16}):a.jsx(es,{size:16})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:(I==null?void 0:I.displayName)||y.studentName||"Student"}),a.jsx("p",{className:"text-xs text-white/30 truncate",children:S==null?void 0:S.title})]}),a.jsx("div",{className:"text-right shrink-0",children:k?a.jsxs("span",{className:"text-sm font-bold text-neon-green",children:[y.grade,"/",(S==null?void 0:S.totalPoints)||100]}):a.jsx("span",{className:"text-xs text-neon-orange",children:"Pending"})})]},y.id)})})]}),a.jsxs(Q.div,{variants:C,className:"glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-base font-display font-bold text-white flex items-center gap-2",children:[a.jsx(Ct,{size:18,className:"text-neon-purple"})," Your Classes"]}),a.jsx("button",{onClick:()=>l("/classes"),className:"text-xs text-neon-blue hover:text-neon-blue/80 transition-colors",children:"Manage"})]}),c.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"Create your first class!"}):a.jsx("div",{className:"space-y-3",children:c.slice(0,5).map(y=>{var I;o(y.id);const S=n.filter(k=>k.classId===y.id);return a.jsxs("button",{onClick:()=>l(`/classes/${y.id}`),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.04] hover:border-neon-blue/20 transition-all text-left group",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 flex items-center justify-center shrink-0 border border-white/5",children:a.jsx(Ct,{size:18,className:"text-neon-blue"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:y.name}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/30 mt-0.5",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Mn,{size:10})," ",((I=y.students)==null?void 0:I.length)||0]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ms,{size:10})," ",S.length]})]})]}),a.jsx("div",{className:"text-right shrink-0",children:a.jsx("p",{className:"text-xs font-mono text-neon-blue/50",children:y.code})})]},y.id)})})]})]}),a.jsxs(Q.div,{variants:C,children:[a.jsx("h3",{className:"text-sm text-white/30 uppercase tracking-wider mb-3",children:"Quick Actions"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{icon:Ft,label:"New Class",action:()=>l("/classes"),color:"neon-blue"},{icon:ms,label:"New Assignment",action:()=>l("/assignments"),color:"neon-green"},{icon:Yr,label:"Grade Work",action:()=>l("/grades"),color:"neon-purple"},{icon:Mn,label:"Manage Students",action:()=>l("/students"),color:"neon-orange"}].map((y,S)=>a.jsxs("button",{onClick:y.action,className:"glass-card p-4 text-center hover:scale-[1.03] transition-all group",children:[a.jsx("div",{className:`w-10 h-10 mx-auto rounded-xl bg-${y.color}/10 border border-${y.color}/20 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform`,children:a.jsx(y.icon,{size:20,className:`text-${y.color}`})}),a.jsx("p",{className:"text-xs sm:text-sm font-medium text-white/60 group-hover:text-white transition-colors",children:y.label})]},S))})]})]})]})}function AF(){const{classes:t,addClass:e,deleteClass:n,archiveClass:s,unarchiveClass:i,getClassAssignments:r}=vn(),{userProfile:o,isTeacher:l}=ft(),c=xs(),d=yn(),[h,f]=R.useState(!1),[m,g]=R.useState(null),[b,N]=R.useState(""),[C,w]=R.useState(!1),[y,S]=R.useState(null),I=(A,v)=>{v==null||v.stopPropagation(),navigator.clipboard.writeText(A),g(A),c.success("Code copied!"),setTimeout(()=>g(null),2e3)},k=async(A,v)=>{v==null||v.stopPropagation();try{await n(A),c.success("Class deleted"),S(null)}catch{c.error("Failed to delete class")}},L=async(A,v,V)=>{V==null||V.stopPropagation();try{v?(await i(A),c.info("Class restored")):(await s(A),c.info("Class archived"))}catch{c.error("Failed to update class")}},T=R.useMemo(()=>t.filter(A=>{if(!C&&A.archived||C&&!A.archived)return!1;if(b){const v=b.toLowerCase();return A.name.toLowerCase().includes(v)||(A.description||"").toLowerCase().includes(v)}return!0}),[t,b,C]),p=t.filter(A=>A.archived).length,E={blue:{bg:"from-neon-blue to-blue-600"},purple:{bg:"from-neon-purple to-purple-600"},green:{bg:"from-neon-green to-emerald-600"},orange:{bg:"from-neon-orange to-amber-600"}},j={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},D={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"My Classes",subtitle:`${t.filter(A=>!A.archived).length} active class${t.filter(A=>!A.archived).length!==1?"es":""}`,actions:l&&a.jsxs("button",{onClick:()=>f(!0),className:"btn-neon flex items-center gap-2 text-sm px-4 py-2",children:[a.jsx(Ft,{size:16})," Create"]})}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(ki,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20"}),a.jsx("input",{value:b,onChange:A=>N(A.target.value),placeholder:"Search classes...",className:"input-glass pl-10 text-sm"})]}),p>0&&a.jsxs("button",{onClick:()=>w(!C),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-xs transition-all ${C?"bg-neon-orange/10 border border-neon-orange/20 text-neon-orange":"bg-white/[0.04] border border-white/[0.08] text-white/40 hover:text-white/60"}`,children:[a.jsx(U2,{size:14})," ",C?`Archived (${p})`:`Show Archived (${p})`]})]}),a.jsxs(Q.div,{variants:j,initial:"hidden",animate:"show",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-5",children:[T.map(A=>{var P;const v=E[A.color]||E.blue,V=r(A.id);return a.jsx(Q.div,{variants:D,children:a.jsxs("div",{className:`glass-card group hover:border-white/10 cursor-pointer transition-all duration-300 overflow-hidden ${A.archived?"opacity-60":""}`,onClick:()=>d(`/classes/${A.id}`),children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${v.bg}`}),a.jsxs("div",{className:"p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[a.jsx("div",{className:`w-10 h-10 sm:w-11 sm:h-11 rounded-xl bg-gradient-to-br ${v.bg} flex items-center justify-center shadow-lg shrink-0`,children:a.jsx(Ct,{size:18,className:"text-white"})}),a.jsxs("button",{onClick:O=>I(A.code,O),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-white/[0.04] border border-white/[0.06] text-xs text-white/50 hover:text-white hover:border-neon-blue/30 transition-all",children:[m===A.code?a.jsx(vi,{size:12,className:"text-neon-green"}):a.jsx(ol,{size:12}),a.jsx("span",{className:"font-mono",children:A.code})]})]}),a.jsx("h3",{className:"font-semibold text-white mb-1 group-hover:text-neon-blue transition-colors line-clamp-1 text-sm sm:text-base",children:A.name}),a.jsx("p",{className:"text-xs sm:text-sm text-white/40 line-clamp-2 mb-4",children:A.description}),a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-white/40",children:[a.jsx(Mn,{size:13})," ",((P=A.students)==null?void 0:P.length)||0]}),a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-white/40",children:[a.jsx(ms,{size:13})," ",V.length]}),a.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-white/40 hidden sm:flex",children:[a.jsx(es,{size:13})," ",A.level||"All"]})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:O=>O.stopPropagation(),children:[a.jsx("button",{onClick:O=>L(A.id,A.archived,O),className:"p-1.5 rounded-lg text-white/20 hover:text-neon-orange hover:bg-neon-orange/10 transition-all",title:A.archived?"Restore":"Archive",children:A.archived?a.jsx(d7,{size:14}):a.jsx(U2,{size:14})}),y===A.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:O=>{O.stopPropagation(),S(null)},className:"text-[10px] text-white/40 px-1.5 py-1 rounded",children:"No"}),a.jsx("button",{onClick:O=>k(A.id,O),className:"text-[10px] text-red-400 bg-red-500/10 px-1.5 py-1 rounded font-bold",children:"Yes"})]}):a.jsx("button",{onClick:O=>{O.stopPropagation(),S(A.id)},className:"p-1.5 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Delete",children:a.jsx(Di,{size:14})})]})]})]})]})},A.id)}),l&&!C&&a.jsx(Q.div,{variants:D,children:a.jsxs("button",{onClick:()=>f(!0),className:"w-full h-full min-h-[200px] rounded-2xl border-2 border-dashed border-white/10 hover:border-neon-blue/30 flex flex-col items-center justify-center gap-3 text-white/30 hover:text-neon-blue transition-all group",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/[0.04] group-hover:bg-neon-blue/10 flex items-center justify-center transition-all",children:a.jsx(Ft,{size:24})}),a.jsx("span",{className:"text-sm font-medium",children:"Create New Class"})]})})]}),T.length===0&&a.jsxs("div",{className:"text-center py-16 text-white/30",children:[a.jsx(Ct,{size:48,className:"mx-auto mb-4 opacity-30"}),a.jsx("p",{className:"text-sm",children:C?"No archived classes":b?"No classes match your search":"No classes yet"})]})]})]}),a.jsx(Vn,{children:h&&a.jsx(CF,{onClose:()=>f(!1),onCreate:e})})]})}function CF({onClose:t,onCreate:e}){const n=xs(),[s,i]=R.useState(""),[r,o]=R.useState(""),[l,c]=R.useState("Beginner"),[d,h]=R.useState(""),[f,m]=R.useState("blue"),[g,b]=R.useState(!1),[N,C]=R.useState(""),w=async y=>{y.preventDefault(),b(!0),C("");try{await e({name:s,description:r,level:l,schedule:d,color:f}),n.success("Class created!"),t()}catch{C("Failed to create class. Please try again."),n.error("Failed to create class"),b(!1)}};return a.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),a.jsxs(Q.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"relative w-full max-w-lg",children:[a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-neon-blue to-neon-purple rounded-3xl opacity-20 blur-xl"}),a.jsxs("div",{className:"relative glass-card p-5 sm:p-6 rounded-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-display font-bold text-white",children:"Create New Class"}),a.jsx("button",{onClick:t,className:"p-2 rounded-lg text-white/40 hover:text-white hover:bg-white/10 transition-all",children:a.jsx(Zt,{size:18})})]}),N&&a.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:N}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Class Name"}),a.jsx("input",{value:s,onChange:y=>i(y.target.value),placeholder:"e.g. English 201",className:"input-glass",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Description"}),a.jsx("textarea",{value:r,onChange:y=>o(y.target.value),placeholder:"What will students learn?",className:"input-glass h-24 resize-none",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Level"}),a.jsxs("select",{value:l,onChange:y=>c(y.target.value),className:"input-glass",children:[a.jsx("option",{value:"Beginner",children:"Beginner"}),a.jsx("option",{value:"Intermediate",children:"Intermediate"}),a.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Schedule"}),a.jsx("input",{value:d,onChange:y=>h(y.target.value),placeholder:"Mon, Wed 9 AM",className:"input-glass"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Color Theme"}),a.jsx("div",{className:"flex gap-3",children:["blue","purple","green","orange"].map(y=>a.jsx("button",{type:"button",onClick:()=>m(y),className:`w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-br ${y==="blue"?"from-neon-blue to-blue-600":y==="purple"?"from-neon-purple to-purple-600":y==="green"?"from-neon-green to-emerald-600":"from-neon-orange to-amber-600"} ${f===y?"ring-2 ring-white ring-offset-2 ring-offset-surface-950":"opacity-50 hover:opacity-80"} transition-all`},y))})]}),a.jsx("button",{type:"submit",disabled:g,className:"btn-neon w-full mt-4 flex items-center justify-center gap-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/30 border-t-white animate-spin"})," Creating..."]}):"Create Class"})]})]})]})]})}function RF(){const{id:t}=iE(),e=yn(),[n]=o5(),{userProfile:s,isTeacher:i,resetStudentCode:r}=ft(),{classes:o,getClassStudents:l,getClassAssignments:c,getClassAnnouncements:d,addAnnouncement:h,deleteAnnouncement:f,pinAnnouncement:m,removeStudentFromClass:g,allStudents:b,updateClass:N,submissions:C,getClassAnalytics:w,exportClassGrades:y,getLeaderboard:S,getAssignmentCompletionRate:I,addClassMessage:k,deleteClassMessage:L,getClassMessages:T,sendTeacherRequest:p,getTeacherRequestsForClass:E,addClassMaterial:j,deleteClassMaterial:D,getClassMaterials:A}=vn(),v=xs(),V=o.find(le=>le.id===t),[P,O]=R.useState(n.get("tab")||(i?"overview":"announcements")),[B,z]=R.useState(!1),[$,U]=R.useState(""),[Y,Z]=R.useState(""),[se,pe]=R.useState(!1),[xe,Be]=R.useState(null),[oe,ee]=R.useState("");R.useRef(null);const[ye,Se]=R.useState(null),[ve,xt]=R.useState(null);if(R.useEffect(()=>{const le=n.get("tab");le&&O(le)},[n]),!V)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("p",{className:"text-white/40",children:"Class not found"})});const tn=l(t),Tn=c(t),Ln=d(t),yt=w(t),He=S(t),Qe=()=>{navigator.clipboard.writeText(V.code),z(!0),v.success("Class code copied!"),setTimeout(()=>z(!1),2e3)},Ze=()=>{if(!Y.trim()){v.warning("Please enter a title");return}h({classId:t,title:Y,content:$,author:(s==null?void 0:s.displayName)||"Teacher"}),Z(""),U(""),v.success("Announcement posted!")},Xe=async le=>{try{await g(t,le),v.success("Student removed from class"),Be(null)}catch{v.error("Failed to remove student")}},ts=async le=>{try{await f(le),v.success("Announcement deleted")}catch{v.error("Failed to delete")}},jl=async(le,Ge)=>{await m(le,!Ge),v.info(Ge?"Unpinned":"Pinned")},Ga=()=>{const le=y(t),Ge=new Blob([le],{type:"text/csv"}),En=URL.createObjectURL(Ge),Rs=document.createElement("a");Rs.href=En,Rs.download=`${V.name}_grades.csv`,Rs.click(),URL.revokeObjectURL(En),v.success("Grades exported!")},Al=i?["overview","students","assignments","announcements","chat","materials"]:["announcements","chat","materials"],Cs={blue:"from-neon-blue to-blue-600",purple:"from-neon-purple to-purple-600",green:"from-neon-green to-emerald-600",orange:"from-neon-orange to-amber-600"};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:V.name,subtitle:`${V.level||""}  ${V.schedule||"No schedule"}`,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:Ga,className:"btn-ghost flex items-center gap-1.5 text-sm px-3 py-2",title:"Export Grades",children:[a.jsx(bv,{size:14})," CSV"]}),a.jsxs("button",{onClick:()=>e("/classes"),className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(m7,{size:16})," Back"]})]})}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card overflow-hidden",children:[a.jsxs("div",{className:`h-24 sm:h-32 bg-gradient-to-r ${Cs[V.color]||Cs.blue} relative`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/20"}),a.jsxs("div",{className:"absolute bottom-3 sm:bottom-4 left-4 sm:left-6 flex items-center gap-3 sm:gap-4",children:[a.jsxs("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:[a.jsx(Ct,{size:24,className:"text-white sm:hidden"}),a.jsx(Ct,{size:32,className:"text-white hidden sm:block"})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-white",children:V.name}),a.jsx("p",{className:"text-xs sm:text-sm text-white/70 line-clamp-1",children:V.description})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-6 px-4 sm:px-6 py-3 sm:py-4 border-b border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mn,{size:14,className:"text-neon-blue"}),a.jsxs("span",{className:"text-xs sm:text-sm text-white/60",children:[tn.length," Students"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ms,{size:14,className:"text-neon-purple"}),a.jsxs("span",{className:"text-xs sm:text-sm text-white/60",children:[Tn.length," Assignments"]})]}),a.jsx("div",{className:"flex-1"}),a.jsxs("button",{onClick:Qe,className:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-neon-blue/10 border border-neon-blue/20 text-xs sm:text-sm text-neon-blue hover:bg-neon-blue/20 transition-all",children:[B?a.jsx(vi,{size:14}):a.jsx(ol,{size:14}),a.jsx("span",{className:"hidden sm:inline",children:"Code:"})," ",V.code]})]}),a.jsx("div",{className:"flex gap-1 px-4 sm:px-6 py-2 overflow-x-auto",children:Al.map(le=>a.jsx("button",{onClick:()=>O(le),className:`px-3 sm:px-4 py-2 rounded-lg text-xs sm:text-sm font-medium capitalize transition-all whitespace-nowrap
                                    ${P===le?"bg-neon-blue/10 text-neon-blue":"text-white/40 hover:text-white/60 hover:bg-white/[0.04]"}`,children:le},le))})]}),P==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsxs("p",{className:"text-2xl sm:text-3xl font-display font-black text-neon-blue",children:[yt.avgGrade,"%"]}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Class Avg"})]}),a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsx("p",{className:"text-2xl sm:text-3xl font-display font-black text-neon-green",children:yt.totalSubmitted}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Submitted"})]}),a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsx("p",{className:"text-2xl sm:text-3xl font-display font-black text-neon-purple",children:yt.totalGraded}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Graded"})]}),a.jsxs("div",{className:"glass-card p-4 text-center",children:[a.jsx("p",{className:"text-2xl sm:text-3xl font-display font-black text-neon-orange",children:yt.totalExpected-yt.totalSubmitted}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Missing"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"glass-card p-5",children:[a.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(vv,{size:16,className:"text-neon-blue"})," Details"]}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/40",children:"Level"}),a.jsx("span",{className:"text-white",children:V.level||"Beginner"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/40",children:"Schedule"}),a.jsx("span",{className:"text-white",children:V.schedule||"TBD"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/40",children:"Created"}),a.jsx("span",{className:"text-white",children:new Date(V.createdAt).toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white/40",children:"Teacher"}),a.jsx("span",{className:"text-white",children:V.teacherName})]})]})]}),a.jsxs("div",{className:"glass-card p-5",children:[a.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(Yr,{size:16,className:"text-neon-purple"})," Leaderboard"]}),He.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-6",children:"No grades yet"}):a.jsx("div",{className:"space-y-2",children:He.slice(0,5).map((le,Ge)=>a.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-white/[0.02]",children:[a.jsx("span",{className:`w-6 h-6 rounded-full text-xs font-bold flex items-center justify-center ${Ge===0?"bg-yellow-500/20 text-yellow-400":Ge===1?"bg-gray-400/20 text-gray-300":Ge===2?"bg-orange-500/20 text-orange-400":"bg-white/5 text-white/30"}`,children:Ge+1}),a.jsx("span",{className:"flex-1 text-sm text-white truncate",children:le.name}),a.jsxs("span",{className:`text-sm font-bold ${le.avg>=90?"text-neon-green":le.avg>=70?"text-neon-blue":"text-neon-orange"}`,children:[le.avg,"%"]})]},le.id))})]})]}),a.jsxs("div",{className:"glass-card p-5",children:[a.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(Ii,{size:16,className:"text-neon-green"})," Grade Distribution"]}),a.jsx("div",{className:"flex items-end gap-3 h-24",children:Object.entries(yt.gradeDistribution||{}).map(([le,Ge])=>{const En=Math.max(...Object.values(yt.gradeDistribution||{}),1),Rs=`${Ge/En*100}%`,Ka={A:"neon-green",B:"neon-blue",C:"neon-purple",D:"neon-orange",F:"red-400"};return a.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 h-full",children:[a.jsx("span",{className:"text-[10px] text-white/30",children:Ge}),a.jsx("div",{className:"w-full flex-1 flex items-end",children:a.jsx("div",{className:`w-full rounded-t-md bg-${Ka[le]}/20 border-t border-${Ka[le]}/30`,style:{height:Ge>0?Rs:"2px"}})}),a.jsx("span",{className:`text-xs font-bold text-${Ka[le]}`,children:le})]},le)})})]})]}),P==="students"&&a.jsxs("div",{className:"glass-card p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-semibold text-white",children:["Enrolled Students (",tn.length,")"]}),a.jsxs("button",{onClick:()=>pe(!0),className:"px-3 py-2 rounded-xl bg-neon-blue/10 border border-neon-blue/20 text-xs text-neon-blue hover:bg-neon-blue/20 transition-all flex items-center gap-2",children:[a.jsx(iF,{size:14})," Add"]})]}),a.jsx("div",{className:"space-y-2",children:tn.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Mn,{size:48,className:"mx-auto text-white/10 mb-4"}),a.jsx("p",{className:"text-white/40 text-sm",children:"No students enrolled yet."}),a.jsxs("p",{className:"text-xs text-white/20 mt-1",children:["Share code ",a.jsx("span",{className:"text-neon-blue font-mono",children:V.code})]})]}):tn.map(le=>{var Ge;return a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 p-3 rounded-xl hover:bg-white/[0.03] transition-all group",children:[a.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white font-bold text-xs sm:text-sm shrink-0",children:((Ge=le.displayName)==null?void 0:Ge[0])||"S"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:le.displayName}),a.jsx("p",{className:"text-xs text-white/40 truncate",children:le.email})]}),xe===le.id?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>Be(null),className:"text-xs text-white/40 hover:text-white px-2 py-1 rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>Xe(le.id),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1 rounded-lg font-semibold hover:bg-red-500/20 transition-colors",children:"Remove"})]}):a.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[a.jsx("button",{onClick:async()=>{if(!le.email){v.error("No email for this student");return}xt(le.id);try{const En=await r(le.email);Se({studentName:le.displayName,newCode:En}),v.success("New access code generated!")}catch(En){v.error(En.message)}finally{xt(null)}},className:"p-2 rounded-lg text-white/20 hover:text-neon-orange hover:bg-neon-orange/10 transition-all",title:"Reset access code",disabled:ve===le.id,children:a.jsx(w4,{size:16,className:ve===le.id?"animate-spin":""})}),a.jsx("button",{onClick:()=>Be(le.id),className:"p-2 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Remove student",children:a.jsx(nF,{size:16})})]})]},le.id)})})]}),P==="assignments"&&a.jsxs("div",{className:"glass-card p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"font-semibold text-white",children:["Assignments (",Tn.length,")"]}),a.jsxs("button",{onClick:()=>e("/assignments"),className:"btn-neon text-sm flex items-center gap-2",children:[a.jsx(Ft,{size:14})," New"]})]}),a.jsx("div",{className:"space-y-3",children:Tn.length===0?a.jsx("p",{className:"text-white/40 text-sm text-center py-8",children:"No assignments yet."}):Tn.map(le=>{const Ge=I(le.id);return a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl bg-white/[0.02] border border-white/[0.04] hover:border-white/10 transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-neon-purple/10 border border-neon-purple/20 flex items-center justify-center shrink-0",children:a.jsx(ms,{size:18,className:"text-neon-purple"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-white text-sm truncate",children:le.title}),a.jsxs("p",{className:"text-xs text-white/40",children:[le.type,"  ",le.totalPoints," pts  ",Ge.rate,"% done"]})]}),a.jsxs("div",{className:"text-right shrink-0",children:[a.jsx("p",{className:"text-xs text-white/40",children:"Due"}),a.jsx("p",{className:"text-sm text-neon-orange",children:new Date(le.dueDate).toLocaleDateString()})]})]},le.id)})})]}),P==="announcements"&&a.jsxs("div",{className:"space-y-4",children:[i&&a.jsxs("div",{className:"glass-card p-4 sm:p-5",children:[a.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(F2,{size:16,className:"text-neon-blue"})," Post Announcement"]}),a.jsx("input",{value:Y,onChange:le=>Z(le.target.value),placeholder:"Announcement title...",className:"input-glass mb-3"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("textarea",{value:$,onChange:le=>U(le.target.value),placeholder:"Write your announcement...",className:"input-glass flex-1 h-20 resize-none"}),a.jsx("button",{onClick:Ze,className:"btn-neon self-end px-4",children:a.jsx(_v,{size:16})})]})]}),Ln.length===0&&a.jsxs("div",{className:"glass-card p-8 text-center",children:[a.jsx(F2,{size:40,className:"mx-auto text-white/10 mb-3"}),a.jsx("p",{className:"text-white/40 text-sm",children:"No announcements yet."})]}),Ln.sort((le,Ge)=>(Ge.pinned?1:0)-(le.pinned?1:0)||new Date(Ge.createdAt)-new Date(le.createdAt)).map(le=>a.jsxs("div",{className:`glass-card p-4 sm:p-5 ${le.pinned?"border-l-4 border-l-neon-orange":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2 gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[le.pinned&&a.jsx($2,{size:12,className:"text-neon-orange shrink-0"}),a.jsx("h4",{className:"font-semibold text-white truncate",children:le.title})]}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[i&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>jl(le.id,le.pinned),className:`p-1.5 rounded-lg transition-all ${le.pinned?"text-neon-orange":"text-white/20 hover:text-neon-orange"} hover:bg-white/5`,title:le.pinned?"Unpin":"Pin",children:a.jsx($2,{size:14})}),a.jsx("button",{onClick:()=>ts(le.id),className:"p-1.5 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Delete",children:a.jsx(Di,{size:14})})]}),a.jsx("span",{className:"text-xs text-white/30 ml-2",children:new Date(le.createdAt).toLocaleDateString()})]})]}),a.jsx("p",{className:"text-sm text-white/60",children:le.content}),a.jsxs("p",{className:"text-xs text-white/30 mt-2",children:[" ",le.author]})]},le.id))]}),P==="chat"&&a.jsx(DF,{classId:t,isTeacher:i,userProfile:s,addClassMessage:k,deleteClassMessage:L,getClassMessages:T,toast:v}),P==="materials"&&a.jsx(OF,{classId:t,isTeacher:i,getClassMaterials:A,addClassMaterial:j,deleteClassMaterial:D,toast:v})]}),a.jsxs(Vn,{children:[se&&a.jsx(IF,{cls:V,allStudents:b,onClose:()=>pe(!1),onSendRequest:async le=>{try{await p(V.id,le),v.success("Solicitud enviada al estudiante!")}catch(Ge){v.error(Ge.message)}},pendingRequests:E(V.id)}),ye&&a.jsx(kF,{result:ye,onClose:()=>Se(null)})]})]})}function IF({cls:t,allStudents:e,onClose:n,onSendRequest:s,pendingRequests:i=[]}){const[r,o]=R.useState(""),[l,c]=R.useState(!1),d=e.filter(m=>{var g,b;return(((g=m.displayName)==null?void 0:g.toLowerCase().includes(r.toLowerCase()))||((b=m.email)==null?void 0:b.toLowerCase().includes(r.toLowerCase())))&&!(t.students||[]).includes(m.id)}),h=m=>i.some(g=>g.studentId===m&&g.status==="pending"),f=()=>{navigator.clipboard.writeText(t.code),c(!0),setTimeout(()=>c(!1),2e3)};return a.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:n}),a.jsxs(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative glass-card w-full max-w-lg overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-white/10 flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-display font-bold text-white",children:"Add Student"}),a.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-white/10 text-white/40 hover:text-white transition-colors",children:a.jsx(Zt,{size:20})})]}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-white/40 mb-2 uppercase tracking-wider font-bold",children:"Share Class Code"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"flex-1 p-3 rounded-xl bg-white/[0.04] border border-white/[0.06] text-center font-mono text-xl sm:text-2xl text-neon-blue tracking-widest",children:t.code}),a.jsx("button",{onClick:f,className:"p-3 sm:p-4 rounded-xl bg-neon-blue/10 border border-neon-blue/20 text-neon-blue hover:bg-neon-blue/20 transition-all flex items-center justify-center",children:l?a.jsx(vi,{size:20}):a.jsx(ol,{size:20})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ki,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20"}),a.jsx("input",{value:r,onChange:m=>o(m.target.value),placeholder:"Search by email or name...",className:"input-glass pl-10"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:d.length===0?a.jsx("p",{className:"text-center py-8 text-white/40 text-sm",children:"No students found."}):d.map(m=>{var b;const g=h(m.id);return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/[0.04] group transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-xs font-bold text-white shrink-0",children:((b=m.displayName)==null?void 0:b[0])||"S"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-white group-hover:text-neon-blue transition-colors truncate",children:m.displayName}),a.jsx("p",{className:"text-xs text-white/40 truncate",children:m.email})]}),g?a.jsx("span",{className:"text-[10px] font-bold px-2 py-1 rounded-lg bg-amber-500/10 text-amber-400 border border-amber-500/20",children:"Pending"}):a.jsx("button",{onClick:()=>{s(m.id)},className:"p-2 rounded-lg bg-neon-blue/10 text-neon-blue hover:bg-neon-blue/20 opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(Ft,{size:16})})]},m.id)})})]})]})]})}function kF({result:t,onClose:e}){const[n,s]=R.useState(!1),i=()=>{navigator.clipboard.writeText(t.newCode),s(!0),setTimeout(()=>s(!1),2e3)};return a.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:e}),a.jsxs(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative glass-card w-full max-w-md overflow-hidden flex flex-col items-center text-center p-6 sm:p-8",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-neon-orange/10 flex items-center justify-center mb-4",children:a.jsx(w4,{size:32,className:"text-neon-orange"})}),a.jsx("h2",{className:"text-2xl font-display font-bold text-white mb-2",children:"New Access Code"}),a.jsxs("p",{className:"text-white/60 text-sm mb-6",children:["A new code has been generated for ",a.jsx("span",{className:"text-white font-semibold",children:t.studentName}),".",a.jsx("br",{}),"Please share this code with them immediately."]}),a.jsxs("div",{className:"w-full flex items-center gap-2 mb-6",children:[a.jsx("div",{className:"flex-1 p-4 rounded-xl bg-white/[0.04] border border-white/[0.06] font-mono text-3xl text-neon-orange tracking-widest",children:t.newCode}),a.jsx("button",{onClick:i,className:"p-4 rounded-xl bg-neon-orange/10 border border-neon-orange/20 text-neon-orange hover:bg-neon-orange/20 transition-all",children:n?a.jsx(vi,{size:24}):a.jsx(ol,{size:24})})]}),a.jsx("p",{className:"text-xs text-white/30 mb-6",children:"Note: If the student already has an account, a password reset email has also been sent to their email address."}),a.jsx("button",{onClick:e,className:"btn-primary w-full",children:"Done"})]})]})}function DF({classId:t,isTeacher:e,userProfile:n,addClassMessage:s,deleteClassMessage:i,getClassMessages:r,toast:o}){const[l,c]=R.useState(""),d=R.useRef(null),h=r(t);R.useEffect(()=>{var N;(N=d.current)==null||N.scrollIntoView({behavior:"smooth"})},[h.length]);const f=async()=>{const N=l.trim();if(N)try{await s(t,N,(n==null?void 0:n.displayName)||"User",e?"teacher":"student"),c("")}catch{o.error("Failed to send message")}},m=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),f())},g=async N=>{try{await i(N),o.info("Message deleted")}catch{o.error("Failed to delete")}},b=N=>{const C=new Date(N),y=new Date-C,S=Math.floor(y/(1e3*60)),I=Math.floor(y/(1e3*60*60)),k=Math.floor(y/(1e3*60*60*24));return S<1?"Just now":S<60?`${S}m ago`:I<24?`${I}h ago`:k<7?`${k}d ago`:C.toLocaleDateString()};return a.jsxs("div",{className:"glass-card flex flex-col",style:{height:"70vh"},children:[a.jsxs("div",{className:"p-4 border-b border-white/[0.06] flex items-center gap-2",children:[a.jsx(L0,{size:18,className:"text-neon-green"}),a.jsx("h3",{className:"font-semibold text-white",children:"Class Chat"}),a.jsx("span",{className:"text-[10px] text-white/30 ml-auto uppercase tracking-wider",children:"Messages auto-delete after 7 days"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[h.length===0&&a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[a.jsx(L0,{size:48,className:"text-white/10 mb-3"}),a.jsx("p",{className:"text-white/40 text-sm",children:"No messages yet."}),a.jsx("p",{className:"text-white/20 text-xs mt-1",children:"Start the conversation!"})]}),h.map(N=>{var C;return a.jsxs(Q.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"group flex gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shrink-0 ${N.authorRole==="teacher"?"bg-gradient-to-br from-neon-blue to-neon-purple text-white":"bg-white/10 text-white/60"}`,children:((C=N.authorName)==null?void 0:C[0])||"?"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[a.jsx("span",{className:"text-sm font-medium text-white truncate",children:N.authorName}),a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wider ${N.authorRole==="teacher"?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.06] text-white/40 border border-white/[0.06]"}`,children:N.authorRole==="teacher"?"Teacher":"Student"}),a.jsx("span",{className:"text-[10px] text-white/20",children:b(N.createdAt)})]}),a.jsx("p",{className:"text-sm text-white/70 break-words whitespace-pre-wrap",children:N.text})]}),e&&a.jsx("button",{onClick:()=>g(N.id),className:"p-1.5 rounded-lg text-white/10 hover:text-red-400 hover:bg-red-500/10 opacity-0 group-hover:opacity-100 transition-all self-start",title:"Delete message",children:a.jsx(Di,{size:13})})]},N.id)}),a.jsx("div",{ref:d})]}),a.jsx("div",{className:"p-3 border-t border-white/[0.06]",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{value:l,onChange:N=>c(N.target.value),onKeyDown:m,placeholder:"Type a message...",className:"input-glass flex-1"}),a.jsx("button",{onClick:f,disabled:!l.trim(),className:"btn-neon px-4 disabled:opacity-30 disabled:pointer-events-none",children:a.jsx(_v,{size:16})})]})})]})}const z0=[{key:"document",label:"Document",icon:Gu,color:"text-neon-blue",bg:"bg-neon-blue/10",border:"border-neon-blue/20",gradient:"from-neon-blue to-cyan-400"},{key:"video",label:"Video",icon:lF,color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/20",gradient:"from-red-500 to-orange-400"},{key:"audio",label:"Audio",icon:CB,color:"text-neon-purple",bg:"bg-neon-purple/10",border:"border-neon-purple/20",gradient:"from-neon-purple to-fuchsia-400"},{key:"image",label:"Image",icon:sB,color:"text-neon-green",bg:"bg-neon-green/10",border:"border-neon-green/20",gradient:"from-neon-green to-emerald-400"},{key:"link",label:"Link / Website",icon:b4,color:"text-amber-400",bg:"bg-amber-400/10",border:"border-amber-400/20",gradient:"from-amber-400 to-yellow-500"},{key:"other",label:"Other",icon:IB,color:"text-white/50",bg:"bg-white/[0.04]",border:"border-white/10",gradient:"from-white/20 to-white/10"}];function MF(t){return z0.find(e=>e.key===t)||z0[5]}function OF({classId:t,isTeacher:e,getClassMaterials:n,addClassMaterial:s,deleteClassMaterial:i,toast:r}){const o=n(t),[l,c]=R.useState(!1),[d,h]=R.useState(""),[f,m]=R.useState(""),[g,b]=R.useState(""),[N,C]=R.useState("document"),[w,y]=R.useState(!1),[S,I]=R.useState(null),k=()=>{h(""),m(""),b(""),C("document"),c(!1)},L=async()=>{if(!d.trim()){r.warning("Please enter a title");return}if(!g.trim()){r.warning("Please enter a download/link URL");return}try{new URL(g.trim())}catch{r.error("Please enter a valid URL (include https://)");return}y(!0);try{await s(t,{title:d.trim(),description:f.trim(),url:g.trim(),category:N}),r.success("Material added!"),k()}catch{r.error("Failed to add material")}finally{y(!1)}},T=async p=>{try{await i(p),r.success("Material removed"),I(null)}catch{r.error("Failed to remove material")}};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-neon-purple to-fuchsia-500 flex items-center justify-center shadow-lg",children:a.jsx(V0,{size:20,className:"text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white",children:"Class Materials"}),a.jsxs("p",{className:"text-xs text-white/40",children:[o.length," resource",o.length!==1?"s":""," available"]})]})]}),e&&!l&&a.jsxs("button",{onClick:()=>c(!0),className:"btn-neon flex items-center gap-2 text-sm px-4 py-2",children:[a.jsx(Ft,{size:16})," Add Material"]})]}),a.jsx(Vn,{children:e&&l&&a.jsxs(Q.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"glass-card p-5 space-y-4 border border-neon-purple/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("h4",{className:"font-semibold text-white flex items-center gap-2",children:[a.jsx(P0,{size:16,className:"text-neon-purple"})," Add New Material"]}),a.jsx("button",{onClick:k,className:"p-1.5 rounded-lg text-white/30 hover:text-white hover:bg-white/10 transition-all",children:a.jsx(Zt,{size:16})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/40 mb-2 uppercase tracking-wider font-bold",children:"Category"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:z0.map(p=>{const E=p.icon;return a.jsxs("button",{type:"button",onClick:()=>C(p.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-xl border text-xs font-medium transition-all
                                                ${N===p.key?`${p.bg} ${p.border} ${p.color} shadow-sm`:"border-white/[0.06] text-white/40 hover:border-white/10 hover:text-white/60"}`,children:[a.jsx(E,{size:13})," ",p.label]},p.key)})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/40 mb-1.5 uppercase tracking-wider font-bold",children:"Title *"}),a.jsx("input",{value:d,onChange:p=>h(p.target.value),placeholder:"e.g. Unit 3 Vocabulary PDF",className:"input-glass"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/40 mb-1.5 uppercase tracking-wider font-bold",children:"Download / Link URL *"}),a.jsxs("div",{className:"relative group",children:[a.jsx(P0,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20 group-focus-within:text-neon-purple transition-colors"}),a.jsx("input",{value:g,onChange:p=>b(p.target.value),placeholder:"https://drive.google.com/...",className:"input-glass pl-10"})]}),a.jsx("p",{className:"text-[10px] text-white/20 mt-1",children:"Paste any link: Google Drive, Dropbox, YouTube, website, etc."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/40 mb-1.5 uppercase tracking-wider font-bold",children:"Description (optional)"}),a.jsx("textarea",{value:f,onChange:p=>m(p.target.value),placeholder:"Brief description of this material...",className:"input-glass h-16 resize-none"})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{onClick:k,className:"btn-ghost text-sm px-4 py-2",children:"Cancel"}),a.jsxs("button",{onClick:L,disabled:w,className:"btn-neon flex items-center gap-2 text-sm px-5 py-2 disabled:opacity-50",children:[w?a.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(Ft,{size:16}),w?"Adding...":"Add Material"]})]})]})}),o.length===0?a.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"glass-card p-12 text-center",children:[a.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-white/[0.03] border border-white/[0.06] flex items-center justify-center mb-4",children:a.jsx(V0,{size:28,className:"text-white/20"})}),a.jsx("p",{className:"text-white/40 text-sm font-medium",children:"No materials yet"}),a.jsx("p",{className:"text-white/20 text-xs mt-1",children:e?'Click "Add Material" to share download links with your students.':"Your teacher hasn't shared any materials yet."})]}):a.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((p,E)=>{const j=MF(p.category),D=j.icon;return a.jsxs(Q.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:E*.05},className:"glass-card overflow-hidden group hover:border-white/[0.12] transition-all",children:[a.jsx("div",{className:`h-1 bg-gradient-to-r ${j.gradient}`}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx("div",{className:`w-11 h-11 rounded-xl ${j.bg} border ${j.border} flex items-center justify-center shrink-0`,children:a.jsx(D,{size:20,className:j.color})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-white text-sm leading-tight line-clamp-2 group-hover:text-white/90 transition-colors",children:p.title}),a.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider mt-1 ${j.color}`,children:[a.jsx(D,{size:10})," ",j.label]})]}),e&&a.jsx("div",{className:"shrink-0",children:S===p.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>I(null),className:"text-[10px] text-white/40 px-1.5 py-1 rounded",children:"No"}),a.jsx("button",{onClick:()=>T(p.id),className:"text-[10px] text-red-400 bg-red-500/10 px-1.5 py-1 rounded font-bold",children:"Yes"})]}):a.jsx("button",{onClick:()=>I(p.id),className:"p-1.5 rounded-lg text-white/10 hover:text-red-400 hover:bg-red-500/10 opacity-0 group-hover:opacity-100 transition-all",title:"Remove material",children:a.jsx(Di,{size:14})})})]}),p.description&&a.jsx("p",{className:"text-xs text-white/40 mb-3 line-clamp-2 leading-relaxed",children:p.description}),a.jsxs("div",{className:"flex items-center justify-between mt-auto pt-2 border-t border-white/[0.04]",children:[a.jsx("span",{className:"text-[10px] text-white/20",children:new Date(p.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),a.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-xs font-bold transition-all
                                                bg-gradient-to-r ${j.gradient} text-white hover:opacity-90 active:scale-95 shadow-sm`,onClick:A=>A.stopPropagation(),children:p.category==="link"||p.category==="video"?a.jsxs(a.Fragment,{children:[a.jsx($7,{size:12})," Open"]}):a.jsxs(a.Fragment,{children:[a.jsx(bv,{size:12})," Download"]})})]})]})]},p.id)})})]})}function VF(){const{classes:t,allStudents:e,deleteStudent:n,updateStudent:s,getStudentClasses:i,getStudentProgress:r}=vn(),{preRegisterStudent:o,isAdmin:l}=ft(),c=xs(),[d,h]=R.useState(""),[f,m]=R.useState(!1),[g,b]=R.useState(null),[N,C]=R.useState(null),[w,y]=R.useState(!1),[S,I]=R.useState(""),[k,L]=R.useState(""),[T,p]=R.useState(null),[E,j]=R.useState(!1),[D,A]=R.useState(""),[v,V]=R.useState(""),[P,O]=R.useState(""),B=l?null:new Set(t.flatMap(ee=>ee.students||[])),$=(l?e:e.filter(ee=>B.has(ee.id))).filter(ee=>(ee.displayName||"").toLowerCase().includes(d.toLowerCase())||(ee.email||"").toLowerCase().includes(d.toLowerCase())),U=ee=>{b(ee),V(ee.displayName),O(ee.email),A("")},Y=async ee=>{ee.preventDefault(),y(!0);try{const ye=g.status==="pending",Se=ye?g.email.toLowerCase():g.id;await s(Se,{displayName:v,...ye?{name:v}:{}},ye),b(null),c.success("Student updated!")}catch(ye){A(ye.message),c.error("Failed to update")}finally{y(!1)}},Z=async ee=>{try{await n(ee),c.success(`${ee.displayName} removed`),C(null)}catch{c.error("Failed to delete student")}},se=async ee=>{ee.preventDefault(),y(!0),A("");try{const ye=await o(k,S);p(ye),c.success("Student registered!")}catch(ye){A(ye.message),c.error(ye.message)}finally{y(!1)}},pe=()=>{navigator.clipboard.writeText(T),j(!0),c.success("Code copied!"),setTimeout(()=>j(!1),2e3)},xe=()=>{m(!1),p(null),I(""),L(""),A("")},Be={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},oe={hidden:{opacity:0,y:15},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Students",subtitle:`${e.length} total students`,actions:a.jsxs("button",{onClick:()=>m(!0),className:"btn-neon flex items-center gap-2 text-sm px-4 py-2",children:[a.jsx(Ft,{size:16})," Add Student"]})}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"glass-card p-3 sm:p-4 text-center",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-display font-bold text-neon-blue",children:e.length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Total"})]}),a.jsxs("div",{className:"glass-card p-3 sm:p-4 text-center",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-display font-bold text-neon-green",children:e.filter(ee=>ee.status!=="pending").length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Active"})]}),a.jsxs("div",{className:"glass-card p-3 sm:p-4 text-center",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-display font-bold text-neon-orange",children:e.filter(ee=>ee.status==="pending").length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Pending"})]}),a.jsxs("div",{className:"glass-card p-3 sm:p-4 text-center",children:[a.jsx("p",{className:"text-xl sm:text-2xl font-display font-bold text-neon-purple",children:t.length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Classes"})]})]}),a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(ki,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{value:d,onChange:ee=>h(ee.target.value),placeholder:"Search students...",className:"input-glass pl-11"})]}),a.jsxs(Q.div,{variants:Be,initial:"hidden",animate:"show",className:"glass-card overflow-hidden hidden sm:block",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-3 border-b border-white/[0.06] text-xs text-white/40 uppercase tracking-wider font-medium",children:[a.jsx("div",{className:"col-span-3",children:"Student"}),a.jsx("div",{className:"col-span-3",children:"Email"}),a.jsx("div",{className:"col-span-2",children:"Status"}),a.jsx("div",{className:"col-span-2 text-center",children:"Classes"}),a.jsx("div",{className:"col-span-2 text-right",children:"Actions"})]}),$.map(ee=>{const ye=i(ee.id);return a.jsxs(Q.div,{variants:oe,className:"grid grid-cols-12 gap-4 px-6 py-4 border-b border-white/[0.02] hover:bg-white/[0.02] transition-all items-center",children:[a.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white text-sm font-bold shadow-lg shrink-0",children:(ee.displayName||"S")[0]}),a.jsx("span",{className:"text-sm font-medium text-white truncate",children:ee.displayName})]}),a.jsx("div",{className:"col-span-3 text-sm text-white/50 truncate",children:ee.email}),a.jsx("div",{className:"col-span-2",children:ee.status==="pending"?a.jsxs("div",{className:"flex items-center gap-2 group/code",children:[a.jsx("code",{className:"text-xs font-mono font-bold text-neon-orange bg-neon-orange/10 px-2 py-1 rounded truncate",children:ee.code}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(ee.code),c.success("Code copied!")},className:"opacity-0 group-hover/code:opacity-100 p-1 rounded hover:bg-white/10 text-white/40 hover:text-white transition-all",children:a.jsx(ol,{size:12})})]}):a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-neon-green/60",children:[a.jsx(vi,{size:12})," Registered"]})}),a.jsx("div",{className:"col-span-2 flex justify-center",children:a.jsx("div",{className:"flex -space-x-2",children:ye.length>0?a.jsxs(a.Fragment,{children:[ye.slice(0,3).map((Se,ve)=>a.jsx("div",{className:`w-6 h-6 rounded-md bg-gradient-to-br ${ve===0?"from-neon-blue to-blue-600":ve===1?"from-neon-purple to-purple-600":"from-neon-green to-emerald-600"} flex items-center justify-center text-[10px] text-white font-bold border-2 border-surface-950`,title:Se.name,children:Se.name[0]},Se.id)),ye.length>3&&a.jsxs("div",{className:"w-6 h-6 rounded-md bg-white/5 flex items-center justify-center text-[8px] text-white/40 border-2 border-surface-950 font-bold",children:["+",ye.length-3]})]}):a.jsx("span",{className:"text-xs text-white/20 italic",children:"None"})})}),a.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-1",children:[l&&a.jsx("button",{onClick:()=>U(ee),className:"p-2 rounded-lg text-white/20 hover:text-neon-blue hover:bg-neon-blue/10 transition-all",title:"Edit",children:a.jsx(pf,{size:16})}),l&&(N===ee.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>C(null),className:"text-[10px] text-white/40 px-2 py-1 rounded-lg hover:bg-white/5",children:"Cancel"}),a.jsx("button",{onClick:()=>Z(ee),className:"text-[10px] text-red-400 bg-red-500/10 px-2 py-1 rounded-lg font-bold hover:bg-red-500/20",children:"Delete"})]}):a.jsx("button",{onClick:()=>C(ee.id),className:"p-2 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Delete",children:a.jsx(Di,{size:16})}))]})]},ee.id)}),$.length===0&&a.jsxs("div",{className:"text-center py-12 text-white/30",children:[a.jsx(Mn,{size:40,className:"mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No students found"})]})]}),a.jsx("div",{className:"sm:hidden space-y-3",children:$.length===0?a.jsxs("div",{className:"text-center py-12 text-white/30 glass-card p-6",children:[a.jsx(Mn,{size:40,className:"mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"No students found"})]}):$.map(ee=>{const ye=i(ee.id);return a.jsxs("div",{className:"glass-card p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white text-sm font-bold shrink-0",children:(ee.displayName||"S")[0]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:ee.displayName}),a.jsx("p",{className:"text-xs text-white/40 truncate",children:ee.email})]}),ee.status==="pending"&&a.jsx("span",{className:"text-[10px] text-neon-orange bg-neon-orange/10 px-2 py-1 rounded-lg font-bold uppercase",children:"Pending"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/30",children:[a.jsx(Ct,{size:12}),a.jsxs("span",{children:[ye.length," classes"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[l&&a.jsx("button",{onClick:()=>U(ee),className:"p-2 rounded-lg text-white/30 hover:text-neon-blue transition-all",children:a.jsx(pf,{size:14})}),l&&(N===ee.id?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>C(null),className:"text-[10px] text-white/40 px-2 py-1 rounded-lg",children:"No"}),a.jsx("button",{onClick:()=>Z(ee),className:"text-[10px] text-red-400 bg-red-500/10 px-2 py-1 rounded-lg font-bold",children:"Yes"})]}):a.jsx("button",{onClick:()=>C(ee.id),className:"p-2 rounded-lg text-white/30 hover:text-red-400 transition-all",children:a.jsx(Di,{size:14})}))]})]})]},ee.id)})})]}),a.jsx(Vn,{children:f&&a.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:xe}),a.jsxs(Q.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"relative w-full max-w-md glass-card p-6 rounded-2xl border border-white/10 shadow-2xl",children:[a.jsx("button",{onClick:xe,className:"absolute top-4 right-4 text-white/30 hover:text-white transition-colors",children:a.jsx(Zt,{size:20})}),a.jsx("h2",{className:"text-xl font-display font-bold text-white mb-1",children:"Add New Student"}),a.jsx("p",{className:"text-sm text-white/40 mb-6",children:"Create credentials for a student to log in."}),T?a.jsxs("div",{className:"space-y-6 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto",children:a.jsx(vi,{size:32,className:"text-green-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Student Registered!"}),a.jsxs("p",{className:"text-sm text-white/50 px-4",children:["Share this code with ",a.jsx("strong",{children:S}),"."]})]}),a.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10 flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase tracking-wider",children:"Access Code"}),a.jsx("p",{className:"text-2xl font-mono font-bold text-neon-blue tracking-widest",children:T})]}),a.jsx("button",{onClick:pe,className:"p-3 rounded-lg hover:bg-white/10 transition-colors text-white/50 hover:text-white",children:E?a.jsx(vi,{size:20,className:"text-green-400"}):a.jsx(ol,{size:20})})]}),a.jsx("button",{onClick:xe,className:"btn-ghost w-full",children:"Done, add another"})]}):a.jsxs("form",{onSubmit:se,className:"space-y-4",children:[D&&a.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:D}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-white/60 ml-1",children:"Full Name"}),a.jsx("input",{required:!0,value:S,onChange:ee=>I(ee.target.value),placeholder:"e.g. Juan Perez",className:"input-glass w-full"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-white/60 ml-1",children:"Email Address"}),a.jsx("input",{required:!0,type:"email",value:k,onChange:ee=>L(ee.target.value),placeholder:"e.g. juan@student.com",className:"input-glass w-full"})]}),a.jsx("button",{type:"submit",disabled:w,className:"btn-neon w-full mt-2",children:w?"Generating...":"Generate Access Code"})]})]})]})}),a.jsx(Vn,{children:g&&a.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>b(null)}),a.jsxs(Q.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-card border border-white/10 p-6 sm:p-8 rounded-2xl shadow-2xl w-full max-w-md relative z-10",children:[a.jsx("button",{onClick:()=>b(null),className:"absolute top-4 right-4 p-2 rounded-xl hover:bg-white/5 text-white/40 hover:text-white transition-all",children:a.jsx(Zt,{size:20})}),a.jsx("h2",{className:"text-xl font-display font-bold text-white mb-1",children:"Edit Student"}),a.jsx("p",{className:"text-sm text-white/40 mb-6",children:"Update student information."}),a.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[D&&a.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:D}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-white/60 ml-1",children:"Full Name"}),a.jsx("input",{required:!0,value:v,onChange:ee=>V(ee.target.value),className:"input-glass w-full"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-xs font-medium text-white/30 ml-1",children:"Email (Read-only)"}),a.jsx("input",{disabled:!0,value:P,className:"input-glass w-full opacity-50 cursor-not-allowed"})]}),a.jsx("button",{type:"submit",disabled:w,className:"btn-neon w-full mt-2",children:w?"Saving...":"Save Changes"}),a.jsx("button",{type:"button",onClick:()=>b(null),className:"btn-ghost w-full",children:"Cancel"})]})]})]})})]})}const Mc={quiz:{icon:zt,label:"Quiz",gradient:"from-neon-blue to-cyan-400",bg:"bg-neon-blue/10",border:"border-neon-blue/20",text:"text-neon-blue",dot:"bg-neon-blue"},exam:{icon:wv,label:"Exam",gradient:"from-red-500 to-orange-500",bg:"bg-red-500/10",border:"border-red-500/20",text:"text-red-400",dot:"bg-red-500"},essay:{icon:Gu,label:"Essay",gradient:"from-neon-purple to-fuchsia-400",bg:"bg-neon-purple/10",border:"border-neon-purple/20",text:"text-neon-purple",dot:"bg-neon-purple"},homework:{icon:E4,label:"Homework",gradient:"from-amber-400 to-yellow-500",bg:"bg-amber-400/10",border:"border-amber-400/20",text:"text-amber-400",dot:"bg-amber-400"},project:{icon:V0,label:"Project",gradient:"from-pink-500 to-rose-400",bg:"bg-pink-500/10",border:"border-pink-500/20",text:"text-pink-400",dot:"bg-pink-500"},assignment:{icon:ms,label:"Task",gradient:"from-neon-green to-emerald-400",bg:"bg-neon-green/10",border:"border-neon-green/20",text:"text-neon-green",dot:"bg-neon-green"}},G2={blue:"from-neon-blue/20 to-neon-blue/5",purple:"from-neon-purple/20 to-neon-purple/5",green:"from-neon-green/20 to-neon-green/5",orange:"from-orange-500/20 to-orange-500/5",pink:"from-neon-pink/20 to-neon-pink/5",cyan:"from-cyan-400/20 to-cyan-400/5"};function PF(){const{assignments:t,classes:e,submissions:n,allStudents:s,addAssignment:i,updateAssignment:r,deleteAssignment:o,getAssignmentSubmissions:l}=vn(),{isTeacher:c,userProfile:d}=ft(),h=xs(),f=yn(),[m,g]=R.useState(!1),[b,N]=R.useState(null),[C,w]=R.useState("all"),[y,S]=R.useState("all"),[I,k]=R.useState(""),[L,T]=R.useState(null),[p,E]=R.useState(null),j=R.useMemo(()=>t.filter(V=>C==="all"||V.type===C).filter(V=>y==="all"||V.classId===y).filter(V=>V.title.toLowerCase().includes(I.toLowerCase())||V.description.toLowerCase().includes(I.toLowerCase())).sort((V,P)=>new Date(P.createdAt)-new Date(V.createdAt)),[t,C,y,I]),D=R.useMemo(()=>{const V=t.length,P=t.filter($=>new Date($.dueDate)>=new Date).length,O=V-P,B=n.length,z=n.filter($=>$.grade===null||$.grade===void 0).length;return{total:V,active:P,overdue:O,totalSubs:B,pending:z}},[t,n]),A={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},v={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.4}}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Assignments",subtitle:`${t.length} total across ${e.length} classes`,actions:c&&a.jsxs("button",{onClick:()=>g(!0),className:"btn-neon flex items-center gap-2 text-sm px-4 py-2",children:[a.jsx(Ft,{size:16})," ",a.jsx("span",{className:"hidden sm:inline",children:"New"})," Assignment"]})}),a.jsx("div",{className:"px-4 sm:px-6 pt-4 sm:pt-6 max-w-7xl mx-auto",children:a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:[{label:"Total",value:D.total,icon:_4,color:"text-neon-blue",bg:"bg-neon-blue/10"},{label:"Active",value:D.active,icon:hu,color:"text-neon-green",bg:"bg-neon-green/10"},{label:"Overdue",value:D.overdue,icon:D7,color:"text-red-400",bg:"bg-red-500/10"},{label:"Submissions",value:D.totalSubs,icon:pa,color:"text-neon-purple",bg:"bg-neon-purple/10"},{label:"Pending",value:D.pending,icon:es,color:"text-neon-orange",bg:"bg-orange-500/10"}].map((V,P)=>a.jsxs(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:P*.05},className:"glass-card p-4 flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl ${V.bg} flex items-center justify-center`,children:a.jsx(V.icon,{size:18,className:V.color})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xl font-bold text-white",children:V.value}),a.jsx("p",{className:"text-[11px] text-white/40 uppercase tracking-wider",children:V.label})]})]},V.label))})}),a.jsx("div",{className:"px-4 sm:px-6 pt-5 pb-2 max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[a.jsx(ki,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{value:I,onChange:V=>k(V.target.value),placeholder:"Search assignments...",className:"input-glass pl-10 text-sm h-10"})]}),a.jsx("div",{className:"flex items-center gap-1 p-1 rounded-xl bg-white/[0.03] border border-white/[0.06]",children:[{key:"all",label:"All"},{key:"quiz",label:"Quizzes",icon:zt},{key:"essay",label:"Essays",icon:Gu},{key:"assignment",label:"Tasks",icon:ms}].map(V=>a.jsxs("button",{onClick:()=>w(V.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-all
                                    ${C===V.key?"bg-white/10 text-white shadow-sm":"text-white/40 hover:text-white/60"}`,children:[V.icon&&a.jsx(V.icon,{size:13}),V.label]},V.key))}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:y,onChange:V=>S(V.target.value),className:"input-glass text-sm h-10 pr-8 appearance-none cursor-pointer min-w-[160px]",children:[a.jsx("option",{value:"all",children:"All Classes"}),e.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]}),a.jsx(x4,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/30 pointer-events-none"})]})]})}),a.jsx(Q.div,{variants:A,initial:"hidden",animate:"show",className:"p-4 sm:p-6 grid grid-cols-1 lg:grid-cols-2 gap-4 max-w-7xl mx-auto",children:j.map(V=>{var Be;const P=e.find(oe=>oe.id===V.classId),O=Mc[V.type]||Mc.assignment,B=O.icon,z=new Date(V.dueDate)<new Date,$=l(V.id),Y=((P==null?void 0:P.students)||[]).filter(oe=>s.some(ee=>ee.id===oe&&ee.status==="active")).length||0,Z=Y>0?Math.round($.length/Y*100):0,se=Math.ceil((new Date(V.dueDate)-new Date)/(1e3*60*60*24)),pe=L===V.id,xe=$.filter(oe=>oe.grade!=null).length>0?Math.round($.filter(oe=>oe.grade!=null).reduce((oe,ee)=>oe+ee.grade/V.totalPoints*100,0)/$.filter(oe=>oe.grade!=null).length):null;return a.jsx(Q.div,{variants:v,layout:!0,children:a.jsxs("div",{className:`glass-card overflow-hidden transition-all duration-300 hover:border-white/[0.12] cursor-pointer group
                                    ${pe?"ring-1 ring-white/10":""}`,onClick:()=>T(pe?null:V.id),children:[a.jsx("div",{className:`h-1 bg-gradient-to-r ${O.gradient}`}),a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${O.gradient} flex items-center justify-center shrink-0 shadow-lg`,children:a.jsx(B,{size:22,className:"text-white"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white text-[15px] leading-tight group-hover:text-white/90 transition-colors",children:V.title}),a.jsx("p",{className:"text-sm text-white/35 mt-1 line-clamp-2",children:V.description})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[c&&a.jsxs("div",{className:"flex items-center gap-1 mr-1",children:[a.jsx("button",{onClick:oe=>{oe.stopPropagation(),N(V)},className:"p-1.5 rounded-lg text-white/20 hover:text-neon-blue hover:bg-neon-blue/10 transition-all",title:"Edit Assignment",children:a.jsx(pf,{size:14})}),p===V.id?a.jsxs("div",{className:"flex items-center gap-1",onClick:oe=>oe.stopPropagation(),children:[a.jsx("button",{onClick:oe=>{oe.stopPropagation(),E(null)},className:"text-[10px] text-white/40 px-1.5 py-1 rounded",children:"No"}),a.jsx("button",{onClick:async oe=>{oe.stopPropagation(),await o(V.id),h.success("Assignment deleted"),E(null)},className:"text-[10px] text-red-400 bg-red-500/10 px-1.5 py-1 rounded font-bold",children:"Yes"})]}):a.jsx("button",{onClick:oe=>{oe.stopPropagation(),E(V.id)},className:"p-1.5 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Delete Assignment",children:a.jsx(Di,{size:14})})]}),a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium
                                                        ${z?"bg-red-500/10 text-red-400 border border-red-500/20":"bg-neon-green/10 text-neon-green border border-neon-green/20"}`,children:[a.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${z?"bg-red-400":"bg-neon-green animate-pulse"}`}),z?"Overdue":"Active"]})]})]})})]}),a.jsxs("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 mt-4 text-xs text-white/40",children:[P&&a.jsxs("span",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${G2[P.color]||G2.blue}`}),P.name]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Yr,{size:12,className:O.text})," ",V.totalPoints," pts"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(vv,{size:12}),z?"Was due":"Due",": ",new Date(V.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),!z&&a.jsxs("span",{className:`flex items-center gap-1 ${se<=3?"text-orange-400":""}`,children:[a.jsx(es,{size:12})," ",se,"d left"]}),c&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Mn,{size:12})," ",$.length,"/",Y," submitted"]})]}),c&&a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-[10px] text-white/30 uppercase tracking-wider",children:"Submission Progress"}),a.jsxs("span",{className:"text-xs text-white/50 font-medium",children:[Z,"%"]})]}),a.jsx("div",{className:"w-full h-1.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx(Q.div,{initial:{width:0},animate:{width:`${Z}%`},transition:{duration:.8,ease:"easeOut"},className:`h-full rounded-full bg-gradient-to-r ${O.gradient}`})})]}),a.jsx(Vn,{children:pe&&a.jsx(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:a.jsxs("div",{className:"mt-4 pt-4 border-t border-white/[0.06] space-y-3",children:[c&&a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{className:"rounded-lg bg-white/[0.03] p-3 text-center",children:[a.jsx("p",{className:"text-lg font-bold text-white",children:((Be=V.questions)==null?void 0:Be.length)||0}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Questions"})]}),a.jsxs("div",{className:"rounded-lg bg-white/[0.03] p-3 text-center",children:[a.jsx("p",{className:"text-lg font-bold text-white",children:$.filter(oe=>oe.grade!=null).length}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Graded"})]}),a.jsxs("div",{className:"rounded-lg bg-white/[0.03] p-3 text-center",children:[a.jsx("p",{className:`text-lg font-bold ${xe!==null?xe>=80?"text-neon-green":xe>=60?"text-neon-orange":"text-red-400":"text-white/30"}`,children:xe!==null?`${xe}%`:""}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase",children:"Avg Grade"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium ${O.bg} ${O.text} border ${O.border}`,children:[a.jsx(B,{size:13})," ",O.label]}),a.jsxs("span",{className:"text-xs text-white/30",children:["Created ",new Date(V.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),!c&&a.jsx("button",{onClick:oe=>{oe.stopPropagation(),f(`/assignments/${V.id}`)},className:`px-4 py-2 rounded-xl text-sm font-bold transition-all shadow-lg
                                                                    ${n.find(oe=>oe.assignmentId===V.id&&oe.studentId===(d==null?void 0:d.uid))?"bg-white/10 text-white/60 hover:bg-white/20":`bg-gradient-to-r ${O.gradient} text-white hover:opacity-90 active:scale-95`}`,children:n.find(oe=>oe.assignmentId===V.id&&oe.studentId===(d==null?void 0:d.uid))?"View Submission":"Take Assignment"})]})]})})})]})]})},V.id)})}),j.length===0&&a.jsxs("div",{className:"text-center py-20",children:[a.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-white/[0.03] border border-white/[0.06] flex items-center justify-center mb-4",children:a.jsx(ms,{size:28,className:"text-white/20"})}),a.jsx("p",{className:"text-white/40 text-sm",children:"No assignments found"}),a.jsx("p",{className:"text-white/20 text-xs mt-1",children:"Try adjusting filters or create a new assignment"})]}),a.jsx(Vn,{children:(m||b)&&a.jsx(LF,{classes:e,assignment:b,onClose:()=>{g(!1),N(null)},onSave:b?V=>r(b.id,V):i})})]})}function LF({classes:t,assignment:e,onClose:n,onSave:s}){var B;const i=xs(),r=!!e,[o,l]=R.useState((e==null?void 0:e.title)||""),[c,d]=R.useState((e==null?void 0:e.description)||""),[h,f]=R.useState((e==null?void 0:e.classId)||((B=t[0])==null?void 0:B.id)||""),[m,g]=R.useState((e==null?void 0:e.type)||"quiz"),[b,N]=R.useState(e!=null&&e.dueDate?new Date(e.dueDate).toISOString().split("T")[0]:""),[C,w]=R.useState((e==null?void 0:e.totalPoints)||100),[y,S]=R.useState((e==null?void 0:e.questions)||[{id:"q1",text:"",type:"multiple-choice",options:["","","",""],correctAnswer:0,points:10}]),[I,k]=R.useState((e==null?void 0:e.timeLimit)||0),L=R.useRef(null),[T,p]=R.useState(null);R.useEffect(()=>{T&&L.current&&L.current.scrollIntoView({behavior:"smooth",block:"center"})},[T]);const E=y.reduce((z,$)=>z+(Number($.points)||0),0),j=(z="multiple-choice")=>{const $={id:`q${Date.now()}`,text:"",type:z,points:10};z==="multiple-choice"?($.options=["","","",""],$.correctAnswer=0):z==="true-false"?($.options=["True","False"],$.correctAnswer=0):z==="fill-in-blank"?$.correctText="":z==="ordering"?$.items=["","",""]:z==="matching"?$.pairs=[{left:"",right:""},{left:"",right:""},{left:"",right:""}]:z==="word-scramble"?$.correctText="":z==="sentence-builder"?$.correctSentence="":z==="categorize"?$.categories=[{name:"",items:[""]},{name:"",items:[""]}]:z==="error-correction"?($.errorSentence="",$.correctText=""):z==="translation"?($.sourceText="",$.correctText=""):$.options=[];const U=[...y,$];S(U),p($.id)},D=z=>{y.length<=1||S(y.filter(($,U)=>U!==z))},A=(z,$,U)=>{const Y=[...y];if(Y[z]={...Y[z],[$]:U},$==="type"){const Z=Y[z];delete Z.pairs,delete Z.categories,delete Z.correctText,delete Z.correctSentence,delete Z.errorSentence,delete Z.sourceText,delete Z.correctAnswer,Z.options=[],Z.items=[],U==="multiple-choice"?(Z.options=["","","",""],Z.correctAnswer=0):U==="true-false"?(Z.options=["True","False"],Z.correctAnswer=0):U==="fill-in-blank"?Z.correctText="":U==="ordering"?Z.items=["","",""]:U==="matching"?Z.pairs=[{left:"",right:""},{left:"",right:""},{left:"",right:""}]:U==="word-scramble"?Z.correctText="":U==="sentence-builder"?Z.correctSentence="":U==="categorize"?Z.categories=[{name:"",items:[""]},{name:"",items:[""]}]:U==="error-correction"?(Z.errorSentence="",Z.correctText=""):U==="translation"&&(Z.sourceText="",Z.correctText="")}S(Y)},v=(z,$,U)=>{const Y=[...y];Y[z].options[$]=U,S(Y)},V=z=>JSON.parse(JSON.stringify(z)),P=async z=>{z.preventDefault();try{const $=V(y);await s({title:o,description:c,classId:h,type:m,dueDate:new Date(b).toISOString(),totalPoints:$.reduce((U,Y)=>U+(Number(Y.points)||0),0),questions:$,timeLimit:Number(I)||0}),i.success(r?"Assignment updated!":"Assignment created!"),n()}catch{i.error("Failed to save assignment")}},O=Mc[m]||Mc.assignment;return a.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-auto",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md",onClick:n}),a.jsxs(Q.div,{initial:{scale:.9,y:30,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:30,opacity:0},transition:{type:"spring",duration:.5},className:"relative w-full max-w-3xl my-8",children:[a.jsx("div",{className:`absolute -inset-1 bg-gradient-to-r ${O.gradient} rounded-3xl opacity-20 blur-xl`}),a.jsxs("div",{className:"relative glass-card rounded-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsx("div",{className:`h-1 bg-gradient-to-r ${O.gradient}`}),a.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between bg-white/[0.02]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${O.gradient} flex items-center justify-center shadow-lg`,children:a.jsx(O.icon,{size:20,className:"text-white"})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-display font-bold text-white",children:[r?"Edit":"Create"," Assignment"]}),a.jsx("p",{className:"text-xs text-white/40",children:r?"Modify your assignment details":`Add a new ${m} for your students`})]})]}),a.jsx("button",{onClick:n,className:"p-2 rounded-lg text-white/40 hover:text-white hover:bg-white/10 transition-all",children:a.jsx(Zt,{size:18})})]}),a.jsxs("form",{onSubmit:P,className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Assignment Title"}),a.jsxs("div",{className:"relative group",children:[a.jsx(C4,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20 group-focus-within:text-neon-blue transition-colors"}),a.jsx("input",{value:o,onChange:z=>l(z.target.value),placeholder:"Enter title...",className:"input-glass pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Target Class"}),a.jsx("select",{value:h,onChange:z=>f(z.target.value),className:"input-glass",children:t.map(z=>a.jsx("option",{value:z.id,children:z.name},z.id))})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Due Date"}),a.jsxs("div",{className:"relative group",children:[a.jsx(vv,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20 group-focus-within:text-neon-blue transition-colors"}),a.jsx("input",{type:"date",value:b,onChange:z=>N(z.target.value),className:"input-glass pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:" Time Limit (minutes)"}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{type:"number",value:I,onChange:z=>k(z.target.value),placeholder:"0 = no limit",className:"input-glass",min:"0"}),a.jsx("p",{className:"text-[10px] text-white/20 mt-1",children:I>0?`Students have ${I} minutes to complete`:"No time limit"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Global Mode"}),a.jsx("div",{className:"flex gap-2",children:Object.entries(Mc).map(([z,$])=>a.jsxs("button",{type:"button",onClick:()=>g(z),className:`flex-1 flex flex-col items-center gap-1 p-2 rounded-xl border text-[10px] transition-all
                                                    ${m===z?`${$.bg} ${$.border} ${$.text} font-bold shadow-lg`:"border-white/[0.06] text-white/40 hover:border-white/10 hover:text-white/60"}`,children:[a.jsx($.icon,{size:14}),$.label]},z))})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-white/50 mb-1.5 uppercase tracking-wider font-bold",children:"Instructions & Description"}),a.jsx("textarea",{value:c,onChange:z=>d(z.target.value),className:"input-glass h-24 resize-none p-3",placeholder:"Provide clear instructions for your students..."})]}),a.jsxs("div",{className:"space-y-4 relative",children:[a.jsxs("div",{className:"sticky top-0 z-20 bg-surface-900/95 backdrop-blur-xl py-3 -mx-6 px-6 shadow-2xl border-b border-white/10 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"text-xs text-white/50 uppercase tracking-wider font-bold",children:["Coursework Questions (",y.length,")"]}),a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-neon-blue/10 border border-neon-blue/30",children:[a.jsx(Yr,{size:12,className:"text-neon-blue"}),a.jsx("span",{className:"text-xs font-bold text-neon-blue",children:E}),a.jsx("span",{className:"text-[10px] text-neon-blue/60 font-bold uppercase",children:"pts total"})]})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:["multiple-choice","true-false","fill-in-blank","short-answer","essay","ordering","matching","word-scramble","sentence-builder","categorize","error-correction","translation"].map(z=>a.jsxs("button",{type:"button",onClick:()=>j(z),className:"btn-ghost flex items-center gap-1 text-[10px] py-1 px-2 h-auto",children:[a.jsx(Ft,{size:12})," ",z.split("-").map($=>$[0].toUpperCase()+$.slice(1)).join(" ")]},z))})]}),a.jsx("div",{className:"space-y-4",children:y.map((z,$)=>a.jsxs(Q.div,{layout:!0,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"relative group/q",ref:z.id===T?L:null,children:[a.jsx("div",{className:"absolute -left-3 top-4 w-6 h-6 rounded-full bg-white/[0.03] border border-white/10 flex items-center justify-center text-[10px] font-bold text-white/20 group-hover/q:text-neon-blue group-hover/q:border-neon-blue/30 transition-all",children:$+1}),a.jsxs("div",{className:"p-5 rounded-2xl bg-white/[0.02] border border-white/[0.06] hover:border-white/10 transition-all space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-1 space-y-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("select",{value:z.type,onChange:U=>A($,"type",U.target.value),className:"bg-transparent border-none text-xs text-neon-blue font-bold cursor-pointer focus:ring-0 p-0",children:[a.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),a.jsx("option",{value:"true-false",children:"True/False"}),a.jsx("option",{value:"fill-in-blank",children:"Fill in Blank"}),a.jsx("option",{value:"short-answer",children:"Short Answer"}),a.jsx("option",{value:"essay",children:"Essay"}),a.jsx("option",{value:"ordering",children:"Ordering"}),a.jsx("option",{value:"matching",children:"Matching"}),a.jsx("option",{value:"word-scramble",children:"Word Scramble"}),a.jsx("option",{value:"sentence-builder",children:"Sentence Builder"}),a.jsx("option",{value:"categorize",children:"Categorize"}),a.jsx("option",{value:"error-correction",children:"Error Correction"}),a.jsx("option",{value:"translation",children:"Translation"})]}),a.jsx("div",{className:"h-3 w-px bg-white/10"}),a.jsx("input",{value:z.text,onChange:U=>A($,"text",U.target.value),placeholder:"Enter question text...",className:"bg-transparent border-none text-sm text-white placeholder:text-white/20 w-full focus:ring-0 p-0"})]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-black/20 rounded-lg border border-white/5",children:[a.jsx("input",{type:"number",value:z.points,onChange:U=>A($,"points",Number(U.target.value)),className:"bg-transparent border-none text-xs text-white w-8 text-center focus:ring-0 p-0",min:1}),a.jsx("span",{className:"text-[10px] text-white/30 font-bold uppercase",children:"pts"})]}),y.length>1&&a.jsx("button",{type:"button",onClick:()=>D($),className:"p-1.5 rounded-lg text-white/10 hover:text-red-400 hover:bg-red-500/10 transition-all",children:a.jsx(Di,{size:14})})]})]}),(z.type==="multiple-choice"||z.type==="true-false")&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pt-2",children:z.options.map((U,Y)=>a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${z.correctAnswer===Y?"bg-neon-green/5 border-neon-green/30":"bg-white/[0.01] border-white/5"}`,children:[a.jsx("button",{type:"button",onClick:()=>A($,"correctAnswer",Y),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 transition-all
                                                                    ${z.correctAnswer===Y?"border-neon-green bg-neon-green/20":"border-white/10 hover:border-white/30"}`,children:z.correctAnswer===Y&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-neon-green shadow-[0_0_5px_rgba(52,211,153,0.5)]"})}),a.jsx("input",{value:U,onChange:Z=>v($,Y,Z.target.value),placeholder:z.type==="true-false"?Y===0?"True":"False":`Option ${Y+1}`,readOnly:z.type==="true-false",className:"bg-transparent border-none text-xs text-white/80 placeholder:text-white/10 w-full focus:ring-0 p-0"})]},Y))}),z.type==="fill-in-blank"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter the correct answer. Students must type this exactly."}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-green/5 border border-neon-green/20",children:[a.jsx(ah,{size:14,className:"text-neon-green shrink-0"}),a.jsx("input",{value:z.correctText||"",onChange:U=>A($,"correctText",U.target.value),placeholder:"Correct answer...",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]}),z.type==="ordering"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter items in the CORRECT order. Students will see them shuffled."}),(z.items||[]).map((U,Y)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-xl bg-white/[0.02] border border-white/5",children:[a.jsx("span",{className:"text-[10px] text-neon-blue font-bold w-5 text-center shrink-0",children:Y+1}),a.jsx("input",{value:U,onChange:Z=>{const se=[...z.items||[]];se[Y]=Z.target.value,A($,"items",se)},placeholder:`Item ${Y+1}...`,className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"}),(z.items||[]).length>2&&a.jsx("button",{type:"button",onClick:()=>{const Z=(z.items||[]).filter((se,pe)=>pe!==Y);A($,"items",Z)},className:"text-white/10 hover:text-red-400 p-1",children:a.jsx(Zt,{size:12})})]},Y)),a.jsxs("button",{type:"button",onClick:()=>A($,"items",[...z.items||[],""]),className:"text-[10px] text-neon-blue hover:text-neon-blue/80 flex items-center gap-1",children:[a.jsx(Ft,{size:12})," Add item"]})]}),z.type==="short-answer"&&a.jsx("div",{className:"bg-black/20 border border-white/5 rounded-xl p-3 text-[10px] text-white/30 italic",children:" Students will type a short text response. Teacher grades manually."}),z.type==="essay"&&a.jsx("div",{className:"bg-black/20 border border-white/5 rounded-xl p-3 text-[10px] text-white/30 italic",children:" Students will write a long-form response. Teacher grades manually."}),z.type==="matching"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter matching pairs. Students will see Right column shuffled."}),(z.pairs||[]).map((U,Y)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{value:U.left,onChange:Z=>{const se=[...z.pairs||[]];se[Y]={...se[Y],left:Z.target.value},A($,"pairs",se)},placeholder:`Left ${Y+1}`,className:"flex-1 input-glass text-xs py-2"}),a.jsx("span",{className:"text-white/20 text-xs",children:""}),a.jsx("input",{value:U.right,onChange:Z=>{const se=[...z.pairs||[]];se[Y]={...se[Y],right:Z.target.value},A($,"pairs",se)},placeholder:`Right ${Y+1}`,className:"flex-1 input-glass text-xs py-2"}),(z.pairs||[]).length>2&&a.jsx("button",{type:"button",onClick:()=>A($,"pairs",(z.pairs||[]).filter((Z,se)=>se!==Y)),className:"text-white/10 hover:text-red-400 p-1",children:a.jsx(Zt,{size:12})})]},Y)),a.jsxs("button",{type:"button",onClick:()=>A($,"pairs",[...z.pairs||[],{left:"",right:""}]),className:"text-[10px] text-neon-blue flex items-center gap-1",children:[a.jsx(Ft,{size:12})," Add pair"]})]}),z.type==="word-scramble"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter the correct word. Letters will be scrambled for students."}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-green/5 border border-neon-green/20",children:[a.jsx(ah,{size:14,className:"text-neon-green shrink-0"}),a.jsx("input",{value:z.correctText||"",onChange:U=>A($,"correctText",U.target.value),placeholder:"Correct word...",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]}),z.type==="sentence-builder"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter the correct sentence. Words will be shuffled for students to reorder."}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-purple/5 border border-neon-purple/20",children:[a.jsx(S4,{size:14,className:"text-neon-purple shrink-0"}),a.jsx("input",{value:z.correctSentence||"",onChange:U=>A($,"correctSentence",U.target.value),placeholder:"The cat sat on the mat",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]}),z.type==="categorize"&&a.jsxs("div",{className:"space-y-3 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Define categories and their items. Students will sort items into the correct category."}),(z.categories||[]).map((U,Y)=>a.jsxs("div",{className:"p-3 rounded-xl bg-white/[0.02] border border-white/5 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{value:U.name,onChange:Z=>{const se=[...z.categories||[]];se[Y]={...se[Y],name:Z.target.value},A($,"categories",se)},placeholder:`Category ${Y+1} name`,className:"bg-transparent border-none text-xs text-neon-blue font-bold w-full focus:ring-0 p-0"}),(z.categories||[]).length>2&&a.jsx("button",{type:"button",onClick:()=>A($,"categories",(z.categories||[]).filter((Z,se)=>se!==Y)),className:"text-white/10 hover:text-red-400 p-1",children:a.jsx(Zt,{size:12})})]}),(U.items||[]).map((Z,se)=>a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a.jsx("span",{className:"text-[10px] text-white/20",children:""}),a.jsx("input",{value:Z,onChange:pe=>{const xe=[...z.categories||[]],Be=[...xe[Y].items];Be[se]=pe.target.value,xe[Y]={...xe[Y],items:Be},A($,"categories",xe)},placeholder:"Item...",className:"bg-transparent border-none text-xs text-white/60 w-full focus:ring-0 p-0"}),(U.items||[]).length>1&&a.jsx("button",{type:"button",onClick:()=>{const pe=[...z.categories||[]];pe[Y]={...pe[Y],items:pe[Y].items.filter((xe,Be)=>Be!==se)},A($,"categories",pe)},className:"text-white/10 hover:text-red-400 p-0.5",children:a.jsx(Zt,{size:10})})]},se)),a.jsxs("button",{type:"button",onClick:()=>{const Z=[...z.categories||[]];Z[Y]={...Z[Y],items:[...Z[Y].items,""]},A($,"categories",Z)},className:"text-[10px] text-neon-blue ml-4 flex items-center gap-1",children:[a.jsx(Ft,{size:10})," item"]})]},Y)),a.jsxs("button",{type:"button",onClick:()=>A($,"categories",[...z.categories||[],{name:"",items:[""]}]),className:"text-[10px] text-neon-blue flex items-center gap-1",children:[a.jsx(Ft,{size:12})," Add category"]})]}),z.type==="error-correction"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Enter a sentence WITH errors, then the corrected version."}),a.jsx("input",{value:z.errorSentence||"",onChange:U=>A($,"errorSentence",U.target.value),placeholder:"Sentence with error: He go to school yesterday",className:"input-glass text-xs"}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-green/5 border border-neon-green/20",children:[a.jsx(zt,{size:14,className:"text-neon-green shrink-0"}),a.jsx("input",{value:z.correctText||"",onChange:U=>A($,"correctText",U.target.value),placeholder:"Correct: He went to school yesterday",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]}),z.type==="translation"&&a.jsxs("div",{className:"space-y-2 pt-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Source text to translate, and the correct translation."}),a.jsx("input",{value:z.sourceText||"",onChange:U=>A($,"sourceText",U.target.value),placeholder:"Source: Hola, cmo ests?",className:"input-glass text-xs"}),a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-neon-green/5 border border-neon-green/20",children:[a.jsx(ah,{size:14,className:"text-neon-green shrink-0"}),a.jsx("input",{value:z.correctText||"",onChange:U=>A($,"correctText",U.target.value),placeholder:"Translation: Hello, how are you?",className:"bg-transparent border-none text-xs text-white w-full focus:ring-0 p-0"})]})]})]})]},z.id))})]})]}),a.jsx("div",{className:"p-6 border-t border-white/10 bg-white/[0.02]",children:a.jsxs("button",{type:"submit",onClick:P,className:`w-full py-4 rounded-xl bg-gradient-to-r ${O.gradient} text-white font-bold transition-all hover:opacity-90 hover:shadow-[0_0_20px_rgba(255,255,255,0.1)] active:scale-[0.99] flex items-center justify-center gap-2`,children:[r?a.jsx(hu,{size:18}):a.jsx(Ft,{size:18}),r?"Save Changes":`Launch ${O.label}`]})})]})]})]})}function zF(){const{classes:t,assignments:e,submissions:n,allStudents:s,updateSubmission:i,deleteSubmission:r,bulkGradeSubmissions:o}=vn(),l=xs(),[c,d]=R.useState(null),[h,f]=R.useState("all"),[m,g]=R.useState("all"),[b,N]=R.useState(""),C=j=>j>=90?"text-neon-green":j>=70?"text-neon-blue":j>=50?"text-neon-orange":"text-red-400",w=j=>j>=90?"from-neon-green/20 to-neon-green/5":j>=70?"from-neon-blue/20 to-neon-blue/5":j>=50?"from-neon-orange/20 to-neon-orange/5":"from-red-500/20 to-red-500/5",y=async(j,D,A)=>{try{const v=Math.round(Number(D));await i(j,{grade:v,questionScores:A,status:"graded",gradedAt:new Date().toISOString()}),l.success(`Grade saved: ${v} pts`),d(null)}catch{l.error("Failed to save grade")}},S=async j=>{try{await r(j),l.success("Submission deleted  student can retake the assignment"),d(null)}catch{l.error("Failed to allow retake")}},I=R.useMemo(()=>n.filter(j=>{const D=e.find(v=>v.id===j.assignmentId),A=s.find(v=>v.id===j.studentId);if(h!=="all"&&(D==null?void 0:D.classId)!==h||m==="pending"&&j.grade!=null||m==="graded"&&j.grade==null)return!1;if(b){const v=b.toLowerCase(),V=((A==null?void 0:A.displayName)||j.studentName||"").toLowerCase().includes(v),P=((D==null?void 0:D.title)||"").toLowerCase().includes(v);if(!V&&!P)return!1}return!0}).sort((j,D)=>j.grade==null&&D.grade!=null?-1:j.grade!=null&&D.grade==null?1:new Date(D.submittedAt)-new Date(j.submittedAt)),[n,e,s,h,m,b]),k=n.filter(j=>j.grade!=null),L=n.filter(j=>j.grade==null).length,T=k.length>0?Math.round(k.reduce((j,D)=>{const A=e.find(V=>V.id===D.assignmentId),v=(A==null?void 0:A.totalPoints)||100;return j+Number(D.grade)/v*100},0)/k.length):0,p={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},E={hidden:{opacity:0,y:15},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Gradebook",subtitle:"View and manage student grades"}),a.jsxs(Q.div,{variants:p,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[{label:"Average",value:`${T}%`,icon:Yr,color:"neon-green",glow:"rgba(0,255,136,0.08)"},{label:"Submissions",value:n.length,icon:Ii,color:"neon-blue",glow:"rgba(0,209,255,0.08)"},{label:"Graded",value:k.length,icon:Ku,color:"neon-purple",glow:"rgba(139,92,246,0.08)"},{label:"Pending",value:L,icon:es,color:L>0?"neon-orange":"white/40",glow:L>0?"rgba(255,165,0,0.08)":"transparent"}].map((j,D)=>a.jsxs(Q.div,{variants:E,className:"glass-card p-3 sm:p-5",style:{boxShadow:`0 0 30px ${j.glow}`},children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(j.icon,{size:16,className:`text-${j.color}`}),a.jsx("span",{className:"text-xs text-white/40",children:j.label})]}),a.jsx("p",{className:`text-xl sm:text-3xl font-display font-bold text-${j.color}`,children:j.value})]},D))}),L>0&&a.jsx(Q.div,{variants:E,className:"glass-card p-3 border-l-4 border-l-neon-orange bg-neon-orange/5 cursor-pointer",onClick:()=>g("pending"),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Mi,{size:18,className:"text-neon-orange"}),a.jsxs("span",{className:"text-sm text-neon-orange font-medium",children:[L," submissions need grading"]})]})}),a.jsxs(Q.div,{variants:E,className:"flex flex-wrap gap-3 items-center",children:[a.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[a.jsx(ki,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20"}),a.jsx("input",{value:b,onChange:j=>N(j.target.value),placeholder:"Search student or assignment...",className:"input-glass pl-10 text-sm"})]}),a.jsxs("select",{value:h,onChange:j=>f(j.target.value),className:"input-glass text-sm px-3 py-2.5 w-auto min-w-[140px]",children:[a.jsx("option",{value:"all",children:"All Classes"}),t.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]}),a.jsx("div",{className:"flex rounded-xl border border-white/[0.08] overflow-hidden",children:["all","pending","graded"].map(j=>a.jsx("button",{onClick:()=>g(j),className:`px-3 py-2 text-xs capitalize transition-all ${m===j?"bg-neon-blue/10 text-neon-blue":"text-white/40 hover:text-white/60 hover:bg-white/[0.04]"}`,children:j},j))})]}),a.jsxs(Q.div,{variants:E,className:"glass-card overflow-hidden",children:[a.jsxs("div",{className:"hidden sm:grid grid-cols-12 gap-4 px-6 py-3 border-b border-white/[0.06] text-xs text-white/40 uppercase tracking-wider",children:[a.jsx("div",{className:"col-span-3",children:"Student"}),a.jsx("div",{className:"col-span-3",children:"Assignment"}),a.jsx("div",{className:"col-span-2",children:"Class"}),a.jsx("div",{className:"col-span-2",children:"Grade"}),a.jsx("div",{className:"col-span-2 text-right",children:"Action"})]}),I.length===0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(Ii,{size:28,className:"mx-auto text-white/10 mb-3"}),a.jsx("p",{className:"text-white/40 text-sm",children:n.length===0?"No submissions yet":"No matching submissions"})]}):I.map(j=>{var P,O;const D=s.find(B=>B.id===j.studentId),A=e.find(B=>B.id===j.assignmentId),v=t.find(B=>B.id===(A==null?void 0:A.classId)),V=j.grade!=null?Math.round(j.grade/((A==null?void 0:A.totalPoints)||100)*100):null;return a.jsxs("div",{onClick:()=>d({sub:j,assignment:A,student:D}),className:"sm:grid sm:grid-cols-12 sm:gap-4 px-4 sm:px-6 py-3 sm:py-4 border-b border-white/[0.02] hover:bg-white/[0.02] transition-all items-center cursor-pointer group flex flex-col sm:flex-row gap-2 sm:gap-4",children:[a.jsxs("div",{className:"sm:col-span-3 flex items-center gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-bold shrink-0 ${j.grade!=null?"bg-gradient-to-br from-neon-blue to-neon-purple":"bg-gradient-to-br from-neon-orange to-amber-500"}`,children:((P=D==null?void 0:D.displayName)==null?void 0:P[0])||((O=j.studentName)==null?void 0:O[0])||"?"}),a.jsx("span",{className:"text-sm text-white truncate",children:(D==null?void 0:D.displayName)||j.studentName||"Unknown"})]}),a.jsx("div",{className:"sm:col-span-3 text-sm text-white/60 truncate",children:(A==null?void 0:A.title)||"Unknown"}),a.jsx("div",{className:"sm:col-span-2 font-mono text-xs text-neon-blue/60 hidden sm:block",children:(v==null?void 0:v.name)||""}),a.jsx("div",{className:"sm:col-span-2",children:j.grade!=null?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${w(V)} flex items-center justify-center`,children:a.jsx("span",{className:`text-xs font-bold ${C(V)}`,children:j.grade})}),a.jsxs("span",{className:"text-xs text-white/30",children:["/ ",(A==null?void 0:A.totalPoints)||100]})]}):a.jsxs("span",{className:"text-xs text-neon-orange flex items-center gap-1",children:[a.jsx(es,{size:12})," Pending"]})}),a.jsx("div",{className:"sm:col-span-2 text-right hidden sm:block",children:a.jsx("button",{className:"p-2 rounded-lg bg-white/[0.02] border border-white/[0.05] text-white/40 group-hover:text-neon-blue group-hover:border-neon-blue/30 transition-all",children:a.jsx(v4,{size:16})})})]},j.id)})]})]}),a.jsx(Vn,{children:c&&a.jsx(UF,{submission:c.sub,assignment:c.assignment,student:c.student,onClose:()=>d(null),onGrade:y,onRetake:S})})]})}function UF({submission:t,assignment:e,student:n,onClose:s,onGrade:i,onRetake:r}){var f,m;const o=()=>{var C;const g={},b=t.questionScores||{},N={};return Object.entries(b).forEach(([w,y])=>{N[Number(w)]=y}),(C=e==null?void 0:e.questions)==null||C.forEach((w,y)=>{var I,k;const S=(I=t.answers)==null?void 0:I[y];if(w.type==="multiple-choice"||w.type==="true-false"){const L=(k=w.options)==null?void 0:k[w.correctAnswer];g[y]=S===L&&w.points||0}else if(w.type==="fill-in-blank"||w.type==="word-scramble"||w.type==="error-correction"||w.type==="translation"){const L=(S||"").trim().toLowerCase(),T=(w.correctText||"").trim().toLowerCase();g[y]=L&&T&&L===T&&w.points||0}else if(w.type==="sentence-builder"){const L=(S||"").trim().toLowerCase(),T=(w.correctSentence||"").trim().toLowerCase();g[y]=L&&T&&L===T&&w.points||0}else if(w.type==="ordering"){const L=w.items||[],T=JSON.stringify(S)===JSON.stringify(L);g[y]=T&&w.points||0}else if(w.type==="categorize"){const T=(w.categories||[]).reduce((E,j,D)=>[...E,...j.items.map(()=>D)],[]),p=S&&typeof S=="object"&&T.every((E,j)=>S[j]===E);g[y]=p&&w.points||0}else if(w.type==="matching"){const L=(w.pairs||[]).every((T,p)=>(S==null?void 0:S[p])===T.right);g[y]=L&&w.points||0}else{const L=N[y];g[y]=L!==void 0?Number(L):""}}),g},[l,c]=R.useState(o),d=((f=e==null?void 0:e.questions)==null?void 0:f.reduce((g,b,N)=>{const C=l[N],w=parseFloat(C);return isNaN(w)?g:g+Math.min(Math.max(w,0),b.points||0)},0))??0,h={"multiple-choice":"Multiple Choice","true-false":"True / False","fill-in-blank":"Fill in Blank","short-answer":"Short Answer",essay:"Essay",ordering:"Ordering","word-scramble":"Word Scramble","sentence-builder":"Sentence Builder","error-correction":"Error Correction",translation:"Translation",categorize:"Categorize",matching:"Matching"};return a.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:s}),a.jsxs(Q.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative glass-card w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-white/10 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-xl font-display font-bold text-white",children:"Review Submission"}),a.jsxs("p",{className:"text-xs sm:text-sm text-white/40",children:[(n==null?void 0:n.displayName)||t.studentName,"  ",e==null?void 0:e.title]})]}),a.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-white/10 text-white/40 hover:text-white transition-colors",children:a.jsx(Zt,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4",children:(m=e==null?void 0:e.questions)==null?void 0:m.map((g,b)=>{var v,V;const N=(v=t.answers)==null?void 0:v[b],C=g.type==="multiple-choice"||g.type==="true-false",w=g.type==="fill-in-blank",y=g.type==="ordering",S=g.type==="word-scramble"||g.type==="sentence-builder"||g.type==="error-correction"||g.type==="translation",I=g.type==="essay"||g.type==="short-answer",k=g.type==="categorize",L=g.type==="matching";let T=null,p=!1;if(C)T=(V=g.options)==null?void 0:V[g.correctAnswer],p=N===T;else if(w||g.type==="word-scramble"||g.type==="error-correction"||g.type==="translation"){T=g.correctText;const P=(N||"").trim().toLowerCase(),O=(T||"").trim().toLowerCase();p=P&&O&&P===O}else if(g.type==="sentence-builder"){T=g.correctSentence;const P=(N||"").trim().toLowerCase(),O=(T||"").trim().toLowerCase();p=P&&O&&P===O}else if(y)p=JSON.stringify(N)===JSON.stringify(g.items||[]);else if(k){const O=(g.categories||[]).reduce((B,z,$)=>[...B,...z.items.map(()=>$)],[]);p=N&&typeof N=="object"&&O.every((B,z)=>N[z]===B)}else L&&(p=(g.pairs||[]).every((P,O)=>(N==null?void 0:N[O])===P.right));const E=l[b],j=C||w||y||S||k||L,D=I?"bg-white/[0.02] border-white/[0.04]":p?"bg-neon-green/5 border-neon-green/20":"bg-red-500/5 border-red-500/20",A=N==null?" No answer ":typeof N=="string"?N||" No answer ":Array.isArray(N)?N.join(", ")||" No answer ":typeof N=="object"?JSON.stringify(N):String(N);return a.jsxs("div",{className:`p-4 rounded-xl border ${D}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("p",{className:"text-xs text-white/40",children:["Q",b+1,"  ",h[g.type]||g.type]}),a.jsxs("div",{className:"flex items-center gap-2",children:[j&&a.jsx("span",{className:`text-xs font-bold ${p?"text-neon-green":"text-red-400"}`,children:p?` +${g.points}`:" 0"}),I&&a.jsxs("div",{className:"flex items-center gap-1 bg-black/30 px-2 py-1 rounded-lg border border-white/10",children:[a.jsx("input",{type:"number",min:"0",max:g.points,value:E,onChange:P=>{const O=P.target.value,B=parseFloat(O),z=isNaN(B)?"":Math.min(Math.max(B,0),g.points||0);c({...l,[b]:z})},className:"bg-transparent border-none text-sm text-neon-blue w-10 text-center focus:ring-0 p-0 font-bold",placeholder:"0"}),a.jsxs("span",{className:"text-[10px] text-white/30",children:["/ ",g.points]})]})]})]}),a.jsx("p",{className:"text-white mb-3 font-medium text-sm",children:g.text}),a.jsxs("div",{className:"p-3 rounded-lg bg-black/20 border border-white/5",children:[a.jsx("p",{className:"text-xs text-neon-blue mb-1 uppercase tracking-wider font-bold",children:"Student Answer:"}),y?a.jsxs("div",{className:"space-y-1",children:[(Array.isArray(N)?N:[]).map((P,O)=>a.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/80",children:[a.jsxs("span",{className:"text-[10px] text-white/30 w-4",children:[O+1,"."]}),P]},O)),(!N||!Array.isArray(N)||N.length===0)&&a.jsx("p",{className:"text-white/30 text-sm",children:" No answer "})]}):L?a.jsx("div",{className:"space-y-1",children:(g.pairs||[]).map((P,O)=>a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-white/60",children:P.left}),a.jsx("span",{className:"text-white/20",children:""}),a.jsx("span",{className:(N==null?void 0:N[O])===P.right?"text-neon-green":"text-red-400",children:(N==null?void 0:N[O])||""})]},O))}):k?a.jsx("div",{className:"space-y-4 mt-2",children:(g.categories||[]).map((P,O)=>{const B=(g.categories||[]).reduce(($,U)=>[...$,...U.items||[]],[]),z=Object.entries(N||{}).filter(([$,U])=>Number(U)===O).map(([$])=>B[$]).filter(Boolean);return a.jsxs("div",{className:"bg-white/[0.03] p-2 rounded-lg mb-2",children:[a.jsx("p",{className:"text-xs text-white/50 mb-2 uppercase font-bold",children:P.name}),a.jsx("div",{className:"flex flex-wrap gap-2",children:z.length>0?z.map(($,U)=>a.jsx("span",{className:"px-2 py-1 bg-neon-blue/10 border border-neon-blue/20 rounded text-xs text-white",children:$},U)):a.jsx("span",{className:"text-xs text-white/20 italic",children:"No items placed"})})]},O)})}):a.jsx("p",{className:"text-white/80 text-sm whitespace-pre-wrap",children:A})]}),(C||w||S)&&!p&&T&&a.jsx("div",{className:"mt-2 p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:a.jsxs("p",{className:"text-xs text-neon-green",children:[" Correct: ",T]})}),y&&!p&&a.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:[a.jsx("p",{className:"text-xs text-neon-green mb-1",children:" Correct order:"}),(g.items||[]).map((P,O)=>a.jsxs("p",{className:"text-xs text-neon-green/70 ml-2",children:[O+1,". ",P]},O))]}),L&&!p&&a.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:[a.jsx("p",{className:"text-xs text-neon-green mb-1",children:" Correct matches:"}),(g.pairs||[]).map((P,O)=>a.jsxs("p",{className:"text-xs text-neon-green/70 ml-2",children:[P.left,"  ",P.right]},O))]})]},b)})}),a.jsxs("div",{className:"p-4 sm:p-6 border-t border-white/10 bg-white/[0.02] flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-white/40 uppercase block mb-1",children:"Total Score"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl font-display font-black text-neon-blue",children:d}),a.jsxs("span",{className:"text-white/30 text-sm",children:["/ ",(e==null?void 0:e.totalPoints)||100]}),a.jsxs("span",{className:"text-xs text-white/20 ml-2",children:["(",Math.round(d/((e==null?void 0:e.totalPoints)||100)*100),"%)"]})]})]}),a.jsxs("button",{onClick:()=>i(t.id,d,l),className:"btn-neon h-12 px-6 sm:px-8 flex items-center justify-center gap-2",children:[a.jsx(zt,{size:18})," ",t.grade!=null?"Update":"Save"," Grade"]}),a.jsxs("button",{onClick:()=>r(t.id),className:"h-12 px-5 rounded-xl bg-neon-orange/10 border border-neon-orange/20 text-neon-orange text-sm font-medium flex items-center justify-center gap-2 hover:bg-neon-orange/20 transition-all",children:[a.jsx(Es,{size:16})," Allow Retake"]})]})]})]})}function BF(){var v;const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,announcements:i,joinClass:r,getOverdueAssignments:o,getPendingAssignments:l,getStudentProgress:c,getStudentStreak:d}=vn(),h=xs(),f=yn(),[m,g]=R.useState(""),[b,N]=R.useState(!1),[C,w]=R.useState(!1),y=t==null?void 0:t.uid,S=e.filter(V=>{var P;return(P=V.students)==null?void 0:P.includes(y)}),I=c(y),k=o(y),L=l(y),T=d(y),p=s.filter(V=>V.studentId===y&&V.grade!=null).sort((V,P)=>new Date(P.gradedAt||P.submittedAt)-new Date(V.gradedAt||V.submittedAt)).slice(0,5),E=i.filter(V=>S.some(P=>P.id===V.classId)).sort((V,P)=>new Date(P.createdAt)-new Date(V.createdAt)).slice(0,4),j=async()=>{if(m.trim()){N(!0);try{await r(m.trim(),y),h.success("Successfully joined class!"),g(""),w(!1)}catch(V){h.error(V.message)}finally{N(!1)}}},D={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},A={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:`Welcome back, ${((v=t==null?void 0:t.displayName)==null?void 0:v.split(" ")[0])||"Student"}`,subtitle:`${new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}`,actions:a.jsxs("button",{onClick:()=>w(!C),className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(Ft,{size:16})," Join Class"]})}),a.jsxs(Q.div,{variants:D,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[C&&a.jsxs(Q.div,{variants:A,className:"glass-card p-4 sm:p-6 border border-neon-blue/20",children:[a.jsx("h3",{className:"text-white font-semibold mb-3",children:"Join a Class"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("input",{placeholder:"Enter class code...",value:m,onChange:V=>g(V.target.value.toUpperCase()),onKeyDown:V=>V.key==="Enter"&&j(),className:"input-glass flex-1 uppercase tracking-widest font-mono",maxLength:6}),a.jsx("button",{onClick:j,disabled:b,className:"btn-neon px-6 shrink-0",children:b?"Joining...":"Join"})]})]}),a.jsx(Q.div,{variants:A,className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[{icon:Ct,label:"Classes",value:S.length,color:"neon-blue",glow:"rgba(0,209,255,0.1)"},{icon:O0,label:"Completed",value:`${I.completed}/${I.total}`,color:"neon-green",glow:"rgba(0,255,136,0.1)"},{icon:Ii,label:"Average",value:`${I.avgGrade}%`,color:"neon-purple",glow:"rgba(139,92,246,0.1)"},{icon:Dc,label:"Streak",value:`${T}d`,color:"neon-orange",glow:"rgba(255,165,0,0.1)"}].map((V,P)=>a.jsxs("div",{className:"glass-card p-3 sm:p-5 group hover:scale-[1.02] transition-all",style:{boxShadow:`0 0 30px ${V.glow}`},children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[a.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-${V.color}/10 border border-${V.color}/20 flex items-center justify-center`,children:a.jsx(V.icon,{size:16,className:`text-${V.color}`})}),a.jsx("p",{className:"text-xs sm:text-sm text-white/40",children:V.label})]}),a.jsx("p",{className:`text-xl sm:text-3xl font-display font-black text-${V.color}`,children:V.value})]},P))}),k.length>0&&a.jsxs(Q.div,{variants:A,className:"glass-card p-4 border-l-4 border-l-red-500 bg-red-500/5",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Mi,{size:18,className:"text-red-400"}),a.jsxs("h3",{className:"text-red-400 font-semibold text-sm",children:["Overdue Assignments (",k.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:k.slice(0,3).map(V=>a.jsxs("button",{onClick:()=>f(`/assignments/${V.id}`),className:"w-full flex items-center justify-between p-2 rounded-lg bg-white/[0.02] hover:bg-white/[0.05] transition-colors text-left",children:[a.jsx("span",{className:"text-sm text-white/60",children:V.title}),a.jsx("span",{className:"text-xs text-red-400",children:new Date(V.dueDate).toLocaleDateString()})]},V.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Q.div,{variants:A,className:"glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-display font-bold text-white flex items-center gap-2",children:[a.jsx(es,{size:18,className:"text-neon-blue"})," Upcoming"]}),a.jsx("span",{className:"badge-glass text-xs",children:L.length})]}),L.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"No upcoming assignments!"}):a.jsx("div",{className:"space-y-3",children:L.slice(0,5).map(V=>{const P=e.find(B=>B.id===V.classId),O=Math.ceil((new Date(V.dueDate)-new Date)/(1e3*60*60*24));return a.jsxs("button",{onClick:()=>f(`/assignments/${V.id}`),className:"w-full flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] hover:bg-white/[0.05] border border-white/[0.04] hover:border-neon-blue/20 transition-all text-left group",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-neon-blue/10 border border-neon-blue/20 flex items-center justify-center shrink-0",children:a.jsx(O0,{size:18,className:"text-neon-blue"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:V.title}),a.jsx("p",{className:"text-xs text-white/30",children:P==null?void 0:P.name})]}),a.jsx("div",{className:"text-right shrink-0",children:a.jsxs("p",{className:`text-xs font-bold ${O<=1?"text-red-400":O<=3?"text-neon-orange":"text-neon-green"}`,children:[O,"d left"]})}),a.jsx(cu,{size:14,className:"text-white/20 group-hover:text-neon-blue transition-colors shrink-0"})]},V.id)})})]}),a.jsxs(Q.div,{variants:A,className:"glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-display font-bold text-white flex items-center gap-2",children:[a.jsx(Yr,{size:18,className:"text-neon-green"})," Recent Grades"]}),a.jsx("button",{onClick:()=>f("/grades"),className:"text-xs text-neon-blue hover:text-neon-blue/80 transition-colors",children:"View All"})]}),p.length===0?a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"No grades yet"}):a.jsx("div",{className:"space-y-3",children:p.map(V=>{const P=n.find($=>$.id===V.assignmentId),O=(P==null?void 0:P.totalPoints)||100,B=Math.round(V.grade/O*100),z=B>=90?"neon-green":B>=70?"neon-blue":B>=50?"neon-orange":"red-400";return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg bg-${z}/10 border border-${z}/20 flex items-center justify-center`,children:a.jsxs("span",{className:`text-${z} font-bold text-sm`,children:[B,"%"]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:(P==null?void 0:P.title)||"Assignment"}),a.jsxs("p",{className:"text-xs text-white/30",children:[V.grade,"/",O," pts"]})]})]},V.id)})})]})]}),E.length>0&&a.jsxs(Q.div,{variants:A,className:"glass-card p-4 sm:p-6",children:[a.jsx("h3",{className:"text-lg font-display font-bold text-white mb-4",children:" Recent Announcements"}),a.jsx("div",{className:"space-y-3",children:E.map(V=>{const P=e.find(O=>O.id===V.classId);return a.jsxs("div",{className:"p-3 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-neon-purple",children:P==null?void 0:P.name}),a.jsx("span",{className:"text-[10px] text-white/20",children:""}),a.jsx("span",{className:"text-[10px] text-white/30",children:new Date(V.createdAt).toLocaleDateString()}),V.pinned&&a.jsx("span",{className:"text-[10px] text-neon-orange",children:""})]}),a.jsx("p",{className:"text-sm text-white/60 leading-relaxed",children:V.content})]},V.id)})})]})]})]})}function FF(){const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,leaveClass:i,getAssignmentCompletionRate:r,getMyPendingRequests:o,respondToRequest:l}=vn(),c=xs(),d=yn(),[h,f]=R.useState(""),[m,g]=R.useState(null),[b,N]=R.useState(null),C=t==null?void 0:t.uid,w=e.filter(p=>{var E;return((E=p.students)==null?void 0:E.includes(C))&&!p.archived}),y=w.filter(p=>{var E,j;return((E=p.name)==null?void 0:E.toLowerCase().includes(h.toLowerCase()))||((j=p.teacherName)==null?void 0:j.toLowerCase().includes(h.toLowerCase()))}),S=async p=>{try{await i(p,C),c.success("Successfully left the class."),g(null)}catch(E){c.error("Failed to leave class: "+E.message)}},I={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},k={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},L=o(),T=async(p,E)=>{N(p);try{await l(p,E),c.success(E?"Te uniste a la clase!":"Solicitud rechazada.")}catch(j){c.error("Error: "+j.message)}finally{N(null)}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"My Classes",subtitle:`${w.length} enrolled classes`}),a.jsxs(Q.div,{variants:I,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(Q.div,{variants:k,className:"relative",children:[a.jsx(ki,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),a.jsx("input",{placeholder:"Search classes...",value:h,onChange:p=>f(p.target.value),className:"input-glass pl-11"})]}),L.length>0&&a.jsxs(Q.div,{variants:k,className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(No,{size:16,className:"text-amber-400"}),a.jsx("h2",{className:"text-sm font-bold text-white uppercase tracking-wider",children:"Solicitudes Pendientes"}),a.jsx("span",{className:"ml-auto text-[10px] font-bold px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400",children:L.length})]}),L.map(p=>a.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,x:-50},className:"glass-card p-4 border border-amber-500/10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center text-amber-400 shrink-0",children:a.jsx(Ct,{size:18})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:p.className}),a.jsxs("p",{className:"text-xs text-white/40 truncate",children:["de ",p.teacherName]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>T(p.id,!1),disabled:b===p.id,className:"p-2 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-all disabled:opacity-50",title:"Rechazar",children:a.jsx(Zt,{size:16})}),a.jsx("button",{onClick:()=>T(p.id,!0),disabled:b===p.id,className:"p-2 rounded-lg bg-neon-green/10 text-neon-green hover:bg-neon-green/20 transition-all disabled:opacity-50",title:"Aceptar",children:a.jsx(vi,{size:16})})]})]})},p.id))]}),y.length===0?a.jsxs(Q.div,{variants:k,className:"glass-card p-12 text-center",children:[a.jsx(Ct,{size:40,className:"text-white/10 mx-auto mb-4"}),a.jsx("p",{className:"text-white/30 text-sm",children:h?"No classes match your search.":"You haven't joined any classes yet."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:y.map(p=>{var O;const E=n.filter(B=>B.classId===p.id),j=s.filter(B=>B.studentId===C&&E.some(z=>z.id===B.assignmentId)),D=j.length,A=E.length,v=A>0?Math.round(D/A*100):0,V=j.filter(B=>B.grade!=null),P=V.length>0?Math.round(V.reduce((B,z)=>{const $=E.find(U=>U.id===z.assignmentId);return B+z.grade/(($==null?void 0:$.totalPoints)||100)*100},0)/V.length):null;return a.jsxs(Q.div,{variants:k,className:"glass-card group overflow-hidden hover:border-white/10 transition-all",children:[a.jsx("div",{className:"h-1 bg-white/[0.02]",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-neon-blue to-neon-green transition-all duration-500",style:{width:`${v}%`}})}),a.jsxs("div",{className:"p-4 sm:p-5",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"text-base sm:text-lg font-display font-bold text-white truncate",children:p.name}),a.jsx("p",{className:"text-xs text-white/40 mt-0.5",children:p.teacherName})]}),a.jsx("div",{className:"text-right shrink-0",children:P!=null&&a.jsxs("span",{className:`text-sm font-bold ${P>=90?"text-neon-green":P>=70?"text-neon-blue":"text-neon-orange"}`,children:[P,"%"]})})]}),p.description&&a.jsx("p",{className:"text-xs text-white/30 leading-relaxed mb-4 line-clamp-2",children:p.description}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[a.jsxs("div",{className:"text-center p-2 rounded-lg bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("p",{className:"text-xs text-white/30",children:"Students"}),a.jsx("p",{className:"text-sm font-bold text-white",children:((O=p.students)==null?void 0:O.length)||0})]}),a.jsxs("div",{className:"text-center p-2 rounded-lg bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("p",{className:"text-xs text-white/30",children:"Done"}),a.jsxs("p",{className:"text-sm font-bold text-neon-green",children:[D,"/",A]})]}),a.jsxs("div",{className:"text-center p-2 rounded-lg bg-white/[0.02] border border-white/[0.04]",children:[a.jsx("p",{className:"text-xs text-white/30",children:"Level"}),a.jsx("p",{className:"text-sm font-bold text-neon-purple",children:p.level||""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-4 bg-white/[0.02] px-3 py-2 rounded-lg border border-white/[0.04]",children:[a.jsx("span",{className:"text-[10px] text-white/30 uppercase tracking-wider",children:"Code"}),a.jsx("span",{className:"text-sm font-mono font-bold text-neon-blue tracking-widest",children:p.code})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>d("/assignments"),className:"flex-1 btn-ghost flex items-center justify-center gap-2 text-sm py-2 rounded-lg",children:[a.jsx(ms,{size:14})," Assignments"]}),a.jsxs("button",{onClick:()=>d(`/classes/${p.id}?tab=chat`),className:"flex-1 btn-ghost flex items-center justify-center gap-2 text-sm py-2 rounded-lg",children:[a.jsx(L0,{size:14})," Chat"]}),a.jsx("button",{onClick:()=>g(p.id),className:"w-9 h-9 rounded-lg bg-red-500/5 border border-red-500/10 flex items-center justify-center text-red-400/40 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Leave class",children:a.jsx(T4,{size:14})})]})]}),a.jsx(Vn,{children:m===p.id&&a.jsx(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-red-500/10 bg-red-500/5 overflow-hidden",children:a.jsxs("div",{className:"p-4 text-center space-y-3",children:[a.jsxs("p",{className:"text-sm text-red-400",children:["Leave ",a.jsx("strong",{children:p.name}),"?"]}),a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx("button",{onClick:()=>g(null),className:"px-4 py-1.5 rounded-lg bg-white/5 text-white/50 text-sm hover:bg-white/10 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>S(p.id),className:"px-4 py-1.5 rounded-lg bg-red-500/20 text-red-400 text-sm font-semibold hover:bg-red-500/30 transition-colors",children:"Leave"})]})]})})})]},p.id)})})]})]})}function $F(){const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,getStudentProgress:i}=vn(),r=yn(),o=t==null?void 0:t.uid,[l,c]=R.useState("all"),[d,h]=R.useState("recent"),f=e.filter(I=>{var k;return(k=I.students)==null?void 0:k.includes(o)}),m=i(o),g=R.useMemo(()=>s.filter(I=>I.studentId===o&&I.grade!=null).map(I=>{const k=n.find(E=>E.id===I.assignmentId),L=e.find(E=>E.id===(k==null?void 0:k.classId)),T=(k==null?void 0:k.totalPoints)||100,p=Math.round(I.grade/T*100);return{...I,assignment:k,class:L,pct:p,max:T}}).filter(I=>{var k;return l==="all"||((k=I.class)==null?void 0:k.id)===l}).sort((I,k)=>d==="recent"?new Date(k.gradedAt||k.submittedAt)-new Date(I.gradedAt||I.submittedAt):d==="highest"?k.pct-I.pct:d==="lowest"?I.pct-k.pct:0),[s,n,e,o,l,d]),b=m.avgGrade,N=b>=90?"neon-green":b>=70?"neon-blue":b>=50?"neon-orange":"red-400",C=R.useMemo(()=>{const I={A:0,B:0,C:0,D:0,F:0};return g.forEach(k=>{k.pct>=90?I.A++:k.pct>=80?I.B++:k.pct>=70?I.C++:k.pct>=60?I.D++:I.F++}),I},[g]),w=Math.max(...Object.values(C),1),y={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},S={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"My Grades",subtitle:`${g.length} graded assignments`}),a.jsxs(Q.div,{variants:y,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(Q.div,{variants:S,className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center",children:[a.jsx(Ku,{size:20,className:`text-${N} mx-auto mb-2`}),a.jsxs("p",{className:`text-3xl sm:text-4xl font-display font-black text-${N}`,children:[b,"%"]}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider mt-1",children:"Overall Average"})]}),a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center",children:[a.jsx(zt,{size:20,className:"text-neon-green mx-auto mb-2"}),a.jsx("p",{className:"text-3xl sm:text-4xl font-display font-black text-white",children:m.completed}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider mt-1",children:"Completed"})]}),a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center",children:[a.jsx(es,{size:20,className:"text-neon-orange mx-auto mb-2"}),a.jsx("p",{className:"text-3xl sm:text-4xl font-display font-black text-white",children:m.total-m.completed}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider mt-1",children:"Remaining"})]}),a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center",children:[a.jsx(Ii,{size:20,className:"text-neon-purple mx-auto mb-2"}),a.jsxs("p",{className:"text-3xl sm:text-4xl font-display font-black text-white",children:[m.completionRate,"%"]}),a.jsx("p",{className:"text-[10px] text-white/30 uppercase tracking-wider mt-1",children:"Completion Rate"})]})]}),a.jsxs(Q.div,{variants:S,className:"glass-card p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base font-display font-bold text-white mb-4",children:"Grade Distribution"}),a.jsx("div",{className:"flex items-end gap-2 sm:gap-3 h-32",children:Object.entries(C).map(([I,k])=>{const L=`${k/w*100}%`,p={A:"neon-green",B:"neon-blue",C:"neon-purple",D:"neon-orange",F:"red-400"}[I];return a.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 h-full",children:[a.jsx("span",{className:"text-[10px] font-bold text-white/40",children:k}),a.jsx("div",{className:"w-full flex-1 flex items-end",children:a.jsx("div",{className:`w-full rounded-t-lg bg-${p}/20 border border-${p}/30 transition-all duration-500`,style:{height:k>0?L:"4px"}})}),a.jsx("span",{className:`text-xs font-bold text-${p}`,children:I})]},I)})})]}),a.jsxs(Q.div,{variants:S,className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("select",{value:l,onChange:I=>c(I.target.value),className:"input-glass flex-1 text-sm",children:[a.jsx("option",{value:"all",children:"All Classes"}),f.map(I=>a.jsx("option",{value:I.id,children:I.name},I.id))]}),a.jsxs("select",{value:d,onChange:I=>h(I.target.value),className:"input-glass text-sm sm:w-48",children:[a.jsx("option",{value:"recent",children:"Most Recent"}),a.jsx("option",{value:"highest",children:"Highest Grade"}),a.jsx("option",{value:"lowest",children:"Lowest Grade"})]})]}),g.length===0?a.jsxs(Q.div,{variants:S,className:"glass-card p-12 text-center",children:[a.jsx(Yr,{size:40,className:"text-white/10 mx-auto mb-4"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No grades yet. Complete some assignments!"})]}):a.jsx("div",{className:"space-y-3",children:g.map(I=>{var L,T;const k=I.pct>=90?"neon-green":I.pct>=70?"neon-blue":I.pct>=50?"neon-orange":"red-400";return a.jsx(Q.div,{variants:S,children:a.jsx("button",{onClick:()=>r(`/assignments/${I.assignmentId}`),className:"w-full glass-card p-3 sm:p-4 hover:border-white/10 transition-all text-left group",children:a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsx("div",{className:`w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-${k}/10 border border-${k}/20 flex items-center justify-center shrink-0`,children:a.jsxs("span",{className:`text-${k} font-display font-black text-lg sm:text-xl`,children:[I.pct,"%"]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm sm:text-base font-medium text-white truncate",children:((L=I.assignment)==null?void 0:L.title)||"Assignment"}),a.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[a.jsxs("span",{className:"text-xs text-white/30 flex items-center gap-1",children:[a.jsx(Ct,{size:10})," ",(T=I.class)==null?void 0:T.name]}),a.jsx("span",{className:"text-xs text-white/20",children:""}),a.jsxs("span",{className:"text-xs text-white/30",children:[I.grade,"/",I.max," pts"]})]})]}),a.jsx("div",{className:"hidden sm:block w-24",children:a.jsx("div",{className:"h-2 rounded-full bg-white/[0.04]",children:a.jsx("div",{className:`h-full rounded-full bg-${k}`,style:{width:`${I.pct}%`}})})}),a.jsx(cu,{size:16,className:"text-white/20 group-hover:text-neon-blue transition-colors shrink-0"})]})})},I.id)})})]})]})}function D4(t,e){const n=[...t];let s=e;for(let i=n.length-1;i>0;i--){s=(s*9301+49297)%233280;const r=Math.floor(s/233280*(i+1));[n[i],n[r]]=[n[r],n[i]]}return n}function HF(){var z,$;const{assignmentId:t}=iE(),e=yn(),{userProfile:n}=ft(),{assignments:s,classes:i,submissions:r,submitAssignment:o}=vn(),l=xs(),c=s.find(U=>U.id===t),d=i.find(U=>U.id===(c==null?void 0:c.classId)),[h,f]=R.useState({}),[m,g]=R.useState(!1),b=R.useMemo(()=>r.find(U=>U.assignmentId===t&&U.studentId===(n==null?void 0:n.uid)),[r,t,n==null?void 0:n.uid]),N=!!b,C=(c==null?void 0:c.timeLimit)>0,w=`timer_${t}_${n==null?void 0:n.uid}`,[y,S]=R.useState(()=>{if(!C||N)return 0;const U=sessionStorage.getItem(w);if(U){const Y=Math.max(0,Math.floor((Number(U)-Date.now())/1e3));return Y>0?Y:0}return((c==null?void 0:c.timeLimit)||0)*60}),[I,k]=R.useState(!1),L=R.useRef(null),T=R.useRef(!1),p=R.useCallback(()=>{if(!C||N||I)return;k(!0);const U=Date.now()+y*1e3;sessionStorage.setItem(w,String(U))},[C,N,I,y,w]);R.useEffect(()=>{C&&!N&&sessionStorage.getItem(w)&&k(!0)},[C,N,w]),R.useEffect(()=>{if(!(!I||N||y<=0))return L.current=setInterval(()=>{S(U=>U<=1?(clearInterval(L.current),0):U-1)},1e3),()=>clearInterval(L.current)},[I,N]),R.useEffect(()=>{y===0&&I&&!N&&!T.current&&(T.current=!0,v())},[y,I,N]),R.useEffect(()=>{if(C&&I&&!N){const U=Y=>{Y.preventDefault(),Y.returnValue="You have a timed exam in progress. Are you sure you want to leave?"};return window.addEventListener("beforeunload",U),()=>window.removeEventListener("beforeunload",U)}},[C,I,N]);const E=()=>{sessionStorage.removeItem(w),clearInterval(L.current)},j=U=>{const Y=Math.floor(U/60),Z=U%60;return`${Y}:${Z.toString().padStart(2,"0")}`},D=C?y/(((c==null?void 0:c.timeLimit)||1)*60)*100:100,A=async()=>{var Z;if(m||N)return;const U=((Z=c.questions)==null?void 0:Z.length)||0;if(Object.keys(h).filter(se=>h[se]!==""&&h[se]!==void 0).length<U){l.warning("Please answer all questions before submitting.");return}g(!0);try{let se=0,pe="graded",xe=!1;c.questions.forEach((oe,ee)=>{const ye=h[ee];if(oe.type==="multiple-choice"||oe.type==="true-false"){const Se=oe.options[oe.correctAnswer];ye===Se&&(se+=oe.points||0)}else if(oe.type==="fill-in-blank"){const Se=(ye||"").trim().toLowerCase(),ve=(oe.correctText||"").trim().toLowerCase();Se&&ve&&Se===ve&&(se+=oe.points||0)}else if(oe.type==="ordering")JSON.stringify(ye)===JSON.stringify(oe.items||[])&&(se+=oe.points||0);else if(oe.type==="matching")(oe.pairs||[]).every((ve,xt)=>(ye==null?void 0:ye[xt])===ve.right)&&(se+=oe.points||0);else if(oe.type==="word-scramble"){const Se=(ye||"").trim().toLowerCase(),ve=(oe.correctText||"").trim().toLowerCase();Se&&ve&&Se===ve&&(se+=oe.points||0)}else if(oe.type==="sentence-builder"){const Se=(ye||"").trim().toLowerCase(),ve=(oe.correctSentence||"").trim().toLowerCase();Se&&ve&&Se===ve&&(se+=oe.points||0)}else if(oe.type==="categorize"){let Se=!0,ve=0;(oe.categories||[]).forEach((xt,tn)=>{(xt.items||[]).forEach(()=>{(ye==null?void 0:ye[ve])!==tn&&(Se=!1),ve++})}),Se&&ve>0&&(se+=oe.points||0)}else oe.type==="error-correction"||oe.type==="translation"?(ye||"").trim().toLowerCase()===(oe.correctText||"").trim().toLowerCase()&&(se+=oe.points||0):(oe.type==="essay"||oe.type==="short-answer")&&(xe=!0)}),xe&&(pe="pending");const Be={assignmentId:t,classId:c.classId,studentId:n==null?void 0:n.uid,studentName:(n==null?void 0:n.displayName)||"Student",answers:h,grade:se,maxPoints:c.totalPoints||100,submittedAt:new Date().toISOString(),status:pe};await o(Be),E(),l.success(`Assignment submitted! You scored ${se}/${c.totalPoints||0} points.`)}catch(se){l.error("Submission failed: "+se.message)}finally{g(!1)}},v=async()=>{if(!(m||N)){g(!0);try{let U=0,Y="graded",Z=!1;c.questions.forEach((se,pe)=>{const xe=h[pe];if(!(!xe&&xe!==0))if(se.type==="multiple-choice"||se.type==="true-false"){const Be=se.options[se.correctAnswer];xe===Be&&(U+=se.points||0)}else se.type==="fill-in-blank"?(xe||"").trim().toLowerCase()===(se.correctText||"").trim().toLowerCase()&&(U+=se.points||0):se.type==="ordering"?JSON.stringify(xe)===JSON.stringify(se.items||[])&&(U+=se.points||0):(se.type==="essay"||se.type==="short-answer")&&(Z=!0)}),Z&&(Y="pending"),await o({assignmentId:t,classId:c.classId,studentId:n==null?void 0:n.uid,studentName:(n==null?void 0:n.displayName)||"Student",answers:h,grade:U,maxPoints:c.totalPoints||100,submittedAt:new Date().toISOString(),status:Y,autoSubmitted:!0}),E(),l.warning(" Time is up! Your answers were auto-submitted.")}catch(U){l.error("Auto-submit failed: "+U.message)}finally{g(!1)}}};if(!c)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl bg-white/[0.04] animate-pulse mb-4"}),a.jsx("p",{className:"text-white/40 text-sm",children:"Loading assignment..."})]})});const V={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},P={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},O=N&&b.grade!=null?Math.round(b.grade/(c.totalPoints||100)*100):0,B=O>=90?"text-neon-green":O>=70?"text-neon-blue":O>=50?"text-neon-orange":"text-red-400";return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:c.title,subtitle:`${(d==null?void 0:d.name)||"Class"}  Due ${new Date(c.dueDate).toLocaleDateString()}`,actions:a.jsxs("button",{onClick:()=>e(-1),className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(da,{size:16})," Back"]})}),C&&!N&&a.jsx("div",{className:`sticky top-0 z-30 px-4 py-3 ${I?"bg-surface-950/95 backdrop-blur-xl border-b border-white/[0.06]":"bg-neon-blue/5 border-b border-neon-blue/20"}`,children:a.jsx("div",{className:"max-w-4xl mx-auto",children:I?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fp,{size:16,className:`${y<=60?"text-red-400 animate-pulse":y<=300?"text-neon-orange":"text-neon-green"}`}),a.jsx("span",{className:`text-2xl font-mono font-black tracking-wider ${y<=60?"text-red-400 animate-pulse":y<=300?"text-neon-orange":"text-neon-green"}`,children:j(y)})]}),a.jsx("span",{className:"text-[10px] text-white/30",children:y<=60?" Less than 1 minute!":y<=300?" Hurry up!":`${Math.ceil(y/60)} min remaining`})]}),a.jsx("div",{className:"h-1.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx(Q.div,{className:`h-full rounded-full transition-colors duration-1000 ${y<=60?"bg-red-500":y<=300?"bg-neon-orange":"bg-neon-green"}`,animate:{width:`${D}%`},transition:{duration:.5,ease:"linear"}})})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-neon-blue/10 border border-neon-blue/20 flex items-center justify-center",children:a.jsx(Fp,{size:20,className:"text-neon-blue"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-bold text-white",children:["Timed Exam  ",c.timeLimit," minutes"]}),a.jsx("p",{className:"text-[10px] text-white/40",children:"Timer starts when you click 'Start Exam'. You cannot pause once started."})]})]}),a.jsxs("button",{onClick:p,className:"btn-neon text-sm px-5 py-2.5 flex items-center gap-2 animate-pulse",children:[a.jsx(Fp,{size:16})," Start Exam"]})]})})}),a.jsx(Q.div,{variants:V,initial:"hidden",animate:"show",className:"max-w-4xl mx-auto p-4 sm:p-6",children:N?a.jsxs(a.Fragment,{children:[a.jsxs(Q.div,{variants:P,className:"glass-card p-6 sm:p-8 text-center space-y-4 mb-6",children:[a.jsx("div",{className:`w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-2 ${O>=70?"bg-neon-green/10 border border-neon-green/20":"bg-neon-orange/10 border border-neon-orange/20"}`,children:O>=70?a.jsx(Qu,{size:36,className:"text-neon-green"}):a.jsx(Mi,{size:36,className:"text-neon-orange"})}),a.jsx("h2",{className:"text-2xl sm:text-3xl font-display font-bold text-white",children:b.status==="graded"?"Results":"Submitted  Awaiting Review"}),b.status==="graded"&&a.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:`text-4xl sm:text-5xl font-display font-black ${B}`,children:b.grade}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Points Earned"})]}),a.jsx("div",{className:"w-px h-12 bg-white/10"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-4xl sm:text-5xl font-display font-black text-white/30",children:c.totalPoints||0}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Total Points"})]}),a.jsx("div",{className:"w-px h-12 bg-white/10"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:`text-4xl sm:text-5xl font-display font-black ${B}`,children:[O,"%"]}),a.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Score"})]})]}),a.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[a.jsx("button",{onClick:()=>e("/dashboard"),className:"btn-neon text-sm px-4 py-2",children:"Dashboard"}),a.jsx("button",{onClick:()=>e("/grades"),className:"btn-ghost text-sm px-4 py-2",children:"My Grades"})]})]}),a.jsx("div",{className:"space-y-4",children:(z=c.questions)==null?void 0:z.map((U,Y)=>{var Ln,yt;const Z=(Ln=b.answers)==null?void 0:Ln[Y],se=U.type==="multiple-choice"||U.type==="true-false",pe=U.type==="fill-in-blank",xe=U.type==="ordering",Be=U.type==="essay"||U.type==="short-answer",oe=U.type==="word-scramble",ee=U.type==="sentence-builder",ye=oe||ee||U.type==="error-correction"||U.type==="translation";let Se=null,ve=!1;if(se)Se=U.options[U.correctAnswer],ve=Z===Se;else if(pe){Se=U.correctText;const He=(Z||"").trim().toLowerCase(),Qe=(Se||"").trim().toLowerCase();ve=He&&Qe&&He===Qe}else if(xe)ve=JSON.stringify(Z)===JSON.stringify(U.items||[]);else if(oe||U.type==="error-correction"||U.type==="translation"){Se=U.correctText;const He=(Z||"").trim().toLowerCase(),Qe=(Se||"").trim().toLowerCase();ve=He&&Qe&&He===Qe}else if(ee){Se=U.correctSentence;const He=(Z||"").trim().toLowerCase(),Qe=(Se||"").trim().toLowerCase();ve=He&&Qe&&He===Qe}else if(U.type==="categorize"){let He=!0,Qe=0;(U.categories||[]).forEach((Ze,Xe)=>{(Ze.items||[]).forEach(()=>{(Z==null?void 0:Z[Qe])!==Xe&&(He=!1),Qe++})}),ve=He&&Qe>0}else U.type==="matching"&&(ve=(U.pairs||[]).every((He,Qe)=>(Z==null?void 0:Z[Qe])===He.right));const xt=Be?"border-l-neon-blue":ve?"border-l-neon-green":"border-l-red-500",tn=Be?"bg-neon-blue/10 border-neon-blue/20":ve?"bg-neon-green/10 border-neon-green/20":"bg-red-500/10 border-red-500/20",Tn=Be?"bg-white/[0.03] text-white/30 border-white/5":ve?"bg-neon-green/10 text-neon-green border-neon-green/20":"bg-red-500/10 text-red-400 border-red-500/20";return a.jsx(Q.div,{variants:P,className:`glass-card p-4 sm:p-6 border-l-4 ${xt}`,children:a.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 border ${tn}`,children:Be?a.jsx("span",{className:"text-neon-blue font-bold text-sm",children:Y+1}):ve?a.jsx(zt,{size:16,className:"text-neon-green"}):a.jsx(uu,{size:16,className:"text-red-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[a.jsx("h4",{className:"text-white font-semibold text-sm sm:text-base leading-tight",children:U.text}),a.jsx("span",{className:`px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider shrink-0 border ${Tn}`,children:Be?`${U.points} pts`:ve?`+${U.points}`:"0"})]}),se&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:(yt=U.options)==null?void 0:yt.map((He,Qe)=>{const Ze=Z===He,Xe=He===Se;let ts="bg-white/[0.01] border-white/5 text-white/40";return Xe?ts="bg-neon-green/10 border-neon-green/40 text-neon-green":Ze&&!Xe&&(ts="bg-red-500/10 border-red-500/40 text-red-400"),a.jsxs("div",{className:`p-3 rounded-xl border text-sm flex items-center gap-3 ${ts}`,children:[a.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center shrink-0 ${Xe?"border-neon-green bg-neon-green":Ze?"border-red-400 bg-red-400":"border-white/10"}`,children:(Xe||Ze)&&a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),a.jsx("span",{className:"font-medium",children:He}),Xe&&a.jsx(zt,{size:14,className:"ml-auto text-neon-green shrink-0"}),Ze&&!Xe&&a.jsx(uu,{size:14,className:"ml-auto text-red-400 shrink-0"})]},Qe)})}),pe&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"bg-white/[0.02] border border-white/5 rounded-xl p-3",children:a.jsx("p",{className:"text-sm text-white/60",children:Z||"No answer provided"})}),!ve&&Se&&a.jsx("div",{className:"p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:a.jsxs("p",{className:"text-xs text-neon-green",children:[" Correct: ",Se]})})]}),xe&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase mb-1",children:"Your order:"}),(Array.isArray(Z)?Z:[]).map((He,Qe)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-white/[0.02] border border-white/5 text-sm text-white/60",children:[a.jsxs("span",{className:"text-[10px] text-white/30 w-4",children:[Qe+1,"."]}),He]},Qe)),!ve&&a.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:[a.jsx("p",{className:"text-xs text-neon-green mb-1",children:" Correct order:"}),(U.items||[]).map((He,Qe)=>a.jsxs("p",{className:"text-xs text-neon-green/70 ml-2",children:[Qe+1,". ",He]},Qe))]})]}),ye&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"bg-white/[0.02] border border-white/5 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase mb-1",children:"Your answer:"}),a.jsx("p",{className:"text-sm text-white/60",children:Z||"No answer provided"})]}),!ve&&Se&&a.jsx("div",{className:"p-2 rounded-lg bg-neon-green/5 border border-neon-green/10",children:a.jsxs("p",{className:"text-xs text-neon-green",children:[" Correct: ",Se]})})]}),U.type==="categorize"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase mb-1",children:"Your categorization:"}),a.jsx("p",{className:"text-sm text-white/60",children:ve?"All items correctly categorized":"Some items were incorrectly categorized"})]}),U.type==="matching"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs text-white/30 uppercase mb-1",children:"Your matches:"}),a.jsx("p",{className:"text-sm text-white/60",children:ve?"All pairs matched correctly":"Some pairs were incorrect"})]}),Be&&a.jsxs("div",{className:"bg-white/[0.02] border border-white/5 rounded-xl p-3",children:[a.jsx("p",{className:"text-sm text-white/60 leading-relaxed whitespace-pre-wrap",children:Z||"No answer provided"}),b.status==="pending"&&a.jsxs("p",{className:"text-xs text-neon-orange mt-2 flex items-center gap-1",children:[a.jsx(es,{size:12})," Awaiting teacher review"]})]})]})]})},Y)})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Q.div,{variants:P,className:"glass-card p-4 sm:p-6 border-l-4 border-l-neon-blue",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-2 flex items-center gap-2",children:[a.jsx(Ct,{size:18,className:"text-neon-blue"})," Instructions"]}),a.jsx("p",{className:"text-white/60 leading-relaxed font-light text-sm sm:text-base",children:c.description}),a.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 sm:gap-6 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white/[0.03] px-3 py-1.5 rounded-lg border border-white/5",children:[a.jsx(es,{size:14,className:"text-neon-blue"}),a.jsx("span",{className:"text-white/50",children:"Due:"}),a.jsx("span",{className:"text-white font-medium text-xs sm:text-sm",children:new Date(c.dueDate).toLocaleString()})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/[0.03] px-3 py-1.5 rounded-lg border border-white/5",children:[a.jsx(Yr,{size:14,className:"text-neon-green"}),a.jsx("span",{className:"text-white/50",children:"Points:"}),a.jsx("span",{className:"text-white font-medium",children:c.totalPoints||0})]})]})]}),a.jsx("div",{className:"space-y-4 sm:space-y-6",children:($=c.questions)==null?void 0:$.map((U,Y)=>{var oe;const Z=U.type==="multiple-choice"||U.type==="true-false",se=U.type==="ordering",pe=U.type==="fill-in-blank",xe=U.type==="short-answer",Be=U.type==="essay";if(se&&!h[Y]){const ee=[...U.items||[]].sort(()=>Math.random()-.5);h[Y]||setTimeout(()=>f(ye=>({...ye,[Y]:ee})),0)}return a.jsxs(Q.div,{variants:P,className:"glass-card p-4 sm:p-6 relative group overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-neon-blue/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-neon-blue/10 border border-neon-blue/20 flex items-center justify-center text-neon-blue font-bold text-sm shrink-0",children:Y+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4",children:[a.jsx("h4",{className:"text-white font-semibold text-sm sm:text-lg leading-tight",children:U.text}),a.jsxs("span",{className:"px-2 py-1 rounded-md bg-white/[0.03] border border-white/5 text-[10px] font-bold text-white/30 uppercase tracking-wider shrink-0",children:[U.points," pts"]})]}),Z&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:(oe=U.options)==null?void 0:oe.map((ee,ye)=>a.jsx("button",{onClick:()=>f({...h,[Y]:ee}),className:`p-3 sm:p-4 rounded-xl text-left transition-all border group/opt ${h[Y]===ee?"bg-neon-blue/10 border-neon-blue text-white shadow-[0_0_20px_rgba(0,209,255,0.1)]":"bg-white/[0.01] border-white/5 text-white/50 hover:border-white/20 hover:bg-white/[0.03]"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${h[Y]===ee?"border-neon-blue bg-neon-blue shadow-[0_0_10px_rgba(0,209,255,0.5)]":"border-white/10 group-hover/opt:border-white/30"}`,children:h[Y]===ee&&a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),a.jsx("span",{className:"text-sm font-medium",children:ee})]})},ye))}),pe&&a.jsx("div",{className:"relative",children:a.jsx("input",{type:"text",placeholder:"Type your answer...",value:h[Y]||"",onChange:ee=>f({...h,[Y]:ee.target.value}),className:"input-glass w-full text-sm"})}),xe&&a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{placeholder:"Write a brief answer...",value:h[Y]||"",onChange:ee=>f({...h,[Y]:ee.target.value}),className:"input-glass w-full min-h-[80px] resize-none p-4 text-sm leading-relaxed"}),a.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] text-white/20 font-medium",children:[(h[Y]||"").length," chars"]})]}),se&&a.jsx(QF,{items:Array.isArray(h[Y])?h[Y]:[],onChange:ee=>{p(),f({...h,[Y]:ee})}}),Be&&a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{placeholder:"Write your detailed response here...",value:h[Y]||"",onChange:ee=>f({...h,[Y]:ee.target.value}),className:"input-glass w-full min-h-[140px] sm:min-h-[200px] resize-none p-4 text-sm leading-relaxed"}),a.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] text-white/20 font-medium",children:[(h[Y]||"").length," chars"]})]}),U.type==="matching"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Match the items on the left with the correct option on the right."}),(U.pairs||[]).map((ee,ye)=>{var Se;return a.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center p-3 rounded-xl bg-white/[0.02] border border-white/5",children:[a.jsx("div",{className:"text-sm font-medium text-white/80",children:ee.left}),a.jsxs("select",{value:((Se=h[Y])==null?void 0:Se[ye])||"",onChange:ve=>{const xt=[...h[Y]||[]];xt[ye]=ve.target.value,f({...h,[Y]:xt})},className:"bg-black/20 border border-white/10 rounded-lg text-sm text-neon-blue p-2 focus:ring-1 focus:ring-neon-blue outline-none",children:[a.jsx("option",{value:"",children:"Select match..."}),[...U.pairs||[]].sort((ve,xt)=>ve.right.localeCompare(xt.right)).map((ve,xt)=>a.jsx("option",{value:ve.right,children:ve.right},xt))]})]},ye)})]}),U.type==="word-scramble"&&a.jsx(GF,{q:U,idx:Y,answers:h,setAnswers:f,startTimer:p}),U.type==="sentence-builder"&&a.jsx(KF,{q:U,idx:Y,answers:h,setAnswers:f,startTimer:p}),U.type==="categorize"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-white/40",children:"Assign each item to its correct category."}),a.jsx("div",{className:"space-y-2",children:(()=>{let ee=0;return(U.categories||[]).flatMap((ye,Se)=>(ye.items||[]).map((ve,xt)=>{var Tn;const tn=ee++;return a.jsxs("div",{className:"flex items-center justify-between gap-4 p-3 rounded-xl bg-white/[0.02] border border-white/5",children:[a.jsx("span",{className:"text-sm text-white/80 font-medium",children:ve}),a.jsxs("select",{value:((Tn=h[Y])==null?void 0:Tn[tn])??"",onChange:Ln=>{const yt={...h[Y]||{}};yt[tn]=Number(Ln.target.value),f({...h,[Y]:yt})},className:"bg-black/20 border border-white/10 rounded-lg text-xs text-neon-blue p-2 focus:ring-1 focus:ring-neon-blue outline-none max-w-[150px]",children:[a.jsx("option",{value:"",children:"Select Category..."}),(U.categories||[]).map((Ln,yt)=>a.jsx("option",{value:yt,children:Ln.name},yt))]})]},`${Se}-${xt}`)})).sort(()=>Math.random()-.5)})()})]}),U.type==="error-correction"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-3 rounded-xl bg-red-500/10 border border-red-500/20",children:[a.jsx("p",{className:"text-xs text-red-300 uppercase font-bold mb-1",children:"Incorrect Sentence:"}),a.jsx("p",{className:"text-sm text-white/90",children:U.errorSentence})]}),a.jsx("input",{type:"text",placeholder:"Type the corrected sentence here...",value:h[Y]||"",onChange:ee=>f({...h,[Y]:ee.target.value}),className:"input-glass w-full"})]}),U.type==="translation"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-3 rounded-xl bg-neon-blue/10 border border-neon-blue/20",children:[a.jsx("p",{className:"text-xs text-neon-blue uppercase font-bold mb-1",children:"Translate to English:"}),a.jsx("p",{className:"text-sm text-white/90",children:U.sourceText})]}),a.jsx("input",{type:"text",placeholder:"Type the English translation...",value:h[Y]||"",onChange:ee=>f({...h,[Y]:ee.target.value}),className:"input-glass w-full"})]})]})]})]},Y)})}),a.jsx(Q.div,{variants:P,className:"flex justify-end",children:a.jsx("button",{onClick:A,disabled:m,className:"btn-neon flex items-center gap-2 text-sm sm:text-base disabled:opacity-50",children:m?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Submitting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(_v,{size:16})," Submit Assignment"]})})})]})})]})}function GF({q:t,idx:e,answers:n,setAnswers:s,startTimer:i}){const r=t.correctText||"",o=R.useMemo(()=>{const d=r.split("");return D4(d,r.length*7+e*31+42)},[r,e]),l=n[e]||"",c=r.toLowerCase();return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2 justify-center p-4 bg-white/[0.02] rounded-xl border border-white/5",children:o.map((d,h)=>a.jsx("span",{className:"w-8 h-8 flex items-center justify-center bg-neon-purple/10 border border-neon-purple/30 rounded text-neon-purple font-bold text-sm",children:d},h))}),a.jsx("div",{className:"flex flex-wrap gap-1.5 justify-center min-h-[40px] p-3 rounded-xl bg-black/20 border border-white/5",children:l.length>0?l.split("").map((d,h)=>{const f=h<c.length&&d.toLowerCase()===c[h];return a.jsx("span",{className:`w-8 h-8 flex items-center justify-center rounded font-bold text-sm border transition-all duration-200 ${f?"bg-neon-green/15 border-neon-green/40 text-neon-green":"bg-red-500/15 border-red-500/40 text-red-400"}`,children:d},h)}):a.jsx("span",{className:"text-xs text-white/20",children:"Type below to see letter feedback..."})}),a.jsx("input",{type:"text",placeholder:"Unscramble the word...",value:l,onChange:d=>{i==null||i(),s(h=>({...h,[e]:d.target.value}))},className:"input-glass w-full text-center tracking-widest font-bold text-lg"})]})}function KF({q:t,idx:e,answers:n,setAnswers:s,startTimer:i}){const r=t.correctSentence||"",o=R.useMemo(()=>r.split(" ").filter(Boolean),[r]),l=R.useMemo(()=>D4(o,r.length*13+e*37+99),[o,r.length,e]),c=n[e]||"",d=c?c.split(" ").filter(Boolean):[],h=R.useMemo(()=>{const g=[...d],b=new Set;return g.forEach(N=>{for(let C=0;C<l.length;C++)if(!b.has(C)&&l[C]===N){b.add(C);break}}),l.map((N,C)=>!b.has(C))},[l,d]),f=g=>{i==null||i(),s(b=>({...b,[e]:(b[e]?b[e]+" ":"")+g}))},m=()=>{const g=d.slice(0,-1).join(" ");s(b=>({...b,[e]:g}))};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-white/40",children:"Tap words to build the sentence:"}),a.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[44px] p-3 rounded-xl bg-black/20 border border-white/5",children:l.map((g,b)=>a.jsx("button",{type:"button",disabled:!h[b],onClick:()=>f(g),className:`px-3 py-1.5 rounded-lg text-xs font-medium border transition-all duration-200 ${h[b]?"bg-neon-blue/10 text-neon-blue border-neon-blue/20 hover:bg-neon-blue/20 hover:scale-105 cursor-pointer":"bg-white/[0.02] text-white/10 border-white/[0.03] cursor-not-allowed"}`,children:g},b))}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[44px] p-3 rounded-xl bg-white/[0.02] border border-white/5 items-center",children:d.length>0?d.map((g,b)=>a.jsx("span",{className:"px-2 py-1 rounded bg-neon-green/10 text-neon-green border border-neon-green/20 text-sm font-medium",children:g},b)):a.jsx("span",{className:"text-xs text-white/20",children:"Click words above to build sentence..."})}),a.jsx("div",{className:"flex justify-end gap-2 mt-2",children:d.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:m,className:"text-xs text-neon-orange hover:text-neon-orange/80 px-2 py-1 rounded-lg bg-neon-orange/5 border border-neon-orange/10",children:"Undo"}),a.jsx("button",{type:"button",onClick:()=>s(g=>({...g,[e]:""})),className:"text-xs text-red-400 hover:text-red-300 px-2 py-1 rounded-lg bg-red-500/5 border border-red-500/10",children:"Clear"})]})})]})]})}function QF({items:t,onChange:e}){const[n,s]=R.useState(null),[i,r]=R.useState(null),[o,l]=R.useState(!1),c=(b,N)=>{s(N),l(!0),b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text/plain",String(N))},d=(b,N)=>{b.preventDefault(),b.dataTransfer.dropEffect="move",N!==n&&r(N)},h=(b,N)=>{if(b.preventDefault(),n===null||n===N){s(null),r(null),l(!1);return}const C=[...t],[w]=C.splice(n,1);C.splice(N,0,w),e(C),s(null),r(null),l(!1)},f=()=>{s(null),r(null),l(!1)},m=b=>{if(b===0)return;const N=[...t];[N[b-1],N[b]]=[N[b],N[b-1]],e(N)},g=b=>{if(b===t.length-1)return;const N=[...t];[N[b+1],N[b]]=[N[b],N[b+1]],e(N)};return a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("p",{className:"text-xs text-white/30 mb-3 flex items-center gap-1.5",children:[a.jsx(mf,{size:12,className:"text-neon-blue/60"}),"Drag items to arrange in the correct order:"]}),t.map((b,N)=>{const C=n===N,w=i===N&&n!==N;return a.jsxs("div",{draggable:!0,onDragStart:y=>c(y,N),onDragOver:y=>d(y,N),onDrop:y=>h(y,N),onDragEnd:f,className:`
                            flex items-center gap-3 p-3 rounded-xl border transition-all duration-150 select-none
                            ${C?"opacity-30 scale-[0.98] border-neon-blue/40 bg-neon-blue/5":w?"border-neon-blue bg-neon-blue/10 shadow-[0_0_16px_rgba(0,209,255,0.15)] scale-[1.01]":"bg-white/[0.02] border-white/[0.06] hover:border-white/10 hover:bg-white/[0.04]"}
                            ${o&&!C?"cursor-grabbing":"cursor-grab"}
                        `,children:[a.jsx("div",{className:`shrink-0 transition-colors ${w?"text-neon-blue":"text-white/20 hover:text-white/40"}`,children:a.jsx(mf,{size:18})}),a.jsx("span",{className:`text-xs font-bold w-5 text-center shrink-0 transition-colors ${w?"text-neon-blue":"text-white/30"}`,children:N+1}),a.jsx("span",{className:`text-sm flex-1 font-medium transition-colors ${w?"text-white":"text-white/70"}`,children:b}),a.jsxs("div",{className:"flex flex-col gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 hover:opacity-100 transition-opacity",children:[a.jsx("button",{type:"button",disabled:N===0,onClick:()=>m(N),className:"p-0.5 rounded text-white/20 hover:text-neon-blue disabled:opacity-10 disabled:cursor-not-allowed transition-colors",title:"Move up",children:a.jsx(I7,{size:14})}),a.jsx("button",{type:"button",disabled:N===t.length-1,onClick:()=>g(N),className:"p-0.5 rounded text-white/20 hover:text-neon-blue disabled:opacity-10 disabled:cursor-not-allowed transition-colors",title:"Move down",children:a.jsx(x4,{size:14})})]})]},`${b}-${N}`)})]})}const YF=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],K2=["January","February","March","April","May","June","July","August","September","October","November","December"],na={quiz:{bg:"bg-neon-blue/20",text:"text-neon-blue",dot:"bg-neon-blue"},exam:{bg:"bg-red-500/20",text:"text-red-400",dot:"bg-red-500"},essay:{bg:"bg-neon-purple/20",text:"text-neon-purple",dot:"bg-neon-purple"},homework:{bg:"bg-amber-400/20",text:"text-amber-400",dot:"bg-amber-400"},project:{bg:"bg-pink-500/20",text:"text-pink-400",dot:"bg-pink-500"},assignment:{bg:"bg-neon-green/20",text:"text-neon-green",dot:"bg-neon-green"}};function qF(){const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s}=vn(),i=yn(),r=t==null?void 0:t.uid,[o,l]=R.useState(new Date),[c,d]=R.useState(null),h=e.filter(A=>{var v;return(v=A.students)==null?void 0:v.includes(r)}),f=h.map(A=>A.id),m=n.filter(A=>f.includes(A.classId)),g=R.useMemo(()=>{const A={};return m.forEach(v=>{if(!v.dueDate)return;const V=new Date(v.dueDate).toDateString();A[V]||(A[V]=[]),A[V].push(v)}),A},[m]),b=o.getFullYear(),N=o.getMonth(),C=new Date(b,N,1).getDay(),w=new Date(b,N+1,0).getDate(),y=new Date;y.setHours(0,0,0,0);const S=[];for(let A=0;A<C;A++)S.push(null);for(let A=1;A<=w;A++)S.push(A);const I=()=>l(new Date(b,N-1,1)),k=()=>l(new Date(b,N+1,1)),L=()=>{l(new Date),d(new Date().toDateString())},T=c?g[c]||[]:[],p=new Date(y);p.setDate(p.getDate()+7);const E=m.filter(A=>{const v=new Date(A.dueDate);return v>=y&&v<=p}).sort((A,v)=>new Date(A.dueDate)-new Date(v.dueDate)),j={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},D={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Calendar",subtitle:`${K2[N]} ${b}`}),a.jsx(Q.div,{variants:j,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(Q.div,{variants:D,className:"lg:col-span-2 glass-card p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("button",{onClick:I,className:"w-9 h-9 rounded-lg bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white hover:border-neon-blue/30 transition-all",children:a.jsx(da,{size:18})}),a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-display font-bold text-white",children:[K2[N]," ",b]}),a.jsx("button",{onClick:L,className:"text-xs text-neon-blue hover:text-neon-blue/80 transition-colors",children:"Today"})]}),a.jsx("button",{onClick:k,className:"w-9 h-9 rounded-lg bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white hover:border-neon-blue/30 transition-all",children:a.jsx(cu,{size:18})})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:YF.map(A=>a.jsx("div",{className:"text-center text-[10px] sm:text-xs font-bold text-white/30 uppercase tracking-wider py-2",children:A},A))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:S.map((A,v)=>{if(A===null)return a.jsx("div",{},`empty-${v}`);const V=new Date(b,N,A),P=V.toDateString(),O=P===y.toDateString(),B=P===c,z=g[P]||[],$=z.length>0,U=V<y,Y=z.some(Z=>!s.find(pe=>pe.assignmentId===Z.id&&pe.studentId===r)&&U);return a.jsxs("button",{onClick:()=>d(P),className:`relative aspect-square rounded-xl flex flex-col items-center justify-center transition-all text-sm
                                            ${B?"bg-neon-blue/15 border-2 border-neon-blue shadow-[0_0_20px_rgba(0,209,255,0.15)]":O?"bg-neon-blue/5 border border-neon-blue/30":$?"bg-white/[0.02] border border-white/[0.06] hover:border-neon-blue/20":"border border-transparent hover:bg-white/[0.02]"}
                                            ${U&&!O?"opacity-50":""}`,children:[a.jsx("span",{className:`font-semibold text-xs sm:text-sm ${O?"text-neon-blue":B?"text-white":"text-white/60"}`,children:A}),$&&a.jsx("div",{className:"flex gap-0.5 mt-1",children:z.slice(0,3).map((Z,se)=>{const pe=na[Z.type]||na.assignment;return a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${pe.dot}`},se)})}),Y&&a.jsx("div",{className:"absolute top-0.5 right-0.5 w-2 h-2 rounded-full bg-red-500 animate-pulse"})]},A)})}),a.jsx("div",{className:"flex flex-wrap gap-3 mt-4 pt-4 border-t border-white/[0.06]",children:Object.entries(na).map(([A,v])=>a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${v.dot}`}),a.jsx("span",{className:"text-[10px] text-white/30 capitalize",children:A})]},A))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(Q.div,{variants:D,className:"glass-card p-4 sm:p-5",children:[a.jsxs("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(p4,{size:14,className:"text-neon-blue"}),c?new Date(c).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}):"Select a day"]}),c?T.length>0?a.jsx("div",{className:"space-y-2",children:T.map(A=>{const v=h.find(O=>O.id===A.classId),V=s.find(O=>O.assignmentId===A.id&&O.studentId===r),P=na[A.type]||na.assignment;return a.jsx("button",{onClick:()=>i(`/assignments/${A.id}`),className:"w-full text-left p-3 rounded-xl bg-white/[0.02] border border-white/[0.06] hover:border-neon-blue/20 transition-all group",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg ${P.bg} flex items-center justify-center shrink-0`,children:a.jsx("div",{className:`w-2 h-2 rounded-full ${P.dot}`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",children:A.title}),a.jsxs("p",{className:"text-[10px] text-white/30",children:[v==null?void 0:v.name,"  ",A.totalPoints||0," pts"]})]}),V?a.jsx(zt,{size:14,className:"text-neon-green shrink-0 mt-1"}):a.jsx(es,{size:14,className:"text-white/20 shrink-0 mt-1"})]})},A.id)})}):a.jsx("p",{className:"text-sm text-white/20 text-center py-4",children:"No assignments due"}):a.jsx("p",{className:"text-sm text-white/20 text-center py-4",children:"Click a date to see details"})]}),a.jsxs(Q.div,{variants:D,className:"glass-card p-4 sm:p-5",children:[a.jsxs("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(es,{size:14,className:"text-neon-orange"})," This Week (",E.length,")"]}),E.length===0?a.jsx("p",{className:"text-sm text-white/20 text-center py-4",children:"Nothing due this week! "}):a.jsx("div",{className:"space-y-2",children:E.map(A=>{const v=h.find(z=>z.id===A.classId),V=new Date(A.dueDate),P=Math.ceil((V-y)/(1e3*60*60*24)),O=s.find(z=>z.assignmentId===A.id&&z.studentId===r),B=na[A.type]||na.assignment;return a.jsx("button",{onClick:()=>i(`/assignments/${A.id}`),className:"w-full text-left p-3 rounded-xl bg-white/[0.02] border border-white/[0.06] hover:border-neon-blue/20 transition-all",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-2 h-full min-h-[32px] rounded-full ${B.dot}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-white/80 font-medium truncate",children:A.title}),a.jsx("p",{className:"text-[10px] text-white/30",children:v==null?void 0:v.name})]}),O?a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-neon-green/10 text-neon-green border border-neon-green/20 font-bold",children:"Done"}):a.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${P<=1?"bg-red-500/10 text-red-400 border border-red-500/20":P<=3?"bg-neon-orange/10 text-neon-orange border border-neon-orange/20":"bg-white/[0.03] text-white/30 border border-white/5"}`,children:[P,"d"]})]})},A.id)})})]})]})]})})]})}const $p=[{id:"first-sub",icon:A4,label:"First Steps",desc:"Submit your first assignment",color:"neon-blue",gradient:"from-neon-blue to-cyan-400",check:t=>t.totalSubs>=1},{id:"five-subs",icon:pa,label:"Getting Started",desc:"Submit 5 assignments",color:"neon-green",gradient:"from-neon-green to-emerald-400",check:t=>t.totalSubs>=5},{id:"ten-subs",icon:hu,label:"On Fire",desc:"Submit 10 assignments",color:"neon-orange",gradient:"from-neon-orange to-amber-400",check:t=>t.totalSubs>=10},{id:"twenty-subs",icon:$B,label:"Unstoppable",desc:"Submit 20 assignments",color:"neon-purple",gradient:"from-neon-purple to-fuchsia-400",check:t=>t.totalSubs>=20},{id:"perfect-score",icon:M0,label:"Perfectionist",desc:"Get a perfect score",color:"amber-400",gradient:"from-amber-400 to-yellow-300",check:t=>t.perfectScores>=1},{id:"five-perfect",icon:Qu,label:"Gold Standard",desc:"Get 5 perfect scores",color:"amber-400",gradient:"from-amber-500 to-orange-400",check:t=>t.perfectScores>=5},{id:"avg-90",icon:Ku,label:"Honor Roll",desc:"Maintain 90%+ average",color:"neon-green",gradient:"from-neon-green to-teal-400",check:t=>t.avgGrade>=90},{id:"streak-3",icon:Dc,label:"Streak 3",desc:"3-day activity streak",color:"neon-orange",gradient:"from-orange-500 to-red-400",check:t=>t.streak>=3},{id:"streak-7",icon:Dc,label:"Weekly Warrior",desc:"7-day activity streak",color:"red-400",gradient:"from-red-500 to-pink-500",check:t=>t.streak>=7},{id:"streak-14",icon:Dc,label:"Legendary",desc:"14-day activity streak",color:"neon-purple",gradient:"from-purple-500 to-pink-500",check:t=>t.streak>=14},{id:"multi-class",icon:Ct,label:"Scholar",desc:"Join 3+ classes",color:"neon-blue",gradient:"from-blue-500 to-indigo-400",check:t=>t.classCount>=3},{id:"early-bird",icon:zt,label:"Early Bird",desc:"Submit 5 before deadline",color:"neon-green",gradient:"from-green-400 to-lime-400",check:t=>t.earlySubmissions>=5}],XF=t=>{const e=Math.floor(t/200)+1,n=t%200;return{level:e,xpInLevel:n,xpForNext:200,totalXP:t}},Q2=["Beginner","Apprentice","Student","Scholar","Expert","Master","Grand Master","Legend","Champion","Mythic"];function WF(){const{userProfile:t}=ft(),{classes:e,assignments:n,submissions:s,getStudentStreak:i,getLeaderboard:r,allStudents:o}=vn(),[l,c]=R.useState("badges"),[d,h]=R.useState("all"),f=t==null?void 0:t.uid,m=e.filter(p=>{var E;return(E=p.students)==null?void 0:E.includes(f)}),g=s.filter(p=>p.studentId===f),b=i(f),N=R.useMemo(()=>{const p=g.filter(A=>A.grade!=null),E=p.length>0?Math.round(p.reduce((A,v)=>{const V=n.find(O=>O.id===v.assignmentId),P=(V==null?void 0:V.totalPoints)||100;return A+v.grade/P*100},0)/p.length):0,j=p.filter(A=>{const v=n.find(V=>V.id===A.assignmentId);return v&&A.grade>=(v.totalPoints||100)}).length,D=g.filter(A=>{const v=n.find(V=>V.id===A.assignmentId);return!v||!v.dueDate||!A.submittedAt?!1:new Date(A.submittedAt)<new Date(v.dueDate)}).length;return{totalSubs:g.length,gradedCount:p.length,avgGrade:E,perfectScores:j,earlySubmissions:D,streak:b,classCount:m.length}},[g,n,b,m.length]),C=$p.filter(p=>p.check(N)),w=$p.filter(p=>!p.check(N)),y=R.useMemo(()=>{let p=0;p+=g.length*50;const E=g.filter(j=>{const D=n.find(A=>A.id===j.assignmentId);return D&&j.grade!=null&&j.grade>=(D.totalPoints||100)}).length;return p+=E*100,p+=b*20,p+=C.length*30,p},[g,n,b,C.length]),S=XF(y),I=Q2[Math.min(S.level-1,Q2.length-1)],k=R.useMemo(()=>{const p=d==="all"?m:m.filter(j=>j.id===d),E={};return p.forEach(j=>{(j.students||[]).forEach(D=>{if(!E[D]){const A=o.find(v=>v.id===D);E[D]={id:D,name:(A==null?void 0:A.displayName)||"Student",subs:0,totalGrade:0,gradedCount:0,xp:0}}})}),s.forEach(j=>{if(!E[j.studentId])return;const D=n.find(v=>v.id===j.assignmentId);!D||!p.some(v=>v.id===D.classId)||(E[j.studentId].subs+=1,E[j.studentId].xp+=50,j.grade!=null&&(E[j.studentId].totalGrade+=j.grade,E[j.studentId].gradedCount+=1,j.grade>=(D.totalPoints||100)&&(E[j.studentId].xp+=100)))}),Object.values(E).map(j=>({...j,avgGrade:j.gradedCount>0?Math.round(j.totalGrade/j.gradedCount):0})).sort((j,D)=>D.xp-j.xp).slice(0,20)},[d,m,s,n,o]),L={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},T={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Achievements",subtitle:`Level ${S.level}  ${I}`}),a.jsxs(Q.div,{variants:L,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(Q.div,{variants:T,className:"glass-card p-5 sm:p-8 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-neon-purple/5 via-neon-blue/5 to-neon-green/5"}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row items-center gap-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-full bg-gradient-to-br from-neon-blue via-neon-purple to-neon-green p-[3px]",children:a.jsxs("div",{className:"w-full h-full rounded-full bg-surface-950 flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-3xl sm:text-4xl font-display font-black bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent",children:S.level}),a.jsx("span",{className:"text-[10px] text-white/40 uppercase tracking-widest",children:"Level"})]})}),a.jsx("div",{className:"absolute -top-1 -right-1 w-8 h-8 rounded-full bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center shadow-lg shadow-neon-blue/30",children:a.jsx(du,{size:14,className:"text-white"})})]}),a.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-white mb-1",children:I}),a.jsxs("p",{className:"text-sm text-white/40 mb-4",children:[y," XP total  ",C.length,"/",$p.length," badges earned"]}),a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[a.jsxs("span",{children:["Level ",S.level]}),a.jsxs("span",{children:[S.xpInLevel,"/",S.xpForNext," XP"]}),a.jsxs("span",{children:["Level ",S.level+1]})]}),a.jsx("div",{className:"h-3 rounded-full bg-white/[0.06] border border-white/[0.08] overflow-hidden",children:a.jsx(Q.div,{className:"h-full rounded-full bg-gradient-to-r from-neon-blue via-neon-purple to-neon-green",initial:{width:0},animate:{width:`${S.xpInLevel/S.xpForNext*100}%`},transition:{duration:1.2,ease:"easeOut"}})})]})]}),a.jsx("div",{className:"grid grid-cols-3 gap-3 sm:gap-4",children:[{icon:Dc,label:"Streak",value:`${b}d`,color:"neon-orange"},{icon:Qu,label:"Badges",value:C.length,color:"amber-400"},{icon:Ku,label:"Avg",value:`${N.avgGrade}%`,color:"neon-green"}].map((p,E)=>a.jsxs("div",{className:"text-center p-3 rounded-xl bg-white/[0.03] border border-white/[0.06]",children:[a.jsx(p.icon,{size:18,className:`text-${p.color} mx-auto mb-1`}),a.jsx("p",{className:`text-lg font-bold text-${p.color}`,children:p.value}),a.jsx("p",{className:"text-[10px] text-white/30",children:p.label})]},E))})]})]}),a.jsx(Q.div,{variants:T,className:"flex gap-2",children:[{id:"badges",label:"Badges",icon:wB},{id:"leaderboard",label:"Leaderboard",icon:M0}].map(p=>a.jsxs("button",{onClick:()=>c(p.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold transition-all ${l===p.id?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20 shadow-[0_0_20px_rgba(0,209,255,0.1)]":"bg-white/[0.02] text-white/40 border border-white/[0.06] hover:text-white/60"}`,children:[a.jsx(p.icon,{size:16}),p.label]},p.id))}),l==="badges"&&a.jsxs("div",{className:"space-y-6",children:[C.length>0&&a.jsxs(Q.div,{variants:T,children:[a.jsxs("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(du,{size:14,className:"text-neon-green"})," Earned (",C.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:C.map(p=>a.jsxs(Q.div,{variants:T,className:"glass-card p-4 sm:p-5 text-center group hover:scale-[1.03] transition-transform relative overflow-hidden",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${p.gradient} opacity-5 group-hover:opacity-10 transition-opacity`}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`w-14 h-14 sm:w-16 sm:h-16 mx-auto rounded-2xl bg-gradient-to-br ${p.gradient} flex items-center justify-center mb-3 shadow-lg`,style:{boxShadow:"0 8px 30px rgba(0,0,0,0.3)"},children:a.jsx(p.icon,{size:24,className:"text-white"})}),a.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:p.label}),a.jsx("p",{className:"text-[10px] text-white/40 leading-tight",children:p.desc}),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-neon-green/10 text-neon-green border border-neon-green/20 font-bold",children:" Earned"})})]})]},p.id))})]}),w.length>0&&a.jsxs(Q.div,{variants:T,children:[a.jsxs("h3",{className:"text-sm font-bold text-white/30 uppercase tracking-wider mb-3",children:["Locked (",w.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:w.map(p=>a.jsxs("div",{className:"glass-card p-4 sm:p-5 text-center opacity-50 grayscale",children:[a.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 mx-auto rounded-2xl bg-white/[0.04] border border-white/10 flex items-center justify-center mb-3",children:a.jsx(p.icon,{size:24,className:"text-white/20"})}),a.jsx("h4",{className:"text-sm font-bold text-white/40 mb-1",children:p.label}),a.jsx("p",{className:"text-[10px] text-white/20 leading-tight",children:p.desc}),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-white/[0.03] text-white/20 border border-white/5 font-bold",children:" Locked"})})]},p.id))})]})]}),l==="leaderboard"&&a.jsxs(Q.div,{variants:T,className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[a.jsx("button",{onClick:()=>h("all"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition-all ${d==="all"?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06] hover:text-white/60"}`,children:"All Classes"}),m.map(p=>a.jsx("button",{onClick:()=>h(p.id),className:`px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition-all ${d===p.id?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06] hover:text-white/60"}`,children:p.name},p.id))]}),k.length>=3&&a.jsx("div",{className:"flex items-end justify-center gap-3 py-4",children:[k[1],k[0],k[2]].map((p,E)=>{const j=E===1?1:E===0?2:3,D=j===1?"h-32":j===2?"h-24":"h-20",A=j===1?"from-amber-400 to-yellow-500 border-amber-400/30":j===2?"from-slate-300 to-slate-400 border-slate-300/30":"from-amber-700 to-orange-800 border-amber-700/30",v=p.id===f;return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br ${A} flex items-center justify-center text-white font-bold text-sm mb-2 ${v?"ring-2 ring-neon-blue ring-offset-2 ring-offset-surface-950":""}`,children:j===1?a.jsx(M0,{size:20}):j}),a.jsx("p",{className:`text-xs font-bold mb-1 ${v?"text-neon-blue":"text-white"} text-center truncate max-w-[80px]`,children:p.name}),a.jsxs("p",{className:"text-[10px] text-white/40 mb-2",children:[p.xp," XP"]}),a.jsx("div",{className:`w-20 sm:w-24 ${D} rounded-t-xl bg-gradient-to-b ${A} border border-b-0 flex items-center justify-center`,children:a.jsxs("span",{className:"text-white font-black text-2xl",children:["#",j]})})]},p.id)})}),a.jsxs("div",{className:"glass-card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/[0.06]",children:[a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold w-12",children:"#"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold",children:"Student"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold text-center",children:"XP"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold text-center",children:"Subs"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 font-semibold text-center hidden sm:table-cell",children:"Avg"})]})}),a.jsx("tbody",{children:k.map((p,E)=>{var A,v;const j=p.id===f,D=E===0?"text-amber-400":E===1?"text-slate-300":E===2?"text-amber-700":"text-white/30";return a.jsxs("tr",{className:`border-b border-white/[0.03] transition-colors ${j?"bg-neon-blue/[0.04]":"hover:bg-white/[0.02]"}`,children:[a.jsx("td",{className:`px-4 py-3 font-bold text-sm ${D}`,children:E+1}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs ${j?"bg-neon-blue/20 text-neon-blue border border-neon-blue/30":"bg-white/[0.04] text-white/40 border border-white/10"}`,children:((v=(A=p.name)==null?void 0:A[0])==null?void 0:v.toUpperCase())||"?"}),a.jsxs("span",{className:`text-sm font-medium ${j?"text-neon-blue":"text-white/70"}`,children:[p.name," ",j&&a.jsx("span",{className:"text-[10px] text-neon-blue/60",children:"(You)"})]})]})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("span",{className:"text-sm font-bold text-neon-purple",children:p.xp})}),a.jsx("td",{className:"px-4 py-3 text-center text-sm text-white/50",children:p.subs}),a.jsxs("td",{className:"px-4 py-3 text-center text-sm text-white/50 hidden sm:table-cell",children:[p.avgGrade,"%"]})]},p.id)})})]})}),k.length===0&&a.jsx("p",{className:"text-sm text-white/30 text-center py-8",children:"No students to rank yet."})]})]})]})]})}const Oc=[{value:"multiple-choice",label:"Multiple Choice",icon:zt},{value:"true-false",label:"True/False",icon:zt},{value:"fill-in-blank",label:"Fill in Blank",icon:ah},{value:"short-answer",label:"Short Answer",icon:E4},{value:"essay",label:"Essay",icon:Gu},{value:"ordering",label:"Ordering",icon:S4}],M4=["Grammar","Vocabulary","Reading","Writing","Listening","Speaking","Pronunciation","Culture","Custom"];function JF(){const{user:t}=ft(),{assignments:e,addAssignment:n,classes:s}=vn(),i=xs(),[r,o]=R.useState(()=>{const v=localStorage.getItem(`qbank_${t==null?void 0:t.uid}`);return v?JSON.parse(v):[]}),[l,c]=R.useState(""),[d,h]=R.useState("all"),[f,m]=R.useState("all"),[g,b]=R.useState(!1),[N,C]=R.useState(null),[w,y]=R.useState(!1),[S,I]=R.useState([]),k=v=>{o(v),localStorage.setItem(`qbank_${t==null?void 0:t.uid}`,JSON.stringify(v))},L=R.useMemo(()=>r.filter(v=>!(d!=="all"&&v.type!==d||f!=="all"&&v.category!==f||l&&!v.text.toLowerCase().includes(l.toLowerCase())&&!(v.tags||[]).some(V=>V.toLowerCase().includes(l.toLowerCase())))),[r,l,d,f]),T=v=>{if(N){const V=r.map(P=>P.id===N.id?{...v,id:N.id,updatedAt:new Date().toISOString()}:P);k(V),i.success("Question updated!")}else{const V={...v,id:`qb_${Date.now()}`,createdAt:new Date().toISOString()};k([V,...r]),i.success("Question saved to bank!")}b(!1),C(null)},p=v=>{k(r.filter(V=>V.id!==v)),I(S.filter(V=>V!==v)),i.success("Question deleted")},E=v=>{I(V=>V.includes(v)?V.filter(P=>P!==v):[...V,v])},j=async v=>{try{let V=r;v.category!=="all"&&(V=V.filter(z=>z.category===v.category)),v.type!=="all"&&(V=V.filter(z=>z.type===v.type));const O=[...V].sort(()=>Math.random()-.5).slice(0,v.count);if(O.length===0){i.error("No questions match your filters!");return}const B=O.map((z,$)=>{const U={id:`q${Date.now()}_${$}`,text:z.text,type:z.type,points:z.points||10};return z.type==="multiple-choice"?(U.options=[...z.options],U.correctAnswer=z.correctAnswer):z.type==="true-false"?(U.options=["True","False"],U.correctAnswer=z.correctAnswer):z.type==="fill-in-blank"?U.correctText=z.correctText:z.type==="ordering"?U.items=[...z.items||[]]:U.options=[],U});await n({title:v.title||`Auto Quiz - ${new Date().toLocaleDateString()}`,description:`Auto-generated quiz with ${O.length} questions from the question bank.`,classId:v.classId,type:"quiz",dueDate:new Date(v.dueDate).toISOString(),totalPoints:B.reduce((z,$)=>z+($.points||10),0),questions:B,timeLimit:v.timeLimit||0}),i.success(`Quiz created with ${O.length} questions!`),y(!1)}catch{i.error("Failed to create quiz")}},D={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},A={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Question Bank",subtitle:`${r.length} questions saved`,actions:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(fm,{size:14})," Generate Quiz"]}),a.jsxs("button",{onClick:()=>{C(null),b(!0)},className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(Ft,{size:16})," Add Question"]})]})}),a.jsxs(Q.div,{variants:D,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-4 max-w-7xl mx-auto",children:[a.jsxs(Q.div,{variants:A,className:"flex flex-wrap gap-3 items-center",children:[a.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[a.jsx(ki,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/20"}),a.jsx("input",{placeholder:"Search questions or tags...",value:l,onChange:v=>c(v.target.value),className:"input-glass w-full pl-9 text-sm"})]}),a.jsxs("select",{value:d,onChange:v=>h(v.target.value),className:"input-glass text-sm min-w-[140px]",children:[a.jsx("option",{value:"all",children:"All Types"}),Oc.map(v=>a.jsx("option",{value:v.value,children:v.label},v.value))]}),a.jsxs("select",{value:f,onChange:v=>m(v.target.value),className:"input-glass text-sm min-w-[140px]",children:[a.jsx("option",{value:"all",children:"All Categories"}),M4.map(v=>a.jsx("option",{value:v,children:v},v))]})]}),a.jsx(Q.div,{variants:A,className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Total",value:r.length,color:"neon-blue"},{label:"MC/TF",value:r.filter(v=>v.type==="multiple-choice"||v.type==="true-false").length,color:"neon-green"},{label:"Manual",value:r.filter(v=>v.type==="essay"||v.type==="short-answer").length,color:"neon-purple"},{label:"Categories",value:[...new Set(r.map(v=>v.category).filter(Boolean))].length,color:"neon-orange"}].map((v,V)=>a.jsxs("div",{className:"glass-card p-3 text-center",children:[a.jsx("p",{className:`text-xl font-bold text-${v.color}`,children:v.value}),a.jsx("p",{className:"text-[10px] text-white/30",children:v.label})]},V))}),a.jsx("div",{className:"space-y-3",children:L.length===0?a.jsxs(Q.div,{variants:A,className:"glass-card p-12 text-center",children:[a.jsx(y4,{size:40,className:"text-white/10 mx-auto mb-3"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No questions found."}),a.jsx("button",{onClick:()=>b(!0),className:"mt-3 text-neon-blue text-sm hover:text-neon-blue/80",children:"Create your first question "})]}):L.map(v=>{const V=Oc.find(O=>O.value===v.type)||Oc[0],P=S.includes(v.id);return a.jsx(Q.div,{variants:A,className:`glass-card p-4 hover:border-white/10 transition-all ${P?"border-neon-blue/30 bg-neon-blue/[0.03]":""}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:()=>E(v.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 mt-0.5 transition-all ${P?"border-neon-blue bg-neon-blue":"border-white/10 hover:border-white/30"}`,children:P&&a.jsx("div",{className:"w-2 h-2 rounded-sm bg-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-neon-blue/10 text-neon-blue border border-neon-blue/20 font-bold uppercase",children:V.label}),v.category&&a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-neon-purple/10 text-neon-purple border border-neon-purple/20",children:v.category}),(v.tags||[]).map(O=>a.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-white/[0.03] text-white/30 border border-white/5",children:["#",O]},O)),a.jsxs("span",{className:"text-[10px] text-white/20 ml-auto",children:[v.points||10," pts"]})]}),a.jsx("p",{className:"text-sm text-white/80 font-medium",children:v.text}),v.type==="multiple-choice"&&v.options&&a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:v.options.map((O,B)=>a.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded ${B===v.correctAnswer?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-white/[0.02] text-white/30 border border-white/5"}`,children:O},B))})]}),a.jsxs("div",{className:"flex gap-1 shrink-0",children:[a.jsx("button",{onClick:()=>{C(v),b(!0)},className:"p-1.5 rounded-lg text-white/20 hover:text-neon-blue hover:bg-neon-blue/10 transition-all",children:a.jsx(pf,{size:14})}),a.jsx("button",{onClick:()=>p(v.id),className:"p-1.5 rounded-lg text-white/20 hover:text-red-400 hover:bg-red-500/10 transition-all",children:a.jsx(Di,{size:14})})]})]})},v.id)})})]}),a.jsxs(Vn,{children:[g&&a.jsx(ZF,{question:N,onSave:T,onClose:()=>{b(!1),C(null)}}),w&&a.jsx(e$,{classes:s,categories:[...new Set(r.map(v=>v.category).filter(Boolean))],onGenerate:j,onClose:()=>y(!1)})]})]})}function ZF({question:t,onSave:e,onClose:n}){const[s,i]=R.useState((t==null?void 0:t.text)||""),[r,o]=R.useState((t==null?void 0:t.type)||"multiple-choice"),[l,c]=R.useState((t==null?void 0:t.category)||""),[d,h]=R.useState(((t==null?void 0:t.tags)||[]).join(", ")),[f,m]=R.useState((t==null?void 0:t.points)||10),[g,b]=R.useState((t==null?void 0:t.options)||["","","",""]),[N,C]=R.useState((t==null?void 0:t.correctAnswer)||0),[w,y]=R.useState((t==null?void 0:t.correctText)||""),[S,I]=R.useState((t==null?void 0:t.items)||["","",""]),k=L=>{if(L.preventDefault(),!s.trim())return;const T={text:s,type:r,category:l,points:Number(f),tags:d.split(",").map(p=>p.trim()).filter(Boolean)};r==="multiple-choice"?(T.options=g,T.correctAnswer=N):r==="true-false"?(T.options=["True","False"],T.correctAnswer=N):r==="fill-in-blank"?T.correctText=w:r==="ordering"&&(T.items=S),e(T)};return a.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:n,children:a.jsxs(Q.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"glass-card p-6 w-full max-w-lg max-h-[85vh] overflow-y-auto",onClick:L=>L.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:t?"Edit Question":"Add Question"}),a.jsx("button",{onClick:n,className:"p-1 text-white/30 hover:text-white",children:a.jsx(Zt,{size:18})})]}),a.jsxs("form",{onSubmit:k,className:"space-y-4",children:[a.jsx("textarea",{value:s,onChange:L=>i(L.target.value),placeholder:"Question text...",className:"input-glass w-full min-h-[80px] resize-none text-sm",required:!0}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("select",{value:r,onChange:L=>o(L.target.value),className:"input-glass text-sm",children:Oc.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))}),a.jsxs("select",{value:l,onChange:L=>c(L.target.value),className:"input-glass text-sm",children:[a.jsx("option",{value:"",children:"Category..."}),M4.map(L=>a.jsx("option",{value:L,children:L},L))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("input",{type:"number",value:f,onChange:L=>m(L.target.value),placeholder:"Points",className:"input-glass text-sm"}),a.jsx("input",{value:d,onChange:L=>h(L.target.value),placeholder:"Tags (comma separated)",className:"input-glass text-sm"})]}),r==="multiple-choice"&&a.jsx("div",{className:"space-y-2",children:g.map((L,T)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>C(T),className:`w-5 h-5 rounded-full border-2 shrink-0 ${T===N?"border-neon-green bg-neon-green":"border-white/10"}`}),a.jsx("input",{value:L,onChange:p=>{const E=[...g];E[T]=p.target.value,b(E)},placeholder:`Option ${T+1}`,className:"input-glass flex-1 text-sm"})]},T))}),r==="true-false"&&a.jsx("div",{className:"flex gap-3",children:["True","False"].map((L,T)=>a.jsx("button",{type:"button",onClick:()=>C(T),className:`flex-1 p-3 rounded-xl border text-sm ${T===N?"bg-neon-green/10 border-neon-green text-neon-green":"bg-white/[0.02] border-white/5 text-white/40"}`,children:L},L))}),r==="fill-in-blank"&&a.jsx("input",{value:w,onChange:L=>y(L.target.value),placeholder:"Correct answer...",className:"input-glass w-full text-sm"}),r==="ordering"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-[10px] text-white/30",children:"Items in correct order:"}),S.map((L,T)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-neon-blue font-bold w-4",children:T+1}),a.jsx("input",{value:L,onChange:p=>{const E=[...S];E[T]=p.target.value,I(E)},placeholder:`Item ${T+1}`,className:"input-glass flex-1 text-sm"}),S.length>2&&a.jsx("button",{type:"button",onClick:()=>I(S.filter((p,E)=>E!==T)),className:"text-white/10 hover:text-red-400",children:a.jsx(Zt,{size:14})})]},T)),a.jsxs("button",{type:"button",onClick:()=>I([...S,""]),className:"text-xs text-neon-blue",children:[a.jsx(Ft,{size:12,className:"inline"})," Add item"]})]}),a.jsx("button",{type:"submit",className:"btn-neon w-full py-2.5 text-sm",children:t?"Update Question":"Save to Bank"})]})]})})}function e$({classes:t,categories:e,onGenerate:n,onClose:s}){var y;const[i,r]=R.useState(""),[o,l]=R.useState(((y=t[0])==null?void 0:y.id)||""),[c,d]=R.useState(10),[h,f]=R.useState("all"),[m,g]=R.useState("all"),[b,N]=R.useState(""),[C,w]=R.useState(0);return a.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:s,children:a.jsxs(Q.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"glass-card p-6 w-full max-w-md",onClick:S=>S.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[a.jsx(fm,{size:18,className:"text-neon-blue"})," Generate Quiz"]}),a.jsx("button",{onClick:s,className:"p-1 text-white/30 hover:text-white",children:a.jsx(Zt,{size:18})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{value:i,onChange:S=>r(S.target.value),placeholder:"Quiz title (optional)",className:"input-glass w-full text-sm"}),a.jsx("select",{value:o,onChange:S=>l(S.target.value),className:"input-glass w-full text-sm",children:t.map(S=>a.jsx("option",{value:S.id,children:S.name},S.id))}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-white/30 mb-1 block",children:"# Questions"}),a.jsx("input",{type:"number",value:c,onChange:S=>d(Number(S.target.value)),min:1,max:50,className:"input-glass w-full text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] text-white/30 mb-1 block",children:"Time Limit (min)"}),a.jsx("input",{type:"number",value:C,onChange:S=>w(Number(S.target.value)),min:0,className:"input-glass w-full text-sm",placeholder:"0 = none"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("select",{value:h,onChange:S=>f(S.target.value),className:"input-glass text-sm",children:[a.jsx("option",{value:"all",children:"All Categories"}),e.map(S=>a.jsx("option",{value:S,children:S},S))]}),a.jsxs("select",{value:m,onChange:S=>g(S.target.value),className:"input-glass text-sm",children:[a.jsx("option",{value:"all",children:"All Types"}),Oc.map(S=>a.jsx("option",{value:S.value,children:S.label},S.value))]})]}),a.jsx("input",{type:"date",value:b,onChange:S=>N(S.target.value),className:"input-glass w-full text-sm"}),a.jsx("button",{onClick:()=>n({title:i,classId:o,count:c,category:h,type:m,dueDate:b||new Date(Date.now()+7*864e5).toISOString(),timeLimit:C}),className:"btn-neon w-full py-2.5 text-sm",disabled:!o,children:" Generate Random Quiz"})]})]})})}function t$(){var L,T;const{user:t}=ft(),{classes:e,assignments:n,submissions:s,allStudents:i,exportClassGrades:r}=vn(),o=xs(),[l,c]=R.useState(((L=e[0])==null?void 0:L.id)||"all"),[d,h]=R.useState("overview"),f=l==="all"?e:e.filter(p=>p.id===l),m=f.map(p=>p.id),g=n.filter(p=>m.includes(p.classId)),b=s.filter(p=>g.some(E=>E.id===p.assignmentId)),N=R.useMemo(()=>{const p=b.filter(v=>v.grade!=null),E=new Set;f.forEach(v=>(v.students||[]).forEach(V=>E.add(V)));const j=p.length>0?Math.round(p.reduce((v,V)=>{const P=g.find(B=>B.id===V.assignmentId),O=(P==null?void 0:P.totalPoints)||100;return v+V.grade/O*100},0)/p.length):0,D=g.length>0&&E.size>0?Math.round(b.length/(g.length*E.size)*100):0,A=b.filter(v=>v.status==="pending"||v.grade==null).length;return{totalStudents:E.size,totalAssignments:g.length,totalSubmissions:b.length,avgGrade:j,submissionRate:D,pendingGrading:A,gradedCount:p.length}},[f,g,b]),C=R.useMemo(()=>g.map(p=>{const E=b.filter(z=>z.assignmentId===p.id),j=E.filter(z=>z.grade!=null),D=p.totalPoints||100,A=j.length>0?Math.round(j.reduce((z,$)=>z+$.grade/D*100,0)/j.length):null,v=j.length>0?Math.max(...j.map(z=>Math.round(z.grade/D*100))):null,V=j.length>0?Math.min(...j.map(z=>Math.round(z.grade/D*100))):null,P=e.find(z=>z.id===p.classId),O=((P==null?void 0:P.students)||[]).length,B=(p.questions||[]).map((z,$)=>{var se;const U=E.map(pe=>{var xe;return(xe=pe.answers)==null?void 0:xe[$]}).filter(Boolean);let Y=0;if(z.type==="multiple-choice"||z.type==="true-false"){const pe=(se=z.options)==null?void 0:se[z.correctAnswer];Y=U.filter(xe=>xe===pe).length}else z.type==="fill-in-blank"?Y=U.filter(pe=>(pe||"").trim().toLowerCase()===(z.correctText||"").trim().toLowerCase()).length:z.type==="ordering"&&(Y=U.filter(pe=>JSON.stringify(pe)===JSON.stringify(z.items||[])).length);const Z=U.length>0?Math.round(Y/U.length*100):null;return{question:z.text,type:z.type,successRate:Z,total:U.length,correct:Y}});return{id:p.id,title:p.title,type:p.type,className:(P==null?void 0:P.name)||"Unknown",submitted:E.length,total:O,avgScore:A,highScore:v,lowScore:V,questionStats:B}}).sort((p,E)=>(p.avgScore??101)-(E.avgScore??101)),[g,b,e]),w=R.useMemo(()=>{const p=new Set;return f.forEach(E=>(E.students||[]).forEach(j=>p.add(j))),[...p].map(E=>{const j=i.find(V=>V.id===E),D=b.filter(V=>V.studentId===E),A=D.filter(V=>V.grade!=null),v=A.length>0?Math.round(A.reduce((V,P)=>{const O=g.find(B=>B.id===P.assignmentId);return V+P.grade/((O==null?void 0:O.totalPoints)||100)*100},0)/A.length):null;return{id:E,name:(j==null?void 0:j.displayName)||"Student",email:(j==null?void 0:j.email)||"",submitted:D.length,totalAssignments:g.length,avgGrade:v,gradedCount:A.length}}).sort((E,j)=>(j.avgGrade??-1)-(E.avgGrade??-1))},[f,b,g,i]),y=()=>{var p;try{const E=["Student","Email","Submitted","Graded","Average Grade"],j=w.map(P=>[P.name,P.email,P.submitted,P.gradedCount,P.avgGrade??"N/A"]),D=[E,...j].map(P=>P.map(O=>`"${O}"`).join(",")).join(`
`),A=new Blob([D],{type:"text/csv"}),v=URL.createObjectURL(A),V=document.createElement("a");V.href=v,V.download=`report_${l==="all"?"all":((p=f[0])==null?void 0:p.name)||"class"}_${new Date().toLocaleDateString()}.csv`,V.click(),URL.revokeObjectURL(v),o.success("CSV exported!")}catch{o.error("Export failed")}},S=R.useMemo(()=>{const p=[];return C.forEach(E=>{E.questionStats.forEach((j,D)=>{j.successRate!==null&&j.successRate<50&&p.push({...j,assignmentTitle:E.title,assignmentId:E.id})})}),p.sort((E,j)=>(E.successRate??100)-(j.successRate??100)).slice(0,10)},[C]),I={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},k={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Reports & Analytics",subtitle:l==="all"?"All classes":(T=f[0])==null?void 0:T.name,actions:a.jsxs("button",{onClick:y,className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(bv,{size:16})," Export CSV"]})}),a.jsxs(Q.div,{variants:I,initial:"hidden",animate:"show",className:"p-4 sm:p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs(Q.div,{variants:k,className:"flex flex-wrap gap-3",children:[a.jsxs("select",{value:l,onChange:p=>c(p.target.value),className:"input-glass text-sm",children:[a.jsx("option",{value:"all",children:"All Classes"}),e.map(p=>a.jsx("option",{value:p.id,children:p.name},p.id))]}),[{id:"overview",label:"Overview",icon:g4},{id:"assignments",label:"Assignments",icon:Gu},{id:"students",label:"Students",icon:Mn},{id:"questions",label:"Hard Questions",icon:Mi}].map(p=>a.jsxs("button",{onClick:()=>h(p.id),className:`flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-semibold transition-all ${d===p.id?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06] hover:text-white/60"}`,children:[a.jsx(p.icon,{size:14})," ",p.label]},p.id))]}),d==="overview"&&a.jsxs(a.Fragment,{children:[a.jsx(Q.div,{variants:k,className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[{label:"Students",value:N.totalStudents,icon:Mn,color:"neon-blue"},{label:"Avg Grade",value:`${N.avgGrade}%`,icon:Ku,color:"neon-green"},{label:"Submit Rate",value:`${N.submissionRate}%`,icon:zt,color:"neon-purple"},{label:"Pending",value:N.pendingGrading,icon:Mi,color:"neon-orange"}].map((p,E)=>a.jsxs("div",{className:"glass-card p-4 group hover:scale-[1.02] transition-transform",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg bg-${p.color}/10 border border-${p.color}/20 flex items-center justify-center`,children:a.jsx(p.icon,{size:16,className:`text-${p.color}`})}),a.jsx("p",{className:"text-xs text-white/40",children:p.label})]}),a.jsx("p",{className:`text-2xl font-display font-black text-${p.color}`,children:p.value})]},E))}),a.jsxs(Q.div,{variants:k,className:"glass-card p-5",children:[a.jsxs("h3",{className:"text-sm font-bold text-white/60 uppercase mb-4 flex items-center gap-2",children:[a.jsx(Ii,{size:14,className:"text-neon-blue"})," Grade Distribution"]}),a.jsx("div",{className:"space-y-2",children:[{label:"A (90-100%)",min:90,max:101,color:"bg-neon-green"},{label:"B (80-89%)",min:80,max:90,color:"bg-neon-blue"},{label:"C (70-79%)",min:70,max:80,color:"bg-neon-orange"},{label:"D (60-69%)",min:60,max:70,color:"bg-amber-500"},{label:"F (0-59%)",min:0,max:60,color:"bg-red-500"}].map(p=>{const E=b.filter(A=>A.grade!=null),j=E.filter(A=>{const v=g.find(P=>P.id===A.assignmentId),V=A.grade/((v==null?void 0:v.totalPoints)||100)*100;return V>=p.min&&V<p.max}).length,D=E.length>0?j/E.length*100:0;return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs text-white/40 w-24 shrink-0",children:p.label}),a.jsx("div",{className:"flex-1 h-6 rounded-lg bg-white/[0.03] overflow-hidden border border-white/[0.04]",children:a.jsx(Q.div,{className:`h-full rounded-lg ${p.color}/80`,initial:{width:0},animate:{width:`${D}%`},transition:{duration:.8,ease:"easeOut"}})}),a.jsxs("span",{className:"text-xs text-white/30 w-12 text-right",children:[j," (",Math.round(D),"%)"]})]},p.label)})})]})]}),d==="assignments"&&a.jsxs(Q.div,{variants:k,className:"glass-card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/[0.06]",children:[a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30",children:"Assignment"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Class"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Submitted"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Avg"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center hidden sm:table-cell",children:"High"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center hidden sm:table-cell",children:"Low"})]})}),a.jsx("tbody",{children:C.map(p=>{const E=p.avgScore===null?"text-white/20":p.avgScore>=80?"text-neon-green":p.avgScore>=60?"text-neon-orange":"text-red-400";return a.jsxs("tr",{className:"border-b border-white/[0.03] hover:bg-white/[0.02] transition-colors",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-white/70",children:p.title}),a.jsx("td",{className:"px-4 py-3 text-xs text-white/40 text-center",children:p.className}),a.jsxs("td",{className:"px-4 py-3 text-sm text-center text-white/50",children:[p.submitted,"/",p.total]}),a.jsx("td",{className:`px-4 py-3 text-sm text-center font-bold ${E}`,children:p.avgScore!==null?`${p.avgScore}%`:""}),a.jsx("td",{className:"px-4 py-3 text-sm text-center text-neon-green/60 hidden sm:table-cell",children:p.highScore!==null?`${p.highScore}%`:""}),a.jsx("td",{className:"px-4 py-3 text-sm text-center text-red-400/60 hidden sm:table-cell",children:p.lowScore!==null?`${p.lowScore}%`:""})]},p.id)})})]})}),C.length===0&&a.jsx("p",{className:"text-sm text-white/20 text-center py-8",children:"No assignments yet"})]}),d==="students"&&a.jsxs(Q.div,{variants:k,className:"glass-card overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-white/[0.06]",children:[a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30",children:"#"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30",children:"Student"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Submitted"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center",children:"Avg Grade"}),a.jsx("th",{className:"px-4 py-3 text-[10px] uppercase tracking-wider text-white/30 text-center hidden sm:table-cell",children:"Status"})]})}),a.jsx("tbody",{children:w.map((p,E)=>{const j=p.avgGrade===null?"text-white/20":p.avgGrade>=80?"text-neon-green":p.avgGrade>=60?"text-neon-orange":"text-red-400",D=p.totalAssignments>0?Math.round(p.submitted/p.totalAssignments*100):0;return a.jsxs("tr",{className:"border-b border-white/[0.03] hover:bg-white/[0.02] transition-colors",children:[a.jsx("td",{className:"px-4 py-3 text-xs text-white/30",children:E+1}),a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("p",{className:"text-sm text-white/70 font-medium",children:p.name}),a.jsx("p",{className:"text-[10px] text-white/30",children:p.email})]}),a.jsxs("td",{className:"px-4 py-3 text-sm text-center text-white/50",children:[p.submitted,"/",p.totalAssignments]}),a.jsx("td",{className:`px-4 py-3 text-sm text-center font-bold ${j}`,children:p.avgGrade!==null?`${p.avgGrade}%`:""}),a.jsx("td",{className:"px-4 py-3 text-center hidden sm:table-cell",children:a.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${D>=80?"bg-neon-green/10 text-neon-green border border-neon-green/20":D>=50?"bg-neon-orange/10 text-neon-orange border border-neon-orange/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:[D,"% complete"]})})]},p.id)})})]})}),w.length===0&&a.jsx("p",{className:"text-sm text-white/20 text-center py-8",children:"No students yet"})]}),d==="questions"&&a.jsxs(Q.div,{variants:k,className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-white/40",children:"Questions with less than 50% success rate  consider reviewing these topics with students."}),S.length===0?a.jsxs("div",{className:"glass-card p-12 text-center",children:[a.jsx(zt,{size:40,className:"text-neon-green/20 mx-auto mb-3"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No problematic questions found!"})]}):S.map((p,E)=>a.jsx("div",{className:"glass-card p-4 border-l-4 border-l-red-500",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-500/10 border border-red-500/20 flex items-center justify-center shrink-0",children:a.jsxs("span",{className:"text-red-400 font-bold text-sm",children:[p.successRate,"%"]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-white/80 font-medium mb-1",children:p.question}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("span",{className:"text-[10px] text-white/30",children:["From: ",p.assignmentTitle]}),a.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/[0.03] text-white/20 capitalize",children:p.type}),a.jsxs("span",{className:"text-[10px] text-red-400",children:[p.correct,"/",p.total," correct"]})]})]}),a.jsx("div",{className:"w-20 h-2 rounded-full bg-white/[0.06] overflow-hidden shrink-0 mt-2",children:a.jsx("div",{className:"h-full rounded-full bg-red-500",style:{width:`${p.successRate}%`}})})]})},E))]})]})]})}function js(t){const e=[...t];for(let n=e.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[e[n],e[s]]=[e[s],e[n]]}return e}function n$(t){let e=js(t.split("")).join("");for(;e===t&&t.length>1;)e=js(t.split("")).join("");return e}function s$({front:t,back:e,flipped:n,onFlip:s}){return a.jsx("div",{className:"perspective-1000 w-full max-w-lg mx-auto cursor-pointer",onClick:s,style:{perspective:"1000px"},children:a.jsxs(Q.div,{className:"relative w-full aspect-[3/2] sm:aspect-[16/9]",animate:{rotateY:n?180:0},transition:{duration:.5,type:"spring",stiffness:200,damping:25},style:{transformStyle:"preserve-3d"},children:[a.jsxs("div",{className:"absolute inset-0 glass-card p-6 sm:p-8 flex flex-col items-center justify-center text-center backface-hidden",style:{backfaceVisibility:"hidden"},children:[a.jsx("div",{className:"absolute top-3 right-3 text-[10px] text-white/20 uppercase tracking-widest",children:"Question"}),a.jsx("p",{className:"text-lg sm:text-xl font-display font-bold text-white leading-relaxed",children:t}),a.jsx("p",{className:"text-[10px] text-white/20 mt-4",children:"Tap to reveal answer"})]}),a.jsxs("div",{className:"absolute inset-0 glass-card p-6 sm:p-8 flex flex-col items-center justify-center text-center bg-gradient-to-br from-neon-green/[0.03] to-neon-blue/[0.03] border-neon-green/20",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[a.jsx("div",{className:"absolute top-3 right-3 text-[10px] text-neon-green/40 uppercase tracking-widest",children:"Answer"}),a.jsx("p",{className:"text-lg sm:text-xl font-display font-bold text-neon-green leading-relaxed",children:e}),a.jsx("p",{className:"text-[10px] text-white/20 mt-4",children:"Tap to flip back"})]})]})})}function i$({items:t,correctOrder:e,onComplete:n}){const[s,i]=R.useState(()=>js(t)),[r,o]=R.useState(null),[l,c]=R.useState(!1),[d,h]=R.useState(!1),f=C=>o(C),m=(C,w)=>{if(C.preventDefault(),r===null||r===w)return;const y=[...s],[S]=y.splice(r,1);y.splice(w,0,S),i(y),o(w)},g=()=>o(null),b=()=>{const C=JSON.stringify(s)===JSON.stringify(e);h(C),c(!0),n==null||n(C)},N=()=>{i(js(t)),c(!1),h(!1)};return a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Drag items into the correct order:"}),a.jsx("div",{className:"space-y-2",children:s.map((C,w)=>a.jsxs(Q.div,{draggable:!0,onDragStart:()=>f(w),onDragOver:y=>m(y,w),onDragEnd:g,layout:!0,className:`flex items-center gap-3 p-3 rounded-xl border cursor-grab active:cursor-grabbing transition-all ${l&&d?"bg-neon-green/5 border-neon-green/20":l&&!d?"bg-red-500/5 border-red-500/20":r===w?"bg-neon-blue/10 border-neon-blue/30 scale-[1.02]":"bg-white/[0.02] border-white/[0.06] hover:border-white/10"}`,children:[a.jsx(mf,{size:14,className:"text-white/20 shrink-0"}),a.jsx("span",{className:"text-xs font-bold text-neon-blue w-5",children:w+1}),a.jsx("span",{className:"text-sm text-white/80 flex-1",children:C})]},`${C}-${w}`))}),a.jsx("div",{className:"flex gap-2",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-bold ${d?"bg-neon-green/10 text-neon-green":"bg-red-500/10 text-red-400"}`,children:d?a.jsxs(a.Fragment,{children:[a.jsx(zt,{size:14})," Correct!"]}):a.jsxs(a.Fragment,{children:[a.jsx(uu,{size:14})," Incorrect"]})}),a.jsxs("button",{onClick:N,className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]})]}):a.jsxs("button",{onClick:b,className:"btn-neon text-sm px-4 py-2 flex items-center gap-2",children:[a.jsx(zt,{size:14})," Check"]})})]})}function r$({sentence:t,answer:e,onComplete:n}){const[s,i]=R.useState(""),[r,o]=R.useState(!1),l=s.trim().toLowerCase()===e.trim().toLowerCase(),c=()=>{o(!0),n==null||n(l)};return a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-white/80 leading-relaxed",children:t.split("___").map((d,h,f)=>a.jsxs("span",{children:[d,h<f.length-1&&a.jsx("span",{className:"inline-block mx-1 px-3 py-0.5 rounded-lg bg-neon-blue/10 border border-neon-blue/20 min-w-[80px] text-center",children:r?a.jsx("span",{className:l?"text-neon-green font-bold":"text-red-400 font-bold",children:s||"..."}):a.jsx("input",{value:s,onChange:m=>i(m.target.value),onKeyDown:m=>m.key==="Enter"&&c(),className:"bg-transparent border-none text-sm text-neon-blue text-center w-full focus:ring-0 p-0",placeholder:"type here"})})]},h))}),r&&!l&&a.jsxs("p",{className:"text-xs text-neon-green/60",children:["Correct: ",a.jsx("span",{className:"font-bold text-neon-green",children:e})]}),a.jsx("div",{className:"flex gap-2",children:r?a.jsxs("button",{onClick:()=>{i(""),o(!1)},className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Again"]}):a.jsx("button",{onClick:c,className:"btn-neon text-sm px-4 py-2",disabled:!s.trim(),children:"Check"})})]})}function a$({word:t,hint:e,onComplete:n}){const[s]=R.useState(()=>n$(t.toUpperCase())),[i,r]=R.useState(""),[o,l]=R.useState(!1),c=i.trim().toLowerCase()===t.trim().toLowerCase();return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:s.split("").map((d,h)=>a.jsx(Q.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:h*.05},className:"w-10 h-10 rounded-xl bg-gradient-to-br from-neon-purple/20 to-fuchsia-500/20 border border-neon-purple/30 flex items-center justify-center text-lg font-bold text-white shadow-lg",children:d},h))}),e&&a.jsxs("p",{className:"text-xs text-white/30 text-center italic",children:["Hint: ",e]}),a.jsx("input",{value:i,onChange:d=>r(d.target.value),onKeyDown:d=>d.key==="Enter"&&!o&&l(!0),placeholder:"Unscramble the word...",className:"input-glass text-center text-sm"}),o&&a.jsx("div",{className:`text-center text-sm font-bold ${c?"text-neon-green":"text-red-400"}`,children:c?" Correct!":` The answer is: ${t}`}),a.jsx("div",{className:"flex justify-center gap-2",children:o?a.jsxs("button",{onClick:()=>{r(""),l(!1)},className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:()=>l(!0),className:"btn-neon text-sm px-4 py-2",disabled:!i.trim(),children:"Check"})})]})}function o$({correctSentence:t,onComplete:e}){const n=t.split(" "),[s,i]=R.useState(()=>js(n)),[r,o]=R.useState([]),[l,c]=R.useState(!1),d=r.join(" ").toLowerCase()===t.toLowerCase(),h=(g,b)=>{o([...r,g]),i(s.filter((N,C)=>C!==b))},f=(g,b)=>{i([...s,g]),o(r.filter((N,C)=>C!==b))},m=()=>{i(js(n)),o([]),c(!1)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"min-h-[48px] p-3 rounded-xl border border-dashed border-white/10 bg-white/[0.01] flex flex-wrap gap-2",children:[r.length===0&&a.jsx("span",{className:"text-xs text-white/20 italic",children:"Tap words below to build the sentence..."}),r.map((g,b)=>a.jsx(Q.button,{layout:!0,initial:{scale:0},animate:{scale:1},onClick:()=>!l&&f(g,b),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${l?d?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-red-500/10 text-red-400 border border-red-500/20":"bg-neon-blue/10 text-neon-blue border border-neon-blue/20 hover:bg-neon-blue/20 cursor-pointer"}`,children:g},`s-${b}`))]}),a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:s.map((g,b)=>a.jsx(Q.button,{layout:!0,onClick:()=>!l&&h(g,b),className:"px-3 py-1.5 rounded-lg text-xs font-medium bg-white/[0.04] border border-white/[0.08] text-white/60 hover:text-white hover:border-neon-blue/30 hover:bg-neon-blue/5 transition-all cursor-pointer",children:g},`a-${b}`))}),l&&!d&&a.jsxs("p",{className:"text-xs text-neon-green/60 text-center",children:["Correct: ",a.jsx("span",{className:"font-bold text-neon-green",children:t})]}),a.jsx("div",{className:"flex justify-center gap-2",children:l?a.jsxs("button",{onClick:m,className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsxs("button",{onClick:()=>{c(!0),e==null||e(d)},className:"btn-neon text-sm px-4 py-2",disabled:s.length>0,children:[a.jsx(zt,{size:14,className:"mr-1"})," Check"]})})]})}function l$({pairs:t,onComplete:e}){const n=t.map(N=>N.left),[s]=R.useState(()=>js(t.map(N=>N.right))),[i,r]=R.useState(null),[o,l]=R.useState({}),[c,d]=R.useState(!1),h=N=>{i===null||c||(l(C=>({...C,[i]:N})),r(null))},f=Object.keys(o).length===n.length,m=()=>{d(!0);const N=n.every((C,w)=>o[w]===t[w].right);e==null||e(N)},g=()=>{l({}),d(!1),r(null)},b=Object.values(o);return a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-xs text-white/40",children:"Tap a left item, then tap its match on the right."}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("div",{className:"space-y-2",children:n.map((N,C)=>{const w=o[C],y=c&&w===t[C].right,S=c&&w&&w!==t[C].right;return a.jsxs("button",{onClick:()=>!c&&r(C),className:`w-full text-left p-3 rounded-xl border text-xs transition-all ${i===C?"bg-neon-blue/10 border-neon-blue/30 text-neon-blue":y?"bg-neon-green/10 border-neon-green/20 text-neon-green":S?"bg-red-500/10 border-red-500/20 text-red-400":w?"bg-white/[0.04] border-white/10 text-white/60":"bg-white/[0.02] border-white/[0.06] text-white/50 hover:border-white/15"}`,children:[a.jsxs("span",{className:"font-bold mr-1",children:[C+1,"."]})," ",N," ",w&&a.jsxs("span",{className:"text-[10px] float-right opacity-60",children:[" ",w]})]},C)})}),a.jsx("div",{className:"space-y-2",children:s.map((N,C)=>a.jsx("button",{onClick:()=>h(N),disabled:b.includes(N)||c,className:`w-full text-left p-3 rounded-xl border text-xs transition-all ${b.includes(N)?"bg-white/[0.02] border-white/5 text-white/20 opacity-40":"bg-white/[0.02] border-white/[0.06] text-white/50 hover:border-neon-purple/30 hover:text-neon-purple cursor-pointer"}`,children:N},C))})]}),a.jsx("div",{className:"flex gap-2",children:c?a.jsxs("button",{onClick:g,className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:m,className:"btn-neon text-sm px-4 py-2",disabled:!f,children:"Check Matches"})})]})}function c$({categories:t,onComplete:e}){const n=R.useMemo(()=>js(t.flatMap((b,N)=>b.items.map(C=>({item:C,catIdx:N})))),[]),[s,i]=R.useState(n),[r,o]=R.useState(()=>t.map(()=>[])),[l,c]=R.useState(!1),d=(b,N)=>{i(C=>C.filter(w=>w!==N)),o(C=>C.map((w,y)=>y===b?[...w,N]:w))},h=(b,N)=>{const C=r[b][N];o(w=>w.map((y,S)=>S===b?y.filter((I,k)=>k!==N):y)),i(w=>[...w,C])},f=s.length===0,m=()=>{c(!0);const b=r.every((N,C)=>N.every(w=>w.catIdx===C));e==null||e(b)},g=()=>{i(js(n)),o(t.map(()=>[])),c(!1)};return a.jsxs("div",{className:"space-y-4",children:[s.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 p-3 rounded-xl bg-white/[0.01] border border-dashed border-white/10 min-h-[40px]",children:s.map((b,N)=>a.jsx("span",{className:"px-3 py-1 rounded-lg text-xs font-medium bg-neon-blue/10 text-neon-blue border border-neon-blue/20 cursor-pointer hover:bg-neon-blue/20 transition-all",children:b.item},N))}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:t.map((b,N)=>a.jsxs("div",{className:`p-3 rounded-xl border min-h-[80px] transition-all ${l?r[N].every(C=>C.catIdx===N)?"border-neon-green/20 bg-neon-green/[0.02]":"border-red-500/20 bg-red-500/[0.02]":"border-white/[0.08] bg-white/[0.02]"}`,children:[a.jsx("p",{className:"text-xs font-bold text-neon-purple mb-2",children:b.name}),a.jsx("div",{className:"flex flex-wrap gap-1.5 min-h-[30px]",children:r[N].map((C,w)=>a.jsx("button",{onClick:()=>!l&&h(N,w),className:"px-2 py-0.5 rounded text-[10px] bg-white/5 border border-white/10 text-white/60 hover:text-red-400 transition-all",children:C.item},w))}),!l&&s.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.map((C,w)=>a.jsxs("button",{onClick:()=>d(N,C),className:"text-[10px] px-2 py-0.5 rounded bg-neon-purple/10 text-neon-purple border border-neon-purple/20 hover:bg-neon-purple/20 transition-all",children:["+ ",C.item]},w))})]},N))}),a.jsx("div",{className:"flex gap-2",children:l?a.jsxs("button",{onClick:g,className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:m,className:"btn-neon text-sm px-4 py-2",disabled:!f,children:"Check"})})]})}function u$({errorSentence:t,correctText:e,onComplete:n}){const[s,i]=R.useState(""),[r,o]=R.useState(!1),l=s.trim().toLowerCase()===e.trim().toLowerCase();return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 rounded-xl bg-red-500/5 border border-red-500/20",children:[a.jsx("p",{className:"text-xs text-red-400/60 uppercase tracking-wider font-bold mb-1",children:" Sentence with error:"}),a.jsx("p",{className:"text-sm text-white/80 font-medium",children:t})]}),a.jsx("input",{value:s,onChange:c=>i(c.target.value),onKeyDown:c=>c.key==="Enter"&&!r&&o(!0),placeholder:"Type the corrected sentence...",className:"input-glass text-sm"}),r&&a.jsx("div",{className:`p-3 rounded-xl text-sm font-bold ${l?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:l?" Perfect!":a.jsxs(a.Fragment,{children:[a.jsx("span",{children:" Correct answer: "}),a.jsx("span",{className:"text-neon-green",children:e})]})}),a.jsx("div",{className:"flex gap-2",children:r?a.jsxs("button",{onClick:()=>{i(""),o(!1)},className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:()=>{o(!0),n==null||n(l)},className:"btn-neon text-sm px-4 py-2",disabled:!s.trim(),children:"Check"})})]})}function d$({sourceText:t,correctText:e,onComplete:n}){const[s,i]=R.useState(""),[r,o]=R.useState(!1),l=s.trim().toLowerCase()===e.trim().toLowerCase();return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 rounded-xl bg-neon-blue/5 border border-neon-blue/20",children:[a.jsx("p",{className:"text-xs text-neon-blue/60 uppercase tracking-wider font-bold mb-1",children:" Translate:"}),a.jsx("p",{className:"text-sm text-white/80 font-medium",children:t})]}),a.jsx("input",{value:s,onChange:c=>i(c.target.value),onKeyDown:c=>c.key==="Enter"&&!r&&o(!0),placeholder:"Your translation...",className:"input-glass text-sm"}),r&&a.jsx("div",{className:`p-3 rounded-xl text-sm font-bold ${l?"bg-neon-green/10 text-neon-green border border-neon-green/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:l?" Perfect translation!":a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Correct: "}),a.jsx("span",{className:"text-neon-green",children:e})]})}),a.jsx("div",{className:"flex gap-2",children:r?a.jsxs("button",{onClick:()=>{i(""),o(!1)},className:"btn-ghost text-sm px-3 py-2 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Retry"]}):a.jsx("button",{onClick:()=>{o(!0),n==null||n(l)},className:"btn-neon text-sm px-4 py-2",disabled:!s.trim(),children:"Check"})})]})}const Hp={drag:{label:"Reorder",color:"neon-purple",icon:mf},fill:{label:"Fill Blank",color:"neon-blue",icon:C4},scramble:{label:"Word Scramble",color:"neon-orange",icon:fm},sentence:{label:"Sentence Builder",color:"neon-pink",icon:_4},matching:{label:"Matching",color:"neon-green",icon:P0},categorize:{label:"Categorize",color:"cyan-400",icon:pa},"error-correction":{label:"Error Fix",color:"red-400",icon:Mi},translation:{label:"Translation",color:"amber-400",icon:uB}};function h$(){const{userProfile:t}=ft(),{classes:e,assignments:n}=vn(),s=t==null?void 0:t.uid,[i,r]=R.useState(null),[o,l]=R.useState("all"),[c,d]=R.useState(0),[h,f]=R.useState(!1),[m,g]=R.useState({}),[b,N]=R.useState(!1),[C,w]=R.useState({correct:0,total:0}),[y,S]=R.useState(0),I=e.filter(P=>{var O;return(O=P.students)==null?void 0:O.includes(s)}),k=I.map(P=>P.id),L=R.useMemo(()=>{const P=o==="all"?n.filter(B=>k.includes(B.classId)):n.filter(B=>B.classId===o),O=[];return P.forEach(B=>{(B.questions||[]).forEach(z=>{O.push({...z,assignmentTitle:B.title,classId:B.classId})})}),O},[n,o,k]),T=R.useMemo(()=>L.filter(P=>["multiple-choice","true-false","fill-in-blank","word-scramble","translation"].includes(P.type)).map(P=>{var O;return{front:P.type==="translation"&&P.sourceText||P.text,back:P.type==="fill-in-blank"||P.type==="word-scramble"||P.type==="translation"?P.correctText:((O=P.options)==null?void 0:O[P.correctAnswer])||"N/A",id:P.id}}),[L]),p=R.useMemo(()=>{const P=L.filter(O=>O.type==="multiple-choice"||O.type==="true-false");return js(P).slice(0,10)},[L,i]),E=R.useMemo(()=>{const P=[];return L.forEach(O=>{var B,z,$;if(O.type==="ordering"&&((B=O.items)==null?void 0:B.length)>=2&&P.push({type:"drag",question:O.text,items:O.items,correctOrder:O.items,id:O.id}),O.type==="fill-in-blank"&&O.correctText){const U=O.text.includes("___")?O.text:O.text+" ___";P.push({type:"fill",question:O.text,sentence:U,answer:O.correctText,id:O.id})}O.type==="word-scramble"&&O.correctText&&P.push({type:"scramble",question:O.text,word:O.correctText,id:O.id}),O.type==="sentence-builder"&&O.correctSentence&&P.push({type:"sentence",question:O.text,correctSentence:O.correctSentence,id:O.id}),O.type==="matching"&&((z=O.pairs)==null?void 0:z.length)>=2&&P.push({type:"matching",question:O.text,pairs:O.pairs,id:O.id}),O.type==="categorize"&&(($=O.categories)==null?void 0:$.length)>=2&&P.push({type:"categorize",question:O.text,categories:O.categories,id:O.id}),O.type==="error-correction"&&O.errorSentence&&O.correctText&&P.push({type:"error-correction",question:O.text,errorSentence:O.errorSentence,correctText:O.correctText,id:O.id}),O.type==="translation"&&O.sourceText&&O.correctText&&P.push({type:"translation",question:O.text,sourceText:O.sourceText,correctText:O.correctText,id:O.id})}),js(P)},[L,i]),j=(P,O)=>{b||g(B=>({...B,[P]:O}))},D=()=>{let P=0;p.forEach((O,B)=>{var z;m[B]===((z=O.options)==null?void 0:z[O.correctAnswer])&&P++}),w({correct:P,total:p.length}),N(!0)},A=()=>{g({}),N(!1),w({correct:0,total:0})},v={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},V={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};if(!i)return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Practice Mode",subtitle:"Study without pressure  no grades!"}),a.jsxs(Q.div,{variants:v,initial:"hidden",animate:"show",className:"p-4 sm:p-6 max-w-5xl mx-auto space-y-6",children:[a.jsxs(Q.div,{variants:V,className:"flex gap-2 overflow-x-auto pb-2",children:[a.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition-all ${o==="all"?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06]"}`,children:"All Classes"}),I.map(P=>a.jsx("button",{onClick:()=>l(P.id),className:`px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition-all ${o===P.id?"bg-neon-blue/10 text-neon-blue border border-neon-blue/20":"bg-white/[0.02] text-white/40 border border-white/[0.06]"}`,children:P.name},P.id))]}),a.jsxs(Q.div,{variants:V,className:"glass-card p-4 flex items-center gap-6 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(B2,{size:18,className:"text-neon-purple"}),a.jsxs("span",{className:"text-sm text-white/60",children:[a.jsx("span",{className:"text-white font-bold",children:L.length})," questions"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ct,{size:16,className:"text-neon-blue"}),a.jsxs("span",{className:"text-sm text-white/60",children:[a.jsx("span",{className:"text-white font-bold",children:T.length})," flashcards"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pa,{size:16,className:"text-neon-green"}),a.jsxs("span",{className:"text-sm text-white/60",children:[a.jsx("span",{className:"text-white font-bold",children:E.length})," exercises"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hu,{size:16,className:"text-neon-orange"}),a.jsxs("span",{className:"text-sm text-white/60",children:[a.jsx("span",{className:"text-white font-bold",children:"12"})," types"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{id:"flashcards",icon:Ct,title:"Flashcards",desc:"Flip cards to memorize questions and answers.",color:"neon-blue",gradient:"from-neon-blue to-cyan-400",count:T.length,disabled:T.length===0},{id:"quiz",icon:hu,title:"Practice Quiz",desc:"Random quiz  no grades! MC & True/False.",color:"neon-green",gradient:"from-neon-green to-emerald-400",count:p.length,disabled:p.length===0},{id:"exercises",icon:pa,title:"Exercises",desc:"Drag, match, scramble, build, translate & more!",color:"neon-purple",gradient:"from-neon-purple to-fuchsia-400",count:E.length,disabled:E.length===0}].map(P=>a.jsxs(Q.button,{variants:V,onClick:()=>!P.disabled&&r(P.id),disabled:P.disabled,className:`glass-card p-6 text-left group hover:scale-[1.03] transition-all relative overflow-hidden ${P.disabled?"opacity-40 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${P.gradient} opacity-0 group-hover:opacity-5 transition-opacity`}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${P.gradient} flex items-center justify-center mb-4 shadow-lg`,children:a.jsx(P.icon,{size:24,className:"text-white"})}),a.jsx("h3",{className:"text-lg font-display font-bold text-white mb-1",children:P.title}),a.jsx("p",{className:"text-xs text-white/40 leading-relaxed mb-3",children:P.desc}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full bg-${P.color}/10 text-${P.color} border border-${P.color}/20 font-bold`,children:[P.count," items"]}),!P.disabled&&a.jsx(D0,{size:16,className:`text-${P.color} opacity-0 group-hover:opacity-100 transition-opacity`})]})]})]},P.id))}),E.length>0&&a.jsxs(Q.div,{variants:V,className:"glass-card p-4",children:[a.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider font-bold mb-3",children:"Available Exercise Types"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Hp).map(([P,O])=>{const B=E.filter(z=>z.type===P).length;return B===0?null:a.jsxs("span",{className:`text-[10px] px-2.5 py-1 rounded-lg bg-${O.color}/10 text-${O.color} border border-${O.color}/20 font-bold flex items-center gap-1`,children:[a.jsx(O.icon,{size:10})," ",O.label," (",B,")"]},P)})})]}),L.length===0&&a.jsxs(Q.div,{variants:V,className:"glass-card p-12 text-center",children:[a.jsx(B2,{size:48,className:"text-white/10 mx-auto mb-3"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No questions available yet."}),a.jsx("p",{className:"text-white/20 text-[10px] mt-1",children:"Questions from your assignments will appear here for practice."})]})]})]});if(i==="flashcards"){const P=T[c]||{front:"No cards",back:""};return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Flashcards",subtitle:`${c+1} of ${T.length}`,actions:a.jsxs("button",{onClick:()=>{r(null),d(0),f(!1)},className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(da,{size:16})," Back"]})}),a.jsxs(Q.div,{variants:v,initial:"hidden",animate:"show",className:"p-4 sm:p-6 max-w-3xl mx-auto space-y-6",children:[a.jsxs(Q.div,{variants:V,className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-1.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx(Q.div,{className:"h-full rounded-full bg-gradient-to-r from-neon-blue to-neon-purple",animate:{width:`${(c+1)/T.length*100}%`},transition:{duration:.3}})}),a.jsxs("span",{className:"text-[10px] text-white/30 font-mono",children:[c+1,"/",T.length]})]}),a.jsx(Q.div,{variants:V,children:a.jsx(s$,{front:P.front,back:P.back,flipped:h,onFlip:()=>f(!h)})}),a.jsxs(Q.div,{variants:V,className:"flex items-center justify-center gap-3",children:[a.jsx("button",{onClick:()=>{d(Math.max(0,c-1)),f(!1)},disabled:c===0,className:"w-12 h-12 rounded-xl bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white hover:border-neon-blue/30 transition-all disabled:opacity-30",children:a.jsx(da,{size:20})}),a.jsxs("button",{onClick:()=>f(!h),className:"px-6 py-3 rounded-xl bg-neon-blue/10 border border-neon-blue/20 text-neon-blue text-sm font-bold hover:bg-neon-blue/20 transition-all flex items-center gap-2",children:[a.jsx(Es,{size:14})," Flip"]}),a.jsx("button",{onClick:()=>{d(0),f(!1)},className:"px-4 py-3 rounded-xl bg-white/[0.04] border border-white/10 text-white/50 text-sm hover:text-white transition-all flex items-center gap-2",children:a.jsx(fm,{size:14})}),a.jsx("button",{onClick:()=>{d(Math.min(T.length-1,c+1)),f(!1)},disabled:c===T.length-1,className:"w-12 h-12 rounded-xl bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white hover:border-neon-blue/30 transition-all disabled:opacity-30",children:a.jsx(cu,{size:20})})]}),a.jsx("p",{className:"text-center text-[10px] text-white/15",children:"Tip: Use arrow keys to navigate, space to flip"})]})]})}if(i==="quiz")return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Practice Quiz",subtitle:b?`Score: ${C.correct}/${C.total}`:`${Object.keys(m).length}/${p.length} answered`,actions:a.jsxs("button",{onClick:()=>{r(null),A()},className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(da,{size:16})," Back"]})}),a.jsxs(Q.div,{variants:v,initial:"hidden",animate:"show",className:"p-4 sm:p-6 max-w-3xl mx-auto space-y-4",children:[a.jsxs(Q.div,{variants:V,className:"glass-card p-3 border-l-4 border-l-neon-green bg-neon-green/[0.02] flex items-center gap-3",children:[a.jsx(du,{size:16,className:"text-neon-green shrink-0"}),a.jsxs("p",{className:"text-xs text-white/50",children:["Practice mode  ",a.jsx("span",{className:"text-neon-green font-bold",children:"no grades recorded"}),". Learn freely!"]})]}),b&&a.jsxs(Q.div,{variants:V,className:"glass-card p-8 text-center space-y-4",children:[a.jsx("div",{className:`w-20 h-20 rounded-2xl mx-auto flex items-center justify-center ${C.correct/C.total>=.7?"bg-neon-green/10 border border-neon-green/20":"bg-neon-orange/10 border border-neon-orange/20"}`,children:C.correct/C.total>=.7?a.jsx(Qu,{size:36,className:"text-neon-green"}):a.jsx(pa,{size:36,className:"text-neon-orange"})}),a.jsx("h2",{className:"text-2xl font-display font-bold text-white",children:"Practice Complete!"}),a.jsxs("p",{className:"text-4xl font-display font-black text-neon-blue",children:[C.correct,"/",C.total]}),a.jsxs("p",{className:"text-sm text-white/40",children:[Math.round(C.correct/C.total*100),"% correct"]}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsxs("button",{onClick:A,className:"btn-neon text-sm px-5 py-2.5 flex items-center gap-2",children:[a.jsx(Es,{size:14})," Try Again"]}),a.jsx("button",{onClick:()=>{r(null),A()},className:"btn-ghost text-sm px-5 py-2.5",children:"Back to Menu"})]})]}),a.jsx("div",{className:"space-y-4",children:p.map((P,O)=>{var U;const B=m[O],z=(U=P.options)==null?void 0:U[P.correctAnswer],$=B===z;return a.jsxs(Q.div,{variants:V,className:`glass-card p-4 sm:p-5 transition-all ${b?$?"border-neon-green/20 bg-neon-green/[0.02]":"border-red-500/20 bg-red-500/[0.02]":B?"border-neon-blue/10":""}`,children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx("span",{className:"text-xs font-bold text-neon-blue bg-neon-blue/10 border border-neon-blue/20 w-7 h-7 rounded-lg flex items-center justify-center shrink-0",children:O+1}),a.jsx("p",{className:"text-sm text-white/80 font-medium flex-1",children:P.text}),b&&($?a.jsx(zt,{size:18,className:"text-neon-green shrink-0"}):a.jsx(uu,{size:18,className:"text-red-400 shrink-0"}))]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 pl-10",children:(P.options||[]).map((Y,Z)=>{const se=B===Y,pe=Y===z;let xe="bg-white/[0.02] border-white/[0.06] text-white/60 hover:border-white/15 hover:bg-white/[0.04]";return b?pe?xe="bg-neon-green/10 border-neon-green/30 text-neon-green":se&&!pe?xe="bg-red-500/10 border-red-500/30 text-red-400":xe="bg-white/[0.01] border-white/[0.04] text-white/30":se&&(xe="bg-neon-blue/10 border-neon-blue/30 text-neon-blue"),a.jsxs("button",{onClick:()=>j(O,Y),disabled:b,className:`text-left p-3 rounded-xl border text-sm transition-all ${xe}`,children:[a.jsxs("span",{className:"font-bold mr-2",children:[String.fromCharCode(65+Z),"."]})," ",Y]},Z)})})]},P.id||O)})}),!b&&p.length>0&&a.jsx(Q.div,{variants:V,className:"flex justify-center pt-4",children:a.jsxs("button",{onClick:D,className:"btn-neon text-sm px-8 py-3 flex items-center gap-2",disabled:Object.keys(m).length<p.length,children:[a.jsx(zt,{size:16})," Check Answers (",Object.keys(m).length,"/",p.length,")"]})})]})]});if(i==="exercises"){const P=E[c],O=P?Hp[P.type]||Hp.fill:null;return a.jsxs("div",{className:"min-h-screen pb-20",children:[a.jsx(Ht,{title:"Interactive Exercises",subtitle:E.length>0?`${c+1} of ${E.length}`:"No exercises",actions:a.jsxs("button",{onClick:()=>{r(null),d(0)},className:"btn-ghost flex items-center gap-2 text-sm px-3 py-2",children:[a.jsx(da,{size:16})," Back"]})}),a.jsxs(Q.div,{variants:v,initial:"hidden",animate:"show",className:"p-4 sm:p-6 max-w-3xl mx-auto space-y-6",children:[E.length>0&&a.jsxs(Q.div,{variants:V,className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-1.5 rounded-full bg-white/[0.06] overflow-hidden",children:a.jsx(Q.div,{className:"h-full rounded-full bg-gradient-to-r from-neon-purple to-fuchsia-400",animate:{width:`${(c+1)/E.length*100}%`},transition:{duration:.3}})}),a.jsxs("span",{className:"text-[10px] text-white/30 font-mono",children:[c+1,"/",E.length]})]}),P?a.jsxs(Q.div,{variants:V,className:"glass-card p-5 sm:p-6",children:[a.jsx("div",{className:"flex items-center gap-2 mb-4",children:O&&a.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold uppercase bg-${O.color}/10 text-${O.color} border border-${O.color}/20 flex items-center gap-1`,children:[a.jsx(O.icon,{size:10})," ",O.label]})}),a.jsx("h3",{className:"text-sm font-bold text-white mb-4",children:P.question}),P.type==="drag"&&a.jsx(i$,{items:P.items,correctOrder:P.correctOrder}),P.type==="fill"&&a.jsx(r$,{sentence:P.sentence,answer:P.answer}),P.type==="scramble"&&a.jsx(a$,{word:P.word,hint:P.question}),P.type==="sentence"&&a.jsx(o$,{correctSentence:P.correctSentence}),P.type==="matching"&&a.jsx(l$,{pairs:P.pairs}),P.type==="categorize"&&a.jsx(c$,{categories:P.categories}),P.type==="error-correction"&&a.jsx(u$,{errorSentence:P.errorSentence,correctText:P.correctText}),P.type==="translation"&&a.jsx(d$,{sourceText:P.sourceText,correctText:P.correctText})]},`${c}-${y}`):a.jsxs("div",{className:"glass-card p-12 text-center",children:[a.jsx(pa,{size:48,className:"text-white/10 mx-auto mb-3"}),a.jsx("p",{className:"text-white/30 text-sm",children:"No exercises available yet."})]}),E.length>0&&a.jsxs(Q.div,{variants:V,className:"flex items-center justify-center gap-3",children:[a.jsx("button",{onClick:()=>{d(Math.max(0,c-1)),S(B=>B+1)},disabled:c===0,className:"w-10 h-10 rounded-xl bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white transition-all disabled:opacity-30",children:a.jsx(da,{size:18})}),a.jsxs("span",{className:"text-sm text-white/40",children:[c+1," / ",E.length]}),a.jsx("button",{onClick:()=>{d(Math.min(E.length-1,c+1)),S(B=>B+1)},disabled:c===E.length-1,className:"w-10 h-10 rounded-xl bg-white/[0.04] border border-white/10 flex items-center justify-center text-white/50 hover:text-white transition-all disabled:opacity-30",children:a.jsx(cu,{size:18})})]})]})]})}return null}function f$(){var N,C,w,y,S;const{userProfile:t,updateUserData:e}=ft(),[n,s]=R.useState((t==null?void 0:t.displayName)||""),[i,r]=R.useState(((N=t==null?void 0:t.preferences)==null?void 0:N.darkMode)!==!1),[o,l]=R.useState(((C=t==null?void 0:t.preferences)==null?void 0:C.notifications)!==!1),[c,d]=R.useState(((w=t==null?void 0:t.preferences)==null?void 0:w.language)||"en"),[h,f]=R.useState(!1),[m,g]=R.useState(null),b=async()=>{f(!0),g(null);try{await e({displayName:n,preferences:{darkMode:i,notifications:o,language:c}}),g({type:"success",message:"Changes saved successfully! "}),setTimeout(()=>g(null),3e3)}catch{g({type:"error",message:"Failed to save changes. Please try again."})}finally{f(!1)}};return a.jsxs("div",{children:[a.jsx(Ht,{title:"Settings",subtitle:"Manage your account and preferences"}),a.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 space-y-6 max-w-3xl",children:[m&&a.jsx(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:`p-4 rounded-xl border ${m.type==="success"?"bg-neon-green/10 border-neon-green/20 text-neon-green":"bg-red-500/10 border-red-500/20 text-red-500"} text-sm font-medium`,children:m.message}),a.jsxs("div",{className:"glass-card p-6",children:[a.jsxs("h3",{className:"font-display font-semibold text-white mb-5 flex items-center gap-2",children:[a.jsx(R4,{size:18,className:"text-neon-blue"})," Profile"]}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-neon-blue to-neon-purple flex items-center justify-center text-white text-2xl font-bold",children:((S=(y=t==null?void 0:t.displayName)==null?void 0:y[0])==null?void 0:S.toUpperCase())||"?"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-white",children:t==null?void 0:t.displayName}),a.jsx("p",{className:"text-sm text-white/40",children:t==null?void 0:t.email}),a.jsx("span",{className:"badge-blue mt-2 capitalize",children:t==null?void 0:t.role})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Display Name"}),a.jsx("input",{value:n,onChange:I=>s(I.target.value),className:"input-glass"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-white/50 mb-1.5",children:"Email"}),a.jsx("input",{value:t==null?void 0:t.email,className:"input-glass",disabled:!0,title:"Email cannot be changed"})]})]})]}),a.jsxs("div",{className:"glass-card p-6",children:[a.jsxs("h3",{className:"font-display font-semibold text-white mb-5 flex items-center gap-2",children:[a.jsx(DB,{size:18,className:"text-neon-purple"})," Preferences"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(jB,{size:18,className:`transition-colors ${i?"text-neon-blue":"text-white/20"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"Dark Mode"}),a.jsx("p",{className:"text-xs text-white/40",children:"Use dark theme"})]})]}),a.jsx("button",{onClick:()=>r(!i),className:`w-12 h-7 rounded-full transition-all ${i?"bg-neon-blue":"bg-white/10"} relative`,children:a.jsx("div",{className:`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-lg ${i?"left-6":"left-1"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(No,{size:18,className:`transition-colors ${o?"text-neon-green":"text-white/20"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"Notifications"}),a.jsx("p",{className:"text-xs text-white/40",children:"Email notifications"})]})]}),a.jsx("button",{onClick:()=>l(!o),className:`w-12 h-7 rounded-full transition-all ${o?"bg-neon-green":"bg-white/10"} relative`,children:a.jsx("div",{className:`absolute top-1 w-5 h-5 rounded-full bg-white transition-all shadow-lg ${o?"left-6":"left-1"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(b4,{size:18,className:"text-neon-orange"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:"Language"}),a.jsx("p",{className:"text-xs text-white/40",children:"Interface language"})]})]}),a.jsxs("select",{value:c,onChange:I=>d(I.target.value),className:"input-glass w-32 text-sm",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"es",children:"Espaol"}),a.jsx("option",{value:"fr",children:"Franais"})]})]})]})]}),a.jsx("div",{className:"flex justify-end gap-3 pt-4",children:a.jsx("button",{onClick:b,disabled:h,className:`btn-neon px-8 h-12 flex items-center gap-2 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):"Save Changes"})})]})]})}function m$({children:t}){const{user:e,loading:n}=ft();return n?a.jsx("div",{className:"min-h-screen bg-surface-950 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl bg-gradient-to-br from-neon-blue to-neon-purple animate-pulse mb-4"}),a.jsx("p",{className:"text-white/40 text-sm",children:"Loading..."})]})}):e?t:a.jsx(lE,{to:"/",replace:!0})}function p$(){const{isTeacher:t}=ft();return t?a.jsx(jF,{}):a.jsx(BF,{})}function g$(){const{isTeacher:t}=ft();return a.jsx(PF,{})}function x$(){const{isTeacher:t}=ft();return t?a.jsx(zF,{}):a.jsx($F,{})}function y$(){return a.jsx(e5,{children:a.jsx(mF,{children:a.jsx(RL,{children:a.jsx(kL,{children:a.jsx(gF,{children:a.jsxs(Gk,{children:[a.jsx(Yt,{path:"/",element:a.jsx(_F,{})}),a.jsxs(Yt,{path:"/",element:a.jsx(m$,{children:a.jsx(wF,{})}),children:[a.jsx(Yt,{path:"dashboard",element:a.jsx(p$,{})}),a.jsx(Yt,{path:"classes",element:a.jsx(AF,{})}),a.jsx(Yt,{path:"classes/:id",element:a.jsx(RF,{})}),a.jsx(Yt,{path:"students",element:a.jsx(VF,{})}),a.jsx(Yt,{path:"assignments",element:a.jsx(g$,{})}),a.jsx(Yt,{path:"assignments/:assignmentId",element:a.jsx(HF,{})}),a.jsx(Yt,{path:"grades",element:a.jsx(x$,{})}),a.jsx(Yt,{path:"my-classes",element:a.jsx(FF,{})}),a.jsx(Yt,{path:"calendar",element:a.jsx(qF,{})}),a.jsx(Yt,{path:"achievements",element:a.jsx(WF,{})}),a.jsx(Yt,{path:"practice",element:a.jsx(h$,{})}),a.jsx(Yt,{path:"question-bank",element:a.jsx(JF,{})}),a.jsx(Yt,{path:"reports",element:a.jsx(t$,{})}),a.jsx(Yt,{path:"settings",element:a.jsx(f$,{})})]}),a.jsx(Yt,{path:"*",element:a.jsx(lE,{to:"/",replace:!0})})]})})})})})})}J3.createRoot(document.getElementById("root")).render(a.jsx(iN.StrictMode,{children:a.jsx(y$,{})}));
